<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil - Modelo A | Premium VIP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"></script>
    <script src="firebase-config.js"></script>
    <!-- Módulo de Validações -->
    <script src="js/formValidations.js"></script>
    <style>
        :root {
            --primary-color: #dc3545;
            --secondary-color: #6c757d;
            --accent-color: #ffc107;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --text-dark: #212529;
            --text-muted: #6c757d;
            --border-color: #dee2e6;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.15);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
        }

        /* Header */
        .header {
            background: var(--bg-white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }

        .back-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: background 0.3s;
        }

        .back-btn:hover {
            background: #c82333;
        }

        /* Header Buttons */
        .header-buttons {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .sign-button {
            position: relative;
            display: inline-block;
        }

        .sign-button__action {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border: none;
            background: none;
            cursor: pointer;
            color: #e25352;
            font-size: 18px;
            transition: all 0.3s ease;
        }

        .sign-button__title {
            margin: 0;
            font-weight: 500;
            font-size: 22px;
        }

        .sign-button__tooltip {
            position: absolute;
            top: 100%;
            left: 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 0.5rem;
            display: none;
            min-width: 200px;
            z-index: 1000;
        }

        .sign-button:hover .sign-button__tooltip {
            display: block;
        }

        .sign-button__link {
            display: block;
            padding: 0.8rem 1rem;
            color: #333;
            text-decoration: none;
            transition: background 0.3s ease;
            border-radius: 4px;
            font-size: 14px;
        }

        .sign-button__link:hover {
            background: #f5f5f5;
        }

        /* Main Content */
        .main-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Profile Header */
        .profile-header {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 0;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        .profile-banner {
            width: 100%;
            height: 450px;
            object-fit: cover;
            border-radius: 15px 15px 0 0;
        }

        .banner-upload-overlay:hover {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.9) 0%, rgba(108, 117, 125, 0.9) 100%) !important;
        }

        .banner-upload-container {
            min-height: 450px;
        }

        .btn-change-banner-overlay:hover {
            background: rgba(0, 123, 255, 1) !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4) !important;
        }

        .profile-picture-container {
            position: absolute;
            top: 350px;
            right: 2rem;
            z-index: 10;
        }

        .profile-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .profile-picture-container:hover .profile-image {
            transform: translate(-50%, -50%) scale(1.05);
        }

        .profile-upload-overlay:hover {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.95) 0%, rgba(108, 117, 125, 0.95) 100%) !important;
        }

        .btn-change-profile-overlay {
            display: none !important;
        }

        .btn-change-profile-overlay.show {
            display: flex !important;
        }

        .btn-change-profile-overlay:hover {
            background: rgba(0, 123, 255, 1) !important;
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4) !important;
        }

        .profile-status {
            position: absolute;
            bottom: 15px;
            right: 15px;
            width: 25px;
            height: 25px;
            background: #28a745;
            border: 4px solid white;
            border-radius: 50%;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .profile-info {
            padding: 2rem;
            padding-top: 4rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            text-align: left;
        }

        .profile-name {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
            background: transparent;
            border: 2px dashed transparent;
            border-radius: 5px;
            padding: 5px 10px;
            transition: all 0.3s;
            width: 100%;
            box-sizing: border-box;
            font-family: inherit;
        }

        .profile-name:focus {
            outline: none;
            border-color: var(--primary-color);
            background: rgba(226, 83, 82, 0.05);
        }

        .profile-name:hover:not(:focus) {
            border-color: rgba(226, 83, 82, 0.3);
        }

        .profile-name:invalid {
            border-color: #dc3545;
        }

        .nome-char-counter {
            font-size: 0.75rem;
            color: #666;
            margin-top: 5px;
            text-align: right;
        }

        .nome-char-counter.warning {
            color: #ff9800;
        }

        .nome-char-counter.error {
            color: #dc3545;
        }

        .profile-level {
            display: inline-block;
            background: linear-gradient(45deg, var(--primary-color), #ff6b6b);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .profile-description {
            font-size: 1.1rem;
            color: var(--text-muted);
            line-height: 1.8;
            margin-bottom: 1rem;
            word-wrap: break-word;
            overflow-wrap: break-word;
            word-break: break-word;
            overflow-x: hidden;
            max-width: 100%;
            box-sizing: border-box;
        }
        
        /* Estilos para textarea da frase de efeito */
        .profile-description {
            background: rgba(255, 235, 238, 0.8) !important;
            border: 2px solid #dc3545 !important;
        }
        
        .profile-description:focus {
            outline: none;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .profile-description:focus:invalid {
            border-color: #dc3545 !important;
            background: rgba(255, 235, 238, 0.9) !important;
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
        }
        
        .profile-description:focus:valid {
            border-color: #28a745 !important;
            background: rgba(220, 255, 220, 0.9) !important;
            box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2);
        }
        
        .profile-description:hover:not(:focus) {
            border-color: #dc3545 !important;
            background: rgba(255, 235, 238, 0.85) !important;
        }
        
        .profile-description:hover:valid:not(:focus) {
            border-color: #28a745 !important;
            background: rgba(220, 255, 220, 0.85) !important;
        }
        
        .profile-description:invalid {
            border-color: #dc3545 !important;
            background: rgba(255, 235, 238, 0.8) !important;
        }
        
        .profile-description:valid {
            border-color: #28a745 !important;
            background: rgba(220, 255, 220, 0.8) !important;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .stat-item {
            text-align: center;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: 10px;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        /* Gallery Section */
        .gallery-section {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .section-title {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--text-dark);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Pub Book Gallery Styles */
        .pub-book {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 0.25rem;
            margin-top: 1rem;
        }

        .pub-book-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }

        .pub-book-item:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .pub-book-link {
            display: block;
            text-decoration: none;
            color: inherit;
        }

        .pub-book-img {
            width: 100%;
            height: 300px;
            object-fit: cover;
            display: block;
            transition: opacity 0.3s ease;
        }

        .pub-book-item:hover .pub-book-img {
            opacity: 0.9;
        }

        /* Lightbox Styles */
        .mfp-hide {
            display: none !important;
        }

        .lightbox-block {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .mfp-img {
            max-width: 90%;
            max-height: 90%;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .mfp-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background 0.3s ease;
            z-index: 10000;
        }

        .mfp-close:hover {
            background: rgba(255, 255, 255, 1);
        }

        .mfp-close i {
            font-size: 18px;
            color: #333;
        }

        /* Estilos do Modal de Galeria Customizado */
        .gallery-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gallery-modal-backdrop {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            cursor: pointer;
        }

        .gallery-modal-content {
            position: relative;
            width: 90%;
            height: 90%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10001;
        }

        .gallery-modal-image {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .gallery-modal-close,
        .gallery-modal-prev,
        .gallery-modal-next {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10002;
            font-size: 20px;
            color: #333;
        }

        .gallery-modal-close {
            top: 20px;
            right: 20px;
        }

        .gallery-modal-prev,
        .gallery-modal-next {
            top: 50%;
            transform: translateY(-50%);
        }

        .gallery-modal-prev {
            left: 20px;
        }

        .gallery-modal-next {
            right: 20px;
        }

        .gallery-modal-close:hover,
        .gallery-modal-prev:hover,
        .gallery-modal-next:hover {
            background: rgba(255, 255, 255, 1);
            transform: translateY(-50%) scale(1.1);
        }

        .gallery-modal-close:hover {
            transform: scale(1.1);
        }

        .gallery-modal-counter {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 500;
            z-index: 10002;
        }

        @media (max-width: 768px) {
            .gallery-modal-prev,
            .gallery-modal-next {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .gallery-modal-close {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }

            .gallery-modal-counter {
                font-size: 14px;
                padding: 8px 16px;
            }
        }

        /* Utility Classes */
        .position-relative {
            position: relative;
        }

        .h-full {
            height: 100%;
        }

        .w-full {
            width: 100%;
        }

        .d-flex {
            display: flex;
        }

        .absolute {
            position: absolute;
        }

        .top {
            top: 0;
        }

        .right {
            right: 0;
        }

        .m-10 {
            margin: 10px;
        }

        .mr-2 {
            margin-right: 0.5rem;
        }

        .p-0 {
            padding: 0;
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .btn-default {
            background: #f8f9fa;
            color: #333;
            border: 1px solid #dee2e6;
        }

        .btn-circle {
            border-radius: 50%;
        }

        .no-events {
            pointer-events: none;
        }

        /* Modal de Mensagem */
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem;
            border-bottom: 1px solid #eee;
            background: var(--primary-color);
            color: white;
            border-radius: 10px 10px 0 0;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.5rem;
        }

        .modal-header .close {
            color: white;
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .modal-header .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--text-dark);
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s ease;
            box-sizing: border-box;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 120px;
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-color-hover);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        /* Description Section */
        .description-section {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .description-content {
            margin-top: 1rem;
        }

        .description-text {
            font-size: 1.1rem;
            line-height: 1.8;
            color: var(--text-dark);
            text-align: justify;
            margin: 0;
            word-wrap: break-word;
            overflow-wrap: break-word;
            word-break: break-word;
            overflow-x: hidden;
            max-width: 100%;
            box-sizing: border-box;
        }

        .video-item .gallery-overlay i {
            font-size: 2.5rem;
        }

        .gallery-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .gallery-item:hover .gallery-overlay {
            opacity: 1;
        }

        .gallery-overlay i {
            color: white;
            font-size: 2rem;
        }

        /* Services Section */
        .services-section {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        /* Forçar layout em grid para os cards de serviços */
        .services-section .services-cards-container,
        .section .services-cards-container {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: 2rem !important;
            margin-top: 1rem;
            width: 100%;
        }

        .services-section .service-card,
        .section .service-card {
            width: 100% !important;
            border: 1px solid #d1d5db !important;
            border-radius: 12px !important;
            padding: 16px !important;
            background: #f8fafc !important;
            min-height: 115px !important;
            min-width: 150px !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-between !important;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.3s ease !important;
            margin: 0 !important;
            float: none !important;
        }

        .services-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
        }

        .service-item {
            padding: 1.5rem;
            background: var(--bg-light);
            border-radius: 10px;
            border-left: 4px solid var(--primary-color);
        }

        .service-title {
            font-weight: bold;
            color: var(--text-dark);
            margin-bottom: 0.5rem;
        }

        .service-price {
            color: var(--primary-color);
            font-weight: bold;
            font-size: 1.1rem;
        }

        /* Contact Section */
        .contact-section {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .contact-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .contact-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 1rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            text-decoration: none;
            transition: all 0.3s;
            cursor: pointer;
        }

        .contact-btn.primary {
            background: var(--primary-color);
            color: white;
        }

        .contact-btn.primary:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .contact-btn.secondary {
            background: var(--secondary-color);
            color: white;
        }

        .contact-btn.secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .contact-btn.success {
            background: #28a745;
            color: white;
        }

        .contact-btn.success:hover {
            background: #218838;
            transform: translateY(-2px);
        }
        
        /* Estilo para botão de telefone com número visível */
        .contact-btn .btn-phone-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
        }
        
        .contact-btn .btn-phone-label {
            font-size: 0.75rem;
            font-weight: 500;
            opacity: 0.9;
            line-height: 1;
        }
        
        .contact-btn .btn-phone-number {
            font-size: 1rem;
            font-weight: 700;
            line-height: 1.2;
        }

        /* Info Section */
        .info-section {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        /* Padronização para todas as seções */
        .section {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }

        .info-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-light);
            border-radius: 10px;
        }

        .info-icon {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .info-content h4 {
            font-weight: bold;
            color: var(--text-dark);
            margin-bottom: 0.25rem;
        }

        .info-content p {
            color: var(--text-muted);
            font-size: 0.9rem;
        }


        /* Responsive */
        @media (max-width: 768px) {
            html {
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            body {
                overflow-x: hidden;
                width: 100%;
                max-width: 100%;
                margin: 0;
                padding: 0;
            }

            .header-content {
                padding: 1rem;
            }

            .main-content {
                padding: 0 !important;
                max-width: 100% !important;
                width: 100% !important;
                margin: 0 !important;
                overflow-x: hidden !important;
            }

            #cadastroForm {
                padding: 0 !important;
                max-width: 100% !important;
                width: 100% !important;
                margin: 0 !important;
                box-sizing: border-box !important;
            }
            
            /* Garante que todos os elementos respeitem o tamanho da tela */
            * {
                box-sizing: border-box;
            }

            /* Garante que o formulário não tenha padding lateral em mobile */
            #cadastroForm {
                padding-left: 0 !important;
                padding-right: 0 !important;
                padding-top: 0 !important;
                padding-bottom: 1rem !important;
            }

            .profile-header {
                padding: 0 !important;
                border-radius: 0 !important;
                margin-bottom: 1rem;
                margin-left: 0 !important;
                margin-right: 0 !important;
                margin-top: 0 !important;
                width: 100vw !important;
                max-width: 100vw !important;
                position: relative;
                left: 50%;
                right: 50%;
                margin-left: -50vw !important;
                margin-right: -50vw !important;
            }

            .banner-upload-container {
                border-radius: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
                margin-left: 0 !important;
                margin-right: 0 !important;
                position: relative;
                left: 0 !important;
                right: 0 !important;
            }

            .profile-banner {
                height: 375px;
                border-radius: 0 !important;
                width: 100% !important;
                max-width: 100% !important;
                left: 0 !important;
                right: 0 !important;
            }

            /* Garante que o overlay e input também ocupem 100% */
            .banner-upload-overlay {
                width: 100% !important;
                max-width: 100% !important;
                left: 0 !important;
                right: 0 !important;
            }

            #banner-photo {
                width: 100% !important;
                max-width: 100% !important;
                left: 0 !important;
                right: 0 !important;
            }

            .profile-picture-container {
                top: 275px;
                right: 1rem;
            }

            /* Adiciona padding nas seções após o banner */
            .profile-info,
            .services-section,
            .description-section,
            .contact-section,
            .info-section,
            .section,
            .gallery-section,
            .video-section,
            .services-form-section {
                padding-left: 1rem;
                padding-right: 1rem;
            }

            .profile-info {
                padding-top: 1rem;
                padding-bottom: 1rem;
            }

            /* Ajustes do modal do cropper em mobile */
            #bannerCropModal > div {
                width: 95% !important;
                max-width: 95% !important;
                padding: 15px !important;
                max-height: 95vh !important;
            }

            #bannerCropModal button {
                padding: 10px 16px !important;
                font-size: 13px !important;
            }

            #bannerCropModal h3 {
                font-size: 1.1rem !important;
            }

            #bannerCropModal p {
                font-size: 12px !important;
            }

            .profile-picture-container > div {
                width: 150px !important;
                height: 150px !important;
            }

            .profile-picture-container .profile-image {
                width: 100% !important;
                height: 100% !important;
            }

            .profile-status {
                width: 20px;
                height: 20px;
                border: 3px solid white;
            }

            .profile-info {
                padding: 1rem;
                padding-top: 3rem;
                text-align: center;
            }

            .profile-name {
                font-size: 2rem;
            }

            .pub-book {
                grid-template-columns: repeat(2, 1fr);
                gap: 0.25rem;
            }

            .pub-book-img {
                height: 225px;
            }

            .mfp-img {
                max-width: 95%;
                max-height: 80%;
            }

            .mfp-close {
                top: 10px;
                right: 10px;
                width: 35px;
                height: 35px;
            }

            .mfp-close i {
                font-size: 16px;
            }

            /* Modal de Mensagem - Mobile */
            .modal-content {
                width: 95%;
                margin: 5% auto;
            }

            .modal-header {
                padding: 1rem;
            }

            .modal-header h3 {
                font-size: 1.2rem;
            }

            .modal-body {
                padding: 1rem;
            }

            .form-actions {
                flex-direction: column;
                gap: 0.5rem;
            }

            .btn {
                width: 100%;
                justify-content: center;
            }

            /* Description Section - Mobile */
            .description-section {
                padding: 1.5rem;
            }

        .description-text {
            font-size: 1rem;
            text-align: left;
        }

        /* Info Grid - Mobile - Primeiros 8 itens com mesmo tamanho */
        @media (max-width: 768px) {
            #basic-info-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 0.75rem !important;
            }

            /* Primeiros 8 itens (sem grid-column: span 2) - layout horizontal com texto na frente do ícone */
            #basic-info-grid > .info-item:not([style*="grid-column: span 2"]) {
                display: flex;
                flex-direction: row;
                align-items: center;
                gap: 0.75rem;
                min-height: 100px;
                height: 100%;
            }

            /* Ícones menores em mobile para os primeiros 8 itens */
            #basic-info-grid > .info-item:not([style*="grid-column: span 2"]) > .info-icon {
                width: 35px !important;
                height: 35px !important;
                font-size: 14px !important;
                flex-shrink: 0;
            }

            /* Conteúdo ocupa o resto do espaço */
            #basic-info-grid > .info-item:not([style*="grid-column: span 2"]) > .info-content {
                flex: 1;
                width: auto !important;
            }

            /* Itens que ocupam 2 colunas continuam ocupando 2 colunas */
            #basic-info-grid > .info-item[style*="grid-column: span 2"] {
                grid-column: span 2 !important;
            }

            /* Garantir que os primeiros 8 itens tenham o mesmo tamanho */
            #basic-info-grid > .info-item:nth-child(1),
            #basic-info-grid > .info-item:nth-child(2),
            #basic-info-grid > .info-item:nth-child(3),
            #basic-info-grid > .info-item:nth-child(4),
            #basic-info-grid > .info-item:nth-child(5),
            #basic-info-grid > .info-item:nth-child(6),
            #basic-info-grid > .info-item:nth-child(7),
            #basic-info-grid > .info-item:nth-child(8) {
                height: 100px;
                min-height: 100px;
            }
        }

        /* Gallery Grid - 3 columns on desktop, 2 columns on tablet/mobile */
        .foto-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
        }
        
        @media (max-width: 1024px) {
            .foto-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .foto-grid {
                grid-template-columns: 1fr !important;
            }
        }

        /* Services Cards Styles */
        .services-cards-container {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: 2rem !important;
            margin-top: 1rem;
            width: 100%;
        }

        .service-card {
            width: 100% !important;
            border: 1px solid #d1d5db !important;
            border-radius: 12px !important;
            padding: 16px !important;
            background: #f8fafc !important;
            min-height: 115px !important;
            min-width: 150px !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-between !important;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.3s ease !important;
            margin: 0 !important;
            float: none !important;
        }

        /* Garantir que os cards apareçam em todas as resoluções */
        .section .services-cards-container,
        .services-section .services-cards-container {
            display: grid !important;
            grid-template-columns: 1fr 1fr !important;
            gap: 2rem !important;
            margin-top: 1rem;
            width: 100%;
        }

        .section .service-card,
        .services-section .service-card {
            width: 100% !important;
            border: 1px solid #d1d5db !important;
            border-radius: 12px !important;
            padding: 16px !important;
            background: #f8fafc !important;
            min-height: 115px !important;
            min-width: 150px !important;
            display: flex !important;
            flex-direction: column !important;
            justify-content: space-between !important;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
            transition: all 0.3s ease !important;
            margin: 0 !important;
            float: none !important;
        }

        .service-card:hover {
            background: #f1f5f9;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            cursor: pointer;
        }

        .card-title-section {
            display: flex;
            align-items: start;
            gap: 8px;
        }

        .card-icon {
            display: inline-block;
            margin-top: 4px;
        }

        .card-label {
            color: #E25352;
            font-weight: 500;
            font-size: 12px;
        }

        .card-label-section {
            display: flex;
            flex-direction: column;
            text-align: start;
        }

        .card-arrow {
            display: inline-block;
            margin-top: 4px;
        }

        .card-content {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            flex: 1;
        }

        /* Card de Valores */
        .price-label {
            font-weight: normal;
            font-size: 10px;
            margin: 0;
        }

        .price-section {
            display: flex;
            align-items: center;
            gap: 4px;
            margin: 4px 0;
        }

        .price-value {
            font-weight: 600;
            font-size: 18px;
            margin: 0;
        }

        .price-duration {
            font-weight: normal;
            font-size: 12px;
            margin: 0;
        }

        .service-info {
            margin-top: 4px;
        }

        .service-text {
            font-size: 12px;
            font-weight: normal;
            margin-right: 4px;
        }

        /* Card de Localização */
        .location-city {
            font-size: 18px;
            font-weight: bold;
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 4px;
        }

        .location-state {
            font-size: 12px;
            margin-bottom: 9px;
            display: block;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 80%;
        }

        .location-info {
            display: block;
        }

        .location-text {
            font-size: 12px;
            font-weight: normal;
            text-transform: lowercase;
        }

        @media (max-width: 768px) {
            .services-cards-container {
                grid-template-columns: 1fr !important;
                gap: 1rem !important;
            }

            .service-card {
                min-height: 100px !important;
                padding: 12px !important;
            }

            .card-header {
                margin-bottom: 16px;
            }

            .location-state {
                max-width: 100%;
            }

            /* Responsividade para seções padronizadas */
            .section {
                padding: 1.5rem;
            }
        }
            
            .gallery-row.two-items {
                grid-template-columns: 1fr;
            }

            .contact-buttons {
                grid-template-columns: 1fr;
            }
        }

        /* Loading Animation */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--bg-light);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Modal for Gallery */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
        }

        .modal-content {
            position: relative;
            margin: auto;
            padding: 0;
            width: 90%;
            max-width: 800px;
            top: 50%;
            transform: translateY(-50%);
        }

        .modal-image {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .modal-video {
            width: 100%;
            height: auto;
            border-radius: 10px;
        }

        .close {
            position: absolute;
            top: 15px;
            right: 35px;
            color: #f1f1f1;
            font-size: 40px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: var(--primary-color);
        }

        /* Estilos para informações pessoais detalhadas */
        .info-item-detailed {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .info-item-detailed:last-child {
            border-bottom: none;
        }

        .info-label-detailed {
            font-weight: 600;
            color: var(--text-dark);
            flex: 1;
        }

        .info-value-detailed {
            color: var(--text-muted);
            font-weight: 500;
            text-align: right;
            flex: 1;
        }

        /* Estilos para serviços detalhados */
        .services-section-detailed {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            position: relative;
        }

        .services-section-detailed:not(:last-child)::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--primary-color);
        }

        .services-section-detailed:last-child {
            margin-bottom: 0;
        }

        .services-section-detailed h5 {
            color: var(--primary-color);
            font-size: 1.1rem;
            margin-bottom: 1rem;
            font-weight: 600;
        }

        .services-list-detailed {
            list-style: none;
            padding: 0;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.5rem;
        }

        .services-list-detailed li {
            display: flex;
            align-items: center;
            padding: 0.5rem;
            background: var(--bg-light);
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .services-list-detailed li i {
            color: var(--primary-color);
            margin-right: 0.5rem;
            font-size: 0.8rem;
        }


        /* Estilos para descrição detalhada */
        .description-text-detailed {
            line-height: 1.8;
            color: var(--text-dark);
            font-size: 1rem;
        }

        /* Popup de Cadastro */
        .cadastro-popup {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            backdrop-filter: blur(5px);
        }

        .cadastro-popup.show {
            display: flex;
        }

        .cadastro-popup__content {
            background: white;
            border-radius: 20px;
            padding: 0;
            max-width: 400px;
            width: 90%;
            max-height: 80vh;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            animation: popupSlideIn 0.3s ease-out;
        }

        @keyframes popupSlideIn {
            from {
                opacity: 0;
                transform: scale(0.8) translateY(-50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .cadastro-popup__header {
            background: linear-gradient(135deg, #ff6b6b, #ff8e8e);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cadastro-popup__header h3 {
            margin: 0;
            font-size: 1.3rem;
            font-weight: 600;
        }

        .cadastro-popup__close {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            transition: background-color 0.3s ease;
        }

        .cadastro-popup__close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .cadastro-popup__options {
            padding: 20px;
        }

        .cadastro-option {
            display: flex;
            align-items: center;
            padding: 20px;
            margin-bottom: 15px;
            background: #f8f9fa;
            border-radius: 12px;
            text-decoration: none;
            color: #333;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .cadastro-option:hover {
            background: #e9ecef;
            border-color: #e25352;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .cadastro-option__icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #e25352, #ff6b6b);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            color: white;
            font-size: 1.5rem;
        }

        .cadastro-option__text h4 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .cadastro-option__text p {
            margin: 0;
            font-size: 0.9rem;
            color: #666;
        }
        
        /* Seção de Verificação */
        .verification-section {
            margin-bottom: 2rem;
        }
        
        .verification-card {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 2px solid #e9ecef;
        }
        
        .verification-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }
        
        .verification-icon {
            font-size: 2rem;
            color: var(--primary-color);
        }
        
        .verification-header h3 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--text-dark);
            font-weight: 600;
        }
        
        .verification-card p {
            color: var(--text-muted);
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .verification-upload-box {
            min-height: 400px;
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%);
            border: 2px dashed #007bff;
            position: relative !important;
            overflow: hidden;
            cursor: pointer;
        }
        
        .verification-upload-box input[type="file"] {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            opacity: 0 !important;
            cursor: pointer !important;
            z-index: 10 !important;
            pointer-events: auto !important;
            margin: 0 !important;
            padding: 0 !important;
        }
        
        .verification-upload-box .galeria-upload-overlay {
            position: absolute !important;
            top: 0 !important;
            left: 0 !important;
            width: 100% !important;
            height: 100% !important;
            display: flex !important;
            flex-direction: column !important;
            align-items: center !important;
            justify-content: center !important;
            z-index: 1 !important;
            pointer-events: none !important;
        }
        
        .verification-upload-box .photo-preview,
        .verification-upload-box .video-preview {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 8px;
            z-index: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #f8f9fa;
        }
        
        .verification-upload-box .photo-preview img {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: crisp-edges;
        }
        
        .verification-upload-box .video-preview video {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            object-fit: contain;
            border-radius: 8px;
        }
        
        .verification-upload-box .btn-change-photo {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 3;
            background: rgba(0, 123, 255, 0.95);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .verification-upload-box .btn-change-photo:hover {
            background: rgba(0, 123, 255, 1);
            transform: translateY(-2px);
        }
        
        @media (max-width: 1024px) {
            .verification-card {
                padding: 1.5rem;
            }
            
            .verification-header h3 {
                font-size: 1.25rem;
            }
            
            .verification-upload-box {
                min-height: 300px;
            }
        }
        
        @media (max-width: 768px) {
            .verification-upload-box {
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="A_02__premium_copy.html" class="logo">
                <i class="fas fa-heart"></i> Premium VIP
            </a>
            <div class="header-buttons">
                <div class="sign-button" id="cadastre-se-gratis" onclick="openCadastroPopup()">
                    <button class="sign-button__action">
                        <p class="sign-button__title sign-button__title-register">
                            Publicar Anuncio
                        </p>
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M17.5481 7.89971L11.9928 13.2027L6.43758 7.89971C5.87919 7.36668 4.97718 7.36668 4.41879 7.89971C3.8604 8.43274 3.8604 9.29379 4.41879 9.82682L10.9906 16.1002C11.549 16.6332 12.451 16.6332 13.0094 16.1002L19.5812 9.82682C20.1396 9.29379 20.1396 8.43274 19.5812 7.89971C19.0228 7.38035 18.1065 7.36668 17.5481 7.89971Z" fill="#e25352"></path>
                        </svg>
                    </button>
                </div>
            </div>
            <a href="A_02__premium_copy.html" class="back-btn" id="back-btn-link" onclick="handleBackClick(event)">
                <i class="fas fa-arrow-left"></i>
                Voltar
            </a>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Form Upload Sections -->
        <form id="cadastroForm" enctype="multipart/form-data" style="max-width: 1200px; margin: 0 auto; padding: 2rem; width: 100%; box-sizing: border-box;">
        <!-- Profile Header -->
        <section class="profile-header">
            <!-- Banner retangular de fundo com área de upload -->
            <div class="banner-upload-container" style="position: relative; width: 100%; height: 450px; border-radius: 15px 15px 0 0; overflow: hidden;">
                <!-- Banner preview -->
            <img src="" 
                     alt="Banner" class="profile-banner" id="profile-banner" style="width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.3s; position: absolute; top: 0; left: 0; z-index: 1;">
                
                    <!-- Overlay de upload (aparece quando não há banner) -->
                <div class="banner-upload-overlay" id="banner-upload-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(220, 53, 69, 0.8) 0%, rgba(108, 117, 125, 0.8) 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; transition: opacity 0.3s; cursor: pointer; pointer-events: none;">
                    <input type="file" id="banner-photo" name="foto_banner" accept="image/*" required style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                    <div style="pointer-events: none;">
                        <i class="fas fa-image" style="font-size: 3rem; color: white; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                        <span style="color: white; font-size: 1.1rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">Clique para adicionar foto</span>
                        <small style="color: rgba(255, 255, 255, 0.95); font-size: 0.9rem; margin-top: 5px; text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);">Imagem promocional do anúncio</small>
                    </div>
                </div>
                
                <!-- Botão de trocar banner (aparece quando há banner) -->
                <button type="button" class="btn-change-banner-overlay" id="btn-change-banner" style="display: none; position: absolute; top: 20px; left: 20px; z-index: 3; background: rgba(0, 123, 255, 0.9); color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 14px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                    <i class="fas fa-exchange-alt"></i> Trocar Banner
                </button>
            </div>
            
            <!-- Foto circular sobreposta com área de upload -->
            <div class="profile-picture-container" style="position: absolute; top: 350px; right: 2rem; z-index: 10;">
                <div style="position: relative; width: 200px; height: 200px; border-radius: 50%; overflow: hidden; border: 6px solid var(--bg-white); box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);">
                    <!-- Foto de perfil preview -->
                <img src="" 
                         alt="Foto do Perfil" class="profile-image" id="profile-image" style="width: 92%; height: 92%; object-fit: cover; opacity: 0; transition: opacity 0.3s; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 1; border-radius: 50%;">
                    
                    <!-- Overlay de upload (aparece quando não há foto) -->
                    <div class="profile-upload-overlay" id="profile-upload-overlay" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(220, 53, 69, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; transition: opacity 0.3s; cursor: pointer; pointer-events: none;">
                        <input type="file" id="capa-photo" name="foto_capa" accept="image/*" required style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div style="pointer-events: none;">
                            <i class="fas fa-camera" style="font-size: 2rem; color: white; margin-bottom: 8px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span style="color: white; font-size: 0.85rem; font-weight: 500; text-align: center; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px;">Clique para adicionar foto</span>
                        </div>
                    </div>
                    
                    <!-- Botão de trocar foto (aparece quando há foto) -->
                    <button type="button" class="btn-change-profile-overlay" id="btn-change-capa" style="display: none; position: absolute; top: 20px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 14px; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s; align-items: center; justify-content: center;">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                    
                    <!-- Status indicator -->
                    <div class="profile-status" id="profile-status-indicator" style="position: absolute; bottom: 15px; right: 15px; width: 25px; height: 25px; background: #28a745; border: 4px solid white; border-radius: 50%; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2); z-index: 4; display: none;"></div>
                </div>
            </div>
            
            <div class="profile-info">
                <input type="text" 
                       class="profile-name" 
                       id="profile-name" 
                       name="nome" 
                       placeholder="Digite seu nome" 
                       minlength="4"
                       maxlength="25" 
                       required 
                       autocomplete="off"
                       style="background: transparent; border: 2px dashed transparent; border-radius: 5px; padding: 5px 10px; transition: all 0.3s; width: 100%; box-sizing: border-box;">
                <div class="nome-char-counter" style="font-size: 0.75rem; color: #666; margin-top: 5px; text-align: right;">
                    <span id="nome-char-count">0</span>/25 caracteres
                </div>
                <span class="profile-level" id="profile-level">Massagistas Premium</span>
                
                <!-- Label para Frase de Efeito -->
                <label for="profile-description" style="display: block; font-size: 0.9rem; font-weight: 600; color: #333; margin: 1rem 0 0.5rem 0;">
                    Frase de Efeito <span style="color: #dc3545;">*</span>
                </label>
                
                <!-- Textarea editável para Frase de Efeito -->
                <textarea 
                    class="profile-description" 
                    id="profile-description" 
                    name="frase-efeito" 
                    placeholder="Digite sua frase de efeito (mínimo 50, máximo 130 caracteres)" 
                    minlength="50"
                    maxlength="130" 
                    required
                    rows="3"
                    autocomplete="off"
                    style="border-radius: 5px; padding: 8px 10px; transition: all 0.3s; width: 100%; box-sizing: border-box; font-family: inherit; font-size: 0.95rem; line-height: 1.5; resize: vertical; min-height: 60px;"></textarea>
                
                <!-- Contador de caracteres -->
                <div class="frase-efeito-char-counter" style="font-size: 0.75rem; color: #666; margin-top: 5px; text-align: right;">
                    <span id="frase-efeito-char-count">0</span>/130 caracteres <span style="color: #dc3545; font-weight: 600;">(mínimo: 50)</span>
                </div>
                
            </div>
        </section>

        <!-- Massagista Section -->
        <section class="services-form-section" style="background: white; border-radius: 15px; padding: 2rem; margin-bottom: 2rem; box-shadow: var(--shadow);">
            <h2 class="section-title">
                <i class="fas fa-spa"></i>
                Meu Anúncio de Massagista
            </h2>
            <p style="color: #666; margin-top: -15px; margin-bottom: 1.5rem;">Massoterapeuta</p>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Tipos de Massagens</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="terapeutica" style="margin-right: 8px;">
                        <span>Terapêutica</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="relaxante" style="margin-right: 8px;">
                        <span>Relaxante</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="sensoriais" style="margin-right: 8px;">
                        <span>Sensoriais</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="corpo-corpo" style="margin-right: 8px;">
                        <span>Corpo a Corpo</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="tantrica" style="margin-right: 8px;">
                        <span>Tântrica</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="prostatica" style="margin-right: 8px;">
                        <span>Prostática</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="tailandesa" style="margin-right: 8px;">
                        <span>Tailandesa</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="sensual" style="margin-right: 8px;">
                        <span>Sensual</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="nuru" style="margin-right: 8px;">
                        <span>Nuru</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="drenagem" style="margin-right: 8px;">
                        <span>Drenagem linfática</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="esportiva" style="margin-right: 8px;">
                        <span>Esportiva</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="modeladora" style="margin-right: 8px;">
                        <span>Modeladora</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="shiatsu" style="margin-right: 8px;">
                        <span>Shiatsu</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="vivencia" style="margin-right: 8px;">
                        <span>Vivência</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="reflexologia" style="margin-right: 8px;">
                        <span>Reflexologia</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="tipos-massagem" value="4-maos" style="margin-right: 8px;">
                        <span>4 Mãos</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Massagens Com Finalização</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="finalizacao" value="masturbacao" style="margin-right: 8px;">
                        <span>Masturbação</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="finalizacao" value="sexo-oral" style="margin-right: 8px;">
                        <span>Sexo Oral</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="finalizacao" value="penetracao" style="margin-right: 8px;">
                        <span>Penetração</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Serviços Extras</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos-extras" value="depilacao" style="margin-right: 8px;">
                        <span>Depilação</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos-extras" value="estetica" style="margin-right: 8px;">
                        <span>Estética</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos-extras" value="reflexologia-podal" style="margin-right: 8px;">
                        <span>Reflexologia Podal</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos-extras" value="liberacao-miofacial" style="margin-right: 8px;">
                        <span>Liberação miofacial</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos-extras" value="pedras-quentes" style="margin-right: 8px;">
                        <span>Pedras quentes</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos-extras" value="massagem-brinquedos" style="margin-right: 8px;">
                        <span>Massagens com Brinquedos</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos-extras" value="escalda-pes" style="margin-right: 8px;">
                        <span>Escalda pés</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Atendimento das Massagens Para</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="atendimento" value="homens" style="margin-right: 8px;">
                        <span>Homens</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="atendimento" value="mulheres" style="margin-right: 8px;">
                        <span>Mulheres</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="atendimento" value="trans" style="margin-right: 8px;">
                        <span>Trans</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="atendimento" value="casais" style="margin-right: 8px;">
                        <span>Casais</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Em Nossas Instalações</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="temos-local" style="margin-right: 8px;">
                        <span>Temos Local</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="a-domicilio" style="margin-right: 8px;">
                        <span>A Domicílio</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="em-hotel" style="margin-right: 8px;">
                        <span>Em Hotel</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="em-motel" style="margin-right: 8px;">
                        <span>Em Motel</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="ducha" style="margin-right: 8px;">
                        <span>Ducha</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="banheira" style="margin-right: 8px;">
                        <span>Banheira</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="maca" style="margin-right: 8px;">
                        <span>Maca</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="tatami" style="margin-right: 8px;">
                        <span>Tatami</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="oleos-essenciais" style="margin-right: 8px;">
                        <span>Óleos Essenciais</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="velas-aromaticas" style="margin-right: 8px;">
                        <span>Velas Aromáticas</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="musica-relaxante" style="margin-right: 8px;">
                        <span>Música Relaxante</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="instalacoes" value="material-descartavel" style="margin-right: 8px;">
                        <span>Material Descartável</span>
                    </label>
                </div>
            </div>
        </section>

        <!-- Description Section -->
        <section class="description-section">
            <h2 class="section-title">
                <i class="fas fa-align-left"></i>
                Descrição
            </h2>
            <div class="form-group" style="margin-top: 1.5rem;">
                <label for="descricao" style="display: block; margin-bottom: 8px; font-weight: bold; color: #333;">Descrição *</label>
                <textarea id="descricao" name="descricao" rows="8" placeholder="Use este espaço para descrever como você é, seu corpo, suas habilidades e do que você gosta. Uma boa descrição multiplica suas ligações..." required minlength="150" maxlength="1500" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 16px; font-family: inherit; resize: vertical; box-sizing: border-box;"></textarea>
                <div class="char-counter" style="margin-top: 10px;">
                    <span id="charCount" style="color: #dc3545; font-weight: bold;">0</span>/1500 caracteres
                    <span class="char-warning" id="charWarning" style="display: none; color: #dc3545; font-size: 14px; margin-top: 5px; display: block;">
                        Você precisa de mais <span id="charsNeeded">150</span> caracteres para atingir o mínimo de 150 caracteres<br>
                        <small>⚠️ Máximo 3 espaços consecutivos permitidos. Não use apenas espaços para burlar a validação</small>
                    </span>
                    <span class="char-success" id="charSuccess" style="display: none; color: #28a745; font-size: 14px; margin-top: 5px; display: block;">
                        ✅ Descrição com tamanho adequado!
                    </span>
                </div>
            </div>
            <!-- Preview Description -->
            <div class="description-content" style="margin-top: 2rem; padding: 1.5rem; background: #f8f9fa; border-radius: 8px; border-left: 4px solid #007bff;">
                <p class="description-text" id="description-text" style="color: #333; line-height: 1.8;">
                    Sua descrição aparecerá aqui...
                </p>
            </div>
        </section>

        <!-- Gallery Section -->
        <section class="gallery-section">
            <h2 class="section-title">
                <i class="fas fa-images"></i>
                Galeria de Fotos
            </h2>
            
            <div class="foto-galeria" style="margin-bottom: 30px; padding: 20px; background: white; border-radius: 8px; border: 1px solid #dee2e6;">
                <h3 style="margin-bottom: 10px;">FOTOS DA GALERIA:</h3>
                <p style="margin-bottom: 15px; color: #666;">
                    Clique nas fotos que você quer que sejam as fotos da sua galeria de Anúncio.
                </p>
                <div class="foto-grid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; margin-top: 15px;">
                    <!-- 12 photo upload boxes -->
                    <div class="foto-upload-box" id="galeria-upload-box-1" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-1" name="galeria_1" accept="image/*" required data-min-galeria="1" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-1" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-1" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-1" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-2" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-2" name="galeria_2" accept="image/*" required data-min-galeria="2" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-2" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-2" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-2" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-3" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-3" name="galeria_3" accept="image/*" required data-min-galeria="3" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-3" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-3" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-3" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-4" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-4" name="galeria_4" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-4" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-4" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-5" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-5" name="galeria_5" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-5" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-5" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-5" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-6" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-6" name="galeria_6" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-6" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-6" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-6" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-7" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-7" name="galeria_7" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-7" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-7" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-7" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-8" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(220, 53, 69, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-8" name="galeria_8" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                            <small style="color: rgba(255, 255, 255, 0.95); font-size: 0.75rem; margin-top: 5px; text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);">Em breve podera adicionar videos</small>
                        </div>
                        <div class="photo-preview" id="galeria-preview-8" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <div class="video-preview" id="galeria-video-preview-8" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-8" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(220, 53, 69, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-9" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(40, 167, 69, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-9" name="galeria_9" accept="image/*" required style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-9" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-images upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                            <small style="color: rgba(255, 255, 255, 0.95); font-size: 0.75rem; margin-top: 5px; text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3); font-weight: 600;">📸 Foto de Stories</small>
                        </div>
                        <div class="photo-preview" id="galeria-preview-9" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-9" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(40, 167, 69, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-10" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-10" name="galeria_10" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-10" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-10" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-10" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-11" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-11" name="galeria_11" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-11" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-11" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-11" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <div class="foto-upload-box" id="galeria-upload-box-12" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; height: 350px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-12" name="galeria_12" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-12" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-12" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-12" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                </div>
                
                <!-- Botão Testar Fotos -->
                <div id="testar-fotos-container" style="display: none; margin-top: 20px; text-align: center;">
                    <button id="btn-testar-fotos" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 15px 40px; border-radius: 50px; font-size: 16px; font-weight: 600; cursor: pointer; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4); transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 10px;">
                        <i class="fas fa-images"></i>
                        Testar Fotos
                    </button>
                </div>
            </div>
            
            <!-- Preview Gallery (will be populated dynamically) -->
            <div class="pub-book" id="gallery-preview-container" style="display: none;">
                <!-- Gallery will be loaded here via JavaScript -->
            </div>
        </section>
        
        <!-- Carrossel Modal de Teste da Galeria -->
        <div id="gallery-carousel-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.95); z-index: 10000; align-items: center; justify-content: center;">
            <div style="position: relative; width: 100%; max-width: 800px; height: 100%; display: flex; align-items: center; justify-content: center;">
                <!-- Botão Fechar -->
                <button id="close-carousel" style="position: absolute; top: 20px; right: 20px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; z-index: 10001; display: flex; align-items: center; justify-content: center; font-size: 20px; color: #333;">
                    <i class="fas fa-times"></i>
                </button>
                
                <!-- Container do Carrossel -->
                <div id="carousel-container" style="position: relative; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; overflow: hidden;">
                    <!-- Slide anterior -->
                    <button id="carousel-prev" style="position: absolute; left: 20px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; z-index: 10001; display: flex; align-items: center; justify-content: center; font-size: 24px; color: #333; transition: all 0.3s;">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <!-- Slide próximo -->
                    <button id="carousel-next" style="position: absolute; right: 20px; background: rgba(255, 255, 255, 0.9); border: none; border-radius: 50%; width: 50px; height: 50px; cursor: pointer; z-index: 10001; display: flex; align-items: center; justify-content: center; font-size: 24px; color: #333; transition: all 0.3s;">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                    
                    <!-- Slides -->
                    <div id="carousel-slides" style="display: flex; width: 100%; height: 100%; transition: transform 0.5s ease;">
                        <!-- Slides serão inseridos aqui via JavaScript -->
                    </div>
                    
                    <!-- Indicadores -->
                    <div id="carousel-indicators" style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); display: flex; gap: 10px; z-index: 10001;">
                        <!-- Indicadores serão inseridos aqui via JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Verification Section -->
        <div class="verification-section" style="margin-top: 30px;">
            <div class="verification-card">
                <div class="verification-header">
                    <i class="fas fa-id-card verification-icon"></i>
                    <h3><u>UPLOAD DE DOCUMENTOS PARA VERIFICAÇÃO</u></h3>
                </div>
                
                <!-- CAIXA 1: FOTO DOCUMENTO FRENTE -->
                <div class="form-group">
                    <label><strong>📄 Foto Documento Frente:</strong></label>
                    <div class="foto-upload-box verification-upload-box" id="documento-frente-upload-box">
                        <input type="file" id="documento-frente" name="documento-frente" accept="image/*" autocomplete="off">
                        <div class="galeria-upload-overlay" id="documento-frente-overlay">
                            <i class="fas fa-id-card upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para enviar foto da frente do documento<br><small>RG, CNH ou Passaporte</small></span>
                        </div>
                        <div class="photo-preview" id="documento-frente-preview" style="display: none;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-documento-frente" style="display: none;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                </div>
                
                <!-- CAIXA 2: FOTO DOCUMENTO VERSO -->
                <div class="form-group">
                    <label><strong>📄 Foto Documento Verso:</strong></label>
                    <div class="foto-upload-box verification-upload-box" id="documento-verso-upload-box">
                        <input type="file" id="documento-verso" name="documento-verso" accept="image/*" autocomplete="off">
                        <div class="galeria-upload-overlay" id="documento-verso-overlay">
                            <i class="fas fa-id-card upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para enviar foto do verso do documento<br><small>Parte de trás do documento</small></span>
                        </div>
                        <div class="photo-preview" id="documento-verso-preview" style="display: none;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-documento-verso" style="display: none;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                </div>
                
                <!-- CAIXA 3: FOTO DOCUMENTO COM SELFIE -->
                <div class="form-group">
                    <label><strong>🤳 Foto Documento com Selfie:</strong></label>
                    <div class="foto-upload-box verification-upload-box" id="selfie-documento-upload-box">
                        <input type="file" id="selfie-documento" name="selfie-documento" accept="image/*" autocomplete="off">
                        <div class="galeria-upload-overlay" id="selfie-documento-overlay">
                            <i class="fas fa-user-circle upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para enviar selfie com documento<br><small>Segurando o documento próximo ao rosto</small></span>
                        </div>
                        <div class="photo-preview" id="selfie-documento-preview" style="display: none;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-selfie-documento" style="display: none;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                </div>
                
                <!-- CAIXA 4: VÍDEO DE VERIFICAÇÃO -->
                <div class="form-group">
                    <label><strong>🎥 Vídeo de Verificação:</strong></label>
                    <div class="foto-upload-box verification-upload-box" id="verification-video-upload-box" style="border-color: #dc3545;">
                        <input type="file" id="verification-video" name="verification-video" accept="video/*" autocomplete="off">
                        <div class="galeria-upload-overlay" id="verification-video-overlay">
                            <i class="fas fa-video upload-icon" style="font-size: 2rem; color: #dc3545; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: #dc3545; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para enviar vídeo de verificação<br><small>Máx. 100MB • Até 30 segundos</small></span>
                        </div>
                        <div class="video-preview" id="verification-video-preview" style="display: none;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-verification-video" style="display: none;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    <small style="color: #666; font-style: italic; display: block; margin-top: 0.5rem;">
                        Este campo é opcional. Pode ser preenchido posteriormente.
                    </small>
                </div>
            </div>
        </div>

        <!-- Contact Section -->
        <section class="contact-section">
            <h2 class="section-title">
                <i class="fas fa-phone"></i>
                Informações de Contato
            </h2>
            <div class="form-group" style="margin-top: 1.5rem;">
                <label class="section-label" style="font-weight: bold; color: #007bff; margin-bottom: 15px; display: block; font-size: 16px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Informações de Contato</label>
                <div class="phone-container" style="display: flex; gap: 15px; margin-bottom: 20px; flex-wrap: wrap;">
                    <div class="phone-field" style="flex: 1; min-width: 250px;">
                        <label for="telefone_celular" style="font-weight: 600; color: #333; margin-bottom: 8px; display: block; font-size: 14px;">Telefone Celular / WhatsApp *</label>
                        <input type="tel" id="telefone_celular" name="telefone_celular" required placeholder="(11) 99999-9999" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 16px; box-sizing: border-box;">
                    </div>
                    <div class="phone-field" style="flex: 1; min-width: 250px;">
                        <label for="telefone_fixo" style="font-weight: 600; color: #333; margin-bottom: 8px; display: block; font-size: 14px;">Telefone Fixo (Opcional)</label>
                        <input type="tel" id="telefone_fixo" name="telefone_fixo" placeholder="(11) 3333-4444" style="width: 100%; padding: 12px; border: 2px solid #e9ecef; border-radius: 8px; font-size: 16px; box-sizing: border-box;">
                    </div>
                </div>
            </div>
            <!-- Preview Contact Buttons -->
            <div class="contact-buttons" style="margin-top: 2rem;">
                <a href="#" id="btn-ligar-agora" class="contact-btn primary" style="background: #dc3545; color: white; padding: 1rem; border-radius: 10px; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; transition: background 0.3s;">
                    <i class="fas fa-phone"></i>
                    <div class="btn-phone-content">
                        <span class="btn-phone-label" style="display: block; font-size: 0.9rem;">Ligar Agora</span>
                        <span class="btn-phone-number" id="btn-ligar-phone-number" style="display: block; font-size: 1.1rem; font-weight: bold;">(61) 98484-7878</span>
                    </div>
                </a>
                <a href="#" id="btn-whatsapp" class="contact-btn success" target="_blank" style="background: #25d366; color: white; padding: 1rem; border-radius: 10px; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; transition: background 0.3s;">
                    <i class="fab fa-whatsapp"></i>
                    WhatsApp
                </a>
                <a href="#" id="btn-telefone-fixo" class="contact-btn secondary" style="background: #6c757d; color: white; padding: 1rem; border-radius: 10px; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; transition: background 0.3s; opacity: 0.5; pointer-events: none; cursor: not-allowed;">
                    <i class="fas fa-phone-alt"></i>
                    Telefone Fixo
                </a>
                <a href="#" class="contact-btn secondary" onclick="openMessageModal()" style="background: #6c757d; color: white; padding: 1rem; border-radius: 10px; text-decoration: none; display: flex; align-items: center; gap: 0.5rem; transition: background 0.3s;">
                    <i class="fas fa-comment"></i>
                    Mensagem
                </a>
            </div>
        </section>

        <!-- Info Section (Preview) -->
        <section class="info-section">
            <h2 class="section-title">
                <i class="fas fa-info-circle"></i>
                Informações Básicas
            </h2>
            <div class="info-grid" id="basic-info-grid">
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-birthday-cake"></i>
                    </div>
                    <div class="info-content">
                        <h4>Idade <span style="color: #dc3545;">*</span></h4>
                        <input type="number" id="info-idade" name="idade" placeholder="Idade" min="18" max="99" required style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-weight"></i>
                    </div>
                    <div class="info-content">
                        <h4>Peso <span style="color: #dc3545;">*</span></h4>
                        <input type="number" id="info-peso" name="peso" placeholder="Peso (kg)" min="30" max="200" required style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-ruler-vertical"></i>
                    </div>
                    <div class="info-content">
                        <h4>Altura <span style="color: #dc3545;">*</span></h4>
                        <input type="text" id="info-altura" name="altura" placeholder="Ex: 1.82m ou 182cm" required style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                        <small style="color: #666; font-size: 11px; display: block; margin-top: 4px;">Mínimo: 45cm | Máximo: 2m45cm (245cm)</small>
                        <div id="altura-error" class="error-message" style="display: none; color: #dc3545; font-size: 12px; margin-top: 5px;"></div>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-kiss-wink-heart"></i>
                    </div>
                    <div class="info-content">
                        <h4>Oral sem <span style="color: #dc3545;">*</span></h4>
                        <select id="info-oral-sem" name="oral-sem" required style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                            <option value="">Selecione</option>
                            <option value="sim">Sim</option>
                            <option value="nao">Não</option>
                            <option value="talvez">Talvez</option>
                        </select>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-kiss"></i>
                    </div>
                    <div class="info-content">
                        <h4>Beija <span style="color: #dc3545;">*</span></h4>
                        <select id="info-beija" name="beija" required style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                            <option value="">Selecione</option>
                            <option value="sim">Sim</option>
                            <option value="nao">Não</option>
                            <option value="talvez">Talvez</option>
                        </select>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-user-friends"></i>
                    </div>
                    <div class="info-content">
                        <h4>Anal <span style="color: #dc3545;">*</span></h4>
                        <select id="info-anal" name="anal" required style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                            <option value="">Selecione</option>
                            <option value="sim">Sim</option>
                            <option value="nao">Não</option>
                            <option value="talvez">Talvez</option>
                        </select>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-map-marker-alt"></i>
                    </div>
                    <div class="info-content">
                        <h4>Local</h4>
                        <select id="info-local" name="local" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                            <option value="">Selecione</option>
                            <option value="sim">Sim</option>
                            <option value="nao">Não</option>
                        </select>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="info-content">
                        <h4>Mora só <span style="color: #dc3545;">*</span></h4>
                        <select id="info-mora-so" name="mora-so" required style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                            <option value="">Selecione</option>
                            <option value="sim">Sim</option>
                            <option value="nao">Não</option>
                        </select>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="info-content">
                        <h4>Valor</h4>
                        <input type="text" id="info-valor" name="valor" placeholder="Ex: 200" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                        <small style="color: #666; font-size: 11px; display: block; margin-top: 4px;">Mínimo: R$ 1 | Máximo: R$ 20.000 (sem decimais)</small>
                        <div id="valor-error" class="error-message" style="display: none; color: #dc3545; font-size: 12px; margin-top: 5px;"></div>
                    </div>
                </div>
                <div class="info-item" style="grid-column: span 2;">
                    <div class="info-icon">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="info-content" style="width: 100%;">
                        <h4>Horário de Atendimento</h4>
                        <div style="margin-bottom: 10px;">
                            <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 8px;">
                                <input type="radio" name="horario-24h" id="horario-24h-sim" value="sim" style="margin-right: 8px;">
                                <span>24 horas todos os dias</span>
                            </label>
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="radio" name="horario-24h" id="horario-24h-nao" value="nao" style="margin-right: 8px;">
                                <span>Não</span>
                            </label>
                        </div>
                        <div id="horario-custom-container" style="display: none; margin-top: 10px;">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <div>
                                    <label style="font-size: 12px; color: #666; display: block; margin-bottom: 5px;">Horário de Início *</label>
                                    <input type="time" id="horario-inicio" name="horario-inicio" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                                </div>
                                <div>
                                    <label style="font-size: 12px; color: #666; display: block; margin-bottom: 5px;">Horário de Fim *</label>
                                    <input type="time" id="horario-fim" name="horario-fim" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="info-item" style="grid-column: span 2;">
                    <div class="info-icon">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <div class="info-content" style="width: 100%;">
                        <h4>Atende <span style="color: #dc3545;">*</span></h4>
                        <div id="atende-checkbox-group" class="checkbox-group-required" style="margin-top: 8px;">
                            <label>
                                <input type="checkbox" name="atende" value="ele" id="atende-ele">
                                <span>Ele</span>
                            </label>
                            <label>
                                <input type="checkbox" name="atende" value="ela" id="atende-ela">
                                <span>Ela</span>
                            </label>
                            <label>
                                <input type="checkbox" name="atende" value="casais" id="atende-casais">
                                <span>Casais</span>
                            </label>
                        </div>
                        <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">Selecione pelo menos uma opção</small>
                    </div>
                </div>
                <div class="info-item" style="grid-column: span 2;">
                    <div class="info-icon">
                        <i class="fas fa-credit-card"></i>
                    </div>
                    <div class="info-content" style="width: 100%;">
                        <h4>Formas de Pagamento <span style="color: #dc3545;">*</span></h4>
                        <div id="pagamento-checkbox-group" class="checkbox-group-required" style="margin-top: 8px;">
                            <label>
                                <input type="checkbox" name="pagamento" value="dinheiro" id="pagamento-dinheiro">
                                <span>Dinheiro</span>
                            </label>
                            <label>
                                <input type="checkbox" name="pagamento" value="pix" id="pagamento-pix">
                                <span>PIX</span>
                            </label>
                            <label>
                                <input type="checkbox" name="pagamento" value="debito" id="pagamento-debito">
                                <span>Débito</span>
                            </label>
                            <label>
                                <input type="checkbox" name="pagamento" value="credito" id="pagamento-credito">
                                <span>Crédito</span>
                            </label>
                        </div>
                        <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">Selecione pelo menos uma opção</small>
                    </div>
                </div>
            </div>
        </section>

        <!-- Physical Characteristics Section -->
        <section class="info-section" id="physical-section" style="display: none;">
            <h2 class="section-title">
                <i class="fas fa-user-circle"></i>
                Características Físicas
            </h2>
            <div class="info-grid" id="physical-info-grid">
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-ruler-vertical"></i>
                    </div>
                    <div class="info-content">
                        <h4>Altura</h4>
                        <p id="info-altura">-</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-weight"></i>
                    </div>
                    <div class="info-content">
                        <h4>Peso</h4>
                        <p id="info-peso">-</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-dumbbell"></i>
                    </div>
                    <div class="info-content">
                        <h4>Corpo</h4>
                        <p id="info-corpo">-</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-arrows-alt-v"></i>
                    </div>
                    <div class="info-content">
                        <h4>Estatura</h4>
                        <p id="info-estatura">-</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Preferences Section -->
        <section class="info-section" id="services-section" style="display: none;">
            <h2 class="section-title">
                <i class="fas fa-heart"></i>
                Preferências de Serviços
            </h2>
            <div class="info-grid" id="services-info-grid">
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-kiss"></i>
                    </div>
                    <div class="info-content">
                        <h4>Beija</h4>
                        <p id="info-beija">-</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-lips"></i>
                    </div>
                    <div class="info-content">
                        <h4>Oral Sem</h4>
                        <p id="info-oral-sem">-</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-user-friends"></i>
                    </div>
                    <div class="info-content">
                        <h4>Anal</h4>
                        <p id="info-anal">-</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-home"></i>
                    </div>
                    <div class="info-content">
                        <h4>Mora Sozinha</h4>
                        <p id="info-mora-so">-</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-map-pin"></i>
                    </div>
                    <div class="info-content">
                        <h4>Local</h4>
                        <p id="info-local">-</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Schedule Section -->
        <section class="info-section" id="schedule-section" style="display: none;">
            <h2 class="section-title">
                <i class="fas fa-clock"></i>
                Horários de Atendimento
            </h2>
            <div class="info-grid" id="schedule-info-grid">
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-sun"></i>
                    </div>
                    <div class="info-content">
                        <h4>Início</h4>
                        <p id="info-horario-inicio">-</p>
                    </div>
                </div>
                <div class="info-item">
                    <div class="info-icon">
                        <i class="fas fa-moon"></i>
                    </div>
                    <div class="info-content">
                        <h4>Fim</h4>
                        <p id="info-horario-fim">-</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Informações Específicas - Homem -->
        <section class="section" id="section-homem-info" style="display: none;">
            <h2 class="section-title">
                <i class="fas fa-male"></i>
                Informações Específicas - Homem
            </h2>
            <p style="color: #666; margin-top: -15px; margin-bottom: 1.5rem;">Dados específicos para homens</p>
            
            <div class="info-card">
                <div class="services-section-detailed">
                    <h5>Orientação Sexual</h5>
                    <ul class="services-list-detailed">
                        <li><i class="fas fa-check"></i> Heterossexual</li>
                        <li><i class="fas fa-check"></i> Gay</li>
                        <li><i class="fas fa-check"></i> Bissexual</li>
                        <li><i class="fas fa-check"></i> Pansexual</li>
                    </ul>
                </div>

                <div class="services-section-detailed">
                    <h5>Preferências de Atendimento</h5>
                    <ul class="services-list-detailed">
                        <li><i class="fas fa-check"></i> Atende Homens</li>
                        <li><i class="fas fa-check"></i> Atende Mulheres</li>
                        <li><i class="fas fa-check"></i> Atende Trans</li>
                        <li><i class="fas fa-check"></i> Atende Casais</li>
                    </ul>
                </div>

                <div class="services-section-detailed">
                    <h5>Especialidades</h5>
                    <ul class="services-list-detailed">
                        <li><i class="fas fa-check"></i> Massagem</li>
                        <li><i class="fas fa-check"></i> Acompanhante</li>
                        <li><i class="fas fa-check"></i> Dominação</li>
                        <li><i class="fas fa-check"></i> Submissão</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Eu Faço -->
        <section class="section" id="section-eu-faco" style="display: none;">
            <h2 class="section-title">
                <i class="fas fa-spa"></i>
                Eu Faço
            </h2>
            
            <div class="info-card">
                <div class="services-section-detailed">
                    <h5>Eu Faço</h5>
                    <ul class="services-list-detailed">
                        <li><i class="fas fa-check"></i> Venda de conteúdo</li>
                        <li><i class="fas fa-check"></i> 24 horas</li>
                        <li><i class="fas fa-check"></i> Viajo até você</li>
                        <li><i class="fas fa-check"></i> Massoterapia</li>
                        <li><i class="fas fa-check"></i> Aceito cartões</li>
                        <li><i class="fas fa-check"></i> Vou à sua casa</li>
                        <li><i class="fas fa-check"></i> Beijo na boca</li>
                        <li><i class="fas fa-check"></i> Gozo Facial</li>
                        <li><i class="fas fa-check"></i> Atendo em dupla</li>
                        <li><i class="fas fa-check"></i> Atendo Mulheres</li>
                        <li><i class="fas fa-check"></i> Casais</li>
                        <li><i class="fas fa-check"></i> Ator pornô</li>
                        <li><i class="fas fa-check"></i> Homem Trans</li>
                        <li><i class="fas fa-check"></i> BDSM</li>
                        <li><i class="fas fa-check"></i> Uso Fantasias</li>
                        <li><i class="fas fa-check"></i> Só brotheragem com masturbação</li>
                        <li><i class="fas fa-check"></i> Podo (trampling, footjob, dirty feet)</li>
                        <li><i class="fas fa-check"></i> Só brotheragem sem penetração</li>
                    </ul>
                </div>

                <div class="services-section-detailed">
                    <h5>Corpo</h5>
                    <ul class="services-list-detailed">
                        <li><i class="fas fa-check"></i> Atlético</li>
                        <li><i class="fas fa-check"></i> Musculoso</li>
                        <li><i class="fas fa-check"></i> Magro</li>
                        <li><i class="fas fa-check"></i> Gordinho</li>
                    </ul>
                </div>

                <div class="services-section-detailed">
                    <h5>Pubis</h5>
                    <ul class="services-list-detailed">
                        <li><i class="fas fa-check"></i> Peludos</li>
                        <li><i class="fas fa-check"></i> Depilado</li>
                    </ul>
                </div>

                <div class="services-section-detailed">
                    <h5>Estatura</h5>
                    <ul class="services-list-detailed">
                        <li><i class="fas fa-check"></i> Alto</li>
                        <li><i class="fas fa-check"></i> Baixo</li>
                        <li><i class="fas fa-check"></i> Mediano</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Serviços Form Section (Editable) -->
        <section class="services-form-section" style="background: white; border-radius: 15px; padding: 2rem; margin-bottom: 2rem; box-shadow: var(--shadow);">
            <h2 class="section-title">
                <i class="fas fa-check-square"></i>
                Serviços Oferecidos
            </h2>
            <p style="color: #666; margin-bottom: 1.5rem;">Selecione os serviços que você oferece</p>
            
            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Serviços Básicos</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="beijos-boca" style="margin-right: 8px;">
                        <span>Beijos na boca</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="oral-com-camisinha" style="margin-right: 8px;">
                        <span>Oral com camisinha</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="oral-sem-camisinha" style="margin-right: 8px;">
                        <span>Oral sem camisinha</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="oral-ate-final" style="margin-right: 8px;">
                        <span>Oral até o final</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="sexo-anal" style="margin-right: 8px;">
                        <span>Sexo anal</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="garganta-profunda" style="margin-right: 8px;">
                        <span>Garganta profunda</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="massagem-erotica" style="margin-right: 8px;">
                        <span>Massagem erótica</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="namoradinha" style="margin-right: 8px;">
                        <span>Namoradinha</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Serviços Especiais</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="beijo-negro" style="margin-right: 8px;">
                        <span>Beijo negro</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="beijo-branco" style="margin-right: 8px;">
                        <span>Beijo branco</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="ejaculacao-facial" style="margin-right: 8px;">
                        <span>Ejaculação facial</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="ejaculacao-corpo" style="margin-right: 8px;">
                        <span>Ejaculação corpo</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="chuva-dourada" style="margin-right: 8px;">
                        <span>Chuva dourada</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="cubana" style="margin-right: 8px;">
                        <span>Cubana</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="pse" style="margin-right: 8px;">
                        <span>PSE</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="face-fucking" style="margin-right: 8px;">
                        <span>Face fucking</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Serviços de Fetichismo e BDSM</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="fetichismo" style="margin-right: 8px;">
                        <span>Fetichismo</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="sado-submissa" style="margin-right: 8px;">
                        <span>Sado submissa</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="sado-dominadora" style="margin-right: 8px;">
                        <span>Sado dominadora</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="sado-suave" style="margin-right: 8px;">
                        <span>Sado suave</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="sado-duro" style="margin-right: 8px;">
                        <span>Sado duro</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="fisting-anal" style="margin-right: 8px;">
                        <span>Fisting Anal</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="brinquedos-sexuais" style="margin-right: 8px;">
                        <span>Brinquedos sexuais</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="lingerie" style="margin-right: 8px;">
                        <span>Lingerie</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Serviços de Atendimento em Grupo</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="atencao-casais" style="margin-right: 8px;">
                        <span>Atenção à casais</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="duplas" style="margin-right: 8px;">
                        <span>Duplas</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="trios" style="margin-right: 8px;">
                        <span>Trios</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="orgia" style="margin-right: 8px;">
                        <span>Orgia</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="festas-eventos" style="margin-right: 8px;">
                        <span>Festas e eventos</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="despedida-solteiro" style="margin-right: 8px;">
                        <span>Despedida de solteiro</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Serviços do Perfil e Estilo</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="ativo" style="margin-right: 8px;">
                        <span>Ativo</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="passivo" style="margin-right: 8px;">
                        <span>Passivo</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="versatil" style="margin-right: 8px;">
                        <span>Versátil</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="inversao-papeis" style="margin-right: 8px;">
                        <span>Inversão de papéis</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="lesbica" style="margin-right: 8px;">
                        <span>Lésbica</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="atencao-mulheres" style="margin-right: 8px;">
                        <span>Atenção à mulheres</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="experto-principiantes" style="margin-right: 8px;">
                        <span>Experto principiantes</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="atencao-deficientes-fisicos" style="margin-right: 8px;">
                        <span>Atenção à deficientes físicos</span>
                    </label>
                </div>
            </div>

            <div class="questionario-section" style="background: #f8f9fa; border: 1px solid #e9ecef; border-radius: 8px; padding: 20px; margin-bottom: 20px;">
                <h4 class="questionario-titulo" style="color: #007bff; font-size: 16px; font-weight: bold; margin-bottom: 15px; border-bottom: 2px solid #e9ecef; padding-bottom: 8px;">Serviços Extras</h4>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="fantasias-figurinos" style="margin-right: 8px;">
                        <span>Fantasias e figurinos</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="sem-limite" style="margin-right: 8px;">
                        <span>Sem limite</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="sexcam" style="margin-right: 8px;">
                        <span>Sexcam</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="atendimento-domicilio" style="margin-right: 8px;">
                        <span>Atendimento em domicílio</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="pacotes-promocionais" style="margin-right: 8px;">
                        <span>Pacotes promocionais</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer; padding: 8px 12px; background: white; border: 2px solid #e0e0e0; border-radius: 20px; transition: all 0.3s;">
                        <input type="checkbox" name="servicos" value="acompanhante-eventos" style="margin-right: 8px;">
                        <span>Acompanhante para eventos</span>
                    </label>
                </div>
            </div>
        </section>

        <!-- Submit Button -->
        <div style="text-align: center; margin: 3rem 0; padding: 2rem;">
            <button type="submit" class="btn-submit" id="btn-submit" style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 15px 30px; border: none; border-radius: 8px; font-size: 18px; font-weight: 600; cursor: pointer; transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 10px;">
                <i class="fas fa-check"></i> Criar anúncio
            </button>
        </div>
        </form>

    </main>

    <!-- Modal for Gallery -->
    <!-- Modal do Carrossel de Galeria -->
    <div id="gallery-modal" class="gallery-modal" style="display: none;">
        <div class="gallery-modal-backdrop"></div>
        <button class="gallery-modal-close" id="gallery-close-btn" aria-label="Fechar">
            <i class="fas fa-times"></i>
        </button>
        <button class="gallery-modal-prev" id="gallery-prev-btn" aria-label="Foto anterior">
            <i class="fas fa-chevron-left"></i>
        </button>
        <button class="gallery-modal-next" id="gallery-next-btn" aria-label="Próxima foto">
            <i class="fas fa-chevron-right"></i>
        </button>
        <div class="gallery-modal-content">
            <img class="gallery-modal-image" id="gallery-modal-image" src="" alt="Foto da galeria">
            <div class="gallery-modal-counter">
                <span id="gallery-current-index">1</span> / <span id="gallery-total-count">1</span>
            </div>
        </div>
    </div>

    <!-- Modal de Mensagem -->
    <div id="message-modal" class="modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3>Enviar Mensagem</h3>
                <span class="close" onclick="closeMessageModal()">&times;</span>
            </div>
            <div class="modal-body">
                <form id="message-form">
                    <div class="form-group">
                        <label for="message-name">Seu Nome:</label>
                        <input type="text" id="message-name" name="name" required>
                    </div>
                    <div class="form-group">
                        <label for="message-email">Seu E-mail:</label>
                        <input type="email" id="message-email" name="email" required>
                    </div>
                    <div class="form-group">
                        <label for="message-phone">Seu Telefone:</label>
                        <input type="tel" id="message-phone" name="phone">
                    </div>
                    <div class="form-group">
                        <label for="message-text">Mensagem:</label>
                        <textarea id="message-text" name="message" rows="5" required placeholder="Digite sua mensagem aqui..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeMessageModal()">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Enviar Mensagem</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // Inicializar Firebase
        let db = null;
        let auth = null;
        
        // Função para lidar com clique no botão voltar
        function handleBackClick(event) {
            // Se há histórico, tentar voltar
            if (window.history.length > 1) {
                const referrer = document.referrer;
                // Se veio da página de listagem, usar history.back()
                if (referrer.includes('A_02__premium_copy.html') || referrer.includes('premium_copy')) {
                    event.preventDefault();
                    window.history.back();
                    return false;
                }
            }
            // Caso contrário, deixar o link funcionar normalmente (voltar para A_02__premium_copy.html)
            return true;
        }
        
        // Função para obter parâmetros da URL
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }
        
        // Aguardar Firebase estar pronto e carregar dados
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('🚀 DOMContentLoaded - Inicializando página...');
            
            // Verificar se é uma página de visualização de perfil (tem ID ou nome na URL)
            const profileId = getUrlParameter('id');
            const profileName = getUrlParameter('name');
            const isProfilePage = profileId || profileName;
            
            if (typeof firebase !== 'undefined' && window.firebaseConfig) {
                try {
                    firebase.initializeApp(firebaseConfig);
                    db = firebase.firestore();
                    auth = firebase.auth();
                    window.firebaseStorage = firebase.storage(); // Disponibiliza storage globalmente
                    console.log('✅ Firebase inicializado com sucesso na página (incluindo Storage)');
                    
                    // Aguardar um pouco para garantir que o Firebase está totalmente pronto
                    await new Promise(resolve => setTimeout(resolve, 200));
                    
                    // Só carregar dados do perfil se for uma página de visualização (tem ID ou nome na URL)
                    if (isProfilePage) {
                        console.log('📥 Chamando loadProfileData (página de perfil)...');
                        await loadProfileData();
                    } else {
                        console.log('📝 Página de cadastro detectada - loadProfileData não será chamado');
                    }
                } catch (e) {
                    console.error('❌ Erro ao inicializar Firebase:', e);
                    // Mesmo com erro, tentar carregar dados apenas se for página de perfil
                    if (isProfilePage) {
                        setTimeout(() => loadProfileData(), 1000);
                    }
                }
            } else {
                console.error('❌ Firebase não configurado. Verifique firebase-config.js');
                // Tentar carregar dados mesmo sem Firebase apenas se for página de perfil
                if (isProfilePage) {
                    setTimeout(() => loadProfileData(), 500);
                }
            }
        });

        // Função para carregar dados do perfil do Firebase
        async function loadProfileData() {
            try {
                console.log('🔥 Iniciando loadProfileData...');
                
                const profileId = getUrlParameter('id');
                const profileName = getUrlParameter('name');
                
                console.log('📋 Parâmetros da URL:', { id: profileId, name: profileName });
                
                if (!profileId && !profileName) {
                    console.error('❌ ID ou nome do perfil não fornecido');
                    return;
                }

                // Aguardar Firebase estar inicializado (até 5 segundos)
                let attempts = 0;
                const maxAttempts = 50; // 50 tentativas x 100ms = 5 segundos
                while (!db && attempts < maxAttempts) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                    attempts++;
                    if (typeof firebase !== 'undefined' && window.firebaseConfig && !db) {
                        try {
                            firebase.initializeApp(firebaseConfig);
                            db = firebase.firestore();
                            auth = firebase.auth();
                            window.firebaseStorage = firebase.storage(); // Disponibiliza storage globalmente
                            console.log('✅ Firebase inicializado dentro de loadProfileData (incluindo Storage)');
                        } catch (e) {
                            console.warn('⚠️ Erro ao inicializar Firebase (tentativa ' + attempts + '):', e);
                        }
                    }
                }
                
                if (!db) {
                    const errorMsg = "Firebase não inicializado após " + (maxAttempts * 100) + "ms. Verifique firebase-config.js";
                    console.error('❌', errorMsg);
                    throw new Error(errorMsg);
                }
                
                console.log('✅ Firebase pronto para buscar dados');

                let anuncio = null;
                
                // Tentar buscar por ID primeiro
                if (profileId) {
                    console.log(`🔍 Buscando anúncio por ID: "${profileId}"`);
                    console.log(`📊 Tipo do ID: ${typeof profileId}, Tamanho: ${profileId.length}`);
                    
                    // Tentar coleção 'anuncios'
                    try {
                        console.log('🔎 Tentando buscar na coleção "anuncios"...');
                        const docRef = db.collection('anuncios').doc(profileId);
                        console.log('📄 Referência do documento:', docRef.path);
                        
                        const doc = await docRef.get();
                        console.log('📋 Documento retornado - exists:', doc.exists, 'id:', doc.id);
                        
                        if (doc.exists) {
                            anuncio = { id: doc.id, ...doc.data() };
                            console.log('✅ Anúncio encontrado na coleção "anuncios"!');
                            console.log('📝 Dados do anúncio:', {
                                id: anuncio.id,
                                nome: anuncio.nome,
                                email: anuncio.email,
                                status: anuncio.status,
                                plano: anuncio.plano,
                                status_pagamento: anuncio.status_pagamento,
                                tem_foto_capa: !!anuncio.foto_capa,
                                tem_foto_banner: !!anuncio.foto_banner,
                                todas_chaves: Object.keys(anuncio)
                            });
                            console.log('✅ Status do anúncio:', anuncio.status, '- Isso NÃO impede a exibição na página de perfil');
                        } else {
                            console.warn('⚠️ Documento não existe na coleção "anuncios" com ID:', profileId);
                            console.warn('🔍 Tentando verificar se o ID está correto...');
                            
                            // Listar alguns documentos para debug
                            try {
                                const sampleDocs = await db.collection('anuncios').limit(5).get();
                                console.log('📋 Primeiros 5 documentos na coleção "anuncios":', 
                                    sampleDocs.docs.map(d => ({ id: d.id, nome: d.data().nome }))
                                );
                            } catch (e) {
                                console.error('❌ Erro ao listar documentos:', e);
                            }
                        }
                    } catch (e) {
                        console.error('❌ Erro ao buscar na coleção "anuncios":', e);
                        console.error('📋 Detalhes do erro:', {
                            message: e.message,
                            code: e.code,
                            stack: e.stack
                        });
                    }
                    
                    // Se não encontrou, tentar coleção 'advertisements'
                    if (!anuncio) {
                        try {
                            console.log('🔎 Tentando buscar na coleção "advertisements"...');
                            const docRef = db.collection('advertisements').doc(profileId);
                            const doc = await docRef.get();
                            
                            if (doc.exists) {
                                anuncio = { id: doc.id, ...doc.data() };
                                console.log('✅ Anúncio encontrado na coleção "advertisements"!');
                                console.log('📝 Dados do anúncio:', {
                                    id: anuncio.id,
                                    nome: anuncio.nome,
                                    email: anuncio.email
                                });
                            } else {
                                console.warn('⚠️ Documento não existe na coleção "advertisements" com ID:', profileId);
                            }
                        } catch (e) {
                            console.error('❌ Erro ao buscar na coleção "advertisements":', e);
                        }
                    }
                    
                    // Se ainda não encontrou, tentar coleção 'advertisers' (onde pode estar o ID do usuário)
                    if (!anuncio) {
                        try {
                            console.log('🔎 Tentando buscar na coleção "advertisers"...');
                            // Primeiro tentar buscar o documento diretamente
                            const docRef = db.collection('advertisers').doc(profileId);
                            let doc = await docRef.get();
                            
                            if (!doc.exists) {
                                // Tentar buscar pelo nome "Bebel do mel"
                                console.log('🔎 Buscando por nome na coleção "advertisers"...');
                                const snapshot = await db.collection('advertisers')
                                    .where('nome', '==', profileName || 'Bebel do mel')
                                    .limit(1)
                                    .get();
                                if (!snapshot.empty) {
                                    doc = snapshot.docs[0];
                                    console.log('✅ Encontrado na coleção "advertisers" por nome:', doc.id);
                                }
                            }
                            
                            if (doc.exists) {
                                const advertiserData = doc.data();
                                console.log('📋 Dados do advertiser:', advertiserData);
                                
                                // Agora buscar o anúncio relacionado na coleção 'anuncios'
                                // O ID do anúncio pode estar no campo userId ou similar
                                if (advertiserData.userId || advertiserData.anuncioId) {
                                    const anuncioId = advertiserData.anuncioId || advertiserData.userId;
                                    console.log('🔎 Buscando anúncio relacionado com ID:', anuncioId);
                                    
                                    const anuncioDoc = await db.collection('anuncios').doc(anuncioId).get();
                                    if (anuncioDoc.exists) {
                                        anuncio = { id: anuncioDoc.id, ...anuncioDoc.data() };
                                        console.log('✅ Anúncio encontrado relacionado ao advertiser!');
                                    }
                                }
                            }
                        } catch (e) {
                            console.error('❌ Erro ao buscar na coleção "advertisers":', e);
                        }
                    }
                }
                
                // Se não encontrou por ID, tentar por nome
                if (!anuncio && profileName) {
                    console.log(`🔍 Buscando anúncio por nome: ${profileName}`);
                    
                    try {
                        // Buscar na coleção 'anuncios'
                        let snapshot = await db.collection('anuncios')
                            .where('nome', '>=', profileName)
                            .where('nome', '<=', profileName + '\uf8ff')
                            .limit(1)
                            .get();
                        
                        if (snapshot.empty) {
                            // Tentar coleção 'advertisements'
                            snapshot = await db.collection('advertisements')
                                .where('nome', '>=', profileName)
                                .where('nome', '<=', profileName + '\uf8ff')
                                .limit(1)
                                .get();
                        }
                        
                        if (!snapshot.empty) {
                            const doc = snapshot.docs[0];
                            anuncio = { id: doc.id, ...doc.data() };
                            console.log('✅ Anúncio encontrado por nome:', anuncio);
                        }
                    } catch (e) {
                        console.warn('⚠️ Erro ao buscar por nome:', e);
                    }
                }

                if (!anuncio) {
                    console.error('❌ Anúncio não encontrado no Firebase');
                    alert('Anúncio não encontrado. Verifique se o ID ou nome está correto.');
                    return;
                }

                console.log('✅ Anúncio carregado com sucesso!');
                console.log('📋 ========== DADOS COMPLETOS DO ANÚNCIO ==========');
                console.log('📋 ID do documento:', anuncio.id);
                console.log('📋 Nome:', anuncio.nome || anuncio.name || 'NÃO ENCONTRADO');
                console.log('📋 Foto Banner:', anuncio.foto_banner || anuncio.foto_banner_url || 'NÃO ENCONTRADO');
                console.log('📋 Foto Capa:', anuncio.foto_capa || anuncio.foto_capa_url || 'NÃO ENCONTRADO');
                console.log('📋 Status:', anuncio.status);
                console.log('📋 Plano:', anuncio.plano);
                console.log('📋 Todas as chaves disponíveis:', Object.keys(anuncio));
                console.log('📋 Estrutura JSON completa:', JSON.stringify(anuncio, null, 2));

                // Verificar se os elementos do DOM existem antes de atualizar
                console.log('🔍 Verificando elementos do DOM...');
                const profileNameEl = document.getElementById('profile-name');
                const profileLevelEl = document.getElementById('profile-level');
                const profileDescEl = document.getElementById('profile-description');
                
                console.log('📝 Elementos encontrados:', {
                    profileName: !!profileNameEl,
                    profileLevel: !!profileLevelEl,
                    profileDescription: !!profileDescEl
                });
                
                if (!profileNameEl || !profileLevelEl || !profileDescEl) {
                    console.warn('⚠️ Alguns elementos do DOM não foram encontrados. Aguardando...');
                    await new Promise(resolve => setTimeout(resolve, 500));
                }

                // Atualizar dados do perfil
                console.log('🔄 Chamando updateProfileData...');
                await updateProfileData(anuncio);
                console.log('✅ updateProfileData concluído');
                
                // Carregar galeria
                console.log('🖼️ Chamando loadGallery...');
                loadGallery(anuncio);
                console.log('✅ loadGallery concluído');
                
            } catch (error) {
                console.error('❌ Erro ao carregar dados do perfil:', error);
                alert('Erro ao carregar dados do anúncio. Tente novamente.');
            }
        }

        // Função para atualizar dados do perfil
        async function updateProfileData(anuncio) {
            console.log('📝 ========== INICIANDO updateProfileData ==========');
            console.log('📝 Anúncio recebido:', {
                id: anuncio.id,
                nome: anuncio.nome,
                name: anuncio.name,
                descricao: anuncio.descricao || anuncio.description || '',
                descricao_original: anuncio.descricao,
                description_original: anuncio.description,
                plano: anuncio.plano,
                nivel: anuncio.nivel,
                status: anuncio.status,
                todas_chaves: Object.keys(anuncio)
            });
            
            // Verificar campos relacionados à descrição e frase de efeito
            const camposDescricao = Object.keys(anuncio).filter(k => 
                k.toLowerCase().includes('descricao') || 
                k.toLowerCase().includes('description') ||
                k.toLowerCase().includes('bio') ||
                k.toLowerCase().includes('sobre')
            );
            const camposFraseEfeito = Object.keys(anuncio).filter(k => 
                k.toLowerCase().includes('frase') || 
                k.toLowerCase().includes('efeito') ||
                k.toLowerCase().includes('tagline') ||
                k.toLowerCase().includes('slogan')
            );
            console.log('📋 Campos relacionados à descrição encontrados:', camposDescricao);
            console.log('📋 Campos relacionados à frase de efeito encontrados:', camposFraseEfeito);
            if (camposDescricao.length > 0) {
                camposDescricao.forEach(campo => {
                    console.log(`  - ${campo}:`, anuncio[campo]?.substring(0, 100) + (anuncio[campo]?.length > 100 ? '...' : ''));
                });
            }
            if (camposFraseEfeito.length > 0) {
                camposFraseEfeito.forEach(campo => {
                    console.log(`  - ${campo}:`, anuncio[campo]);
                });
            }
            
            // IMPORTANTE: O status "aguardando_verificacao" NÃO impede a exibição na página de perfil!
            // A página de perfil deve mostrar TODOS os anúncios, independente do status.
            
            // Atualizar banner
            const profileBanner = document.getElementById('profile-banner');
            console.log('🖼️ Buscando elemento profile-banner:', profileBanner);
            
            if (profileBanner) {
                // Tentar múltiplos campos possíveis para o banner
                // Verificar também em objetos aninhados (mediaFiles, etc)
                const bannerUrl = anuncio.foto_banner_url || 
                                  anuncio.foto_banner || 
                                  anuncio.banner_url || 
                                  anuncio.bannerImage ||
                                  anuncio.mediaFiles?.foto_banner ||
                                  anuncio.mediaFiles?.foto_banner_url ||
                                  anuncio.mediaFiles?.banner ||
                                  (anuncio.mediaFiles && typeof anuncio.mediaFiles === 'object' ? 
                                    Object.values(anuncio.mediaFiles).find(v => 
                                      typeof v === 'string' && v.includes('banner')
                                    ) : null) ||
                                  null;
                
                console.log('🔍 ========== VERIFICAÇÃO DE BANNER ==========');
                console.log('🔍 Campos de banner verificados:', {
                    foto_banner_url: anuncio.foto_banner_url,
                    foto_banner: anuncio.foto_banner,
                    banner_url: anuncio.banner_url,
                    bannerImage: anuncio.bannerImage,
                    mediaFiles_foto_banner: anuncio.mediaFiles?.foto_banner,
                    mediaFiles_foto_banner_url: anuncio.mediaFiles?.foto_banner_url,
                    mediaFiles_completo: anuncio.mediaFiles,
                    resultado_encontrado: bannerUrl
                });
                console.log('🔍 Tipo do bannerUrl:', typeof bannerUrl);
                console.log('🔍 Valor do bannerUrl:', bannerUrl);
                
                if (bannerUrl) {
                    let finalBannerUrl = bannerUrl;
                    
                    // Se é uma URL completa, usar diretamente
                    if (typeof bannerUrl === 'string' && (bannerUrl.startsWith('http://') || bannerUrl.startsWith('https://'))) {
                        finalBannerUrl = bannerUrl;
                    } 
                    // Se é um caminho do Firebase Storage (gs://), converter
                    else if (typeof bannerUrl === 'string' && bannerUrl.startsWith('gs://')) {
                        const path = bannerUrl.replace('gs://copia-do-job.firebasestorage.app/', '').replace(/^\/+/, '');
                        finalBannerUrl = `https://firebasestorage.googleapis.com/v0/b/copia-do-job.firebasestorage.app/o/${encodeURIComponent(path)}?alt=media`;
                    } 
                    // Se é um nome de arquivo simples (ex: "foto_banner_1761936697295_banner-1754069202781-935737209.jpg")
                    else if (typeof bannerUrl === 'string' && !bannerUrl.includes('://')) {
                        // Usar estrutura padronizada 'advertisements/ID_ANUNCIO/' (compatibilidade com anuncios/ mantida)
                        const anuncioId = anuncio.id;
                        const path = `advertisements/${anuncioId}/${bannerUrl}`;
                        finalBannerUrl = `https://firebasestorage.googleapis.com/v0/b/copia-do-job.firebasestorage.app/o/${encodeURIComponent(path)}?alt=media`;
                        
                        // Fallback para estrutura antiga (compatibilidade)
                        const pathAntigo = `anuncios/${anuncioId}/${bannerUrl}`;
                        const urlAntiga = `https://firebasestorage.googleapis.com/v0/b/copia-do-job.firebasestorage.app/o/${encodeURIComponent(pathAntigo)}?alt=media`;
                        
                        console.log('🖼️ Tentando URL com caminho completo:', finalBannerUrl);
                        console.log('🖼️ Tentando URL na raiz:', urlRaiz);
                    }
                    
                    console.log('📝 Valor ANTES da atualização:', profileBanner.src);
                    profileBanner.src = finalBannerUrl;
                    profileBanner.style.opacity = '1'; // Mostrar imagem quando carregada
                    console.log('📝 Valor DEPOIS da atualização:', profileBanner.src);
                    console.log('✅ Banner atualizado com sucesso!');
                    
                    // Garantir que a imagem apareça mesmo se já estiver em cache
                    profileBanner.onload = function() {
                        this.style.opacity = '1';
                    };
                    
                    // Tratamento de erro na imagem
                    profileBanner.onerror = function() {
                        console.error('❌ Erro ao carregar banner:', finalBannerUrl);
                        // Tentar URLs alternativas
                        const alternativas = [
                            `https://firebasestorage.googleapis.com/v0/b/copia-do-job.firebasestorage.app/o/${encodeURIComponent(bannerUrl)}?alt=media`,
                            `https://storage.googleapis.com/copia-do-job.firebasestorage.app/${encodeURIComponent(bannerUrl)}`
                        ];
                        console.log('🔄 Tentando URLs alternativas:', alternativas);
                    };
                } else {
                    console.warn('⚠️ Nenhuma URL de banner encontrada no anúncio');
                }
            } else {
                console.error('❌ Elemento profile-banner não encontrado no DOM!');
            }
            
            // Atualizar foto de perfil
            const profileImage = document.getElementById('profile-image');
            if (profileImage) {
                const imageUrl = anuncio.foto_capa_url || anuncio.foto_capa || anuncio.fotoPerfil || anuncio.coverImage || anuncio.image;
                if (imageUrl) {
                    // Se é uma URL completa, usar diretamente
                    if (imageUrl.startsWith('http://') || imageUrl.startsWith('https://')) {
                        profileImage.src = imageUrl;
                    } else if (imageUrl.startsWith('gs://')) {
                        // Converter gs:// para URL HTTP
                        const path = imageUrl.replace('gs://copia-do-job.firebasestorage.app/', '').replace(/^\/+/, '');
                        profileImage.src = `https://firebasestorage.googleapis.com/v0/b/copia-do-job.firebasestorage.app/o/${encodeURIComponent(path)}?alt=media`;
                    } else {
                        // Assumir que é um caminho
                        const path = imageUrl.replace(/^\/+/, '');
                        profileImage.src = `https://firebasestorage.googleapis.com/v0/b/copia-do-job.firebasestorage.app/o/${encodeURIComponent(path)}?alt=media`;
                    }
                    profileImage.style.opacity = '1'; // Mostrar imagem quando carregada
                    console.log('🖼️ Foto de perfil atualizada:', profileImage.src);
                    
                    // Garantir que a imagem apareça mesmo se já estiver em cache
                    profileImage.onload = function() {
                        this.style.opacity = '1';
                    };
                }
            }
            
            // Atualizar nome - com múltiplas tentativas
            // Verificar TODOS os campos possíveis de nome
            const nomeAnuncio = anuncio.nome || 
                                anuncio.name || 
                                anuncio.nomeAnuncio ||
                                anuncio.nomeCompleto ||
                                anuncio.nome_completo ||
                                anuncio.advertiserName ||
                                anuncio.title ||
                                'Nome não disponível';
            
            console.log('✏️ ========== VERIFICAÇÃO DE NOME ==========');
            console.log('✏️ Nome a ser atualizado:', nomeAnuncio);
            console.log('📋 Campos de nome verificados (em ordem de prioridade):', {
                '1. nome (PRIORIDADE)': anuncio.nome,
                '2. name': anuncio.name,
                '3. nomeAnuncio': anuncio.nomeAnuncio,
                '4. nomeCompleto': anuncio.nomeCompleto,
                '5. nome_completo': anuncio.nome_completo,
                '6. advertiserName': anuncio.advertiserName,
                '7. title': anuncio.title,
                '✅ RESULTADO FINAL': nomeAnuncio
            });
            const camposComNome = Object.keys(anuncio).filter(k => k.toLowerCase().includes('nome'));
            console.log('📋 Todos os campos do anúncio que contêm "nome":', camposComNome);
            
            let profileName = document.getElementById('profile-name');
            if (!profileName) {
                console.warn('⚠️ Elemento profile-name não encontrado. Tentando novamente em 200ms...');
                await new Promise(resolve => setTimeout(resolve, 200));
                profileName = document.getElementById('profile-name');
            }
            
            if (profileName) {
                console.log('✅ Elemento profile-name encontrado!');
                console.log('📝 Valor ANTES:', profileName.value || profileName.textContent);
                
                // Como agora é um input, usar value
                if (profileName.tagName === 'INPUT' || profileName.tagName === 'TEXTAREA') {
                    profileName.value = nomeAnuncio;
                    console.log('📝 Valor DEPOIS (input):', profileName.value);
                    
                    // Atualizar contador de caracteres se existir
                    const nomeCharCount = document.getElementById('nome-char-count');
                    if (nomeCharCount) {
                        nomeCharCount.textContent = nomeAnuncio.length;
                    }
                
                // Verificar se realmente foi atualizado
                    if (profileName.value === nomeAnuncio) {
                    console.log('✅ Nome atualizado com sucesso!');
                    }
                } else {
                    // Fallback para elementos que não são input (caso ainda existam)
                    profileName.textContent = nomeAnuncio;
                    console.log('📝 Valor DEPOIS (textContent):', profileName.textContent);
                }
            } else {
                console.error('❌ Elemento profile-name NÃO encontrado no DOM após 2 tentativas!');
                console.error('🔍 Tentando buscar todos os elementos com "profile":', 
                    Array.from(document.querySelectorAll('[id*="profile"]')).map(el => el.id)
                );
            }

            // Atualizar nível/plano
            const profileLevel = document.getElementById('profile-level');
            if (profileLevel) {
                let levelText = 'Plus';
                const plano = (anuncio.plano || anuncio.nivel || '').toLowerCase();
                if (plano === 'camarote' || plano.includes('n1')) {
                    levelText = 'Camarote - Premium VIP';
                } else if (plano === 'especial' || plano.includes('n3')) {
                    levelText = 'Especial - Destaque';
                } else if (plano === 'plus' || plano.includes('n7')) {
                    levelText = 'Plus - Padrão';
                } else if (plano === 'basico') {
                    levelText = 'Básico';
                }
                profileLevel.textContent = levelText;
            }

            // Atualizar FRASE DE EFEITO no profile-description (textarea)
            const profileDescription = document.getElementById('profile-description');
            if (profileDescription) {
                // Buscar frase de efeito em múltiplos campos possíveis
                const fraseEfeito = anuncio['frase-efeito'] || 
                                   anuncio.frase_efeito || 
                                   anuncio.fraseEfeito ||
                                   anuncio.frase_efeito_anuncio ||
                                   anuncio.tagline ||
                                   anuncio.slogan ||
                                   '';
                
                if (fraseEfeito) {
                    profileDescription.value = fraseEfeito;
                    // Atualiza contador
                    const fraseEfeitoCharCount = document.getElementById('frase-efeito-char-count');
                    if (fraseEfeitoCharCount) {
                        fraseEfeitoCharCount.textContent = fraseEfeito.length;
                    }
                    console.log('✅ Frase de efeito atualizada no profile-description:', fraseEfeito);
                } else {
                    // Se não tiver frase de efeito, usar início da descrição (máximo 130 caracteres)
                    const descricao = anuncio.descricao || anuncio.description || '';
                    if (descricao) {
                        const preview = descricao.length > 130 ? descricao.substring(0, 130) : descricao;
                        profileDescription.value = preview;
                        // Atualiza contador
                        const fraseEfeitoCharCount = document.getElementById('frase-efeito-char-count');
                        if (fraseEfeitoCharCount) {
                            fraseEfeitoCharCount.textContent = preview.length;
                        }
                        console.log('⚠️ Frase de efeito não encontrada, usando início da descrição:', preview);
                    } else {
                        profileDescription.value = '';
                        // Atualiza contador
                        const fraseEfeitoCharCount = document.getElementById('frase-efeito-char-count');
                        if (fraseEfeitoCharCount) {
                            fraseEfeitoCharCount.textContent = '0';
                        }
                        console.warn('⚠️ Nem frase de efeito nem descrição encontradas');
                    }
                }
            }
            
            // Atualizar DESCRIÇÃO COMPLETA na seção de descrição
            const descriptionText = document.getElementById('description-text');
            if (descriptionText) {
                // Buscar descrição completa em múltiplos campos
                const descricao = anuncio.descricao || 
                                anuncio.description || 
                                anuncio.descricao_completa ||
                                anuncio.bio ||
                                anuncio.sobre_mim ||
                                'Descrição não disponível';
                
                descriptionText.textContent = descricao;
                console.log('✅ Descrição completa atualizada no description-text:', {
                    tamanho: descricao.length,
                    preview: descricao.substring(0, 100) + (descricao.length > 100 ? '...' : '')
                });
            } else {
                console.warn('⚠️ Elemento description-text não encontrado. Tentando novamente em 200ms...');
                await new Promise(resolve => setTimeout(resolve, 200));
                const descriptionTextRetry = document.getElementById('description-text');
                if (descriptionTextRetry) {
                    const descricao = anuncio.descricao || 
                                    anuncio.description || 
                                    anuncio.descricao_completa ||
                                    'Descrição não disponível';
                    descriptionTextRetry.textContent = descricao;
                    console.log('✅ Descrição completa atualizada no description-text (tentativa 2):', descricao.substring(0, 100) + '...');
                } else {
                    console.error('❌ Elemento description-text NÃO encontrado após 2 tentativas!');
                }
            }

            // Preencher campos obrigatórios
            loadBasicInfo(anuncio);
            
            // Preencher campos opcionais (só mostrar se preenchidos)
            loadOptionalInfo(anuncio);
            
            // Atualizar serviços e preços
            updateServicesAndPrices(anuncio);
            
            // Atualizar informações detalhadas
            updateDetailedInfo(anuncio);
            
            // Controlar visibilidade de seções baseado no gênero
            controlSectionVisibility(anuncio);
            
            // Atualizar serviços oferecidos
            updateServicosOferecidos(anuncio);
            
            // Atualizar botões de contato
            updateContactButtons(anuncio);
            
            // Atualizar título da página
            document.title = `Perfil - ${nomeAnuncio} | Premium VIP`;
        }
        
        // Função para controlar visibilidade de seções baseado no gênero
        function controlSectionVisibility(anuncio) {
            const genero = (anuncio.genero || anuncio.gender || '').toLowerCase();
            const categoria = (anuncio.categoria || anuncio.category || '').toLowerCase();
            
            const isHomem = genero === 'homem' || categoria === 'homem';
            const isTrans = genero === 'trans' || categoria === 'trans';
            // Verificar se é mulher acompanhante (considerando variações possíveis)
            const isMulherAcompanhante = genero === 'mulher' && 
                (categoria === 'acompanhante' || 
                 categoria === 'acompanhantes' ||
                 categoria === 'mulher' ||
                 categoria === 'feminino' ||
                 categoria === 'female' ||
                 // Se categoria estiver vazia mas genero for mulher, considerar como acompanhante
                 (categoria === '' && genero === 'mulher'));
            
            const sectionHomemInfo = document.getElementById('section-homem-info');
            const sectionEuFaco = document.getElementById('section-eu-faco');
            const servicesSection = document.getElementById('services-section');
            const physicalSection = document.getElementById('physical-section');
            
            // Mostrar apenas se for homem ou trans
            if (sectionHomemInfo) {
                sectionHomemInfo.style.display = (isHomem || isTrans) ? 'block' : 'none';
                console.log(`📋 Seção "Informações Específicas - Homem": ${(isHomem || isTrans) ? 'VISÍVEL' : 'OCULTA'}`);
            }
            
            if (sectionEuFaco) {
                sectionEuFaco.style.display = (isHomem || isTrans) ? 'block' : 'none';
                console.log(`📋 Seção "Eu Faço": ${(isHomem || isTrans) ? 'VISÍVEL' : 'OCULTA'}`);
            }
            
            // Ocultar "Preferências de Serviços" para mulher acompanhante
            if (servicesSection) {
                servicesSection.style.display = isMulherAcompanhante ? 'none' : 'block';
                console.log(`📋 Seção "Preferências de Serviços": ${isMulherAcompanhante ? 'OCULTA (mulher acompanhante)' : 'VISÍVEL'}`);
            }
            
            // Ocultar "Características Físicas" para mulher acompanhante
            if (physicalSection) {
                physicalSection.style.display = isMulherAcompanhante ? 'none' : 'block';
                console.log(`📋 Seção "Características Físicas": ${isMulherAcompanhante ? 'OCULTA (mulher acompanhante)' : 'VISÍVEL'}`);
            }
        }
        
        // Função para atualizar serviços oferecidos
        function updateServicosOferecidos(anuncio) {
            console.log('🛠️ Atualizando serviços oferecidos...');
            console.log('📋 ========== DIAGNÓSTICO COMPLETO DO ANÚNCIO ==========');
            console.log('📋 ID do anúncio:', anuncio.id);
            console.log('📋 Nome do anúncio:', anuncio.nome || anuncio.name);
            console.log('📋 TODOS os campos do anúncio:', Object.keys(anuncio));
            console.log('📋 Dados do anúncio para serviços:', {
                servicos: anuncio.servicos,
                servicos_oferecidos: anuncio.servicos_oferecidos,
                beija: anuncio.beija,
                anal: anuncio.anal,
                'oral-sem': anuncio['oral-sem'],
                'oral-com': anuncio['oral-com'],
                todas_chaves: Object.keys(anuncio).filter(k => k.toLowerCase().includes('servico') || k.toLowerCase().includes('beija') || k.toLowerCase().includes('anal') || k.toLowerCase().includes('oral'))
            });
            
            // Verificar TIPO dos campos de serviços
            if (anuncio.servicos) {
                console.log('📋 Tipo do campo "servicos":', typeof anuncio.servicos);
                console.log('📋 É array?', Array.isArray(anuncio.servicos));
                console.log('📋 Valor completo:', JSON.stringify(anuncio.servicos, null, 2));
            }
            if (anuncio.servicos_oferecidos) {
                console.log('📋 Tipo do campo "servicos_oferecidos":', typeof anuncio.servicos_oferecidos);
                console.log('📋 É array?', Array.isArray(anuncio.servicos_oferecidos));
                console.log('📋 Valor completo:', JSON.stringify(anuncio.servicos_oferecidos, null, 2));
            }
            
            // Mapeamento de valores do checkbox (como salvos no Firebase) para textos exibidos
            const checkboxToDisplayMap = {
                // MAPEAMENTO REVERSO: Nomes completos que vêm do Firebase também mapeiam para si mesmos
                // (para quando os serviços são salvos como texto completo em vez de slugs)
                'beijo branco': 'Beijo branco',
                'beijo negro': 'Beijo negro',
                'ejaculação facial': 'Ejaculação facial',
                'ejaculação corpo': 'Ejaculação corpo',
                'chuva dourada': 'Chuva dourada',
                'face fucking': 'Face fucking',
                'beijos na boca': 'Beijos na boca',
                'oral com camisinha': 'Oral com camisinha',
                'oral sem camisinha': 'Oral sem camisinha',
                'oral até o final': 'Oral até o final',
                'sexo anal': 'Sexo anal',
                'garganta profunda': 'Garganta profunda',
                'massagem erótica': 'Massagem erótica',
                // Serviços Básicos
                'beijos-boca': 'Beijos na boca',
                'beijos_na_boca': 'Beijos na boca',
                'beijo-na-boca': 'Beijos na boca',
                'oral-com-camisinha': 'Oral com camisinha',
                'oral_com_camisinha': 'Oral com camisinha',
                'oral-com': 'Oral com camisinha',
                'oral-sem-camisinha': 'Oral sem camisinha',
                'oral_sem_camisinha': 'Oral sem camisinha',
                'oral-sem': 'Oral sem camisinha',
                'oral-ate-final': 'Oral até o final',
                'oral_ate_final': 'Oral até o final',
                'sexo-anal': 'Sexo anal',
                'sexo_anal': 'Sexo anal',
                'garganta-profunda': 'Garganta profunda',
                'garganta_profunda': 'Garganta profunda',
                'massagem-erotica': 'Massagem erótica',
                'massagem_erotica': 'Massagem erótica',
                'namoradinha': 'Namoradinha',
                
                // Serviços Especiais
                'beijo-negro': 'Beijo negro',
                'beijo_negro': 'Beijo negro',
                'beijo-branco': 'Beijo branco',
                'beijo_branco': 'Beijo branco',
                'ejaculacao-facial': 'Ejaculação facial',
                'ejaculacao_facial': 'Ejaculação facial',
                'gozo-facial': 'Ejaculação facial',
                'ejaculacao-corpo': 'Ejaculação corpo',
                'ejaculacao_corpo': 'Ejaculação corpo',
                'chuva-dourada': 'Chuva dourada',
                'chuva_dourada': 'Chuva dourada',
                'cubana': 'Cubana',
                'pse': 'PSE',
                'face-fucking': 'Face fucking',
                'face_fucking': 'Face fucking',
                
                // Fetichismo e BDSM
                'fetichismo': 'Fetichismo',
                'sado-submissa': 'Sado submissa',
                'sado_submissa': 'Sado submissa',
                'sado-dominadora': 'Sado dominadora',
                'sado_dominadora': 'Sado dominadora',
                'sado-suave': 'Sado suave',
                'sado_suave': 'Sado suave',
                'sado-duro': 'Sado duro',
                'sado_duro': 'Sado duro',
                'fisting-anal': 'Fisting Anal',
                'fisting_anal': 'Fisting Anal',
                'brinquedos-sexuais': 'Brinquedos sexuais',
                'brinquedos_sexuais': 'Brinquedos sexuais',
                'lingerie': 'Lingerie',
                
                // Atendimento em Grupo
                'atencao-casais': 'Atenção à casais',
                'atencao_casais': 'Atenção à casais',
                'atende-casais': 'Atenção à casais',
                'casais': 'Atenção à casais',
                'duplas': 'Duplas',
                'trios': 'Trios',
                'orgia': 'Orgia',
                'festas-eventos': 'Festas e eventos',
                'festas_eventos': 'Festas e eventos',
                'despedida-solteiro': 'Despedida de solteiro',
                'despedida_solteiro': 'Despedida de solteiro',
                
                // Perfil e Estilo
                'ativo': 'Ativo',
                'ativa': 'Ativo', // Forma feminina no formulário
                'passivo': 'Passivo',
                'passiva': 'Passivo', // Forma feminina no formulário
                'versatil': 'Versátil',
                'versátil': 'Versátil', // Com acento
                'inversao-papeis': 'Inversão de papéis',
                'inversao_papeis': 'Inversão de papéis',
                'lesbica': 'Lésbica',
                'lésbica': 'Lésbica', // Com acento
                'atencao-mulheres': 'Atenção à mulheres',
                'atencao_mulheres': 'Atenção à mulheres',
                'atencao-mulher': 'Atenção à mulheres',
                'experto-principiantes': 'Experto principiantes',
                'experto_principiantes': 'Experto principiantes',
                'experta-principiantes': 'Experto principiantes', // Forma feminina
                'atencao-deficientes': 'Atenção à deficientes físicos',
                'atencao_deficientes': 'Atenção à deficientes físicos',
                
                // Serviços Extras
                'fantasias-figurinos': 'Fantasias e figurinos',
                'fantasias_figurinos': 'Fantasias e figurinos',
                'fantasias': 'Fantasias e figurinos',
                'sem-limite': 'Sem limite',
                'sem_limite': 'Sem limite',
                'sexcam': 'Sexcam',
                'atendimento-domicilio': 'Atendimento em domicílio',
                'atendimento_domicilio': 'Atendimento em domicílio',
                'vou-sua-casa': 'Atendimento em domicílio',
                'pacotes-promocionais': 'Pacotes promocionais',
                'pacotes_promocionais': 'Pacotes promocionais',
                'acompanhante-eventos': 'Acompanhante para eventos',
                'acompanhante_eventos': 'Acompanhante para eventos'
            };
            
            // Mapeamento de serviços do Firebase para os itens da lista
            // IMPORTANTE: USAR APENAS ARRAYS - Campos booleanos REMOVIDOS completamente
            const servicosMap = {
                // Serviços Básicos - PRIORIDADE: arrays categorizados (servicos_basicos)
                // Fallback: campos antigos apenas para compatibilidade
                'Beijos na boca': (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.includes('Beijos na boca')) ||
                                 // Fallback para anúncios antigos (campos removidos mas ainda podem existir)
                                 (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Beijos na boca')) ||
                                 (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Beijos na boca')),
                'Oral com camisinha': (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.includes('Oral com camisinha')) ||
                                      (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Oral com camisinha')) ||
                                      (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Oral com camisinha')),
                'Oral sem camisinha': (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.includes('Oral sem camisinha')) ||
                                     (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Oral sem camisinha')) ||
                                     (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Oral sem camisinha')),
                'Oral até o final': (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.includes('Oral até o final')) ||
                                   (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Oral até o final')) ||
                                   (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Oral até o final')),
                'Sexo anal': (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.includes('Sexo anal')) ||
                            (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Sexo anal')) ||
                            (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Sexo anal')),
                'Garganta profunda': (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.includes('Garganta profunda')) ||
                                     (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Garganta profunda')) ||
                                     (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Garganta profunda')),
                'Massagem erótica': (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.includes('Massagem erótica')) ||
                                   (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Massagem erótica')) ||
                                   (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Massagem erótica')),
                'Namoradinha': (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.includes('Namoradinha')) ||
                              (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Namoradinha')) ||
                              (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Namoradinha')),
                
                // Serviços Especiais - APENAS arrays
                'Beijo negro': (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.includes('Beijo negro')) ||
                              (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Beijo negro')) ||
                              (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Beijo negro')),
                'Beijo branco': (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.includes('Beijo branco')) ||
                              (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Beijo branco')) ||
                              (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Beijo branco')),
                'Ejaculação facial': (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.includes('Ejaculação facial')) ||
                                    (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Ejaculação facial')) ||
                                    (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Ejaculação facial')),
                'Ejaculação corpo': (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.includes('Ejaculação corpo')) ||
                                  (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Ejaculação corpo')) ||
                                  (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Ejaculação corpo')),
                'Chuva dourada': (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.includes('Chuva dourada')) ||
                                (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Chuva dourada')) ||
                                (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Chuva dourada')),
                'Cubana': (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.includes('Cubana')) ||
                         (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Cubana')) ||
                         (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Cubana')),
                'PSE': (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.includes('PSE')) ||
                      (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('PSE')) ||
                      (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('PSE')),
                'Face fucking': (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.includes('Face fucking')) ||
                              (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Face fucking')) ||
                              (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Face fucking')),
                
                // Fetichismo e BDSM - APENAS arrays
                'Fetichismo': (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.includes('Fetichismo')) ||
                            (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Fetichismo')) ||
                            (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Fetichismo')),
                'Sado submissa': (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.includes('Sado submissa')) ||
                               (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Sado submissa')) ||
                               (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Sado submissa')),
                'Sado dominadora': (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.includes('Sado dominadora')) ||
                                 (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Sado dominadora')) ||
                                 (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Sado dominadora')),
                'Sado suave': (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.includes('Sado suave')) ||
                            (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Sado suave')) ||
                            (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Sado suave')),
                'Sado duro': (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.includes('Sado duro')) ||
                           (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Sado duro')) ||
                           (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Sado duro')),
                'Fisting Anal': (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.includes('Fisting Anal')) ||
                              (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Fisting Anal')) ||
                              (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Fisting Anal')),
                'Brinquedos sexuais': (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.includes('Brinquedos sexuais')) ||
                                     (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Brinquedos sexuais')) ||
                                     (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Brinquedos sexuais')),
                'Lingerie': (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.includes('Lingerie')) ||
                          (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Lingerie')) ||
                          (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Lingerie')),
                
                // Atendimento em Grupo - APENAS arrays
                'Atenção à casais': (anuncio.atendimento_grupo && Array.isArray(anuncio.atendimento_grupo) && anuncio.atendimento_grupo.includes('Atenção à casais')) ||
                                  (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Atenção à casais')) ||
                                  (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Atenção à casais')),
                'Duplas': (anuncio.atendimento_grupo && Array.isArray(anuncio.atendimento_grupo) && anuncio.atendimento_grupo.includes('Duplas')) ||
                         (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Duplas')) ||
                         (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Duplas')),
                'Trios': (anuncio.atendimento_grupo && Array.isArray(anuncio.atendimento_grupo) && anuncio.atendimento_grupo.includes('Trios')) ||
                        (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Trios')) ||
                        (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Trios')),
                'Orgia': (anuncio.atendimento_grupo && Array.isArray(anuncio.atendimento_grupo) && anuncio.atendimento_grupo.includes('Orgia')) ||
                        (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Orgia')) ||
                        (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Orgia')),
                'Festas e eventos': (anuncio.atendimento_grupo && Array.isArray(anuncio.atendimento_grupo) && anuncio.atendimento_grupo.includes('Festas e eventos')) ||
                                  (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Festas e eventos')) ||
                                  (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Festas e eventos')),
                'Despedida de solteiro': (anuncio.atendimento_grupo && Array.isArray(anuncio.atendimento_grupo) && anuncio.atendimento_grupo.includes('Despedida de solteiro')) ||
                                        (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Despedida de solteiro')) ||
                                        (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Despedida de solteiro')),
                
                // Perfil e Estilo - APENAS arrays
                'Ativo': (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.includes('Ativo')) ||
                        (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Ativo')) ||
                        (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Ativo')),
                'Passivo': (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.includes('Passivo')) ||
                          (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Passivo')) ||
                          (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Passivo')),
                'Versátil': (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.includes('Versátil')) ||
                           (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Versátil')) ||
                           (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Versátil')),
                'Inversão de papéis': (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.includes('Inversão de papéis')) ||
                                     (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Inversão de papéis')) ||
                                     (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Inversão de papéis')),
                'Lésbica': (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.includes('Lésbica')) ||
                          (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Lésbica')) ||
                          (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Lésbica')),
                'Atenção à mulheres': (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.includes('Atenção à mulheres')) ||
                                     (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Atenção à mulheres')) ||
                                     (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Atenção à mulheres')),
                'Experto principiantes': (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.includes('Experto principiantes')) ||
                                        (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Experto principiantes')) ||
                                        (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Experto principiantes')),
                'Atenção à deficientes físicos': (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.includes('Atenção à deficientes físicos')) ||
                                                 (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Atenção à deficientes físicos')) ||
                                                 (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Atenção à deficientes físicos')),
                
                // Serviços Extras - APENAS arrays
                'Fantasias e figurinos': (anuncio.servicos_extras && Array.isArray(anuncio.servicos_extras) && anuncio.servicos_extras.includes('Fantasias e figurinos')) ||
                                        (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Fantasias e figurinos')) ||
                                        (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Fantasias e figurinos')),
                'Sem limite': (anuncio.servicos_extras && Array.isArray(anuncio.servicos_extras) && anuncio.servicos_extras.includes('Sem limite')) ||
                            (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Sem limite')) ||
                            (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Sem limite')),
                'Sexcam': (anuncio.servicos_extras && Array.isArray(anuncio.servicos_extras) && anuncio.servicos_extras.includes('Sexcam')) ||
                         (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Sexcam')) ||
                         (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Sexcam')),
                'Atendimento em domicílio': (anuncio.servicos_extras && Array.isArray(anuncio.servicos_extras) && anuncio.servicos_extras.includes('Atendimento em domicílio')) ||
                                           (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Atendimento em domicílio')) ||
                                           (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Atendimento em domicílio')),
                'Pacotes promocionais': (anuncio.servicos_extras && Array.isArray(anuncio.servicos_extras) && anuncio.servicos_extras.includes('Pacotes promocionais')) ||
                                       (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Pacotes promocionais')) ||
                                       (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Pacotes promocionais')),
                'Acompanhante para eventos': (anuncio.servicos_extras && Array.isArray(anuncio.servicos_extras) && anuncio.servicos_extras.includes('Acompanhante para eventos')) ||
                                            (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.includes('Acompanhante para eventos')) ||
                                            (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.includes('Acompanhante para eventos'))
            };
            
            // Verificar se há array de serviços no Firebase - buscar em múltiplos campos
            // PRIORIDADE: Combinar todos os arrays categorizados primeiro, depois arrays gerais
            let servicosArray = [];
            
            // MÉTODO 1: Combinar arrays categorizados (mais confiável - salva pelo formulário atualizado)
            const categorias = [
                anuncio.servicos_basicos,
                anuncio.servicos_especiais,
                anuncio.fetichismo_bdsm,
                anuncio.atendimento_grupo,
                anuncio.perfil_estilo,
                anuncio.servicos_extras
            ];
            
            const servicosDeCategorias = [];
            const nomesCategorias = ['servicos_basicos', 'servicos_especiais', 'fetichismo_bdsm', 'atendimento_grupo', 'perfil_estilo', 'servicos_extras'];
            
            categorias.forEach((cat, index) => {
                if (cat && Array.isArray(cat) && cat.length > 0) {
                    console.log(`📦 Categoria "${nomesCategorias[index]}" encontrada com ${cat.length} itens:`, cat);
                    servicosDeCategorias.push(...cat);
                }
            });
            
            if (servicosDeCategorias.length > 0) {
                servicosArray = servicosDeCategorias;
                console.log('📦 Array de serviços combinado das categorias (MÉTODO 1):', servicosArray);
                console.log(`📦 Total: ${servicosArray.length} serviços encontrados nas categorias`);
            }
            // MÉTODO 2: Fallback para anúncios antigos (campos removidos, mas ainda podem existir em dados antigos)
            // NOTA: servicos e servicos_oferecidos foram removidos, mas mantemos como fallback para compatibilidade
            else if (anuncio.servicos && Array.isArray(anuncio.servicos) && anuncio.servicos.length > 0) {
                servicosArray = anuncio.servicos;
                console.log('⚠️ Array de serviços encontrado em campo antigo (servicos - FALLBACK para anúncios antigos):', servicosArray);
            } 
            else if (anuncio.servicos_oferecidos && Array.isArray(anuncio.servicos_oferecidos) && anuncio.servicos_oferecidos.length > 0) {
                servicosArray = anuncio.servicos_oferecidos;
                console.log('⚠️ Array de serviços encontrado em campo antigo (servicos_oferecidos - FALLBACK para anúncios antigos):', servicosArray);
            } 
            else if (anuncio.servicos && typeof anuncio.servicos === 'string') {
                // Se for string, tentar converter para array
                try {
                    servicosArray = JSON.parse(anuncio.servicos);
                    console.log('📦 Array de serviços convertido de string:', servicosArray);
                } catch (e) {
                    servicosArray = anuncio.servicos.split(',').map(s => s.trim());
                    console.log('📦 Array de serviços convertido de string (vírgula):', servicosArray);
                }
            }
            
            // SEMPRE filtrar valores inválidos
            if (servicosArray.length > 0) {
                const servicosValidos = servicosArray.filter(s => {
                    const valor = String(s).toLowerCase().trim();
                    return valor && valor !== 'on' && valor !== 'null' && valor !== 'undefined' && valor !== '';
                });
                
                if (servicosValidos.length !== servicosArray.length) {
                    console.warn(`⚠️ Array contém ${servicosArray.length - servicosValidos.length} valores inválidos ("on", null, etc). Filtrando...`);
                    console.log('📦 Array original:', servicosArray);
                    console.log('📦 Array filtrado:', servicosValidos);
                }
                
                servicosArray = servicosValidos;
                console.log(`✅ Array final de serviços válidos: ${servicosArray.length} itens`, servicosArray);
            }
            
            // Se após filtrar não houver serviços válidos, avisar
            if (servicosArray.length === 0 && (anuncio.servicos || anuncio.servicos_oferecidos)) {
                console.warn('⚠️⚠️⚠️ ATENÇÃO: Array de serviços encontrado no Firebase, mas todos os valores são inválidos ("on", null, etc).');
                console.warn('⚠️ Isso indica que o anúncio foi criado com a versão antiga do formulário que salvava "on" em vez dos valores dos checkboxes.');
                console.warn('⚠️ Será necessário recriar o anúncio ou atualizar manualmente os valores no Firebase.');
            }
            
            // Log detalhado de todos os campos que podem conter serviços
            const camposComServicos = Object.keys(anuncio).filter(k => 
                k.toLowerCase().includes('servico') || 
                k.toLowerCase().includes('service')
            );
            console.log('📋 Todos os campos relacionados a serviços encontrados:', camposComServicos);
            camposComServicos.forEach(campo => {
                console.log(`  - ${campo}:`, anuncio[campo], `(tipo: ${typeof anuncio[campo]}, é array: ${Array.isArray(anuncio[campo])})`);
            });
            
            // Converter valores do array para textos de exibição
            // NOVO: Os serviços agora são salvos como nomes completos em português
            // Mas precisamos manter compatibilidade com dados antigos que usam slugs
            const servicosArrayNormalized = servicosArray.map(s => {
                const valorOriginal = String(s).trim();
                const checkboxValue = valorOriginal.toLowerCase().trim();
                console.log(`🔍 Processando serviço do Firebase: "${valorOriginal}" (normalizado: "${checkboxValue}")`);
                
                // PRIMEIRO: Verificar se já é um nome completo em português (novo formato)
                // Lista de todos os nomes esperados em português
                const nomesPortuguesEsperados = [
                    'Beijos na boca', 'Oral com camisinha', 'Oral sem camisinha', 'Oral até o final',
                    'Sexo anal', 'Garganta profunda', 'Massagem erótica', 'Namoradinha',
                    'Beijo negro', 'Beijo branco', 'Ejaculação facial', 'Ejaculação corpo',
                    'Chuva dourada', 'Cubana', 'PSE', 'Face fucking',
                    'Fetichismo', 'Sado submissa', 'Sado dominadora', 'Sado suave',
                    'Sado duro', 'Fisting Anal', 'Brinquedos sexuais', 'Lingerie',
                    'Atenção à casais', 'Duplas', 'Trios', 'Orgia',
                    'Festas e eventos', 'Despedida de solteiro',
                    'Ativo', 'Passivo', 'Versátil', 'Inversão de papéis',
                    'Lésbica', 'Atenção à mulheres', 'Experto principiantes', 'Atenção à deficientes físicos',
                    'Fantasias e figurinos', 'Sem limite', 'Sexcam',
                    'Atendimento em domicílio', 'Pacotes promocionais', 'Acompanhante para eventos'
                ];
                
                // Verificar se o valor já é um nome completo (comparação case-insensitive)
                const nomeCompletoEncontrado = nomesPortuguesEsperados.find(nome => 
                    nome.toLowerCase() === valorOriginal.toLowerCase()
                );
                
                if (nomeCompletoEncontrado) {
                    console.log(`  ✅ Já é nome completo: "${valorOriginal}" → "${nomeCompletoEncontrado}"`);
                    return nomeCompletoEncontrado; // Retornar o nome padronizado
                }
                
                // SEGUNDO: Se não for nome completo, tratar como slug antigo e converter
                const found = Object.keys(checkboxToDisplayMap).find(key => {
                    const keyNormalized = key.toLowerCase().trim();
                    const checkboxNormalized = checkboxValue;
                    
                    // Comparação exata
                    if (keyNormalized === checkboxNormalized) return true;
                    
                    // Comparação sem hífen/underscore
                    if (keyNormalized.replace(/[-_]/g, '') === checkboxNormalized.replace(/[-_]/g, '')) return true;
                    
                    // Comparação parcial
                    if (keyNormalized.includes(checkboxNormalized) || checkboxNormalized.includes(keyNormalized)) return true;
                    
                    return false;
                });
                
                if (found) {
                    console.log(`  ✅ Mapeado (slug antigo): "${valorOriginal}" → "${checkboxToDisplayMap[found]}"`);
                    return checkboxToDisplayMap[found];
                }
                
                // Se não encontrar, tentar buscar valores similares
                const similarKeys = Object.keys(checkboxToDisplayMap).filter(key => {
                    const keyNormalized = key.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^\w]/g, '');
                    const checkboxNormalized = checkboxValue.normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^\w]/g, '');
                    return keyNormalized.includes(checkboxNormalized) || checkboxNormalized.includes(keyNormalized);
                });
                
                if (similarKeys.length > 0) {
                    console.log(`  ✅ Mapeado (similar): "${valorOriginal}" → "${checkboxToDisplayMap[similarKeys[0]]}"`);
                    return checkboxToDisplayMap[similarKeys[0]];
                }
                
                // Se não encontrar, retornar o valor original (pode ser um nome já em português que não está na lista)
                console.log(`  ⚠️ Não mapeado, usando valor original: "${valorOriginal}"`);
                return valorOriginal;
            });
            
            console.log('📦 Serviços normalizados do array:', servicosArrayNormalized);
            console.log(`📊 Total de serviços encontrados: ${servicosArray.length}`);
            
            // Mostrar TODOS os serviços do array com seus mapeamentos
            if (servicosArray.length > 0) {
                console.log('\n📋 ========== MAPEAMENTO DE TODOS OS SERVIÇOS ==========');
                servicosArray.forEach((servicoOriginal, idx) => {
                    const checkboxValue = String(servicoOriginal).toLowerCase().trim();
                    const mapeado = checkboxToDisplayMap[checkboxValue] || 
                                   Object.keys(checkboxToDisplayMap).find(k => {
                                       const kNorm = k.toLowerCase().trim();
                                       return kNorm === checkboxValue || 
                                              kNorm.replace(/[-_]/g, '') === checkboxValue.replace(/[-_]/g, '');
                                   });
                    const resultado = mapeado ? checkboxToDisplayMap[mapeado] : '❌ NÃO MAPEADO';
                    console.log(`  ${idx + 1}. "${servicoOriginal}" → "${resultado}"`);
                });
                console.log('=====================================================\n');
            }
            
            // Função para atualizar uma lista de serviços
            function updateServiceList(sectionTitle, serviceMap) {
                console.log(`\n🔍 Processando seção: "${sectionTitle}"`);
                const sections = document.querySelectorAll('.services-section-detailed');
                let sectionFound = false;
                sections.forEach(section => {
                    const title = section.querySelector('h5');
                    if (title && title.textContent.trim() === sectionTitle) {
                        sectionFound = true;
                        console.log(`  ✅ Seção encontrada: "${sectionTitle}"`);
                        const list = section.querySelector('.services-list-detailed');
                        if (list) {
                            const items = list.querySelectorAll('li');
                            console.log(`  📋 Total de itens na lista: ${items.length}`);
                            items.forEach((li, index) => {
                                // Extrair texto do serviço (clonando e removendo ícone)
                                const clone = li.cloneNode(true);
                                const icons = clone.querySelectorAll('i');
                                icons.forEach(icon => icon.remove());
                                let text = clone.textContent.trim();
                                // Remover qualquer símbolo no início
                                text = text.replace(/^[✓✔×✕•]\s*/, '').trim();
                                const checkIcon = li.querySelector('i');
                                
                                // Debug: mostrar item sendo processado (apenas primeiros 3 para não poluir)
                                if (index < 3) {
                                    console.log(`    🔍 Item ${index + 1}: "${text}"`);
                                }
                                
                                // Verificar se o serviço está ativo
                                let isActive = false;
                                let activeSource = '';
                                
                                // PRIMEIRO: Verificar no array de serviços do Firebase (PRIORITÁRIO - funciona para TODOS os serviços)
                                // Isso é CRÍTICO porque TODOS os serviços (básicos e especiais) vêm do array quando marcados no formulário
                                if (servicosArray.length > 0) {
                                    const normalizedText = text.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^\w\s]/g, '').replace(/\s+/g, '');
                                    
                                    const encontradoNoArray = servicosArray.some(s => {
                                        const servicoFirebase = String(s).trim();
                                        
                                        // PRIMEIRO: Comparação direta exata (case-insensitive)
                                        if (servicoFirebase.toLowerCase() === text.toLowerCase()) {
                                            console.log(`    ✅ Match DIRETO EXATO: "${servicoFirebase}" === "${text}"`);
                                            return true;
                                        }
                                        
                                        // SEGUNDO: Verificar se o valor do Firebase mapeia para este texto via checkboxToDisplayMap
                                        const servicoLower = servicoFirebase.toLowerCase();
                                        const mapeado = checkboxToDisplayMap[servicoLower];
                                        if (mapeado && mapeado.toLowerCase() === text.toLowerCase()) {
                                            console.log(`    ✅ Match por mapeamento: "${servicoFirebase}" → "${mapeado}" === "${text}"`);
                                            return true;
                                        }
                                        
                                        // TERCEIRO: Se o valor do Firebase é um slug (como "beijo-branco"), verificar mapeamento
                                        const mapeadoSlug = checkboxToDisplayMap[servicoLower];
                                        if (mapeadoSlug && mapeadoSlug.toLowerCase() === text.toLowerCase()) {
                                            console.log(`    ✅ Match por slug mapeado: "${servicoFirebase}" → "${mapeadoSlug}" === "${text}"`);
                                            return true;
                                        }
                                        
                                        // QUARTO: Verificar mapeamento reverso (texto → slug)
                                        const valoresMapeados = Object.keys(checkboxToDisplayMap).filter(key => 
                                            checkboxToDisplayMap[key] && checkboxToDisplayMap[key].toLowerCase() === text.toLowerCase()
                                        );
                                        
                                        if (valoresMapeados.length > 0 && valoresMapeados.some(slug => slug === servicoLower)) {
                                            console.log(`    ✅ Match por mapeamento reverso: "${servicoFirebase}" → "${text}"`);
                                            return true;
                                        }
                                        
                                        // QUINTO: Comparação normalizada (sem acentos e espaços)
                                        const normalizedS = servicoFirebase.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^\w\s]/g, '').replace(/\s+/g, '');
                                        const match = normalizedS === normalizedText || 
                                               normalizedS.includes(normalizedText) || 
                                               normalizedText.includes(normalizedS);
                                        if (match) {
                                            console.log(`    ✅ Match por normalização: "${servicoFirebase}" (${normalizedS}) === "${text}" (${normalizedText})`);
                                        }
                                        return match;
                                    });
                                    
                                    if (encontradoNoArray) {
                                        isActive = true;
                                        activeSource = 'servicosArray (original)';
                                        if (index < 5) {
                                            console.log(`  ✅ "${text}": ATIVO encontrado em servicosArray`);
                                        }
                                    }
                                }
                                
                                // SEGUNDO: Verificar no array de serviços normalizados do Firebase
                                if (!isActive && servicosArrayNormalized.length > 0) {
                                    const normalizedText = text.toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^\w]/g, '').replace(/\s+/g, '');
                                    const encontradoNormalizado = servicosArrayNormalized.some(s => {
                                        const normalizedS = String(s).toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/[^\w]/g, '').replace(/\s+/g, '');
                                        
                                        // Comparação exata
                                        if (normalizedS === normalizedText) {
                                            console.log(`    ✅ Match EXATO: "${s}" === "${text}"`);
                                            return true;
                                        }
                                        
                                        // Comparação parcial (mais flexível)
                                        const match = normalizedS.includes(normalizedText) || normalizedText.includes(normalizedS);
                                        if (match) {
                                            console.log(`    ✅ Match PARCIAL: "${s}" (${normalizedS}) contém "${text}" (${normalizedText})`);
                                        }
                                        return match;
                                    });
                                    if (encontradoNormalizado) {
                                        isActive = true;
                                        activeSource = 'servicosArray (normalizado)';
                                    }
                                }
                                
                                // TERCEIRO: Verificar no mapeamento fornecido (APENAS ARRAYS - campos booleanos REMOVIDOS)
                                // IMPORTANTE: serviceMap retorna true/false/undefined baseado em arrays
                                // Só marcar como ativo se o valor for EXATAMENTE true
                                if (!isActive && serviceMap && text in serviceMap) {
                                    const value = serviceMap[text];
                                    // Verificar se é verdadeiramente true (não apenas truthy)
                                    if (value === true) {
                                        isActive = true;
                                        activeSource = 'servicosMap (array)';
                                        console.log(`    ✅ "${text}": Encontrado no serviceMap como true`);
                                    } else {
                                        console.log(`    ❌ "${text}": serviceMap retornou ${value} (não true)`);
                                    }
                                }
                                // QUARTO: Verificar no mapeamento global de serviços (APENAS ARRAYS)
                                if (!isActive && servicosMap && text in servicosMap) {
                                    const value = servicosMap[text];
                                    // Verificar se é verdadeiramente true (não apenas truthy)
                                    if (value === true) {
                                        isActive = true;
                                        activeSource = 'servicosMap (array)';
                                        console.log(`    ✅ "${text}": Encontrado no servicosMap como true`);
                                    } else {
                                        console.log(`    ❌ "${text}": servicosMap retornou ${value} (não true)`);
                                    }
                                }
                                
                                // Atualizar ícone e estilo
                                if (checkIcon) {
                                    // IMPORTANTE: Só marcar como ativo se isActive for verdadeiro
                                    if (isActive) {
                                        checkIcon.className = 'fas fa-check';
                                        checkIcon.style.color = '#28a745';
                                        li.style.opacity = '1';
                                        li.style.fontWeight = '500';
                                        checkIcon.style.display = 'inline-block'; // Garantir que está visível
                                        if (index < 5) {
                                            console.log(`  ✅ "${text}": ATIVO (${activeSource})`);
                                        }
                                    } else {
                                        // Verificar se há dados no Firebase para decidir como mostrar
                                        const temDadosFirebase = servicosArray.length > 0 || 
                                                               servicosArrayNormalized.length > 0 ||
                                                               (anuncio.servicos_basicos && Array.isArray(anuncio.servicos_basicos) && anuncio.servicos_basicos.length > 0) ||
                                                               (anuncio.servicos_especiais && Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.length > 0) ||
                                                               (anuncio.fetichismo_bdsm && Array.isArray(anuncio.fetichismo_bdsm) && anuncio.fetichismo_bdsm.length > 0) ||
                                                               (anuncio.atendimento_grupo && Array.isArray(anuncio.atendimento_grupo) && anuncio.atendimento_grupo.length > 0) ||
                                                               (anuncio.perfil_estilo && Array.isArray(anuncio.perfil_estilo) && anuncio.perfil_estilo.length > 0) ||
                                                               (anuncio.servicos_extras && Array.isArray(anuncio.servicos_extras) && anuncio.servicos_extras.length > 0);
                                        
                                        if (temDadosFirebase) {
                                            // Se há dados mas este serviço não está ativo, marcar como inativo
                                            checkIcon.className = 'fas fa-times';
                                            checkIcon.style.color = '#dc3545';
                                            li.style.opacity = '0.4';
                                            li.style.fontWeight = '300';
                                            checkIcon.style.display = 'inline-block';
                                            if (index < 5) {
                                                console.log(`  ❌ "${text}": INATIVO (não encontrado nos arrays)`);
                                            }
                                        } else {
                                            // Se não há dados no Firebase, remover ícone completamente (não marcar como ativo!)
                                            checkIcon.style.display = 'none';
                                            li.style.opacity = '0.6'; // Levemente transparente
                                            if (index < 5) {
                                                console.log(`  ⚪ "${text}": SEM DADOS (ícone removido - arrays vazios)`);
                                            }
                                        }
                                    }
                                }
                            });
                            
                            // Resumo da seção
                            const ativosSection = list.querySelectorAll('li .fa-check').length;
                            const inativosSection = list.querySelectorAll('li .fa-times').length;
                            console.log(`  📊 Seção "${sectionTitle}": ${ativosSection} ativos, ${inativosSection} inativos`);
                        }
                    }
                });
                
                if (!sectionFound) {
                    console.warn(`  ⚠️ Seção "${sectionTitle}" NÃO encontrada no DOM!`);
                }
            }
            
            // DEBUG: Verificar se servicos_especiais está sendo carregado corretamente
            console.log('\n🔍 DEBUG - Verificando servicos_especiais do Firebase:');
            console.log('  - anuncio.servicos_especiais:', anuncio.servicos_especiais);
            console.log('  - Tipo:', typeof anuncio.servicos_especiais, 'É Array?', Array.isArray(anuncio.servicos_especiais));
            if (Array.isArray(anuncio.servicos_especiais) && anuncio.servicos_especiais.length > 0) {
                console.log('  - Itens no array:', anuncio.servicos_especiais);
                console.log('  - "Beijo branco" está incluído?', anuncio.servicos_especiais.includes('Beijo branco'));
            }
            console.log('  - servicosArray final:', servicosArray);
            console.log('  - servicosArrayNormalized:', servicosArrayNormalized);
            console.log('  - servicosMap["Beijo branco"]:', servicosMap['Beijo branco']);
            
            // Atualizar todas as listas principais
            updateServiceList('Serviços Básicos', servicosMap);
            updateServiceList('Serviços Especiais', servicosMap);
            updateServiceList('Serviços de Fetichismo e BDSM', servicosMap);
            updateServiceList('Serviços de Atendimento em Grupo', servicosMap);
            updateServiceList('Serviços do Perfil e Estilo', servicosMap);
            updateServiceList('Serviços Extras', servicosMap);
            
            // Atualizar seções específicas de Homem/Trans
            if (anuncio.genero === 'homem' || anuncio.genero === 'trans') {
                // Orientações Sexuais
                const orientacaoMap = {
                    'Heterossexual': anuncio.orientacao_sexual === 'heterossexual' || anuncio.orientacao === 'heterossexual',
                    'Gay': anuncio.orientacao_sexual === 'gay' || anuncio.orientacao === 'gay',
                    'Bissexual': anuncio.orientacao_sexual === 'bissexual' || anuncio.orientacao === 'bissexual',
                    'Pansexual': anuncio.orientacao_sexual === 'pansexual' || anuncio.orientacao === 'pansexual'
                };
                
                updateServiceList('Orientações Sexuais', orientacaoMap);
                
                // Preferências de Atendimento
                const preferenciasMap = {
                    'Atende Homens': anuncio.atende_homens || (anuncio.genero === 'homem'),
                    'Atende Mulheres': anuncio.atende_mulheres || (anuncio.genero === 'mulher'),
                    'Atende Trans': anuncio.atende_trans || (anuncio.genero === 'trans'),
                    'Atende Casais': anuncio.atende_casais || anuncio.casais
                };
                
                updateServiceList('Preferências de Atendimento', preferenciasMap);
                
                // Especialidades
                const especialidadesMap = {
                    'Massagem': anuncio.massagem || anuncio.especialidade_massagem,
                    'Acompanhante': anuncio.acompanhante || anuncio.especialidade_acompanhante,
                    'Dominação': anuncio.dominacao || anuncio.especialidade_dominacao,
                    'Submissão': anuncio.submissao || anuncio.especialidade_submissao
                };
                
                updateServiceList('Especialidades', especialidadesMap);
                
                // Eu Faço
                const euFacoMap = {
                    'Venda de conteúdo': anuncio.venda_conteudo || anuncio['venda-conteudo'],
                    '24 horas': anuncio['24h'] || anuncio.atende_24h || (anuncio.plano === 'camarote' || anuncio.plano === 'vip'),
                    'Viajo até você': anuncio.viajo_ate_voce || anuncio['viajo-ate-voce'],
                    'Massoterapia': anuncio.massoterapia,
                    'Aceito cartões': anuncio.aceita_cartoes || anuncio['aceita-cartoes'] || anuncio.pagamento_credito !== false,
                    'Vou à sua casa': anuncio.vou_sua_casa || anuncio['vou-sua-casa'] || anuncio.atendimento_domicilio,
                    'Beijo na boca': anuncio.beija || anuncio.beijo_boca,
                    'Gozo Facial': anuncio.gozo_facial || anuncio.ejaculacao_facial,
                    'Atendo em dupla': anuncio.atende_dupla || anuncio.duplas,
                    'Atendo Mulheres': anuncio.atende_mulheres,
                    'Casais': anuncio.atende_casais || anuncio.casais,
                    'Ator pornô': anuncio.ator_porno || anuncio['ator-porno'],
                    'Homem Trans': anuncio.genero === 'trans',
                    'BDSM': anuncio.bdsm || anuncio.fetichismo,
                    'Uso Fantasias': anuncio.fantasias || anuncio.usa_fantasias,
                    'Só brotheragem com masturbação': anuncio.brotheragem_com_masturbacao || anuncio['brotheragem-com-masturbacao'],
                    'Podo (trampling, footjob, dirty feet)': anuncio.podo || anuncio['podo-trampling'],
                    'Só brotheragem sem penetração': anuncio.brotheragem_sem_penetracao || anuncio['brotheragem-sem-penetracao']
                };
                
                updateServiceList('Eu Faço', euFacoMap);
                
                // Corpo
                const corpoMap = {
                    'Atlético': anuncio.corpo === 'atletico' || anuncio.tipo_corpo === 'atletico',
                    'Musculoso': anuncio.corpo === 'musculoso' || anuncio.tipo_corpo === 'musculoso',
                    'Magro': anuncio.corpo === 'magro' || anuncio.tipo_corpo === 'magro',
                    'Gordinho': anuncio.corpo === 'gordinho' || anuncio.tipo_corpo === 'gordinho'
                };
                
                updateServiceList('Corpo', corpoMap);
                
                // Pubis
                const pubisMap = {
                    'Peludos': anuncio.pubis === 'peludo' || anuncio.depilacao_pubis === false,
                    'Depilado': anuncio.pubis === 'depilado' || anuncio.depilacao_pubis === true
                };
                
                updateServiceList('Pubis', pubisMap);
                
                // Estatura
                const estaturaMap = {
                    'Alto': anuncio.estatura === 'alto' || (anuncio.altura && parseFloat(anuncio.altura) >= 1.75),
                    'Baixo': anuncio.estatura === 'baixo' || (anuncio.altura && parseFloat(anuncio.altura) < 1.65),
                    'Mediano': anuncio.estatura === 'mediano' || (anuncio.altura && parseFloat(anuncio.altura) >= 1.65 && parseFloat(anuncio.altura) < 1.75)
                };
                
                updateServiceList('Estatura', estaturaMap);
            }
            
            // Resumo final - contar quantos serviços foram ativados
            const totalServicos = document.querySelectorAll('.services-list-detailed li').length;
            const servicosAtivos = document.querySelectorAll('.services-list-detailed li .fa-check').length;
            const servicosInativos = document.querySelectorAll('.services-list-detailed li .fa-times').length;
            
            console.log('✅ Serviços oferecidos atualizados');
            console.log(`📊 Resumo: ${servicosAtivos} ativos, ${servicosInativos} inativos de ${totalServicos} total`);
            
            // Aviso se encontrar array mas não ativar nada
            if (servicosArray.length > 0 && servicosAtivos === 0) {
                console.error('❌ AVISO: Array de serviços encontrado mas nenhum serviço foi ativado!');
                console.error('   Array original:', servicosArray);
                console.error('   Array normalizado:', servicosArrayNormalized);
                console.error('   Verifique se os valores do array correspondem aos textos na página.');
                
                // Mostrar tentativas de match para debug
                console.log('🔍 Tentando encontrar matches manualmente...');
                servicosArray.forEach(valorOriginal => {
                    const checkboxValue = String(valorOriginal).toLowerCase().trim();
                    const mapeado = checkboxToDisplayMap[checkboxValue] || 
                                   Object.keys(checkboxToDisplayMap).find(k => 
                                       k.toLowerCase() === checkboxValue || 
                                       k.toLowerCase().replace(/[-_]/g, '') === checkboxValue.replace(/[-_]/g, '')
                                   );
                    console.log(`  - "${valorOriginal}" → "${mapeado || 'NÃO ENCONTRADO NO MAPEAMENTO'}"`);
                });
            }
            
            // Aviso se não encontrar array de serviços
            if (servicosArray.length === 0) {
                console.warn('⚠️ AVISO: Nenhum array de serviços encontrado no Firebase!');
                console.warn('   Isso pode significar que:');
                console.warn('   1. Os serviços não foram salvos no formulário de cadastro');
                console.warn('   2. Os serviços estão salvos em um campo com nome diferente');
                console.warn('   3. Este anúncio foi criado antes da implementação do campo de serviços');
                console.warn('   Campos verificados: servicos, servicos_oferecidos');
            }
        }
        
        // Função para atualizar informações detalhadas
        function updateDetailedInfo(anuncio) {
            console.log('📋 Atualizando informações detalhadas...');
            
            // Função auxiliar para encontrar e atualizar um campo
            function updateField(labelText, value) {
                const items = document.querySelectorAll('.info-item-detailed');
                items.forEach(item => {
                    const label = item.querySelector('.info-label-detailed');
                    const valueSpan = item.querySelector('.info-value-detailed');
                    if (label && label.textContent.trim().startsWith(labelText) && valueSpan) {
                        valueSpan.textContent = value || 'Não informado';
                        console.log(`✅ ${labelText}: ${value}`);
                        return true;
                    }
                });
                return false;
            }
            
            // Atualizar informações pessoais
            if (anuncio.idade) {
                updateField('Idade:', anuncio.idade);
            }
            
            if (anuncio.altura) {
                updateField('Altura:', anuncio.altura);
            }
            
            if (anuncio.peso) {
                updateField('Peso:', anuncio.peso);
            }
            
            // Serviços - Buscar em múltiplos formatos e campos possíveis
            console.log('🔍 Buscando campos de serviços...');
            console.log('  - oral-sem:', anuncio['oral-sem'], 'oral_sem:', anuncio.oral_sem, 'oralSem:', anuncio.oralSem);
            console.log('  - beija:', anuncio.beija);
            console.log('  - anal:', anuncio.anal);
            console.log('  - mora-so:', anuncio['mora-so'], 'mora_so:', anuncio.mora_so);
            
            // Faz Oral sem
            const oralSem = anuncio['oral-sem'] || 
                           anuncio.oral_sem || 
                           anuncio.oralSem || 
                           anuncio['oral-sem-camisinha'] ||
                           anuncio.oral_sem_camisinha ||
                           '';
            let oralSemText = 'Não informado';
            if (oralSem) {
                if (oralSem === 'sim' || oralSem === 'Sim' || oralSem === true || oralSem === 'yes' || oralSem === 1) {
                    oralSemText = 'Sim';
                } else if (oralSem === 'nao' || oralSem === 'Não' || oralSem === false || oralSem === 'no' || oralSem === 0) {
                    oralSemText = 'Não';
                } else if (oralSem === 'talvez') {
                    oralSemText = 'Talvez';
                } else {
                    oralSemText = String(oralSem);
                }
            }
            updateField('Faz Oral sem:', oralSemText);
            console.log(`✅ Faz Oral sem: ${oralSemText} (valor original: ${oralSem})`);
            
            // Beija
            const beija = anuncio.beija || 
                         anuncio.beijo || 
                         anuncio.beijos ||
                         '';
            let beijaText = 'Não informado';
            if (beija) {
                if (beija === 'sim' || beija === 'Sim' || beija === true || beija === 'yes' || beija === 1) {
                    beijaText = 'Sim';
                } else if (beija === 'nao' || beija === 'Não' || beija === false || beija === 'no' || beija === 0) {
                    beijaText = 'Não';
                } else if (beija === 'talvez') {
                    beijaText = 'Talvez';
                } else {
                    beijaText = String(beija);
                }
            }
            updateField('Beija:', beijaText);
            console.log(`✅ Beija: ${beijaText} (valor original: ${beija})`);
            
            // Faz Anal
            const anal = anuncio.anal || 
                        anuncio.sexo_anal ||
                        anuncio['sexo-anal'] ||
                        '';
            let analText = 'Não informado';
            if (anal) {
                if (anal === 'sim' || anal === 'Sim' || anal === true || anal === 'yes' || anal === 1) {
                    analText = 'Sim';
                } else if (anal === 'nao' || anal === 'Não' || anal === false || anal === 'no' || anal === 0) {
                    analText = 'Não';
                } else if (anal === 'talvez') {
                    analText = 'Talvez';
                } else {
                    analText = String(anal);
                }
            }
            updateField('Faz Anal:', analText);
            console.log(`✅ Faz Anal: ${analText} (valor original: ${anal})`);
            
            // Mora só
            const moraSo = anuncio['mora-so'] || 
                          anuncio.mora_so || 
                          anuncio.moraSo ||
                          anuncio.mora_sozinho ||
                          anuncio.vive_sozinho ||
                          '';
            let moraSoText = 'Não informado';
            if (moraSo) {
                if (moraSo === 'sim' || moraSo === 'Sim' || moraSo === true || moraSo === 'yes' || moraSo === 1) {
                    moraSoText = 'Sim';
                } else if (moraSo === 'nao' || moraSo === 'Não' || moraSo === false || moraSo === 'no' || moraSo === 0) {
                    moraSoText = 'Não';
                } else {
                    moraSoText = String(moraSo);
                }
            }
            updateField('Mora só:', moraSoText);
            console.log(`✅ Mora só: ${moraSoText} (valor original: ${moraSo})`);
            
            // Local - Mostrar "Com Local" ou "Sem Local" ao invés da cidade
            let localText = 'Não informado';
            if (anuncio.local) {
                const localValue = String(anuncio.local).toLowerCase().trim();
                if (localValue === 'com local' || localValue === 'com-local' || localValue === 'temos-local' || localValue === 'sim') {
                    localText = 'Com Local';
                } else if (localValue === 'sem local' || localValue === 'sem-local' || localValue === 'nao' || localValue === 'não') {
                    localText = 'Sem Local';
                } else {
                    localText = String(anuncio.local);
                }
            }
            updateField('Local:', localText);
            console.log(`✅ Local: ${localText} (valor original: ${anuncio.local})`);
            
            // Atende - Usar função comum para processar
            const atende = processarCampoAtende(anuncio);
            updateField('Atende:', atende);
            console.log(`✅ Atende (detalhado): ${atende}`);
            
            // Horário
            let horario = 'Não informado';
            if (anuncio.horario_inicio && anuncio.horario_fim) {
                horario = `${anuncio.horario_inicio} às ${anuncio.horario_fim}`;
            } else if (anuncio.plano === 'camarote' || anuncio.plano === 'vip') {
                horario = '24h';
            } else {
                horario = anuncio.horario_inicio || anuncio.horario_fim || '24h';
            }
            updateField('Horário:', horario);
            
            // Pagamento
            const pagamentos = [];
            if (anuncio.pagamento_dinheiro !== false) pagamentos.push('Dinheiro');
            if (anuncio.pagamento_pix !== false) pagamentos.push('PIX');
            if (anuncio.pagamento_debito !== false) pagamentos.push('Débito');
            if (anuncio.pagamento_credito !== false) pagamentos.push('Crédito');
            
            const pagamentoStr = pagamentos.length > 0 
                ? pagamentos.join(' ') 
                : 'Dinheiro PIX Débito Crédito'; // Valor padrão
            updateField('Pagamento:', pagamentoStr);
            
            // Informações adicionais
            if (anuncio.descricao || anuncio.description) {
                const descricao = anuncio.descricao || anuncio.description || 'Não informado';
                updateField('Sobre Mim:', descricao);
            }
            
            // Aparência
            const aparenciaParts = [];
            if (anuncio.etnia) aparenciaParts.push(anuncio.etnia);
            if (anuncio.cabelo) aparenciaParts.push(`cabelos ${anuncio.cabelo}`);
            if (anuncio.olhos) aparenciaParts.push(`olhos ${anuncio.olhos}`);
            if (anuncio.corpo) aparenciaParts.push(`físico ${anuncio.corpo}`);
            
            if (aparenciaParts.length > 0) {
                updateField('Aparência:', aparenciaParts.join(', '));
            }
            
            if (anuncio.etnia) {
                updateField('Etnia:', anuncio.etnia);
            }
            
            // Idiomas (se houver no banco)
            if (anuncio.idiomas) {
                updateField('Idiomas:', anuncio.idiomas);
            }
            
            // Nacionalidade
            if (anuncio.nacionalidade) {
                updateField('Nacionalidade:', anuncio.nacionalidade);
            } else {
                updateField('Nacionalidade:', 'Brasileira'); // Valor padrão
            }
            
            // Experiência (pode ser calculada ou armazenada)
            if (anuncio.experiencia || anuncio.anos_experiencia) {
                const exp = anuncio.experiencia || `${anuncio.anos_experiencia}+ anos como acompanhante`;
                updateField('Experiência:', exp);
            }
            
            // Especialidade
            if (anuncio.especialidade) {
                updateField('Especialidade:', anuncio.especialidade);
            } else if (anuncio.descricao) {
                // Usar primeira parte da descrição como especialidade
                const especialidade = anuncio.descricao.split('.')[0] || anuncio.descricao.substring(0, 80);
                updateField('Especialidade:', especialidade);
            }
            
            console.log('✅ Informações detalhadas atualizadas');
        }
        
        // Função para atualizar botões de contato
        function updateContactButtons(anuncio) {
            console.log('📞 Atualizando botões de contato...');
            
            // Buscar telefones do anúncio
            const telefoneCelular = anuncio.telefone_celular || anuncio.telefone || anuncio.whatsapp || anuncio.phone;
            const telefoneFixo = anuncio.telefone_fixo || anuncio.telefone_fixo_numero;
            const whatsapp = anuncio.whatsapp || anuncio.telefone_celular || anuncio.telefone || anuncio.phone;
            
            console.log('📞 Telefones encontrados:', {
                celular: telefoneCelular,
                fixo: telefoneFixo,
                whatsapp: whatsapp
            });
            
            // Função para formatar telefone para link tel: ou wa.me:
            function formatPhoneForLink(phone) {
                if (!phone) return '';
                // Remover caracteres não numéricos
                let cleanPhone = String(phone).replace(/\D/g, '');
                // Se não começar com código do país, adicionar 55 (Brasil)
                if (cleanPhone.length === 10 || cleanPhone.length === 11) {
                    cleanPhone = '55' + cleanPhone;
                }
                return cleanPhone;
            }
            
            // Botão "Ligar Agora" - usar telefone celular
            const btnLigarAgora = document.getElementById('btn-ligar-agora');
            const btnPhoneNumber = document.getElementById('btn-ligar-phone-number');
            
            if (btnLigarAgora && telefoneCelular) {
                const phoneLink = formatPhoneForLink(telefoneCelular);
                btnLigarAgora.href = `tel:+${phoneLink}`;
                
                // Atualizar número de telefone visível no botão
                if (btnPhoneNumber) {
                    // Formatar telefone para exibição
                    function formatPhoneForDisplay(phone) {
                        if (!phone) return 'Não disponível';
                        
                        // Remover caracteres não numéricos
                        const cleanPhone = String(phone).replace(/\D/g, '');
                        
                        // Se já estiver formatado, tentar manter o formato
                        if (phone.includes('(') && phone.includes(')')) {
                            return phone; // Já está formatado
                        }
                        
                        // Formatar como (XX) XXXXX-XXXX ou (XX) XXXX-XXXX
                        if (cleanPhone.length === 11) {
                            // Celular: (XX) XXXXX-XXXX
                            return cleanPhone.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
                        } else if (cleanPhone.length === 10) {
                            // Fixo: (XX) XXXX-XXXX
                            return cleanPhone.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
                        } else if (cleanPhone.length === 13) {
                            // Com código do país: +55 (XX) XXXXX-XXXX
                            return cleanPhone.replace(/(\d{2})(\d{2})(\d{5})(\d{4})/, '+$1 ($2) $3-$4');
                        }
                        
                        // Se não conseguir formatar, retornar original
                        return telefoneCelular;
                    }
                    
                    const phoneFormatted = formatPhoneForDisplay(telefoneCelular);
                    btnPhoneNumber.textContent = phoneFormatted;
                    console.log(`✅ Número de telefone exibido no botão: ${phoneFormatted}`);
                }
                
                console.log(`✅ Botão "Ligar Agora" atualizado: tel:+${phoneLink}`);
            } else if (btnLigarAgora) {
                console.warn('⚠️ Telefone celular não encontrado para botão "Ligar Agora"');
                if (btnPhoneNumber) {
                    btnPhoneNumber.textContent = 'Não disponível';
                }
            }
            
            // Botão "WhatsApp" - usar número do WhatsApp
            const btnWhatsapp = document.getElementById('btn-whatsapp');
            if (btnWhatsapp && whatsapp) {
                const whatsappLink = formatPhoneForLink(whatsapp);
                btnWhatsapp.href = `https://wa.me/${whatsappLink}`;
                console.log(`✅ Botão "WhatsApp" atualizado: wa.me/${whatsappLink}`);
            } else if (btnWhatsapp) {
                console.warn('⚠️ Número do WhatsApp não encontrado');
            }
            
            // Botão "Telefone Fixo" - habilitar se houver telefone fixo
            const btnTelefoneFixo = document.getElementById('btn-telefone-fixo');
            if (btnTelefoneFixo) {
                if (telefoneFixo) {
                    const fixoLink = formatPhoneForLink(telefoneFixo);
                    btnTelefoneFixo.href = `tel:+${fixoLink}`;
                    btnTelefoneFixo.style.opacity = '1';
                    btnTelefoneFixo.style.pointerEvents = 'auto';
                    btnTelefoneFixo.style.cursor = 'pointer';
                    
                    // Formatar telefone fixo para exibição
                    function formatPhoneForDisplay(phone) {
                        if (!phone) return 'Não disponível';
                        
                        // Remover caracteres não numéricos
                        const cleanPhone = String(phone).replace(/\D/g, '');
                        
                        // Se já estiver formatado, tentar manter o formato
                        if (phone.includes('(') && phone.includes(')')) {
                            return phone; // Já está formatado
                        }
                        
                        // Formatar como (XX) XXXX-XXXX para fixo
                        if (cleanPhone.length === 10) {
                            // Fixo: (XX) XXXX-XXXX
                            return cleanPhone.replace(/(\d{2})(\d{4})(\d{4})/, '($1) $2-$3');
                        } else if (cleanPhone.length === 11) {
                            // Celular: (XX) XXXXX-XXXX
                            return cleanPhone.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
                        } else if (cleanPhone.length === 13) {
                            // Com código do país: +55 (XX) XXXX-XXXX
                            return cleanPhone.replace(/(\d{2})(\d{2})(\d{4})(\d{4})/, '+$1 ($2) $3-$4');
                        }
                        
                        // Se não conseguir formatar, retornar original
                        return telefoneFixo;
                    }
                    
                    // Atualizar texto do botão com o número formatado
                    const fixoFormatted = formatPhoneForDisplay(telefoneFixo);
                    btnTelefoneFixo.innerHTML = `<i class="fas fa-phone-alt"></i> ${fixoFormatted}`;
                    
                    console.log(`✅ Botão "Telefone Fixo" habilitado: tel:+${fixoLink} - Número exibido: ${fixoFormatted}`);
                } else {
                    btnTelefoneFixo.href = '#';
                    btnTelefoneFixo.style.opacity = '0.5';
                    btnTelefoneFixo.style.pointerEvents = 'none';
                    btnTelefoneFixo.style.cursor = 'not-allowed';
                    btnTelefoneFixo.innerHTML = '<i class="fas fa-phone-alt"></i> Telefone Fixo';
                    console.log('⚠️ Telefone fixo não encontrado, botão desabilitado');
                }
            }
            
            console.log('✅ Botões de contato atualizados');
        }
        
        // Função para atualizar serviços e preços
        function updateServicesAndPrices(anuncio) {
            console.log('💰 Atualizando serviços e preços...');
            
            // Atualizar preço
            const priceValue = document.querySelector('.price-value');
            if (priceValue) {
                // Tentar múltiplos campos de preço
                const preco = anuncio.preco_1h || 
                             anuncio.preco_1hora || 
                             anuncio.preco1h || 
                             anuncio.valor_1h ||
                             anuncio.preco ||
                             '300'; // Valor padrão
                
                const precoFormatado = typeof preco === 'number' ? preco.toFixed(2) : preco.replace(/[^\d,]/g, '').replace(',', '.');
                priceValue.textContent = `R$ ${precoFormatado}`;
                console.log('✅ Preço atualizado:', priceValue.textContent);
            }
            
            // Atualizar campo "Local" na seção de informações básicas (Com Local / Sem Local)
            const infoLocal = document.getElementById('info-local');
            if (infoLocal) {
                let localText = 'Não informado';
                if (anuncio.local) {
                    const localValue = String(anuncio.local).toLowerCase().trim();
                    if (localValue === 'com local' || localValue === 'com-local' || localValue === 'temos-local' || localValue === 'sim') {
                        localText = 'Com Local';
                    } else if (localValue === 'sem local' || localValue === 'sem-local' || localValue === 'nao' || localValue === 'não') {
                        localText = 'Sem Local';
                    } else {
                        localText = String(anuncio.local);
                    }
                }
                infoLocal.textContent = localText;
                console.log(`✅ Campo "Local" (info-local) atualizado: ${localText}`);
            }
            
            // Atualizar localização (cidade/estado para outros campos)
            // Declarar variáveis fora dos blocos if para poder usar depois
            const cidade = anuncio.cidade || anuncio.city || 'Não informado';
            const estado = anuncio.estado || anuncio.state || 'SP';
            
            const locationCity = document.querySelector('.location-city');
            if (locationCity) {
                locationCity.textContent = cidade;
                console.log('✅ Cidade atualizada:', cidade);
            }
            
            const locationState = document.querySelector('.location-state');
            if (locationState) {
                const estadoCompleto = cidade && cidade !== 'Não informado' 
                    ? `${cidade} - ${estado}` 
                    : estado;
                locationState.textContent = estadoCompleto;
                console.log('✅ Estado atualizado:', estadoCompleto);
            }
            
            // Atualizar "Mora só"
            const locationText = document.querySelector('.location-text');
            if (locationText) {
                const moraSo = anuncio['mora-so'] || 
                              anuncio.mora_so || 
                              anuncio.moraSo ||
                              'Não informado';
                locationText.textContent = moraSo === 'sim' || moraSo === 'Sim' || moraSo === true 
                    ? 'Mora só' 
                    : moraSo;
                console.log('✅ Mora só atualizado:', locationText.textContent);
            }
            
            // Atualizar serviço (atende mulheres/homens)
            const serviceText = document.querySelector('.service-text');
            if (serviceText) {
                const genero = (anuncio.genero || anuncio.gender || '').toLowerCase();
                if (genero === 'mulher' || genero === 'mulher-luxo') {
                    serviceText.textContent = 'atende mulheres';
                } else if (genero === 'homem') {
                    serviceText.textContent = 'atende homens';
                } else if (genero === 'trans') {
                    serviceText.textContent = 'atende todos';
                } else {
                    serviceText.textContent = 'atende todos';
                }
                console.log('✅ Serviço atualizado:', serviceText.textContent);
            }
        }

        // Função comum para processar e retornar o texto do campo "Atende"
        function processarCampoAtende(anuncio) {
            console.log('\n🔍 ========== PROCESSAR CAMPO ATENDE ==========');
            console.log('📦 anuncio.atende:', anuncio.atende, `(tipo: ${typeof anuncio.atende}, é array: ${Array.isArray(anuncio.atende)})`);
            console.log('📦 Campos relacionados:');
            console.log('  - atende_homens:', anuncio.atende_homens);
            console.log('  - atende_mulheres:', anuncio.atende_mulheres);
            console.log('  - atende_trans:', anuncio.atende_trans);
            console.log('  - atende_casais:', anuncio.atende_casais);
            
            const genero = (anuncio.genero || anuncio.gender || '').toLowerCase();
            const categoria = (anuncio.categoria || anuncio.category || '').toLowerCase();
            
            let atende = 'Não informado';
            
            // Construir lista de "Atende" baseado em campos booleanos ou array
            const atendeList = [];
            if (anuncio.atende_homens || anuncio.atendeHomens || anuncio['atende-homens']) {
                console.log('  ✅ atende_homens encontrado');
                atendeList.push('Ele');
            }
            if (anuncio.atende_mulheres || anuncio.atendeMulheres || anuncio['atende-mulheres']) {
                console.log('  ✅ atende_mulheres encontrado');
                atendeList.push('Ela');
            }
            if (anuncio.atende_trans || anuncio.atendeTrans || anuncio['atende-trans']) {
                console.log('  ✅ atende_trans encontrado');
                atendeList.push('Trans');
            }
            if (anuncio.atende_casais || anuncio.atendeCasais || anuncio['atende-casais'] || anuncio.casais) {
                console.log('  ✅ atende_casais encontrado');
                atendeList.push('Casais');
            }
            
            console.log(`📊 Lista de campos booleanos: ${atendeList.length} itens`);
            
            // Se tiver campos booleanos, usar eles
            if (atendeList.length > 0) {
                atende = atendeList.join(', ');
                console.log(`✅ "Atende" dos campos booleanos: "${atende}"`);
            }
            // Se não tiver campos booleanos, tentar campo direto "atende" (pode ser array ou string)
            else if (anuncio.atende) {
                console.log('📦 Tentando processar campo direto "atende"');
                if (Array.isArray(anuncio.atende)) {
                    console.log(`📦 Array com ${anuncio.atende.length} elementos:`, anuncio.atende);
                    
                    // Filtrar valores inválidos ("on", null, undefined, "")
                    const atendeValido = anuncio.atende.filter(a => {
                        const valor = String(a).toLowerCase().trim();
                        const valido = valor && valor !== 'on' && valor !== 'null' && valor !== 'undefined' && valor !== '';
                        if (!valido) {
                            console.log(`  ❌ Filtrado: "${a}" (inválido)`);
                        }
                        return valido;
                    });
                    
                    console.log(`📦 Após filtro: ${atendeValido.length} valores válidos:`, atendeValido);
                    
                    if (atendeValido.length > 0) {
                        // Mapear valores para textos exibidos
                        atende = atendeValido.map(a => {
                            const val = String(a).toLowerCase().trim();
                            let resultado;
                            if (val === 'ele' || val === 'homem' || val === 'homens') {
                                resultado = 'Ele';
                            } else if (val === 'ela' || val === 'mulher' || val === 'mulheres') {
                                resultado = 'Ela';
                            } else if (val === 'trans') {
                                resultado = 'Trans';
                            } else if (val === 'casais' || val === 'casal') {
                                resultado = 'Casais';
                            } else {
                                resultado = String(a).charAt(0).toUpperCase() + String(a).slice(1).toLowerCase();
                            }
                            console.log(`  ✅ Mapeado: "${a}" → "${resultado}"`);
                            return resultado;
                        }).join(', ');
                        
                        console.log(`✅ "Atende" final do array: "${atende}"`);
                    } else {
                        console.warn('⚠️ Nenhum valor válido após filtro do array');
                    }
                } else {
                    console.log('📦 Campo "atende" é string:', anuncio.atende);
                    const val = String(anuncio.atende).toLowerCase().trim();
                    if (val !== 'on' && val !== 'null' && val !== 'undefined' && val !== '') {
                        if (val === 'todos' || val === 'all') {
                            atende = 'Todos';
                        } else {
                            atende = String(anuncio.atende);
                        }
                        console.log(`✅ "Atende" final da string: "${atende}"`);
                    } else {
                        console.warn('⚠️ Campo "atende" contém valor inválido:', anuncio.atende);
                    }
                }
            } else {
                console.warn('⚠️ Campo "atende" não existe no objeto anuncio');
            }
            
            // FALLBACK: Se ainda for "Não informado" mas o array existe com valores "on",
            // significa que foi criado com formulário antigo. Vamos INFERIR baseado na quantidade:
            if (atende === 'Não informado' && Array.isArray(anuncio.atende) && anuncio.atende.length > 0) {
                console.warn('⚠️⚠️⚠️ ANÚNCIO ANTIGO DETECTADO!');
                console.warn('   Campo "atende" contém apenas valores "on" (formulário antigo).');
                console.warn(`   Array encontrado: ${anuncio.atende.length} elementos`, anuncio.atende);
                
                // INFERÊNCIA: Se o array tem 3 elementos "on", provavelmente os 3 checkboxes foram marcados
                if (anuncio.atende.length === 3) {
                    console.warn('   ✅ INFERÊNCIA: Array com 3 elementos "on" → Todos os checkboxes marcados');
                    console.warn('   ✅ Aplicando inferência: "Ele, Ela, Casais"');
                    atende = 'Ele, Ela, Casais';
                }
                // Se tiver 2 elementos, pode ser diferentes combinações (mais complexo inferir)
                else if (anuncio.atende.length === 2) {
                    console.warn('   ⚠️ INFERÊNCIA PARCIAL: Array com 2 elementos "on"');
                    console.warn('   ⚠️ Não é possível determinar quais checkboxes foram marcados sem recriar o anúncio.');
                    console.warn('   ⚠️ Mantendo "Não informado" - RECOMENDADO RECRIAR o anúncio.');
                }
                // Se tiver 1 elemento
                else if (anuncio.atende.length === 1) {
                    console.warn('   ⚠️ INFERÊNCIA PARCIAL: Array com 1 elemento "on"');
                    console.warn('   ⚠️ Não é possível determinar qual checkbox foi marcado sem recriar o anúncio.');
                    console.warn('   ⚠️ Mantendo "Não informado" - RECOMENDADO RECRIAR o anúncio.');
                }
                else {
                    console.warn('   ⚠️ Quantidade inesperada de elementos:', anuncio.atende.length);
                    console.warn('   ⚠️ RECOMENDADO RECRIAR o anúncio com o formulário atualizado.');
                }
            }
            
            console.log(`📋 RESULTADO FINAL: "${atende}"`);
            console.log('==========================================\n');
            return atende;
        }
        
        // Função para carregar informações básicas (obrigatórias)
        function loadBasicInfo(anuncio) {
            console.log('📝 ========== INICIANDO loadBasicInfo ==========');
            console.log('📝 Dados recebidos:', {
                nome: anuncio.nome || anuncio.name,
                idade: anuncio.idade,
                peso: anuncio.peso,
                altura: anuncio.altura,
                oral_sem: anuncio.oral_sem || anuncio['oral-sem'],
                beija: anuncio.beija,
                anal: anuncio.anal,
                mora_so: anuncio.mora_so || anuncio['mora-so'],
                valor: anuncio.valor || anuncio.cache,
                horario_24h: anuncio.horario_24h,
                horario_inicio: anuncio.horario_inicio,
                horario_fim: anuncio.horario_fim,
                pagamento: anuncio.pagamento,
                telefone_celular: anuncio.telefone_celular,
                telefone: anuncio.telefone,
                cidade: anuncio.cidade,
                estado: anuncio.estado,
                categoria: anuncio.categoria || anuncio.category
            });
            
            const nomeEl = document.getElementById('info-nome');
            if (nomeEl) {
                nomeEl.textContent = anuncio.nome || anuncio.name || 'Não informado';
                console.log('✅ Nome atualizado:', nomeEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-nome não encontrado');
            }
            
            const idadeEl = document.getElementById('info-idade');
            if (idadeEl) {
                idadeEl.textContent = anuncio.idade || 'Não informado';
                console.log('✅ Idade atualizada:', idadeEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-idade não encontrado');
            }
            
            const pesoEl = document.getElementById('info-peso');
            if (pesoEl) {
                const pesoValue = anuncio.peso || 'Não informado';
                // Adicionar 'kg' se o valor não contiver unidade e não for 'Não informado'
                pesoEl.textContent = pesoValue === 'Não informado' ? pesoValue : (pesoValue.includes('kg') ? pesoValue : pesoValue + 'kg');
                console.log('✅ Peso atualizado:', pesoEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-peso não encontrado');
            }
            
            const alturaEl = document.getElementById('info-altura');
            if (alturaEl) {
                const alturaValue = anuncio.altura || 'Não informado';
                // Adicionar 'm' se o valor não contiver unidade e não for 'Não informado'
                alturaEl.textContent = alturaValue === 'Não informado' ? alturaValue : (alturaValue.includes('m') || alturaValue.includes('cm') ? alturaValue : alturaValue + 'm');
                console.log('✅ Altura atualizada:', alturaEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-altura não encontrado');
            }
            
            const telefoneEl = document.getElementById('info-telefone');
            if (telefoneEl) {
                telefoneEl.textContent = anuncio.telefone_celular || anuncio.telefone || 'Não informado';
                console.log('✅ Telefone atualizado:', telefoneEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-telefone não encontrado');
            }
            
            const localizacaoEl = document.getElementById('info-localizacao');
            if (localizacaoEl) {
                localizacaoEl.textContent = `${anuncio.cidade || 'Não informado'}, ${anuncio.estado || 'Não informado'}`;
                console.log('✅ Localização atualizada:', localizacaoEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-localizacao não encontrado');
            }
            
            const categoriaEl = document.getElementById('info-categoria');
            if (categoriaEl) {
                categoriaEl.textContent = anuncio.categoria || anuncio.category || 'Não informado';
                console.log('✅ Categoria atualizada:', categoriaEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-categoria não encontrado');
            }
            
            const tipoEl = document.getElementById('info-tipo');
            if (tipoEl) {
                tipoEl.textContent = anuncio.category || anuncio.categoria || 'Não informado';
                console.log('✅ Tipo atualizado:', tipoEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-tipo não encontrado');
            }
            
            // Atualizar campo "Atende" na seção de informações básicas
            const atendeEl = document.getElementById('info-atende');
            if (atendeEl) {
                const atendeTexto = processarCampoAtende(anuncio);
                atendeEl.textContent = atendeTexto;
                console.log('✅ info-atende atualizado:', atendeTexto);
            }
            
            // Atualizar campo "Oral sem"
            const oralSemEl = document.getElementById('info-oral-sem');
            if (oralSemEl) {
                const oralSemValue = anuncio.oral_sem || anuncio['oral-sem'] || null;
                oralSemEl.textContent = oralSemValue === 'sim' ? 'Sim' : (oralSemValue || 'Não informado');
                console.log('✅ Oral sem atualizado:', oralSemEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-oral-sem não encontrado');
            }
            
            // Atualizar campo "Beija"
            const beijaEl = document.getElementById('info-beija');
            if (beijaEl) {
                const beijaValue = anuncio.beija || null;
                beijaEl.textContent = beijaValue === 'sim' ? 'Sim' : (beijaValue || 'Não informado');
                console.log('✅ Beija atualizado:', beijaEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-beija não encontrado');
            }
            
            // Atualizar campo "Anal"
            const analEl = document.getElementById('info-anal');
            if (analEl) {
                const analValue = anuncio.anal || null;
                analEl.textContent = analValue === 'sim' ? 'Sim' : (analValue || 'Não informado');
                console.log('✅ Anal atualizado:', analEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-anal não encontrado');
            }
            
            // Atualizar campo "Mora só"
            const moraSoEl = document.getElementById('info-mora-so');
            if (moraSoEl) {
                const moraSoValue = anuncio.mora_so || anuncio['mora-so'] || null;
                moraSoEl.textContent = moraSoValue === 'sim' ? 'Sim' : (moraSoValue || 'Não informado');
                console.log('✅ Mora só atualizado:', moraSoEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-mora-so não encontrado');
            }
            
            // Atualizar campo "Valor"
            const valorEl = document.getElementById('info-valor');
            if (valorEl) {
                let valorTexto = 'Não informado';
                let valorNumerico = null;
                
                // Função auxiliar para validar e formatar valor
                const validarEFormatarValor = (valor) => {
                    if (!valor) return null;
                    
                    // Converter para string e remover caracteres não numéricos
                    let valorStr = String(valor).replace(/[^\d,.]/g, '').replace(',', '.');
                    
                    // Converter para número
                    let valorNum = parseFloat(valorStr);
                    
                    // Verificar se é um número válido
                    if (isNaN(valorNum) || !isFinite(valorNum)) {
                        console.warn('⚠️ Valor inválido:', valor);
                        return null;
                    }
                    
                    // Converter para inteiro (remover decimais)
                    valorNum = Math.floor(valorNum);
                    
                    // Validar limite máximo de 10.000
                    if (valorNum > 10000) {
                        console.warn('⚠️ Valor excede o limite de R$ 10.000:', valorNum);
                        valorNum = 10000; // Limitar ao máximo permitido
                    }
                    
                    // Validar que não seja negativo
                    if (valorNum < 0) {
                        console.warn('⚠️ Valor negativo não permitido:', valorNum);
                        return null;
                    }
                    
                    return valorNum;
                };
                
                // Tentar pegar de diferentes campos possíveis
                if (anuncio.valor) {
                    valorNumerico = validarEFormatarValor(anuncio.valor);
                } else if (anuncio.cache) {
                    valorNumerico = validarEFormatarValor(anuncio.cache);
                } else if (anuncio.preco_1h) {
                    valorNumerico = validarEFormatarValor(anuncio.preco_1h);
                } else if (anuncio.preco_30min) {
                    valorNumerico = validarEFormatarValor(anuncio.preco_30min);
                }
                
                // Formatar valor se válido
                if (valorNumerico !== null && valorNumerico !== undefined) {
                    // Formatar com separador de milhar
                    valorTexto = `R$ ${valorNumerico.toLocaleString('pt-BR', { maximumFractionDigits: 0 })}`;
                }
                
                valorEl.textContent = valorTexto;
                console.log('✅ Valor atualizado:', valorEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-valor não encontrado');
            }
            
            // Atualizar campo "Horário de Atendimento"
            const horarioEl = document.getElementById('info-horario');
            if (horarioEl) {
                let horarioTexto = 'Não informado';
                if (anuncio.horario_24h === true || anuncio.horario_24h === 'sim' || anuncio.horario_24h === 'Sim') {
                    horarioTexto = '24h';
                } else if (anuncio.horario_inicio && anuncio.horario_fim) {
                    horarioTexto = `${anuncio.horario_inicio} às ${anuncio.horario_fim}`;
                } else if (anuncio.horario_inicio) {
                    horarioTexto = `A partir das ${anuncio.horario_inicio}`;
                }
                horarioEl.textContent = horarioTexto;
                console.log('✅ Horário atualizado:', horarioEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-horario não encontrado');
            }
            
            // Atualizar campo "Formas de Pagamento"
            const pagamentoEl = document.getElementById('info-pagamento');
            if (pagamentoEl) {
                let pagamentoTexto = 'Não informado';
                const pagamento = anuncio.pagamento || anuncio.formas_pagamento || [];
                
                if (Array.isArray(pagamento) && pagamento.length > 0) {
                    // Capitalizar primeira letra de cada forma de pagamento
                    pagamentoTexto = pagamento.map(p => {
                        const pStr = String(p).toLowerCase();
                        return pStr.charAt(0).toUpperCase() + pStr.slice(1);
                    }).join(' ');
                } else if (typeof pagamento === 'string' && pagamento.trim()) {
                    pagamentoTexto = pagamento;
                }
                
                pagamentoEl.textContent = pagamentoTexto;
                console.log('✅ Formas de pagamento atualizado:', pagamentoEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-pagamento não encontrado');
            }
            
            // Atualizar campo "Local"
            const localEl = document.getElementById('info-local');
            if (localEl) {
                let localText = 'Não informado';
                if (anuncio.local) {
                    const localValue = String(anuncio.local).toLowerCase().trim();
                    if (localValue === 'com local' || localValue === 'com-local' || localValue === 'temos-local' || localValue === 'sim') {
                        localText = 'Com Local';
                    } else if (localValue === 'sem local' || localValue === 'sem-local' || localValue === 'nao' || localValue === 'não') {
                        localText = 'Sem Local';
                    } else {
                        localText = String(anuncio.local);
                    }
                }
                localEl.textContent = localText;
                console.log('✅ Local atualizado:', localEl.textContent);
            } else {
                console.warn('⚠️ Elemento info-local não encontrado');
            }
        }

        // Função para carregar informações opcionais
        function loadOptionalInfo(anuncio) {
            // Características físicas
            const physicalSection = document.getElementById('physical-section');
            let hasPhysicalInfo = false;
            
            if (anuncio.altura) {
                const alturaEl = document.getElementById('info-altura');
                if (alturaEl) {
                    alturaEl.textContent = anuncio.altura;
                    hasPhysicalInfo = true;
                }
            }
            if (anuncio.peso) {
                const pesoEl = document.getElementById('info-peso');
                if (pesoEl) {
                    pesoEl.textContent = anuncio.peso;
                    hasPhysicalInfo = true;
                }
            }
            if (anuncio.corpo) {
                const corpoEl = document.getElementById('info-corpo');
                if (corpoEl) {
                    corpoEl.textContent = anuncio.corpo;
                    hasPhysicalInfo = true;
                }
            }
            if (anuncio.estatura) {
                const estaturaEl = document.getElementById('info-estatura');
                if (estaturaEl) {
                    estaturaEl.textContent = anuncio.estatura;
                    hasPhysicalInfo = true;
                }
            }
            
            if (hasPhysicalInfo && physicalSection) {
                physicalSection.style.display = 'block';
            }

            // Preferências de serviços
            const servicesSection = document.getElementById('services-section');
            let hasServicesInfo = false;
            
            if (anuncio.beija) {
                const beijaEl = document.getElementById('info-beija');
                if (beijaEl) {
                    beijaEl.textContent = anuncio.beija;
                    hasServicesInfo = true;
                }
            }
            if (anuncio['oral-sem']) {
                const oralSemEl = document.getElementById('info-oral-sem');
                if (oralSemEl) {
                    oralSemEl.textContent = anuncio['oral-sem'];
                    hasServicesInfo = true;
                }
            }
            if (anuncio.anal) {
                const analEl = document.getElementById('info-anal');
                if (analEl) {
                    analEl.textContent = anuncio.anal;
                    hasServicesInfo = true;
                }
            }
            if (anuncio['mora-so']) {
                const moraSoEl = document.getElementById('info-mora-so');
                if (moraSoEl) {
                    moraSoEl.textContent = anuncio['mora-so'];
                    hasServicesInfo = true;
                }
            }
            if (anuncio.local) {
                const localEl = document.getElementById('info-local');
                if (localEl) {
                    localEl.textContent = anuncio.local;
                    hasServicesInfo = true;
                }
            }
            
            if (hasServicesInfo && servicesSection) {
                servicesSection.style.display = 'block';
            }

            // Horários de atendimento
            const scheduleSection = document.getElementById('schedule-section');
            let hasScheduleInfo = false;
            
            if (anuncio.horario_inicio) {
                const horarioInicioEl = document.getElementById('info-horario-inicio');
                if (horarioInicioEl) {
                    horarioInicioEl.textContent = anuncio.horario_inicio;
                    hasScheduleInfo = true;
                }
            }
            if (anuncio.horario_fim) {
                const horarioFimEl = document.getElementById('info-horario-fim');
                if (horarioFimEl) {
                    horarioFimEl.textContent = anuncio.horario_fim;
                    hasScheduleInfo = true;
                }
            }
            
            if (hasScheduleInfo && scheduleSection) {
                scheduleSection.style.display = 'block';
            }
        }

        // Função para carregar galeria
        function loadGallery(anuncio) {
            console.log('🖼️ Iniciando loadGallery...');
            const pubBook = document.querySelector('.pub-book');
            if (!pubBook) {
                console.warn('⚠️ Elemento .pub-book não encontrado');
                return;
            }

            // Limpar galeria de teste
            pubBook.innerHTML = '';

            // Função auxiliar para converter URL do Firebase
            function getFirebaseImageUrl(url, anuncioId) {
                if (!url) return null;
                
                // Se já é uma URL completa, usar diretamente
                if (url.startsWith('http://') || url.startsWith('https://')) {
                    return url;
                }
                
                // Se é gs://, converter
                if (url.startsWith('gs://')) {
                    const path = url.replace('gs://copia-do-job.firebasestorage.app/', '').replace(/^\/+/, '');
                    return `https://firebasestorage.googleapis.com/v0/b/copia-do-job.firebasestorage.app/o/${encodeURIComponent(path)}?alt=media`;
                }
                
                // Se é um nome de arquivo, construir URL (estrutura padronizada)
                if (!url.includes('://')) {
                    const path = `advertisements/${anuncioId}/${url}`;
                    return `https://firebasestorage.googleapis.com/v0/b/copia-do-job.firebasestorage.app/o/${encodeURIComponent(path)}?alt=media`;
                }
                
                return url;
            }

                        // Coletar as 13 m??dias fixas: banner + capa + stories + galeria_1..10
            const fotos = [];

            const addMediaField = (primaryField, altField) => {
                const value = anuncio[primaryField] || anuncio[altField];
                if (!value) return;
                const url = getFirebaseImageUrl(value, anuncio.id);
                if (url) fotos.push(url);
            };

            // Itens do topo (mantendo redund??ncia, conforme solicitado)
            addMediaField('foto_banner_url', 'foto_banner');
            addMediaField('foto_capa_url', 'foto_capa');
            addMediaField('foto_stories_url', 'foto_stories');

            // Galeria (10 fotos)
            for (let i = 1; i <= 10; i++) {
                const campo = `galeria_${i}`;
                const campo_url = `galeria_${i}_url`;
                const campo_url_alt = `foto_galeria_${i}_url`;

                if (anuncio[campo_url]) {
                    const url = getFirebaseImageUrl(anuncio[campo_url], anuncio.id);
                    if (url) fotos.push(url);
                } else if (anuncio[campo_url_alt]) {
                    const url = getFirebaseImageUrl(anuncio[campo_url_alt], anuncio.id);
                    if (url) fotos.push(url);
                } else if (anuncio[campo]) {
                    const url = getFirebaseImageUrl(anuncio[campo], anuncio.id);
                    if (url) fotos.push(url);
                }
            }

            console.log(`📸 ${fotos.length} fotos encontradas na galeria:`, fotos);

            // Se não há fotos, mostrar mensagem
            if (fotos.length === 0) {
                pubBook.innerHTML = '<p style="text-align: center; color: var(--text-muted); padding: 2rem;">Nenhuma foto disponível na galeria</p>';
                console.warn('⚠️ Nenhuma foto encontrada na galeria');
                return;
            }

            // Criar elementos da galeria no formato pub-book
            fotos.forEach((foto, index) => {
                const mediaId = index + 1;
                const pubBookItem = document.createElement('div');
                pubBookItem.className = 'pub-book-item';
                pubBookItem.setAttribute('data-media_id', mediaId);
                pubBookItem.setAttribute('data-media_type', 'photo');
                pubBookItem.setAttribute('data-media_message', '');
                pubBookItem.setAttribute('data-media_verified', '0');
                
                // Usar carrossel customizado - adicionar evento de clique
                pubBookItem.innerHTML = `
                    <div class="gallery-item" data-photo-index="${index}" style="cursor: pointer;">
                        <img loading="lazy" src="${foto}" 
                             data-fallback="${foto}" 
                             class="pub-book-img lazyload" 
                             alt="Galeria ${mediaId}"
                             onerror="this.src='${foto}';">
                    </div>
                `;
                
                // Adicionar evento de clique para abrir o modal
                const galleryItem = pubBookItem.querySelector('.gallery-item');
                galleryItem.addEventListener('click', () => {
                    openGalleryModal(index);
                });
                
                pubBook.appendChild(pubBookItem);
            });

            console.log(`✅ Galeria atualizada com ${fotos.length} fotos`);
            
            // Armazenar fotos globalmente para o modal
            window.galleryPhotos = fotos;
        }
        
        // Variáveis globais para o carrossel customizado
        let currentGalleryIndex = 0;
        let galleryPhotos = [];

        // Função para abrir o modal de galeria
        function openGalleryModal(index) {
            if (!window.galleryPhotos || window.galleryPhotos.length === 0) {
                console.warn('⚠️ Nenhuma foto na galeria');
                return;
            }

            currentGalleryIndex = index;
            const modal = document.getElementById('gallery-modal');
            const modalImage = document.getElementById('gallery-modal-image');
            const currentIndexSpan = document.getElementById('gallery-current-index');
            const totalCountSpan = document.getElementById('gallery-total-count');

            if (!modal || !modalImage) {
                console.error('❌ Elementos do modal não encontrados');
                return;
            }

            // Atualizar imagem
            modalImage.src = window.galleryPhotos[currentGalleryIndex];
            modalImage.alt = `Foto ${currentGalleryIndex + 1}`;

            // Atualizar contador
            currentIndexSpan.textContent = currentGalleryIndex + 1;
            totalCountSpan.textContent = window.galleryPhotos.length;

            // Mostrar modal
            modal.style.display = 'flex';
            document.body.style.overflow = 'hidden';

            console.log(`📸 Abrindo foto ${currentGalleryIndex + 1} de ${window.galleryPhotos.length}`);
        }

        // Função para fechar o modal
        function closeGalleryModal() {
            const modal = document.getElementById('gallery-modal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        // Função para navegar para a foto anterior
        function prevGalleryPhoto() {
            if (!window.galleryPhotos || window.galleryPhotos.length === 0) return;
            
            currentGalleryIndex = (currentGalleryIndex - 1 + window.galleryPhotos.length) % window.galleryPhotos.length;
            updateGalleryModal();
        }

        // Função para navegar para a próxima foto
        function nextGalleryPhoto() {
            if (!window.galleryPhotos || window.galleryPhotos.length === 0) return;
            
            currentGalleryIndex = (currentGalleryIndex + 1) % window.galleryPhotos.length;
            updateGalleryModal();
        }

        // Função para atualizar o modal com a foto atual
        function updateGalleryModal() {
            const modalImage = document.getElementById('gallery-modal-image');
            const currentIndexSpan = document.getElementById('gallery-current-index');

            if (modalImage && window.galleryPhotos[currentGalleryIndex]) {
                modalImage.src = window.galleryPhotos[currentGalleryIndex];
                modalImage.alt = `Foto ${currentGalleryIndex + 1}`;
                currentIndexSpan.textContent = currentGalleryIndex + 1;
            }
        }

        // Inicializar eventos do modal após o DOM estar carregado
        document.addEventListener('DOMContentLoaded', function() {
            // Botão fechar
            const closeBtn = document.getElementById('gallery-close-btn');
            if (closeBtn) {
                closeBtn.addEventListener('click', closeGalleryModal);
            }

            // Botão anterior
            const prevBtn = document.getElementById('gallery-prev-btn');
            if (prevBtn) {
                prevBtn.addEventListener('click', prevGalleryPhoto);
            }

            // Botão próximo
            const nextBtn = document.getElementById('gallery-next-btn');
            if (nextBtn) {
                nextBtn.addEventListener('click', nextGalleryPhoto);
            }

            // Fechar ao clicar no backdrop
            const backdrop = document.querySelector('.gallery-modal-backdrop');
            if (backdrop) {
                backdrop.addEventListener('click', closeGalleryModal);
            }

            // Navegação por teclado
            document.addEventListener('keydown', function(e) {
                const modal = document.getElementById('gallery-modal');
                if (!modal || modal.style.display === 'none') return;

                switch(e.key) {
                    case 'Escape':
                        closeGalleryModal();
                        break;
                    case 'ArrowLeft':
                        prevGalleryPhoto();
                        break;
                    case 'ArrowRight':
                        nextGalleryPhoto();
                        break;
                }
            });

            console.log('✅ Eventos do carrossel de galeria inicializados');
        });


        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // loadProfileData() já é chamado no outro DOMContentLoaded que inicializa o Firebase
            // Não chamar aqui para evitar duplicação
            
            // Eventos do modal de galeria já foram configurados acima
        });

        // Fechar modal com ESC já está implementado no DOMContentLoaded acima para a galeria
        // Aqui apenas para o modal de mensagem
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeMessageModal();
            }
        });

        // Funções do Modal de Mensagem
        function openMessageModal() {
            const modal = document.getElementById('message-modal');
            modal.style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeMessageModal() {
            const modal = document.getElementById('message-modal');
            modal.style.display = 'none';
            document.body.style.overflow = 'auto';
            
            // Limpar formulário
            document.getElementById('message-form').reset();
        }

        // Event listener para o formulário de mensagem
        document.addEventListener('DOMContentLoaded', function() {
            const messageForm = document.getElementById('message-form');
            if (messageForm) {
                messageForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    // Coletar dados do formulário
                    const formData = new FormData(messageForm);
                    const messageData = {
                        name: formData.get('name'),
                        email: formData.get('email'),
                        phone: formData.get('phone'),
                        message: formData.get('message'),
                        timestamp: new Date().toISOString()
                    };
                    
                    // Simular envio da mensagem
                    console.log('Mensagem enviada:', messageData);
                    
                    // Mostrar mensagem de sucesso
                    alert('Mensagem enviada com sucesso! Entraremos em contato em breve.');
                    
                    // Fechar modal
                    closeMessageModal();
                });
            }

            // Fechar modal ao clicar fora
            const messageModal = document.getElementById('message-modal');
            if (messageModal) {
                messageModal.addEventListener('click', function(event) {
                    if (event.target === messageModal) {
                        closeMessageModal();
                    }
                });
            }
        });

        // Lightbox functionality
        document.addEventListener('DOMContentLoaded', function() {
            // Handle gallery clicks
            const galleryLinks = document.querySelectorAll('.pub-book-link');
            
            galleryLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const targetId = this.getAttribute('href');
                    const lightbox = document.querySelector(targetId);
                    
                    if (lightbox) {
                        lightbox.style.display = 'flex';
                        document.body.style.overflow = 'hidden';
                    }
                });
            });

            // Handle close button clicks
            const closeButtons = document.querySelectorAll('.mfp-close');
            
            closeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const lightbox = this.closest('.lightbox-block');
                    if (lightbox) {
                        lightbox.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            });

            // Handle background clicks to close
            const lightboxes = document.querySelectorAll('.lightbox-block');
            
            lightboxes.forEach(lightbox => {
                lightbox.addEventListener('click', function(e) {
                    if (e.target === this) {
                        this.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            });

            // Handle ESC key to close
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    const openLightbox = document.querySelector('.lightbox-block[style*="flex"]');
                    if (openLightbox) {
                        openLightbox.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                }
            });
        });

        // ============================================
        // FORM INTERACTION AND PREVIEW SYNC
        // ============================================
        
        // Initialize form interactions when DOM is ready
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🎨 Inicializando interações do formulário...');
            
            // Setup photo uploads with preview sync
            setupPhotoUploads();
            
            // Setup video upload
            setupVideoUpload();
            
            // Setup description character counter
            setupDescriptionCounter();
            
            // Setup nome validation and counter
            setupNomeValidation();
            setupFraseEfeitoValidation();
            
            // Setup info section interactions
            setupInfoSectionInteractions();
            
            // Setup contact phone updates
            setupContactUpdates();
            
            // Setup services checkboxes sync
            setupServicesSync();
            
            // Setup form submission
            setupFormSubmission();
            
            // Setup "change photo" buttons
            setupChangeButtons();
            
            // Setup telefone validation and mask
            setupTelefoneValidation();
            
            // Bloquear botões WhatsApp e Mensagem na página de cadastro
            blockContactButtons();
            
            console.log('✅ Interações do formulário inicializadas!');
        });

        // Photo uploads with preview sync
        function setupPhotoUploads() {
            // Profile picture
            const capaInput = document.getElementById('capa-photo');
            const profileOverlay = document.getElementById('profile-upload-overlay');
            const profileImage = document.getElementById('profile-image');
            const btnChangeCapa = document.getElementById('btn-change-capa');
            const profileStatus = document.getElementById('profile-status-indicator');
            
            if (capaInput) {
                capaInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const url = e.target.result;
                            // Update profile image preview
                            if (profileImage) {
                                profileImage.src = url;
                                profileImage.style.opacity = '1';
                            }
                            // Hide overlay and show change button
                            if (profileOverlay) {
                                profileOverlay.style.opacity = '0';
                                setTimeout(() => {
                                    profileOverlay.style.display = 'none';
                                }, 300);
                            }
                            // Show change button and status
                            if (btnChangeCapa) {
                                btnChangeCapa.classList.add('show');
                                btnChangeCapa.style.display = 'flex';
                            }
                            if (profileStatus) {
                                profileStatus.style.display = 'block';
                            }
                            
                            // Mostra preview do card após upload (salva URL em variável para evitar problemas de escopo)
                            const imageUrl = url;
                            console.log('📸 Foto carregada, tentando abrir preview...', imageUrl ? 'URL válida' : 'URL inválida');
                            
                            setTimeout(() => {
                                try {
                                    console.log('🔍 Verificando função showCardPreview...', typeof showCardPreview);
                                    if (typeof showCardPreview === 'function') {
                                        console.log('✅ Chamando showCardPreview...');
                                        showCardPreview(imageUrl);
                                    } else {
                                        console.error('❌ Função showCardPreview não encontrada, tentando fallback...');
                                        // Tenta abrir o modal diretamente como fallback
                                        const modal = document.getElementById('cardPreviewModal');
                                        const previewImage = document.getElementById('cardPreviewImage');
                                        console.log('📋 Modal encontrado:', modal ? 'Sim' : 'Não');
                                        console.log('📋 PreviewImage encontrado:', previewImage ? 'Sim' : 'Não');
                                        
                                        if (modal && previewImage) {
                                            previewImage.src = imageUrl;
                                            modal.classList.add('show');
                                            modal.style.display = 'flex';
                                            document.body.style.overflow = 'hidden';
                                            console.log('✅ Modal aberto via fallback');
                                            
                                            // Inicializa o fluxo manualmente
                                            if (typeof managePreviewFlow === 'function') {
                                                managePreviewFlow();
                                            }
                                            if (typeof carregarEstadosPreview === 'function') {
                                                carregarEstadosPreview();
                                            }
                                        } else {
                                            console.error('❌ Modal ou previewImage não encontrados no DOM');
                                        }
                                    }
                                } catch (error) {
                                    console.error('❌ Erro ao abrir preview:', error);
                                }
                            }, 800); // Aumentei o timeout para 800ms para garantir que tudo está carregado
                        };
                        reader.readAsDataURL(file);
                    }
                });
                
                // Click change button to upload
                if (btnChangeCapa) {
                    btnChangeCapa.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        capaInput.click();
                    });
                }
                
                // Click na foto de perfil para mostrar preview do card
                const profileImage = document.getElementById('profile-image');
                if (profileImage) {
                    profileImage.addEventListener('click', function() {
                        if (this.src && this.src !== '' && this.style.opacity === '1') {
                            showCardPreview(this.src);
                        }
                    });
                    // Adiciona cursor pointer para indicar que é clicável
                    profileImage.style.cursor = 'pointer';
                }
            }
            
            // Quando uma nova foto é selecionada via botão "Trocar Foto" do modal
            if (capaInput) {
                const originalHandler = capaInput.onchange;
                capaInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const url = e.target.result;
                            const profileImage = document.getElementById('profile-image');
                            const previewImage = document.getElementById('cardPreviewImage');
                            
                            // Atualiza foto do perfil
                            if (profileImage) {
                                profileImage.src = url;
                                profileImage.style.opacity = '1';
                            }
                            
                            // Se o modal estiver aberto, atualiza apenas a imagem do preview
                            const modal = document.getElementById('cardPreviewModal');
                            if (modal && modal.classList.contains('show') && previewImage) {
                                previewImage.src = url;
                                console.log('✅ Foto atualizada no preview');
                                // Não fecha o modal, mantém os dados
                            } else {
                                // Se o modal não estiver aberto, abre normalmente
                                setTimeout(() => {
                                    showCardPreview(url);
                                }, 300);
                            }
                        };
                        reader.readAsDataURL(file);
                    }
                });
            }

            // Banner - Upload com zoom e ajuste
            const bannerInput = document.getElementById('banner-photo');
            const bannerPreview = document.getElementById('profile-banner');
            const btnChangeBanner = document.getElementById('btn-change-banner');
            const bannerOverlay = document.getElementById('banner-upload-overlay');
            const bannerContainer = document.getElementById('banner-upload-container') || bannerPreview?.parentElement;
            
            // Variáveis para controle de ajuste
            let bannerScale = 1;
            let bannerPos = { x: 0, y: 0 };
            let isDraggingBanner = false;
            let bannerStart = { x: 0, y: 0 };
            let initialDistance = null;
            let isAdjustingMode = false;
            let originalImageSrc = null;
            
            // Função para aplicar transformação na imagem
            function applyBannerTransform() {
                if (bannerPreview) {
                    // Garantir que a imagem tenha position absolute para funcionar corretamente
                    if (bannerPreview.style.position !== 'absolute') {
                        bannerPreview.style.position = 'absolute';
                    }
                    // Aplicar transformação com origem no topo esquerdo (0,0) para cálculo preciso
                    bannerPreview.style.transformOrigin = '0 0';
                    bannerPreview.style.transform = `translate(${bannerPos.x}px, ${bannerPos.y}px) scale(${bannerScale})`;
                    bannerPreview.style.cursor = isAdjustingMode ? 'grab' : 'default';
                }
            }
            
            // Função para centralizar imagem inicialmente
            function centerBannerImage() {
                if (!bannerPreview || !bannerContainer) return;
                const img = bannerPreview;
                const container = bannerContainer;
                
                // Função auxiliar para calcular e aplicar centralização
                const calculateAndCenter = () => {
                    // Aguardar um frame para garantir que o layout esteja atualizado
                    requestAnimationFrame(() => {
                        // Usar getBoundingClientRect para obter dimensões reais do container
                        const containerRect = container.getBoundingClientRect();
                        const containerWidth = containerRect.width || container.offsetWidth || container.clientWidth;
                        const containerHeight = containerRect.height || container.offsetHeight || container.clientHeight;
                        
                        // Obter dimensões ORIGINAIS da imagem (naturalWidth/naturalHeight)
                        const imgNaturalWidth = img.naturalWidth || 0;
                        const imgNaturalHeight = img.naturalHeight || 0;
                        
                        // Se a imagem ainda não carregou completamente, tentar novamente
                        if (imgNaturalWidth === 0 || imgNaturalHeight === 0) {
                            setTimeout(calculateAndCenter, 100);
                            return false;
                        }
                        
                        if (containerWidth > 0 && containerHeight > 0) {
                            // Definir a imagem com suas dimensões naturais
                            if (bannerPreview) {
                                bannerPreview.style.position = 'absolute';
                                bannerPreview.style.left = '0';
                                bannerPreview.style.top = '0';
                                bannerPreview.style.right = 'auto';
                                bannerPreview.style.bottom = 'auto';
                                bannerPreview.style.margin = '0';
                                bannerPreview.style.padding = '0';
                                bannerPreview.style.objectFit = 'none';
                                bannerPreview.style.objectPosition = '0 0';
                                // Definir dimensões naturais da imagem
                                bannerPreview.style.width = imgNaturalWidth + 'px';
                                bannerPreview.style.height = imgNaturalHeight + 'px';
                            }
                            
                            // Aguardar um frame para o navegador aplicar as dimensões
                            requestAnimationFrame(() => {
                                // Calcular escala inicial para caber no container (mantém proporção)
                                const scaleX = containerWidth / imgNaturalWidth;
                                const scaleY = containerHeight / imgNaturalHeight;
                                bannerScale = Math.min(scaleX, scaleY, 1);
                                
                                // Calcular dimensões da imagem após escalar
                                const scaledWidth = imgNaturalWidth * bannerScale;
                                const scaledHeight = imgNaturalHeight * bannerScale;
                                
                                // Centralizar: posição = (largura_container - largura_imagem_escalada) / 2
                                bannerPos.x = (containerWidth - scaledWidth) / 2;
                                bannerPos.y = (containerHeight - scaledHeight) / 2;
                                
                                applyBannerTransform();
                            });
                            
                            return true;
                        }
                        return false;
                    });
                };
                
                // Se a imagem já está carregada, centralizar imediatamente
                if (img.complete && img.naturalWidth > 0) {
                    calculateAndCenter();
                } else {
                    // Caso contrário, aguardar o carregamento
                    img.onload = function() {
                        setTimeout(() => {
                            if (!calculateAndCenter()) {
                                setTimeout(calculateAndCenter, 100);
                            }
                        }, 50);
                    };
                    
                    // Se a imagem já tem src mas ainda não carregou, forçar verificação
                    if (img.src && !img.complete) {
                        setTimeout(() => {
                            if (img.complete && img.naturalWidth > 0) {
                                calculateAndCenter();
                            }
                        }, 100);
                    }
                }
            }
            
            if (bannerInput && bannerPreview) {
                bannerInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (!file || !file.type.match('image.*')) {
                        alert('Por favor, selecione um arquivo de imagem.');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const imageSrc = e.target.result;
                        originalImageSrc = imageSrc;
                        
                        // Resetar transformações
                        bannerScale = 1;
                        bannerPos = { x: 0, y: 0 };
                        isAdjustingMode = true;
                        
                        // Esconder overlay de upload
                        if (bannerOverlay) {
                            bannerOverlay.style.opacity = '0';
                            setTimeout(() => {
                                bannerOverlay.style.display = 'none';
                            }, 300);
                        }
                        
                        // Mostrar banner em modo ajuste
                        bannerPreview.src = imageSrc;
                        bannerPreview.style.display = 'block';
                        bannerPreview.style.opacity = '1';
                        
                        // Resetar todos os estilos que possam interferir
                        bannerPreview.style.maxWidth = 'none';
                        bannerPreview.style.maxHeight = 'none';
                        bannerPreview.style.minWidth = '0';
                        bannerPreview.style.minHeight = '0';
                        bannerPreview.style.objectFit = 'none';
                        bannerPreview.style.objectPosition = '0 0';
                        
                        // Garantir posicionamento absoluto e resetar posição inicial
                        bannerPreview.style.position = 'absolute';
                        bannerPreview.style.left = '0';
                        bannerPreview.style.top = '0';
                        bannerPreview.style.margin = '0';
                        bannerPreview.style.padding = '0';
                        
                        // Ajustar container
                        if (bannerContainer) {
                            bannerContainer.style.height = '450px';
                        }
                        
                        // Mostrar botão de trocar
                        if (btnChangeBanner) {
                            btnChangeBanner.style.display = 'block';
                        }
                        
                        // Centralizar imagem após carregar
                        bannerPreview.onload = function() {
                            const delay = window.innerWidth > 768 ? 150 : 50;
                            setTimeout(() => {
                                centerBannerImage();
                                if (window.innerWidth > 768) {
                                    setTimeout(() => {
                                        centerBannerImage();
                                    }, 200);
                                }
                            }, delay);
                        };
                        
                        // Se a imagem já está carregada (cache), centralizar imediatamente
                        if (bannerPreview.complete && bannerPreview.naturalWidth > 0) {
                            const delay = window.innerWidth > 768 ? 200 : 100;
                            setTimeout(() => {
                                centerBannerImage();
                                if (window.innerWidth > 768) {
                                    setTimeout(() => {
                                        centerBannerImage();
                                    }, 300);
                                }
                            }, delay);
                        }
                    };
                    reader.readAsDataURL(file);
                });
            }
            
            // Zoom com roda do mouse (desktop)
            if (bannerContainer) {
                bannerContainer.addEventListener('wheel', function(e) {
                    if (!isAdjustingMode) return;
                    e.preventDefault();
                    bannerScale += e.deltaY * -0.001;
                    bannerScale = Math.min(Math.max(0.5, bannerScale), 3);
                    applyBannerTransform();
                });
            }
            
            // Arrastar a imagem (desktop)
            let mouseStartY = 0;
            let isActuallyDragging = false;
            
            if (bannerPreview) {
                bannerPreview.addEventListener('mousedown', function(e) {
                    if (!isAdjustingMode) return;
                    e.preventDefault();
                    e.stopPropagation();
                    isDraggingBanner = true;
                    isActuallyDragging = false;
                    mouseStartY = e.clientY;
                    bannerStart = { x: e.clientX - bannerPos.x, y: e.clientY - bannerPos.y };
                    bannerPreview.style.cursor = 'grabbing';
                });
            }
            
            window.addEventListener('mouseup', function(e) {
                if (isDraggingBanner) {
                    isDraggingBanner = false;
                    isActuallyDragging = false;
                    if (bannerPreview) {
                        bannerPreview.style.cursor = 'grab';
                    }
                    document.body.style.overflow = '';
                }
            });
            
            window.addEventListener('mousemove', function(e) {
                if (!isDraggingBanner || !isAdjustingMode) return;
                
                // Verificar se é realmente um arrasto (movimento significativo)
                const deltaY = Math.abs(e.clientY - mouseStartY);
                if (deltaY > 3) {
                    isActuallyDragging = true;
                    e.preventDefault();
                    e.stopPropagation();
                    document.body.style.overflow = 'hidden';
                }
                
                if (isActuallyDragging) {
                    bannerPos.x = e.clientX - bannerStart.x;
                    bannerPos.y = e.clientY - bannerStart.y;
                    applyBannerTransform();
                }
            });
            
            // Toque com dois dedos para zoom (mobile)
            if (bannerContainer) {
                let touchStartTime = 0;
                let touchStartY = 0;
                
                bannerContainer.addEventListener('touchmove', function(e) {
                    if (!isAdjustingMode) return;
                    if (e.touches.length === 2) {
                        e.preventDefault();
                        const dist = Math.hypot(
                            e.touches[0].pageX - e.touches[1].pageX,
                            e.touches[0].pageY - e.touches[1].pageY
                        );
                        if (!initialDistance) initialDistance = dist;
                        const delta = dist / initialDistance;
                        bannerScale = Math.min(Math.max(0.5, bannerScale * delta), 3);
                        initialDistance = dist;
                        applyBannerTransform();
                    } else if (e.touches.length === 1 && isDraggingBanner) {
                        const touch = e.touches[0];
                        const deltaY = Math.abs(touch.pageY - touchStartY);
                        const timeDelta = Date.now() - touchStartTime;
                        
                        if (deltaY > 5 || timeDelta > 50) {
                            e.preventDefault();
                            document.body.style.overflow = 'hidden';
                        }
                        
                        bannerPos.x = touch.pageX - bannerStart.x;
                        bannerPos.y = touch.pageY - bannerStart.y;
                        applyBannerTransform();
                    }
                }, { passive: false });
                
                bannerContainer.addEventListener('touchstart', function(e) {
                    if (!isAdjustingMode) return;
                    if (e.touches.length === 1) {
                        touchStartTime = Date.now();
                        touchStartY = e.touches[0].pageY;
                        isDraggingBanner = true;
                        bannerStart = { x: e.touches[0].pageX - bannerPos.x, y: e.touches[0].pageY - bannerPos.y };
                    }
                }, { passive: true });
                
                bannerContainer.addEventListener('touchend', function(e) {
                    isDraggingBanner = false;
                    initialDistance = null;
                    document.body.style.overflow = '';
                    touchStartTime = 0;
                });
            }
            
            if (btnChangeBanner && bannerInput) {
                btnChangeBanner.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    bannerInput.click();
                });
            }

            // Gallery photos (1-7) - apenas imagens
            for (let i = 1; i <= 7; i++) {
                const galeriaInput = document.getElementById(`galeria-photo-${i}`);
                const galeriaPreview = document.getElementById(`galeria-preview-${i}`);
                const btnChangeGaleria = document.getElementById(`btn-change-galeria-${i}`);
                
                if (galeriaInput) {
                    galeriaInput.addEventListener('change', function(e) {
                        const file = e.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                const url = e.target.result;
                                // Update preview
                                if (galeriaPreview) {
                                    const uploadBox = document.getElementById(`galeria-upload-box-${i}`);
                                    const uploadIcon = uploadBox?.querySelector('.upload-icon');
                                    const uploadText = uploadBox?.querySelector('.upload-text');
                                    
                                    galeriaPreview.innerHTML = `<img src="${url}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
                                    galeriaPreview.style.display = 'block';
                                    
                                    // Esconder overlay quando há preview
                                    const overlay = uploadBox?.querySelector('.galeria-upload-overlay');
                                    if (overlay) overlay.style.display = 'none';
                                    if (uploadIcon) uploadIcon.style.display = 'none';
                                    if (uploadText) uploadText.style.display = 'none';
                                }
                                // Show change button
                                if (btnChangeGaleria) btnChangeGaleria.style.display = 'inline-block';
                                // Update gallery preview container if needed
                                updateGalleryPreview();
                                // Verificar se deve mostrar o botão de testar fotos (após atualizar o preview)
                                setTimeout(() => {
                                    checkAndShowTestButton();
                                }, 200);
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                    
                    if (btnChangeGaleria) {
                        btnChangeGaleria.addEventListener('click', function() {
                            galeriaInput.click();
                        });
                    }
                }
            }
            // Gallery photo 8 - video bloqueado (Em breve)
            const galeriaInput8 = document.getElementById('galeria-photo-8');
            const galeriaPreview8 = document.getElementById('galeria-preview-8');
            const btnChangeGaleria8 = document.getElementById('btn-change-galeria-8');
            const uploadBox8 = document.getElementById('galeria-upload-box-8');
            const uploadIcon8 = uploadBox8?.querySelector('.upload-icon');
            const uploadText8 = uploadBox8?.querySelector('.upload-text');

            if (galeriaInput8) {
                galeriaInput8.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        if (!file.type.startsWith('image/')) {
                            alert('Videos na galeria estarao disponiveis em breve. Selecione uma foto neste campo.');
                            e.target.value = '';
                            return;
                        }

                        if (file.size > 20 * 1024 * 1024) {
                            alert('A foto e muito grande. Maximo permitido: 20MB.');
                            e.target.value = '';
                            return;
                        }

                        const reader = new FileReader();
                        reader.onload = function(ev) {
                            if (galeriaPreview8) {
                                galeriaPreview8.innerHTML = `<img src="${ev.target.result}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" alt="Galeria 8">`;
                                galeriaPreview8.style.display = 'block';
                            }
                            const overlay8 = uploadBox8?.querySelector('.galeria-upload-overlay');
                            if (overlay8) overlay8.style.display = 'none';
                            if (uploadIcon8) uploadIcon8.style.display = 'none';
                            if (uploadText8) uploadText8.style.display = 'none';
                            if (btnChangeGaleria8) btnChangeGaleria8.style.display = 'inline-block';
                            updateGalleryPreview();
                            setTimeout(() => {
                                checkAndShowTestButton();
                            }, 100);
                        };
                        reader.readAsDataURL(file);
                    }
                });

                if (btnChangeGaleria8) {
                    btnChangeGaleria8.addEventListener('click', function() {
                        galeriaInput8.click();
                    });
                }
            }

            // Gallery photo 9 - Foto de Stories (tambem vai para galeria)
            const galeriaInput9 = document.getElementById('galeria-photo-9');
            const galeriaPreview9 = document.getElementById('galeria-preview-9');
            const btnChangeGaleria9 = document.getElementById('btn-change-galeria-9');
            const uploadBox9 = document.getElementById('galeria-upload-box-9');
            const uploadIcon9 = uploadBox9?.querySelector('.upload-icon');
            const uploadText9 = uploadBox9?.querySelector('.upload-text');
            
            if (galeriaInput9) {
                galeriaInput9.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        if (!file.type.startsWith('image/')) {
                            alert('Por favor, selecione uma imagem.');
                            return;
                        }
                        
                        // Preview de imagem
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const url = e.target.result;
                            if (galeriaPreview9) {
                                galeriaPreview9.innerHTML = `<img src="${url}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
                                galeriaPreview9.style.display = 'block';
                            }
                            // Esconder overlay quando há preview
                            const overlay9 = uploadBox9?.querySelector('.galeria-upload-overlay');
                            if (overlay9) overlay9.style.display = 'none';
                            if (uploadIcon9) uploadIcon9.style.display = 'none';
                            if (uploadText9) uploadText9.style.display = 'none';
                            
                            // Show change button
                            if (btnChangeGaleria9) btnChangeGaleria9.style.display = 'inline-block';
                            // Update gallery preview container if needed (inclui na galeria)
                            updateGalleryPreview();
                            // Verificar se deve mostrar o botão de testar fotos (após atualizar o preview)
                            setTimeout(() => {
                                checkAndShowTestButton();
                            }, 200);
                        };
                        reader.readAsDataURL(file);
                        // A foto também será usada como stories - pode adicionar lógica adicional aqui se necessário
                        console.log('✅ Foto de Stories carregada:', file.name);
                    }
                });
                
                if (btnChangeGaleria9) {
                    btnChangeGaleria9.addEventListener('click', function() {
                        galeriaInput9.click();
                    });
                }
            }
            
            // Gallery photos (10-12) - apenas imagens
            for (let i = 10; i <= 12; i++) {
                const galeriaInput = document.getElementById(`galeria-photo-${i}`);
                const galeriaPreview = document.getElementById(`galeria-preview-${i}`);
                const btnChangeGaleria = document.getElementById(`btn-change-galeria-${i}`);
                
                if (galeriaInput) {
                    galeriaInput.addEventListener('change', function(e) {
                        const file = e.target.files[0];
                        if (file) {
                            const reader = new FileReader();
                            reader.onload = function(e) {
                                const url = e.target.result;
                                // Update preview
                                if (galeriaPreview) {
                                    const uploadBox = document.getElementById(`galeria-upload-box-${i}`);
                                    const uploadIcon = uploadBox?.querySelector('.upload-icon');
                                    const uploadText = uploadBox?.querySelector('.upload-text');
                                    
                                    galeriaPreview.innerHTML = `<img src="${url}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
                                    galeriaPreview.style.display = 'block';
                                    
                                    // Esconder overlay quando há preview
                                    const overlay = uploadBox?.querySelector('.galeria-upload-overlay');
                                    if (overlay) overlay.style.display = 'none';
                                    if (uploadIcon) uploadIcon.style.display = 'none';
                                    if (uploadText) uploadText.style.display = 'none';
                                }
                                // Show change button
                                if (btnChangeGaleria) btnChangeGaleria.style.display = 'inline-block';
                                // Update gallery preview container if needed
                                updateGalleryPreview();
                                // Verificar se deve mostrar o botão de testar fotos (após atualizar o preview)
                                setTimeout(() => {
                                    checkAndShowTestButton();
                                }, 200);
                            };
                            reader.readAsDataURL(file);
                        }
                    });
                    
                    if (btnChangeGaleria) {
                        btnChangeGaleria.addEventListener('click', function() {
                            galeriaInput.click();
                        });
                    }
                }
            }
            
            // Verificação inicial do botão após configurar todos os uploads
            setTimeout(() => {
                checkAndShowTestButton();
            }, 500);
        }

        // Video upload
        function setupVideoUpload() {
            const videoInput = document.getElementById('videoCapa');
            const videoPreview = document.getElementById('video-preview');
            const btnChangeVideo = document.getElementById('btn-change-video');
            
            if (videoInput) {
                videoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const url = URL.createObjectURL(file);
                        // Update preview
                        if (videoPreview) {
                            videoPreview.innerHTML = `
                                <video controls style="max-width: 100%; border-radius: 8px;">
                                    <source src="${url}" type="${file.type}">
                                </video>
                                <p style="margin-top: 10px; color: #666; font-size: 12px;">${file.name}</p>
                            `;
                            videoPreview.style.display = 'block';
                        }
                        // Show change button
                        if (btnChangeVideo) btnChangeVideo.style.display = 'inline-block';
                    }
                });
                
                if (btnChangeVideo) {
                    btnChangeVideo.addEventListener('click', function() {
                        videoInput.click();
                    });
                }
            }
        }

        // Função para quebrar palavras longas automaticamente
        function breakLongWords(text, maxWordLength = 20) {
            if (!text) return text;
            
            // Dividir o texto em palavras (mantendo espaços e quebras de linha)
            return text.split(/(\s+)/).map(word => {
                // Se for espaço, manter como está
                if (/^\s+$/.test(word)) {
                    return word;
                }
                // Se a palavra tiver mais de maxWordLength caracteres, quebrar
                if (word.length > maxWordLength) {
                    return word.match(new RegExp(`.{1,${maxWordLength}}`, 'g')).join(' ');
                }
                return word;
            }).join('');
        }

        // Description character counter
        function setupDescriptionCounter() {
            const descricaoInput = document.getElementById('descricao');
            const charCount = document.getElementById('charCount');
            const charWarning = document.getElementById('charWarning');
            const charSuccess = document.getElementById('charSuccess');
            const charsNeeded = document.getElementById('charsNeeded');
            const descriptionText = document.getElementById('description-text');
            
            if (descricaoInput) {
                descricaoInput.addEventListener('input', function() {
                    let text = this.value;
                    const maxLength = 1500;
                    
                    // Quebrar palavras longas automaticamente
                    const textWithBreaks = breakLongWords(text, 20);
                    if (textWithBreaks !== text) {
                        const cursorPosition = this.selectionStart;
                        text = textWithBreaks;
                        
                        // Limitar ao máximo de caracteres
                        if (text.length > maxLength) {
                            text = text.substring(0, maxLength);
                        }
                        
                        // Atualizar valor e reposicionar cursor
                        this.value = text;
                        const newCursorPosition = Math.min(cursorPosition, text.length);
                        this.setSelectionRange(newCursorPosition, newCursorPosition);
                    }
                    
                    // Limitar ao máximo de caracteres se exceder
                    if (text.length > maxLength) {
                        text = text.substring(0, maxLength);
                        this.value = text;
                    }
                    
                    const length = text.length;
                    const minLength = 150;
                    
                    // Update counter
                    if (charCount) {
                        charCount.textContent = length;
                        charCount.style.color = length < minLength ? '#dc3545' : length > maxLength ? '#dc3545' : '#28a745';
                    }
                    
                    // Update warning/success messages
                    if (length < minLength) {
                        if (charWarning) {
                            charWarning.style.display = 'block';
                            if (charsNeeded) charsNeeded.textContent = minLength - length;
                        }
                        if (charSuccess) charSuccess.style.display = 'none';
                    } else if (length <= maxLength) {
                        if (charWarning) charWarning.style.display = 'none';
                        if (charSuccess) charSuccess.style.display = 'block';
                    } else {
                        if (charWarning) charWarning.style.display = 'block';
                        if (charSuccess) charSuccess.style.display = 'none';
                    }
                    
                    // Update preview
                    if (descriptionText) {
                        descriptionText.textContent = text || 'Sua descrição aparecerá aqui...';
                    }
                });
            }
        }

        // Nome validation and counter
        function setupNomeValidation() {
            const nomeInput = document.getElementById('profile-name');
            const nomeCharCount = document.getElementById('nome-char-count');
            const nomeCharCounter = document.querySelector('.nome-char-counter');
            
            if (nomeInput) {
                // Atualiza contador ao digitar
                nomeInput.addEventListener('input', function(event) {
                    const length = this.value.length;
                    const maxLength = 25;
                    
                    // Atualiza contador
                    if (nomeCharCount) {
                        nomeCharCount.textContent = length;
                    }
                    
                    // Atualiza estilo do contador
                    if (nomeCharCounter) {
                        if (length === 0) {
                            nomeCharCounter.classList.remove('warning', 'error');
                        } else if (length >= maxLength - 3) {
                            nomeCharCounter.classList.add('warning');
                            nomeCharCounter.classList.remove('error');
                        } else {
                            nomeCharCounter.classList.remove('warning', 'error');
                        }
                    }
                    
                    // Validação visual do input
                    const trimmedLength = this.value.trim().length;
                    if (trimmedLength > 0 && trimmedLength < 2) {
                        // Apenas mostra erro se tiver texto digitado mas menos de 2 caracteres
                        this.style.borderColor = '#dc3545';
                    } else if (length >= maxLength) {
                        this.style.borderColor = '#ff9800';
                    } else {
                        this.style.borderColor = 'transparent';
                    }
                    
                    // Validação de mínimo - apenas define a mensagem, sem mostrar erro durante digitação
                    if (trimmedLength > 0 && trimmedLength < 2) {
                        // Define a mensagem de erro, mas não chama checkValidity() para não bloquear a digitação
                        this.setCustomValidity('O nome deve ter no mínimo 2 caracteres');
                    } else if (trimmedLength === 0) {
                        // Se vazio, apenas validação de required
                        this.setCustomValidity('');
                    } else if (trimmedLength >= 2) {
                        this.setCustomValidity('');
                    }
                    
                    // Atualiza preview do card se estiver aberto (apenas se não for evento interno)
                    if (!event || !event._skipUpdateCardPreview) {
                        updateCardPreview();
                    }
                });
                
                // Validação ao perder foco
                nomeInput.addEventListener('blur', function() {
                    const trimmedLength = this.value.trim().length;
                    if (trimmedLength === 0) {
                        this.style.borderColor = '#dc3545';
                        this.setCustomValidity('O nome é obrigatório');
                    } else if (trimmedLength > 0 && trimmedLength < 2) {
                        this.style.borderColor = '#dc3545';
                        this.setCustomValidity('O nome deve ter no mínimo 2 caracteres');
                    } else {
                        this.setCustomValidity('');
                        this.style.borderColor = 'transparent';
                    }
                    this.checkValidity();
                });
                
                // Validação ao focar
                nomeInput.addEventListener('focus', function() {
                    if (this.value.trim().length > 0) {
                        this.style.borderColor = 'var(--primary-color)';
                    }
                });
                
                // Previne submissão se inválido
                nomeInput.addEventListener('invalid', function(e) {
                    e.preventDefault();
                    this.style.borderColor = '#dc3545';
                    const trimmedLength = this.value.trim().length;
                    if (trimmedLength === 0) {
                        alert('Por favor, digite seu nome (obrigatório)');
                    } else if (trimmedLength > 0 && trimmedLength < 2) {
                        alert('O nome deve ter no mínimo 2 caracteres');
                    }
                });
            }
        }
        
        // Função para validar frase de efeito
        function setupFraseEfeitoValidation() {
            const fraseEfeito = document.getElementById('profile-description');
            const fraseEfeitoCharCount = document.getElementById('frase-efeito-char-count');
            const minLength = 50;
            const maxLength = 130;
            
            if (!fraseEfeito || !fraseEfeitoCharCount) return;
            
            // Atualiza contador ao digitar
            fraseEfeito.addEventListener('input', function() {
                let text = this.value;
                
                // Quebrar palavras longas automaticamente
                const textWithBreaks = breakLongWords(text, 20);
                if (textWithBreaks !== text) {
                    const cursorPosition = this.selectionStart;
                    text = textWithBreaks;
                    
                    // Limitar ao máximo de caracteres se exceder
                    if (text.length > maxLength) {
                        text = text.substring(0, maxLength);
                    }
                    
                    // Atualizar valor e reposicionar cursor
                    this.value = text;
                    const newCursorPosition = Math.min(cursorPosition, text.length);
                    this.setSelectionRange(newCursorPosition, newCursorPosition);
                }
                
                // Limitar ao máximo de caracteres se exceder
                if (text.length > maxLength) {
                    text = text.substring(0, maxLength);
                    this.value = text;
                }
                
                const length = text.trim().length;
                fraseEfeitoCharCount.textContent = length;
                
                // Atualiza cor do contador e validação
                // Força validação HTML nativa para atualizar estados :valid/:invalid
                this.checkValidity();
                
                if (length === 0) {
                    fraseEfeitoCharCount.style.color = '#dc3545';
                    this.setCustomValidity('A frase de efeito é obrigatória (mínimo 50 caracteres)');
                } else if (length < minLength) {
                    fraseEfeitoCharCount.style.color = '#dc3545';
                    const charsNeeded = minLength - length;
                    this.setCustomValidity(`Faltam ${charsNeeded} caracteres. Mínimo: ${minLength} caracteres.`);
                } else if (length > maxLength) {
                    fraseEfeitoCharCount.style.color = '#dc3545';
                    this.setCustomValidity(`Máximo de ${maxLength} caracteres permitido.`);
                } else if (length > 100) {
                    fraseEfeitoCharCount.style.color = '#ffc107';
                    this.setCustomValidity('');
                } else {
                    fraseEfeitoCharCount.style.color = '#28a745';
                    this.setCustomValidity('');
                }
            });
            
            // Validação ao perder foco
            fraseEfeito.addEventListener('blur', function() {
                const length = this.value.trim().length;
                // Força validação HTML nativa
                this.checkValidity();
                
                if (length < minLength) {
                    if (length === 0) {
                        this.setCustomValidity('A frase de efeito é obrigatória (mínimo 50 caracteres)');
                    } else {
                        const charsNeeded = minLength - length;
                        this.setCustomValidity(`Faltam ${charsNeeded} caracteres. Mínimo: ${minLength} caracteres.`);
                    }
                } else {
                    this.setCustomValidity('');
                }
            });
            
            // Força validação ao focar para atualizar estados visuais
            fraseEfeito.addEventListener('focus', function() {
                this.checkValidity();
            });
            
            // Previne submissão se inválido (sem alert bloqueante durante digitação)
            fraseEfeito.addEventListener('invalid', function(e) {
                // Não mostrar alert durante digitação, apenas atualizar visualmente
                // O alert só aparecerá no submit do formulário se necessário
                e.preventDefault();
            });
            
            // Inicializa contador
            const initialLength = fraseEfeito.value.trim().length;
            fraseEfeitoCharCount.textContent = initialLength;
            if (initialLength === 0) {
                fraseEfeitoCharCount.style.color = '#dc3545';
            } else if (initialLength < minLength) {
                fraseEfeitoCharCount.style.color = '#dc3545';
            } else if (initialLength > 100) {
                fraseEfeitoCharCount.style.color = initialLength > maxLength ? '#dc3545' : '#ffc107';
            } else {
                fraseEfeitoCharCount.style.color = '#28a745';
            }
        }

        // Info section interactions
        function setupInfoSectionInteractions() {
            // Horário 24h - mostrar/esconder campos customizados
            const horario24hSim = document.getElementById('horario-24h-sim');
            const horario24hNao = document.getElementById('horario-24h-nao');
            const horarioCustomContainer = document.getElementById('horario-custom-container');
            const horarioInicio = document.getElementById('horario-inicio');
            const horarioFim = document.getElementById('horario-fim');
            
            function toggleHorarioCustom() {
                if (horario24hNao && horario24hNao.checked && horarioCustomContainer) {
                    horarioCustomContainer.style.display = 'block';
                    if (horarioInicio) horarioInicio.required = true;
                    if (horarioFim) horarioFim.required = true;
                } else {
                    if (horarioCustomContainer) horarioCustomContainer.style.display = 'none';
                    if (horarioInicio) {
                        horarioInicio.required = false;
                        horarioInicio.value = '';
                    }
                    if (horarioFim) {
                        horarioFim.required = false;
                        horarioFim.value = '';
                    }
                }
            }
            
            if (horario24hSim) {
                horario24hSim.addEventListener('change', toggleHorarioCustom);
            }
            if (horario24hNao) {
                horario24hNao.addEventListener('change', toggleHorarioCustom);
            }
            
            // Validação de checkboxes "Atende" (pelo menos 1 obrigatório)
            const atendeCheckboxes = document.querySelectorAll('input[name="atende"]');
            const atendeGroup = document.getElementById('atende-checkbox-group');
            
            function updateAtendePulse() {
                const checked = Array.from(atendeCheckboxes).some(cb => cb.checked);
                if (atendeGroup) {
                    if (checked) {
                        atendeGroup.classList.remove('checkbox-group-required');
                        atendeGroup.classList.add('valid');
                    } else {
                        atendeGroup.classList.add('checkbox-group-required');
                        atendeGroup.classList.remove('valid');
                    }
                }
            }
            
            atendeCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checked = Array.from(atendeCheckboxes).some(cb => cb.checked);
                    updateAtendePulse();
                    if (!checked) {
                        this.setCustomValidity('Selecione pelo menos uma opção');
                    } else {
                        atendeCheckboxes.forEach(cb => cb.setCustomValidity(''));
                    }
                });
            });
            
            // Inicializa pulso para "Atende"
            updateAtendePulse();
            
            // Validação de checkboxes "Formas de Pagamento" (pelo menos 1 obrigatório)
            const pagamentoCheckboxes = document.querySelectorAll('input[name="pagamento"]');
            const pagamentoGroup = document.getElementById('pagamento-checkbox-group');
            
            function updatePagamentoPulse() {
                const checked = Array.from(pagamentoCheckboxes).some(cb => cb.checked);
                if (pagamentoGroup) {
                    if (checked) {
                        pagamentoGroup.classList.remove('checkbox-group-required');
                        pagamentoGroup.classList.add('valid');
                    } else {
                        pagamentoGroup.classList.add('checkbox-group-required');
                        pagamentoGroup.classList.remove('valid');
                    }
                }
            }
            
            pagamentoCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checked = Array.from(pagamentoCheckboxes).some(cb => cb.checked);
                    updatePagamentoPulse();
                    if (!checked) {
                        this.setCustomValidity('Selecione pelo menos uma forma de pagamento');
                    } else {
                        pagamentoCheckboxes.forEach(cb => cb.setCustomValidity(''));
                    }
                });
            });
            
            // Inicializa pulso para "Formas de Pagamento"
            updatePagamentoPulse();
            
            // Validação no submit do formulário
            const form = document.getElementById('cadastroForm');
            if (form) {
                form.addEventListener('submit', function(e) {
                    // Valida Atende
                    const atendeChecked = Array.from(atendeCheckboxes).some(cb => cb.checked);
                    if (!atendeChecked) {
                        e.preventDefault();
                        alert('Por favor, selecione pelo menos uma opção em "Atende"');
                        return false;
                    }
                    
                    // Valida Formas de Pagamento
                    const pagamentoChecked = Array.from(pagamentoCheckboxes).some(cb => cb.checked);
                    if (!pagamentoChecked) {
                        e.preventDefault();
                        alert('Por favor, selecione pelo menos uma forma de pagamento');
                        return false;
                    }
                    
                    // Valida horário customizado se necessário
                    if (horario24hNao && horario24hNao.checked) {
                        if (!horarioInicio || !horarioInicio.value) {
                            e.preventDefault();
                            alert('Por favor, preencha o horário de início');
                            return false;
                        }
                        if (!horarioFim || !horarioFim.value) {
                            e.preventDefault();
                            alert('Por favor, preencha o horário de fim');
                            return false;
                        }
                    }
                });
            }
        }

        // Contact phone updates
        function setupContactUpdates() {
            const telefoneCelular = document.getElementById('telefone_celular');
            const telefoneFixo = document.getElementById('telefone_fixo');
            const btnLigarPhoneNumber = document.getElementById('btn-ligar-phone-number');
            const btnLigarAgora = document.getElementById('btn-ligar-agora');
            const btnWhatsapp = document.getElementById('btn-whatsapp');
            const btnTelefoneFixo = document.getElementById('btn-telefone-fixo');
            
            if (telefoneCelular) {
                telefoneCelular.addEventListener('input', function() {
                    const phone = this.value.replace(/\D/g, '');
                    const formatted = phone.length >= 10 ? formatPhone(phone) : this.value;
                    
                    // Update preview buttons
                    if (btnLigarPhoneNumber) btnLigarPhoneNumber.textContent = formatted || '(61) 98484-7878';
                    if (btnLigarAgora && phone) {
                        btnLigarAgora.href = `tel:+55${phone}`;
                    }
                    if (btnWhatsapp && phone) {
                        btnWhatsapp.href = `https://wa.me/55${phone}`;
                    }
                });
            }
            
            if (telefoneFixo) {
                telefoneFixo.addEventListener('input', function() {
                    const phone = this.value.replace(/\D/g, '');
                    
                    if (phone.length >= 10) {
                        // Show fixed phone button
                        if (btnTelefoneFixo) {
                            btnTelefoneFixo.style.opacity = '1';
                            btnTelefoneFixo.style.pointerEvents = 'auto';
                            btnTelefoneFixo.style.cursor = 'pointer';
                            btnTelefoneFixo.href = `tel:+55${phone}`;
                        }
                    } else {
                        // Hide fixed phone button
                        if (btnTelefoneFixo) {
                            btnTelefoneFixo.style.opacity = '0.5';
                            btnTelefoneFixo.style.pointerEvents = 'none';
                            btnTelefoneFixo.style.cursor = 'not-allowed';
                        }
                    }
                });
            }
        }

        // Format phone number
        function formatPhone(phone) {
            phone = phone.replace(/\D/g, '');
            if (phone.length === 11) {
                return `(${phone.slice(0, 2)}) ${phone.slice(2, 7)}-${phone.slice(7)}`;
            } else if (phone.length === 10) {
                return `(${phone.slice(0, 2)}) ${phone.slice(2, 6)}-${phone.slice(6)}`;
            }
            return phone;
        }

        // Services checkboxes sync with preview
        function setupServicesSync() {
            const serviceCheckboxes = document.querySelectorAll('input[name="servicos"]');
            const servicesList = document.querySelectorAll('.services-list-detailed li');
            
            // This will update the preview list when checkboxes are checked
            // The preview list items will be updated dynamically based on selected services
            if (serviceCheckboxes.length) {
                serviceCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', function() {
                        updateServicesPreview();
                    });
                });
            }
        }

        // Update services preview
        function updateServicesPreview() {
            const selectedServices = Array.from(document.querySelectorAll('input[name="servicos"]:checked'))
                .map(cb => {
                    const value = cb.value;
                    // Map values to display names
                    const serviceMap = {
                        'beijos-boca': 'Beijos na boca',
                        'oral-com-camisinha': 'Oral com camisinha',
                        'oral-sem-camisinha': 'Oral sem camisinha',
                        'oral-ate-final': 'Oral até o final',
                        'sexo-anal': 'Sexo anal',
                        'garganta-profunda': 'Garganta profunda',
                        'massagem-erotica': 'Massagem erótica',
                        'namoradinha': 'Namoradinha',
                        // Add more mappings as needed
                    };
                    return serviceMap[value] || value;
                });
            
            // Update preview sections (this is a simplified version)
            // In a full implementation, you would update each services section
            console.log('Serviços selecionados:', selectedServices);
        }

        // Setup change buttons
        function setupChangeButtons() {
            // All change buttons are already set up in setupPhotoUploads and setupVideoUpload
            // This function can be extended for additional change button functionality
        }

        // Setup form submission
        // Função para coletar todos os dados do formulário e gerar JSON
        function collectFormData() {
            const formData = new FormData(document.getElementById('cadastroForm'));
            const data = {};
            
            // Dados básicos
            data.nome = document.getElementById('profile-name')?.value || '';
            data.descricao = document.getElementById('descricao')?.value || '';
            data['frase-efeito'] = document.getElementById('profile-description')?.value || '';
            data.frase_efeito = document.getElementById('profile-description')?.value || ''; // Compatibilidade
            
            // Contato
            data.telefone_celular = document.getElementById('telefone_celular')?.value || '';
            data.telefone_fixo = document.getElementById('telefone_fixo')?.value || null;
            
            // Informações básicas
            data.idade = document.getElementById('info-idade')?.value || '';
            data.peso = document.getElementById('info-peso')?.value || '';
            data.altura = document.getElementById('info-altura')?.value || '';
            data['oral-sem'] = document.getElementById('info-oral-sem')?.value || '';
            data.oral_sem = document.getElementById('info-oral-sem')?.value || '';
            data.beija = document.getElementById('info-beija')?.value || '';
            data.anal = document.getElementById('info-anal')?.value || '';
            data.local = document.getElementById('info-local')?.value || '';
            data['mora-so'] = document.getElementById('info-mora-so')?.value || '';
            data.mora_so = document.getElementById('info-mora-so')?.value || '';
            data.valor = document.getElementById('info-valor')?.value || '';
            
            // Horário
            const horario24h = document.querySelector('input[name="horario-24h"]:checked')?.value;
            data.horario_24h = horario24h || '';
            data.horario_inicio = document.getElementById('horario-inicio')?.value || '';
            data.horario_fim = document.getElementById('horario-fim')?.value || '';
            
            // Atende (checkboxes - array)
            const atendeCheckboxes = document.querySelectorAll('input[name="atende"]:checked');
            data.atende = Array.from(atendeCheckboxes).map(cb => cb.value);
            
            // Pagamento (checkboxes - array)
            const pagamentoCheckboxes = document.querySelectorAll('input[name="pagamento"]:checked');
            data.pagamento = Array.from(pagamentoCheckboxes).map(cb => cb.value);
            
            // Serviços (checkboxes - array)
            const servicosCheckboxes = document.querySelectorAll('input[name="servicos"]:checked');
            data.servicos = Array.from(servicosCheckboxes).map(cb => cb.value);
            
            // Estado e Cidade (do preview)
            const estadoSelect = document.querySelector('.card-preview-estado-select');
            const cidadeSelect = document.querySelector('.card-preview-cidade-select');
            data.estado = estadoSelect?.value || '';
            data.cidade = cidadeSelect?.value || '';
            
            // Fotos e vídeos
            const files = {
                foto_banner: document.getElementById('banner-photo')?.files[0] || null,
                foto_capa: document.getElementById('capa-photo')?.files[0] || null,
                galeria: []
            };
            
            // Coletar fotos da galeria (1-12)
            for (let i = 1; i <= 10; i++) {
                const input = document.getElementById(`galeria-photo-${i}`);
                if (input && input.files && input.files[0]) {
                    const file = input.files[0];
                    files.galeria.push({
                        campo: `galeria_${i}`,
                        arquivo: file.name,
                        tipo: file.type,
                        tamanho: file.size,
                        isVideo: file.type.startsWith('video/'),
                        isStories: i === 9
                    });
                }
            }
            data.files = files;
            
            // Timestamp
            data.created_at = new Date().toISOString();
            data.updated_at = new Date().toISOString();
            
            // Status inicial
            data.status = 'rascunho'; // ou 'pendente', 'aprovado', etc.
            
            return data;
        }
        
        // Função para fazer upload de um arquivo para o Firebase Storage
        async function uploadFileToStorage(file, anuncioId, fieldName) {
            try {
                if (!window.firebaseStorage) {
                    throw new Error('Firebase Storage não inicializado');
                }
                
                const storageRef = window.firebaseStorage.ref();
                const timestamp = Date.now();
                const fileName = `${fieldName}_${timestamp}_${file.name}`;
                
                // Verificar se é arquivo de verificação para salvar na pasta upload_doc
                const verificationFields = ['documento-frente', 'documento-verso', 'selfie-documento', 'verification-video'];
                const isVerificationFile = verificationFields.includes(fieldName);
                
                // Definir caminho do arquivo
                const filePath = isVerificationFile 
                    ? `advertisements/${anuncioId}/upload_doc/${fileName}`
                    : `advertisements/${anuncioId}/${fileName}`;
                
                const fileRef = storageRef.child(filePath);
                
                console.log(`📁 Fazendo upload: ${fieldName} -> ${file.name}${isVerificationFile ? ' (pasta upload_doc)' : ''}`);
                
                const snapshot = await fileRef.put(file);
                const downloadURL = await snapshot.ref.getDownloadURL();
                
                console.log(`✅ Upload concluído: ${fieldName} -> ${downloadURL}`);
                
                return downloadURL;
            } catch (error) {
                console.error(`❌ Erro no upload de ${fieldName}:`, error);
                throw error;
            }
        }

        // Função para fazer upload de todos os arquivos
        async function uploadFilesToFirebase(formElement, anuncioId) {
            const uploadPromises = [];
            const fileFields = {};
            
            // Upload de foto banner
            const bannerInput = document.getElementById('banner-photo');
            if (bannerInput && bannerInput.files && bannerInput.files[0]) {
                const file = bannerInput.files[0];
                uploadPromises.push(
                    uploadFileToStorage(file, anuncioId, 'foto_banner').then(url => {
                        fileFields.foto_banner = url;
                        fileFields.foto_banner_url = url;
                        fileFields.foto_banner_name = file.name;
                    })
                );
            }
            
            // Upload de foto capa
            const capaInput = document.getElementById('capa-photo');
            if (capaInput && capaInput.files && capaInput.files[0]) {
                const file = capaInput.files[0];
                uploadPromises.push(
                    uploadFileToStorage(file, anuncioId, 'foto_capa').then(url => {
                        fileFields.foto_capa = url;
                        fileFields.foto_capa_url = url;
                        fileFields.foto_capa_name = file.name;
                    })
                );
            }
            
            // Upload de galeria (1-12)
            for (let i = 1; i <= 10; i++) {
                const galeriaInput = document.getElementById(`galeria-photo-${i}`);
                if (galeriaInput && galeriaInput.files && galeriaInput.files[0]) {
                    const file = galeriaInput.files[0];
                    const fieldName = `galeria_${i}`;
                    uploadPromises.push(
                        uploadFileToStorage(file, anuncioId, fieldName).then(url => {
                            fileFields[fieldName] = url;
                            fileFields[`${fieldName}_url`] = url;
                            fileFields[`${fieldName}_name`] = file.name;
                            if (i === 9) {
                                fileFields.foto_stories = url;
                                fileFields.foto_stories_url = url;
                                fileFields.foto_stories_name = file.name;
                            }
                        })
                    );
                }
            }
            
            // Upload de documentos de verificação (salvos na pasta upload_doc)
            const verificationFields = [
                { id: 'documento-frente', name: 'documento-frente' },
                { id: 'documento-verso', name: 'documento-verso' },
                { id: 'selfie-documento', name: 'selfie-documento' },
                { id: 'verification-video', name: 'verification-video' }
            ];
            
            verificationFields.forEach(field => {
                const input = document.getElementById(field.id);
                if (input && input.files && input.files[0]) {
                    const file = input.files[0];
                    uploadPromises.push(
                        uploadFileToStorage(file, anuncioId, field.name).then(url => {
                            fileFields[field.name] = url;
                            fileFields[`${field.name}_url`] = url;
                            fileFields[`${field.name}_name`] = file.name;
                        })
                    );
                }
            });
            
            // Aguardar todos os uploads
            if (uploadPromises.length > 0) {
                await Promise.all(uploadPromises);
                console.log('✅ Todos os arquivos foram enviados com sucesso');
            }
            
            return fileFields;
        }

        // Função para salvar anúncio no Firebase
        async function saveAdvertisementToFirebase(formElement) {
            try {
                console.log('🔥 Iniciando salvamento no Firebase...');
                
                // Verificar se Firebase está inicializado
                if (!db) {
                    throw new Error('Firebase não inicializado. Aguarde alguns instantes e tente novamente.');
                }
                
                // Verificar se usuário está autenticado
                if (!auth || !auth.currentUser) {
                    throw new Error('Usuário não autenticado. Por favor, faça login primeiro.');
                }
                
                // Coletar dados do formulário usando FormData
                const formDataObj = new FormData(formElement);
                
                // Coletar dados adicionais do formulário
                const nome = document.getElementById('profile-name')?.value || '';
                const descricao = document.getElementById('descricao')?.value || '';
                const telefoneCelular = document.getElementById('telefone_celular')?.value || '';
                const telefoneFixo = document.getElementById('telefone_fixo')?.value || '';
                const idade = document.getElementById('info-idade')?.value || '';
                const peso = document.getElementById('info-peso')?.value || '';
                const altura = document.getElementById('info-altura')?.value || '';
                const oralSem = document.getElementById('info-oral-sem')?.value || '';
                const beija = document.getElementById('info-beija')?.value || '';
                const anal = document.getElementById('info-anal')?.value || '';
                const local = document.getElementById('info-local')?.value || '';
                const moraSo = document.getElementById('info-mora-so')?.value || '';
                const valor = document.getElementById('info-valor')?.value || '';
                
                // Horário
                const horario24h = document.querySelector('input[name="horario-24h"]:checked')?.value || '';
                const horarioInicio = document.getElementById('horario-inicio')?.value || '';
                const horarioFim = document.getElementById('horario-fim')?.value || '';
                
                // Atende (checkboxes - array)
                const atendeCheckboxes = document.querySelectorAll('input[name="atende"]:checked');
                const atende = Array.from(atendeCheckboxes).map(cb => cb.value);
                
                // Pagamento (checkboxes - array)
                const pagamentoCheckboxes = document.querySelectorAll('input[name="pagamento"]:checked');
                const pagamento = Array.from(pagamentoCheckboxes).map(cb => cb.value);
                
                // Serviços (checkboxes - array)
                const servicosCheckboxes = document.querySelectorAll('input[name="servicos"]:checked');
                const servicos = Array.from(servicosCheckboxes).map(cb => cb.value);
                
                // Dados de Massagista (checkboxes - arrays)
                // Tipos de Massagens
                const tiposMassagemCheckboxes = document.querySelectorAll('input[name="tipos-massagem"]:checked');
                const tiposMassagem = Array.from(tiposMassagemCheckboxes).map(cb => cb.value);
                
                // Finalização
                const finalizacaoCheckboxes = document.querySelectorAll('input[name="finalizacao"]:checked');
                const finalizacao = Array.from(finalizacaoCheckboxes).map(cb => cb.value);
                
                // Serviços Extras
                const servicosExtrasCheckboxes = document.querySelectorAll('input[name="servicos-extras"]:checked');
                const servicosExtras = Array.from(servicosExtrasCheckboxes).map(cb => cb.value);
                
                // Atendimento das Massagens Para
                // NOTA: O campo no HTML é "atendimento", não "atendimento-massagem"
                const atendimentoMassagemCheckboxes = document.querySelectorAll('input[name="atendimento"]:checked');
                const atendimentoMassagem = Array.from(atendimentoMassagemCheckboxes).map(cb => cb.value);
                
                // Instalações
                const instalacoesCheckboxes = document.querySelectorAll('input[name="instalacoes"]:checked');
                const instalacoes = Array.from(instalacoesCheckboxes).map(cb => cb.value);
                
                console.log('💆 Dados de massagista coletados:', {
                    tiposMassagem,
                    finalizacao,
                    servicosExtras,
                    atendimentoMassagem,
                    instalacoes
                });
                
                // Estado e Cidade (do preview ou do formulário)
                const estadoSelect = document.querySelector('.card-preview-estado-select') || 
                                    document.querySelector('select[name="estado"]');
                const cidadeSelect = document.querySelector('.card-preview-cidade-select') || 
                                    document.querySelector('select[name="cidade"]');
                const estado = estadoSelect?.value || '';
                const cidade = cidadeSelect?.value || '';
                
                // Preparar dados para o Firestore
                const advertisementData = {
                    // Dados básicos
                    nome: nome,
                    name: nome, // fallback
                    descricao: descricao,
                    frase_efeito: document.getElementById('profile-description')?.value || '',
                    
                    // Contato
                    telefone_celular: telefoneCelular,
                    telefone_fixo: telefoneFixo || null,
                    
                    // Informações básicas
                    idade: idade,
                    peso: peso,
                    altura: altura,
                    'oral-sem': oralSem,
                    oral_sem: oralSem,
                    beija: beija,
                    anal: anal,
                    local: local,
                    'mora-so': moraSo,
                    mora_so: moraSo,
                    valor: valor,
                    
                    // Horário
                    horario_24h: horario24h,
                    horario_inicio: horarioInicio,
                    horario_fim: horarioFim,
                    
                    // Arrays
                    atende: atende,
                    pagamento: pagamento,
                    servicos: servicos,
                    
                    // Dados de Massagista (arrays)
                    'tipos-massagem': tiposMassagem,
                    tipos_massagem: tiposMassagem, // Fallback
                    finalizacao: finalizacao,
                    'servicos-extras': servicosExtras,
                    servicos_extras: servicosExtras, // Fallback
                    'atendimento-massagem': atendimentoMassagem,
                    atendimento_massagem: atendimentoMassagem, // Fallback
                    atendimento: atendimentoMassagem, // Fallback adicional
                    instalacoes: instalacoes,
                    
                    // Localização
                    estado: estado,
                    cidade: cidade,
                    bairro: formDataObj.get('bairro') || '',
                    
                    // Categoria (pegar do localStorage ou do formulário)
                    categoria: localStorage.getItem('selectedCategoria') || formDataObj.get('categoria') || 'acompanhantes',
                    category: localStorage.getItem('selectedCategoria') || formDataObj.get('categoria') || 'acompanhantes',
                    gender: localStorage.getItem('selectedCategory') || formDataObj.get('category') || 'mulher',
                    
                    // Metadados
                    advertiserId: auth.currentUser.uid,
                    userEmail: auth.currentUser.email,
                    status: 'active',
                    createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                };
                
                console.log('📋 Dados coletados:', advertisementData);
                
                // Salvar dados básicos no Firestore
                const docRef = await db.collection('advertisements').add(advertisementData);
                console.log('✅ Anúncio salvo com ID:', docRef.id);
                
                // Fazer upload de arquivos
                const fileFields = await uploadFilesToFirebase(formElement, docRef.id);
                
                // Atualizar documento com URLs dos arquivos
                if (Object.keys(fileFields).length > 0) {
                    await docRef.update(fileFields);
                    console.log('✅ URLs dos arquivos atualizadas no documento');
                }
                
                // Mostrar mensagem de sucesso
                alert('✅ Anúncio criado com sucesso!');
                
                // Redirecionar após 2 segundos
                setTimeout(() => {
                    window.location.href = 'A_02__premium_copy.html';
                }, 2000);
                
                return docRef.id;
            } catch (error) {
                console.error('❌ ERRO AO SALVAR ANÚNCIO:', error);
                alert(`❌ Erro ao criar anúncio: ${error.message}\n\nVerifique o console (F12) para mais detalhes.`);
                throw error;
            }
        }
        
        function setupFormSubmission() {
            const form = document.getElementById('cadastroForm');
            const submitBtn = document.getElementById('btn-submit');
            
            if (form && submitBtn) {
                form.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    // Validar campos de altura e valor antes de submeter
                    const alturaInput = document.getElementById('info-altura');
                    const valorInput = document.getElementById('info-valor');
                    let isValid = true;
                    
                    // Validar altura
                    if (alturaInput && alturaInput.value) {
                        const alturaError = document.getElementById('altura-error');
                        const alturaValidation = validateHeight(alturaInput.value, alturaInput, alturaError);
                        if (!alturaValidation.valid) {
                            isValid = false;
                            alturaInput.focus();
                        }
                    }
                    
                    // Validar valor
                    if (valorInput && valorInput.value) {
                        const valorError = document.getElementById('valor-error');
                        const valorValidation = validatePrice(valorInput.value, valorInput, valorError);
                        if (!valorValidation.valid) {
                            isValid = false;
                            if (isValid) {
                                valorInput.focus();
                            }
                        }
                    }
                    
                    if (!isValid) {
                        alert('Por favor, corrija os erros nos campos de Altura e/ou Valor antes de continuar.');
                        return;
                    }
                    
                    // Validar limite de caracteres nos campos de texto
                    const descricaoInput = document.getElementById('descricao');
                    const fraseEfeitoInput = document.getElementById('profile-description');
                    
                    if (descricaoInput && descricaoInput.value.length > 1500) {
                        alert('A descrição não pode exceder 1500 caracteres. Por favor, reduza o texto.');
                        descricaoInput.focus();
                        return;
                    }
                    
                    if (fraseEfeitoInput && fraseEfeitoInput.value.length > 130) {
                        alert('A frase de efeito não pode exceder 130 caracteres. Por favor, reduza o texto.');
                        fraseEfeitoInput.focus();
                        return;
                    }
                    
                    // Validate form
                    if (!form.checkValidity()) {
                        form.reportValidity();
                        return;
                    }
                    
                    // Show loading state
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Criando anúncio...';
                    
                    try {
                        // Salvar no Firebase
                        await saveAdvertisementToFirebase(form);
                    } catch (error) {
                        console.error('Erro ao salvar:', error);
                        // Resetar botão em caso de erro
                        submitBtn.disabled = false;
                        submitBtn.innerHTML = '<i class="fas fa-check"></i> Criar anúncio';
                    }
                });
            }
        }
        
        // Função para validar e formatar telefones
        function setupTelefoneValidation() {
            // DDDs válidos no Brasil
            const validDDDs = ['11', '12', '13', '14', '15', '16', '17', '18', '19', 
                              '21', '22', '24', '27', '28', 
                              '31', '32', '33', '34', '35', '37', '38', 
                              '41', '42', '43', '44', '45', '46', '47', '48', '49', 
                              '51', '53', '54', '55', 
                              '61', '62', '63', '64', '65', '66', '67', '68', '69', 
                              '71', '73', '74', '75', '77', '79', 
                              '81', '82', '83', '84', '85', '86', '87', '88', '89', 
                              '91', '92', '93', '94', '95', '96', '97', '98', '99'];
            
            // Função auxiliar para validar DDD
            function isValidDDD(ddd) {
                return validDDDs.includes(ddd);
            }
            
            // Função para formatar telefone celular: (XX) 9XXXX-XXXX
            function formatCelular(value) {
                // Remove tudo que não é número
                const numbers = value.replace(/\D/g, '');
                
                // Limita a 11 dígitos (2 DDD + 9 número)
                const limited = numbers.slice(0, 11);
                
                let formatted = '';
                
                if (limited.length > 0) {
                    // Primeiros 2 dígitos (DDD)
                    if (limited.length <= 2) {
                        formatted = `(${limited}`;
                    } else {
                        const ddd = limited.slice(0, 2);
                        const numero = limited.slice(2);
                        formatted = `(${ddd})`;
                        
                        // Adiciona o número começando com 9
                        if (numero.length > 0) {
                            formatted += ` ${numero.slice(0, 5)}`;
                            
                            // Adiciona hífen antes dos últimos 4 dígitos
                            if (numero.length > 5) {
                                formatted += `-${numero.slice(5, 9)}`;
                            }
                        }
                    }
                }
                
                return formatted;
            }
            
            // Função para formatar telefone fixo: (XX) XXXX-XXXX
            function formatFixo(value) {
                // Remove tudo que não é número
                const numbers = value.replace(/\D/g, '');
                
                // Limita a 10 dígitos (2 DDD + 8 número)
                const limited = numbers.slice(0, 10);
                
                let formatted = '';
                
                if (limited.length > 0) {
                    // Adiciona parêntese após DDD
                    if (limited.length <= 2) {
                        formatted = `(${limited}`;
                    } else {
                        formatted = `(${limited.slice(0, 2)}`;
                        
                        // Adiciona espaço após DDD
                        if (limited.length > 2) {
                            const numero = limited.slice(2);
                            formatted += `) ${numero.slice(0, 4)}`;
                            
                            // Adiciona hífen antes dos últimos 4 dígitos
                            if (numero.length > 4) {
                                formatted += `-${numero.slice(4, 8)}`;
                            }
                        }
                    }
                }
                
                return formatted;
            }
            
            // Validação telefone celular
            const telefoneCelular = document.getElementById('telefone_celular');
            if (telefoneCelular) {
                telefoneCelular.addEventListener('input', function(e) {
                    // Permite apenas números
                    const numbers = this.value.replace(/\D/g, '');
                    
                    // Formata o número
                    this.value = formatCelular(numbers);
                    
                    // Validação
                    const numbersOnly = this.value.replace(/\D/g, '');
                    if (numbersOnly.length > 0) {
                        const ddd = numbersOnly.slice(0, 2);
                        const numero = numbersOnly.slice(2);
                        
                        // Validar DDD
                        if (numbersOnly.length >= 2 && !isValidDDD(ddd)) {
                            this.setCustomValidity('DDD inválido. Digite um DDD válido do Brasil.');
                            this.style.borderColor = '#dc3545';
                        }
                        // Validar formato de celular (deve começar com 9 e ter 9 dígitos)
                        else if (numbersOnly.length === 11) {
                            if (numero[0] !== '9') {
                                this.setCustomValidity('Número de celular deve começar com 9 (formato: 9XXXX-XXXX)');
                                this.style.borderColor = '#dc3545';
                            } else {
                                this.setCustomValidity('');
                                this.style.borderColor = '#28a745';
                            }
                        } else if (numbersOnly.length < 11) {
                            this.setCustomValidity('Número incompleto. Digite o número completo (DDD + 9 dígitos começando com 9)');
                            this.style.borderColor = '#ffc107';
                        } else {
                            this.setCustomValidity('');
                            this.style.borderColor = '#28a745';
                        }
                    } else {
                        this.setCustomValidity('');
                        this.style.borderColor = '#e9ecef';
                    }
                });
                
                telefoneCelular.addEventListener('blur', function() {
                    const numbersOnly = this.value.replace(/\D/g, '');
                    if (numbersOnly.length === 11) {
                        const ddd = numbersOnly.slice(0, 2);
                        const numero = numbersOnly.slice(2);
                        
                        if (!isValidDDD(ddd)) {
                            this.setCustomValidity('DDD inválido. Digite um DDD válido do Brasil.');
                            this.style.borderColor = '#dc3545';
                        } else if (numero[0] !== '9') {
                            this.setCustomValidity('Número de celular deve começar com 9 (formato: 9XXXX-XXXX)');
                            this.style.borderColor = '#dc3545';
                        } else {
                            this.setCustomValidity('');
                            this.style.borderColor = '#28a745';
                        }
                    } else if (numbersOnly.length > 0) {
                        this.setCustomValidity('Número incompleto. Digite o número completo (DDD + 9 dígitos começando com 9)');
                        this.style.borderColor = '#dc3545';
                    }
                    this.checkValidity();
                });
            }
            
            // Validação telefone fixo
            const telefoneFixo = document.getElementById('telefone_fixo');
            if (telefoneFixo) {
                telefoneFixo.addEventListener('input', function(e) {
                    // Permite apenas números
                    const numbers = this.value.replace(/\D/g, '');
                    
                    // Formata o número
                    this.value = formatFixo(numbers);
                    
                    // Validação (apenas se tiver algum número)
                    const numbersOnly = this.value.replace(/\D/g, '');
                    if (numbersOnly.length > 0) {
                        const ddd = numbersOnly.slice(0, 2);
                        
                        // Validar DDD
                        if (numbersOnly.length >= 2 && !isValidDDD(ddd)) {
                            this.setCustomValidity('DDD inválido. Digite um DDD válido do Brasil.');
                            this.style.borderColor = '#dc3545';
                        }
                        // Validar formato de fixo (8 dígitos)
                        else if (numbersOnly.length === 10) {
                            this.setCustomValidity('');
                            this.style.borderColor = '#28a745';
                        } else if (numbersOnly.length < 10) {
                            this.setCustomValidity('Número incompleto. Digite o número completo (DDD + 8 dígitos)');
                            this.style.borderColor = '#ffc107';
                        } else {
                            this.setCustomValidity('');
                            this.style.borderColor = '#28a745';
                        }
                    } else {
                        this.setCustomValidity('');
                        this.style.borderColor = '#e9ecef';
                    }
                });
                
                telefoneFixo.addEventListener('blur', function() {
                    const numbersOnly = this.value.replace(/\D/g, '');
                    if (numbersOnly.length > 0) {
                        const ddd = numbersOnly.slice(0, 2);
                        
                        if (!isValidDDD(ddd)) {
                            this.setCustomValidity('DDD inválido. Digite um DDD válido do Brasil.');
                            this.style.borderColor = '#dc3545';
                        } else if (numbersOnly.length < 10) {
                            this.setCustomValidity('Número incompleto. Digite o número completo (DDD + 8 dígitos)');
                            this.style.borderColor = '#dc3545';
                        } else {
                            this.setCustomValidity('');
                            this.style.borderColor = '#28a745';
                        }
                        this.checkValidity();
                    }
                });
            }
        }
        
        // Função para bloquear botões de contato na página de cadastro
        function blockContactButtons() {
            const btnWhatsapp = document.getElementById('btn-whatsapp');
            const btnMensagem = document.querySelector('a[onclick="openMessageModal()"]');
            
            if (btnWhatsapp) {
                btnWhatsapp.style.pointerEvents = 'none';
                btnWhatsapp.style.opacity = '0.5';
                btnWhatsapp.style.cursor = 'not-allowed';
                btnWhatsapp.href = '#';
                btnWhatsapp.addEventListener('click', function(e) {
                    e.preventDefault();
                    return false;
                });
            }
            
            if (btnMensagem) {
                btnMensagem.style.pointerEvents = 'none';
                btnMensagem.style.opacity = '0.5';
                btnMensagem.style.cursor = 'not-allowed';
                btnMensagem.removeAttribute('onclick');
                btnMensagem.addEventListener('click', function(e) {
                    e.preventDefault();
                    return false;
                });
            }
        }
        
        // Função para mostrar preview do JSON em um modal
        function showJsonPreview(data) {
            // Remover modal anterior se existir
            const existingModal = document.getElementById('json-preview-modal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // Criar modal
            const modal = document.createElement('div');
            modal.id = 'json-preview-modal';
            modal.style.cssText = 'position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.9); z-index: 20000; display: flex; align-items: center; justify-content: center; padding: 20px; box-sizing: border-box; overflow-y: auto;';
            
            const content = document.createElement('div');
            content.style.cssText = 'background: white; border-radius: 15px; padding: 30px; max-width: 900px; width: 100%; max-height: 90vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); position: relative;';
            
            const header = document.createElement('div');
            header.style.cssText = 'display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 2px solid #e9ecef; padding-bottom: 15px;';
            
            const title = document.createElement('h2');
            title.textContent = '📋 JSON para Banco de Dados';
            title.style.cssText = 'margin: 0; color: #333; font-size: 24px;';
            
            const closeBtn = document.createElement('button');
            closeBtn.innerHTML = '<i class="fas fa-times"></i>';
            closeBtn.style.cssText = 'background: #dc3545; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; cursor: pointer; font-size: 18px; display: flex; align-items: center; justify-content: center;';
            closeBtn.onclick = () => modal.remove();
            
            header.appendChild(title);
            header.appendChild(closeBtn);
            
            const jsonPre = document.createElement('pre');
            jsonPre.style.cssText = 'background: #f8f9fa; padding: 20px; border-radius: 8px; overflow-x: auto; font-family: "Courier New", monospace; font-size: 13px; line-height: 1.6; border: 1px solid #dee2e6;';
            jsonPre.textContent = JSON.stringify(data, null, 2);
            
            const copyBtn = document.createElement('button');
            copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copiar JSON';
            copyBtn.style.cssText = 'background: #007bff; color: white; border: none; border-radius: 8px; padding: 12px 24px; cursor: pointer; font-size: 14px; font-weight: 600; margin-top: 15px; width: 100%;';
            copyBtn.onclick = () => {
                navigator.clipboard.writeText(JSON.stringify(data, null, 2)).then(() => {
                    copyBtn.innerHTML = '<i class="fas fa-check"></i> Copiado!';
                    copyBtn.style.background = '#28a745';
                    setTimeout(() => {
                        copyBtn.innerHTML = '<i class="fas fa-copy"></i> Copiar JSON';
                        copyBtn.style.background = '#007bff';
                    }, 2000);
                });
            };
            
            content.appendChild(header);
            content.appendChild(jsonPre);
            content.appendChild(copyBtn);
            modal.appendChild(content);
            
            document.body.appendChild(modal);
            
            // Fechar ao clicar fora
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.remove();
                }
            });
            
            // Fechar com ESC
            const escHandler = (e) => {
                if (e.key === 'Escape') {
                    modal.remove();
                    document.removeEventListener('keydown', escHandler);
                }
            };
            document.addEventListener('keydown', escHandler);
        }

        // Update gallery preview
        function updateGalleryPreview() {
            // This function can update the gallery preview container
            // based on uploaded gallery photos
            const galleryContainer = document.getElementById('gallery-preview-container');
            if (galleryContainer) {
                // Implementation for updating gallery preview
            }
        }
        
        // Variável global para controlar o carrossel
        let currentCarouselSlide = 0;
        let carouselPhotos = [];
        
        // Função para verificar se deve mostrar o botão de testar fotos
        function checkAndShowTestButton() {
            // Fotos obrigatórias: 1, 2, 3 (gerais) e 9 (stories)
            const requiredPhotos = [1, 2, 3, 9];
            let photosFound = 0;
            
            requiredPhotos.forEach(num => {
                const input = document.getElementById(`galeria-photo-${num}`);
                const preview = document.getElementById(`galeria-preview-${num}`);
                
                // Verificar se há arquivo selecionado
                const hasFile = input && input.files && input.files[0];
                
                if (hasFile) {
                    // Verificar se há preview com imagem
                    if (preview) {
                        const img = preview.querySelector('img');
                        // Verificar se há imagem no preview (mesmo que o display ainda seja 'none' momentaneamente)
                        if (img && img.src) {
                            photosFound++;
                        } else {
                            // Se há arquivo mas não há img ainda, pode estar carregando
                            // Verificar se o preview tem conteúdo (innerHTML não está vazio)
                            if (preview.innerHTML && preview.innerHTML.trim() !== '') {
                                photosFound++;
                            }
                        }
                    } else if (hasFile) {
                        // Se há arquivo mas não há preview ainda, contar como foto encontrada
                        // (pode estar sendo processado)
                        photosFound++;
                    }
                }
            });
            
            // Debug: verificar o que está acontecendo
            console.log('🔍 Verificando fotos obrigatórias:', {
                photosFound,
                required: requiredPhotos.length,
                todasFotos: photosFound === requiredPhotos.length
            });
            
            // Mostrar ou esconder o botão baseado nas fotos obrigatórias
            const testButtonContainer = document.getElementById('testar-fotos-container');
            if (testButtonContainer) {
                if (photosFound === requiredPhotos.length) {
                    testButtonContainer.style.display = 'block';
                    console.log('✅ Botão de testar fotos será exibido');
                } else {
                    testButtonContainer.style.display = 'none';
                    console.log(`❌ Botão de testar fotos oculto - encontradas ${photosFound} de ${requiredPhotos.length} fotos obrigatórias`);
                }
            } else {
                console.error('❌ Container do botão de testar fotos não encontrado!');
            }
        }
        
        // Função para coletar todas as fotos adicionadas para o carrossel
        function collectAllPhotos() {
            const photos = [];
            // Coletar todas as fotos de 1 a 12 (incluindo stories)
            for (let i = 1; i <= 10; i++) {
                const preview = document.getElementById(`galeria-preview-${i}`);
                if (preview && preview.style.display !== 'none') {
                    const img = preview.querySelector('img');
                    if (img && img.src) {
                        photos.push({
                            num: i,
                            src: img.src,
                            isStories: i === 9
                        });
                    }
                }
            }
            return photos;
        }
        
        // Função para abrir o carrossel
        function openCarousel() {
            // Coletar todas as fotos disponíveis
            const photos = collectAllPhotos();
            
            if (photos.length === 0) {
                alert('Adicione pelo menos uma foto para testar o carrossel.');
                return;
            }
            
            carouselPhotos = photos;
            
            const modal = document.getElementById('gallery-carousel-modal');
            const slidesContainer = document.getElementById('carousel-slides');
            const indicatorsContainer = document.getElementById('carousel-indicators');
            
            if (!modal || !slidesContainer || !indicatorsContainer) return;
            
            // Limpar conteúdo anterior
            slidesContainer.innerHTML = '';
            indicatorsContainer.innerHTML = '';
            
            // Criar slides
            carouselPhotos.forEach((photo, index) => {
                // Slide
                const slide = document.createElement('div');
                slide.style.cssText = 'min-width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; position: relative;';
                
                const img = document.createElement('img');
                img.src = photo.src;
                img.style.cssText = 'max-width: 100%; max-height: 100%; object-fit: contain; border-radius: 10px;';
                
                // Mensagem na primeira foto
                if (index === 0) {
                    const messageOverlay = document.createElement('div');
                    messageOverlay.style.cssText = 'position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0, 0, 0, 0.8); color: white; padding: 20px 30px; border-radius: 10px; text-align: center; z-index: 10002; font-size: 18px; font-weight: bold; animation: fadeInOut 3s ease-in-out;';
                    messageOverlay.textContent = '👆 Passe as fotos para testar';
                    slide.appendChild(messageOverlay);
                    
                    // Adicionar animação CSS
                    if (!document.getElementById('carousel-animation-style')) {
                        const style = document.createElement('style');
                        style.id = 'carousel-animation-style';
                        style.textContent = `
                            @keyframes fadeInOut {
                                0%, 100% { opacity: 1; }
                                50% { opacity: 0.7; }
                            }
                        `;
                        document.head.appendChild(style);
                    }
                    
                    // Remover mensagem após 3 segundos
                    setTimeout(() => {
                        if (messageOverlay.parentNode) {
                            messageOverlay.style.transition = 'opacity 0.5s';
                            messageOverlay.style.opacity = '0';
                            setTimeout(() => messageOverlay.remove(), 500);
                        }
                    }, 3000);
                }
                
                slide.appendChild(img);
                slidesContainer.appendChild(slide);
                
                // Indicador
                const indicator = document.createElement('button');
                indicator.style.cssText = 'width: 12px; height: 12px; border-radius: 50%; background: rgba(255, 255, 255, 0.5); border: 2px solid rgba(255, 255, 255, 0.8); cursor: pointer; transition: all 0.3s;';
                if (index === 0) {
                    indicator.style.background = 'rgba(255, 255, 255, 1)';
                }
                indicator.addEventListener('click', () => goToSlide(index));
                indicatorsContainer.appendChild(indicator);
            });
            
            // Resetar slide atual
            currentCarouselSlide = 0;
            updateCarousel();
            
            // Mostrar modal
            modal.style.display = 'flex';
        }
        
        // Função para atualizar o carrossel
        function updateCarousel() {
            const slidesContainer = document.getElementById('carousel-slides');
            const indicators = document.querySelectorAll('#carousel-indicators button');
            
            if (!slidesContainer) return;
            
            // Mover slides
            slidesContainer.style.transform = `translateX(-${currentCarouselSlide * 100}%)`;
            
            // Atualizar indicadores
            indicators.forEach((indicator, index) => {
                if (index === currentCarouselSlide) {
                    indicator.style.background = 'rgba(255, 255, 255, 1)';
                } else {
                    indicator.style.background = 'rgba(255, 255, 255, 0.5)';
                }
            });
        }
        
        // Função para ir para um slide específico
        function goToSlide(index) {
            if (index >= 0 && index < carouselPhotos.length) {
                currentCarouselSlide = index;
                updateCarousel();
            }
        }
        
        // Função para próximo slide
        function nextSlide() {
            if (currentCarouselSlide < carouselPhotos.length - 1) {
                currentCarouselSlide++;
                updateCarousel();
            } else {
                // Se estiver na última foto, fechar o carrossel
                const modal = document.getElementById('gallery-carousel-modal');
                if (modal) {
                    modal.style.display = 'none';
                }
            }
        }
        
        // Função para slide anterior
        function prevSlide() {
            if (currentCarouselSlide > 0) {
                currentCarouselSlide--;
            } else {
                currentCarouselSlide = carouselPhotos.length - 1; // Loop
            }
            updateCarousel();
        }
        
        // Event listeners do carrossel
        document.addEventListener('DOMContentLoaded', function() {
            // Botão de testar fotos
            const testButton = document.getElementById('btn-testar-fotos');
            if (testButton) {
                testButton.addEventListener('click', () => {
                    openCarousel();
                });
                
                // Efeito hover no botão
                testButton.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 6px 20px rgba(102, 126, 234, 0.6)';
                });
                
                testButton.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    this.style.boxShadow = '0 4px 15px rgba(102, 126, 234, 0.4)';
                });
            }
            
            const closeBtn = document.getElementById('close-carousel');
            const nextBtn = document.getElementById('carousel-next');
            const prevBtn = document.getElementById('carousel-prev');
            const modal = document.getElementById('gallery-carousel-modal');
            
            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    if (modal) modal.style.display = 'none';
                });
            }
            
            if (nextBtn) {
                nextBtn.addEventListener('click', nextSlide);
            }
            
            if (prevBtn) {
                prevBtn.addEventListener('click', prevSlide);
            }
            
            // Fechar ao clicar fora do conteúdo
            if (modal) {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            }
            
            // Suporte a teclado
            document.addEventListener('keydown', (e) => {
                if (modal && modal.style.display === 'flex') {
                    if (e.key === 'ArrowRight') nextSlide();
                    if (e.key === 'ArrowLeft') prevSlide();
                    if (e.key === 'Escape') modal.style.display = 'none';
                }
            });
            
            // Suporte a swipe (touch)
            let touchStartX = 0;
            let touchEndX = 0;
            
            if (modal) {
                modal.addEventListener('touchstart', (e) => {
                    touchStartX = e.changedTouches[0].screenX;
                }, { passive: true });
                
                modal.addEventListener('touchend', (e) => {
                    touchEndX = e.changedTouches[0].screenX;
                    handleSwipe();
                }, { passive: true });
            }
            
            function handleSwipe() {
                const swipeThreshold = 50;
                const diff = touchStartX - touchEndX;
                
                if (Math.abs(diff) > swipeThreshold) {
                    if (diff > 0) {
                        nextSlide(); // Swipe left = next
                    } else {
                        prevSlide(); // Swipe right = prev
                    }
                }
            }
        });
    </script>
    
    <!-- Modal de Preview do Card -->
    <div id="cardPreviewModal" style="display: none !important; visibility: hidden; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: rgba(0, 0, 0, 0.9); z-index: 10000; align-items: center; justify-content: center; flex-direction: column; overflow: auto; padding: 20px; box-sizing: border-box;">
        <div style="background: white; border-radius: 15px; width: 100%; max-width: 500px; overflow: hidden; box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3); position: relative;">
            <!-- Botões de ação -->
            <div style="position: absolute; top: 15px; right: 15px; z-index: 10001; display: flex; gap: 10px; align-items: center;">
                <!-- Botão Cancelar (Vermelho) -->
                <button id="cancelCardPreview" title="Cancelar" style="background: rgba(220, 53, 69, 0.9); border: none; border-radius: 20px; padding: 0.5rem 1.2rem; cursor: pointer; font-size: 14px; font-weight: 600; color: white; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.3s;">
                    <i class="fas fa-times"></i>
                    <span>Cancelar</span>
                </button>
                
                <!-- Botão Trocar Foto (Azul) -->
                <button id="changeCardPhoto" title="Trocar foto" style="background: rgba(0, 123, 255, 0.9); border: none; border-radius: 20px; padding: 0.5rem 1.2rem; cursor: pointer; font-size: 14px; font-weight: 600; color: white; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.3s;">
                    <i class="fas fa-exchange-alt"></i>
                    <span>Trocar Foto</span>
                </button>
                
                <!-- Botão Confirmar (Verde) -->
                <button id="confirmCardPreview" title="Confirmar" style="background: rgba(40, 167, 69, 0.9); border: none; border-radius: 20px; padding: 0.5rem 1.2rem; cursor: pointer; font-size: 14px; font-weight: 600; color: white; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); display: flex; align-items: center; justify-content: center; gap: 0.5rem; transition: all 0.3s;">
                    <i class="fas fa-check"></i>
                    <span>Confirmar</span>
                </button>
            </div>
            
            <!-- Card Preview -->
            <div class="card-preview-wrapper" style="position: relative; width: 100%; padding-bottom: 150%; height: 0; overflow: hidden;">
                <img id="cardPreviewImage" src="" alt="Preview" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; object-fit: cover;">
                <div class="card-preview-overlay" style="position: absolute; bottom: 0; left: 0; right: 0; background: linear-gradient(transparent, rgba(0, 0, 0, 0.8)); padding: 1.5rem; border-radius: 0 0 15px 15px;">
                    <!-- Input de Nome -->
                    <input type="text" 
                           id="cardPreviewNameInput" 
                           class="card-preview-name-input" 
                           placeholder="Digite aqui o seu nome de Anúncio" 
                           maxlength="25"
                           style="background: transparent; border: 2px solid rgba(255, 255, 255, 0.5); border-radius: 8px; padding: 0.8rem 1rem; color: white; font-size: 1.5rem; font-weight: 700; margin: 0 0 0.5rem 0; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); text-align: center; width: 100%; box-sizing: border-box; font-family: inherit; outline: none;">
                    <div class="card-preview-name-display" id="cardPreviewNameDisplay" style="display: none; color: white; font-size: 1.5rem; font-weight: 700; margin: 0 0 0.3rem 0; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;"></div>
                    
                    <!-- Select de Estado (oculto inicialmente) -->
                    <select id="cardPreviewEstadoSelect" 
                            class="card-preview-estado-select" 
                            style="display: none; background: rgba(255, 255, 255, 0.9); border: 2px solid rgba(255, 255, 255, 0.5); border-radius: 8px; padding: 0.8rem 1rem; color: #333; font-size: 1rem; font-weight: 500; margin: 0 0 0.5rem 0; text-align: center; width: 100%; box-sizing: border-box; font-family: inherit; outline: none; cursor: pointer;">
                        <option value="">Selecione um estado</option>
                    </select>
                    <div class="card-preview-estado-display" id="cardPreviewEstadoDisplay" style="display: none; color: white; font-size: 1rem; font-weight: 500; margin: 0 0 0.3rem 0; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); text-align: center; cursor: pointer; padding: 0.5rem; border-radius: 8px; transition: background 0.3s;"></div>
                    
                    <!-- Select de Cidade (oculto inicialmente) -->
                    <select id="cardPreviewCidadeSelect" 
                            class="card-preview-cidade-select" 
                            style="display: none; background: rgba(255, 255, 255, 0.9); border: 2px solid rgba(255, 255, 255, 0.5); border-radius: 8px; padding: 0.8rem 1rem; color: #333; font-size: 1rem; font-weight: 500; margin: 0; text-align: center; width: 100%; box-sizing: border-box; font-family: inherit; outline: none; cursor: pointer;">
                        <option value="">Selecione uma cidade</option>
                    </select>
                    
                    <!-- Display de Localização dividido em duas áreas clicáveis -->
                    <div class="card-preview-location-display-wrapper" id="cardPreviewLocationDisplay" style="display: none; margin: 0; display: flex; align-items: center; justify-content: center; gap: 0.2rem; width: 100%; position: relative;">
                        <!-- Área clicável da Cidade (esquerda) -->
                        <div id="cardPreviewCidadeDisplay" class="card-preview-location-item" style="flex: 0 1 auto; color: white; font-size: 1rem; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); text-align: center; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; cursor: pointer; padding: 0.5rem 0.3rem; border-radius: 8px; transition: background 0.3s; min-width: 0;"></div>
                        
                        <!-- Separador "/" -->
                        <span style="color: white; font-size: 1rem; font-weight: 700; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); padding: 0 0.1rem; user-select: none; flex-shrink: 0;">/</span>
                        
                        <!-- Área clicável do Estado (direita) -->
                        <div id="cardPreviewEstadoDisplayClickable" class="card-preview-location-item" style="flex: 0 1 auto; color: white; font-size: 1rem; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); text-align: center; font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; cursor: pointer; padding: 0.5rem 0.3rem; border-radius: 8px; transition: background 0.3s; min-width: 0;"></div>
                    </div>
                </div>
            </div>
            
            <!-- Texto informativo -->
            <div style="padding: 1.5rem; text-align: center; background: #f8f9fa;">
                <p style="margin: 0; color: #666; font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> Esta é uma prévia de como seu card aparecerá na listagem
                </p>
            </div>
        </div>
    </div>
    
    <style>
        /* Estilos para o Modal de Preview do Card */
        #cardPreviewModal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: rgba(0, 0, 0, 0.9);
            z-index: 10000;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            overflow: auto;
            padding: 20px;
            box-sizing: border-box;
        }

        #cardPreviewModal.show {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
        }

        .card-preview-wrapper {
            position: relative;
            width: 100%;
            padding-bottom: 150%;
            height: 0;
            overflow: hidden;
        }

        .card-preview-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            padding: 1.5rem;
            border-radius: 0 0 15px 15px;
        }

        /* Input de Nome */
        .card-preview-name-input {
            background: transparent;
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            padding: 0.8rem 1rem;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 0 0.5rem 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            font-family: inherit;
            outline: none;
        }

        .card-preview-name-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        }

        .card-preview-name-input:focus {
            border-color: rgba(255, 255, 255, 0.9);
            background: rgba(255, 255, 255, 0.1);
        }

        /* Animação de pulso para campos que precisam ser preenchidos */
        .pulse-required {
            animation: pulseRequired 1.5s ease-in-out infinite;
        }
        
        /* Animação para containers de checkboxes obrigatórios */
        .checkbox-group-required {
            animation: pulseCheckboxRequired 1.5s ease-in-out infinite;
            padding: 6px 8px;
            border-radius: 8px;
            border: 2px solid rgba(220, 53, 69, 0.5);
            background: rgba(220, 53, 69, 0.1);
            display: inline-flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: center;
        }
        
        .checkbox-group-required.valid {
            animation: none;
            border-color: rgba(40, 167, 69, 0.5);
            background: rgba(40, 167, 69, 0.1);
        }
        
        .checkbox-group-required label {
            display: flex;
            align-items: center;
            cursor: pointer;
            white-space: nowrap;
            margin: 0;
            font-size: 14px;
        }
        
        .checkbox-group-required label input[type="checkbox"] {
            margin: 0 5px 0 0;
            width: 16px;
            height: 16px;
            cursor: pointer;
        }
        
        /* Otimização específica para "Atende" - manter tudo na mesma linha */
        #atende-checkbox-group {
            gap: 8px;
        }
        
        /* Otimização para "Formas de Pagamento" - tentar 3 na mesma linha */
        #pagamento-checkbox-group {
            gap: 8px;
        }
        
        @media (min-width: 768px) {
            #pagamento-checkbox-group label {
                min-width: auto;
            }
        }

        @keyframes pulseCheckboxRequired {
            0%, 100% {
                border-color: rgba(220, 53, 69, 0.5);
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
                background: rgba(220, 53, 69, 0.1);
            }
            50% {
                border-color: rgba(220, 53, 69, 1);
                box-shadow: 0 0 0 8px rgba(220, 53, 69, 0);
                background: rgba(220, 53, 69, 0.2);
            }
        }

        @keyframes pulseRequired {
            0%, 100% {
                border-color: rgba(255, 255, 255, 0.5);
                box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7);
            }
            50% {
                border-color: rgba(255, 255, 255, 1);
                box-shadow: 0 0 0 8px rgba(255, 255, 255, 0);
            }
        }

        /* Display dos valores (quando preenchidos) */
        .card-preview-name-display,
        .card-preview-estado-display,
        .card-preview-location-display {
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 0 0.3rem 0;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: background 0.3s;
        }

        .card-preview-name-display:hover,
        .card-preview-estado-display:hover,
        .card-preview-location-display:hover,
        .card-preview-location-item:hover {
            background: rgba(255, 255, 255, 0.15);
        }
        
        .card-preview-location-item:active {
            background: rgba(255, 255, 255, 0.2);
        }

        .card-preview-estado-display {
            font-size: 1rem;
            font-weight: 500;
        }

        .card-preview-location-display {
            font-size: 1rem;
            margin: 0;
            font-weight: 500;
        }

        /* Select de Estado e Cidade */
        .card-preview-estado-select,
        .card-preview-cidade-select {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 8px;
            padding: 0.8rem 1rem;
            color: #333;
            font-size: 1rem; /* Metade do tamanho anterior (era 2rem) */
            font-weight: 500;
            margin: 0 0 0.5rem 0;
            text-align: center;
            width: 100%;
            box-sizing: border-box;
            font-family: inherit;
            outline: none;
            cursor: pointer;
        }

        .card-preview-estado-select:focus,
        .card-preview-cidade-select:focus {
            border-color: rgba(255, 255, 255, 1);
            box-shadow: 0 0 0 4px rgba(255, 255, 255, 0.3);
        }
        
        /* Aumenta tamanho das opções dentro dos selects */
        .card-preview-estado-select option,
        .card-preview-cidade-select option {
            font-size: 0.75rem;
            padding: 0.5rem;
        }

        /* Mobile - Card ocupa quase toda a tela */
        @media (max-width: 768px) {
            #cardPreviewModal {
                padding: 0;
            }

            #cardPreviewModal > div {
                max-width: 100%;
                width: 100%;
                border-radius: 0;
                height: 100vh;
                display: flex;
                flex-direction: column;
                margin: 0;
            }

            .card-preview-wrapper {
                flex: 1;
                padding-bottom: 0;
                height: calc(100vh - 80px);
                min-height: calc(100vh - 80px);
            }

            .card-preview-overlay {
                padding: 2rem 1.5rem;
            }

            .card-preview-name-input {
                font-size: 1.8rem;
                padding: 1rem;
            }

            .card-preview-name-display {
                font-size: 2rem;
            }

            .card-preview-estado-select,
            .card-preview-cidade-select {
                font-size: 0.9rem; /* Metade do tamanho anterior (era 1.8rem) */
                padding: 1rem;
            }
            
            .card-preview-estado-select option,
            .card-preview-cidade-select option {
                font-size: 0.7rem;
            }

            .card-preview-estado-display,
            .card-preview-location-display {
                font-size: 1.2rem;
            }
            
            #cardPreviewModal > div > div:last-child {
                padding: 1rem;
                min-height: 60px;
            }
        }
        
        @media (max-width: 425px) {
            .card-preview-wrapper {
                height: calc(100vh - 70px);
                min-height: calc(100vh - 70px);
            }
            
            .card-preview-name-input {
                font-size: 1.6rem;
                padding: 0.9rem;
            }

            .card-preview-name-display {
                font-size: 1.8rem;
            }

            .card-preview-estado-select,
            .card-preview-cidade-select {
                font-size: 0.8rem; /* Metade do tamanho anterior (era 1.6rem) */
                padding: 0.9rem;
            }
            
            .card-preview-estado-select option,
            .card-preview-cidade-select option {
                font-size: 0.65rem;
            }

            .card-preview-estado-display,
            .card-preview-location-display {
                font-size: 1.1rem;
            }
        }
    </style>
    
    <script>
        // ============================================
        // FUNÇÕES GLOBAIS DO PREVIEW DO CARD
        // ============================================
        
        // Variáveis globais para estado e cidade do preview
        let previewEstado = '';
        let previewCidade = '';
        
        // Função para mostrar preview do card (definida globalmente para estar acessível)
        function showCardPreview(imageUrl) {
            console.log('🎬 showCardPreview chamada com URL:', imageUrl ? 'Válida' : 'Inválida');
            
            const modal = document.getElementById('cardPreviewModal');
            const previewImage = document.getElementById('cardPreviewImage');
            const nomeInput = document.getElementById('cardPreviewNameInput');
            const nomeInputPrincipal = document.getElementById('profile-name');
            
            console.log('📋 Elementos encontrados:', {
                modal: modal ? 'Sim' : 'Não',
                previewImage: previewImage ? 'Sim' : 'Não',
                nomeInput: nomeInput ? 'Sim' : 'Não',
                nomeInputPrincipal: nomeInputPrincipal ? 'Sim' : 'Não'
            });
            
            if (!modal) {
                console.error('❌ Modal não encontrado no DOM');
                return;
            }
            
            if (!previewImage) {
                console.error('❌ PreviewImage não encontrado no DOM');
                return;
            }
            
            // Atualiza a imagem
            previewImage.src = imageUrl;
            console.log('✅ Imagem atualizada no preview');
            
            // Inicializa nome do input principal se existir
            if (nomeInput && nomeInputPrincipal && nomeInputPrincipal.value) {
                nomeInput.value = nomeInputPrincipal.value;
                console.log('✅ Nome inicializado:', nomeInputPrincipal.value);
            }
            
            // Reseta estado e cidade
            previewEstado = '';
            previewCidade = '';
            console.log('✅ Estado e cidade resetados');
            
            // Carrega estados
            if (typeof carregarEstadosPreview === 'function') {
                carregarEstadosPreview();
                console.log('✅ Estados sendo carregados...');
            } else {
                console.warn('⚠️ Função carregarEstadosPreview não encontrada');
            }
            
            // Inicializa o fluxo
            if (typeof managePreviewFlow === 'function') {
                managePreviewFlow();
                console.log('✅ Fluxo inicializado');
            } else {
                console.warn('⚠️ Função managePreviewFlow não encontrada');
            }
            
            // Mostra o modal
            console.log('🎭 Abrindo modal...');
            
            // Força a exibição do modal de múltiplas formas
            modal.classList.add('show');
            modal.style.display = 'flex';
            modal.style.visibility = 'visible';
            modal.style.opacity = '1';
            modal.style.zIndex = '10000';
            document.body.style.overflow = 'hidden';
            
            // Força um reflow para garantir que o navegador processe as mudanças
            void modal.offsetHeight;
            
            console.log('✅ Modal aberto!');
            console.log('📊 Estado do modal:', {
                classList: modal.classList.toString(),
                display: modal.style.display,
                visibility: modal.style.visibility,
                opacity: modal.style.opacity,
                computedDisplay: window.getComputedStyle(modal).display,
                computedVisibility: window.getComputedStyle(modal).visibility,
                computedOpacity: window.getComputedStyle(modal).opacity
            });
        }
        
        // Cidades específicas do Distrito Federal
        const cidadesDF = [
            "Águas Claras", "Arniqueiras", "Asa Norte", "Asa Sul", "Bandeirantes",
            "Brazlândia", "Candangolândia", "Ceilândia", "Cruzeiro", "Gama",
            "Guará", "Lago Norte", "Lago Sul", "Mangueiral", "Noroeste",
            "Octogonal", "Paranoá", "Planaltina", "Recanto das Emas", "Riacho Fundo",
            "SIA", "Samambaia", "Santa Maria", "Sobradinho", "Sudoeste",
            "São Sebastião", "Taguatinga", "Varjão", "Vicente Pires"
        ];
        
        // Capitais e cidades mais populosas por estado
        const capitaisECidadesPopulosas = {
            AC: ["Rio Branco", "Cruzeiro do Sul"],
            AL: ["Maceió", "Arapiraca"],
            AP: ["Macapá", "Santana"],
            AM: ["Manaus", "Parintins", "Itacoatiara"],
            BA: ["Salvador", "Feira de Santana", "Vitória da Conquista", "Camaçari", "Juazeiro"],
            CE: ["Fortaleza", "Caucaia", "Juazeiro do Norte", "Maracanaú", "Sobral"],
            ES: ["Vitória", "Vila Velha", "Serra", "Cariacica"],
            GO: ["Goiânia", "Aparecida de Goiânia", "Anápolis", "Rio Verde"],
            MA: ["São Luís", "Imperatriz", "São José de Ribamar"],
            MT: ["Cuiabá", "Várzea Grande", "Rondonópolis", "Sinop"],
            MS: ["Campo Grande", "Dourados", "Três Lagoas"],
            MG: ["Belo Horizonte", "Uberlândia", "Contagem", "Juiz de Fora", "Betim"],
            PA: ["Belém", "Ananindeua", "Santarém", "Marabá"],
            PB: ["João Pessoa", "Campina Grande", "Santa Rita"],
            PR: ["Curitiba", "Londrina", "Maringá", "Ponta Grossa", "Cascavel"],
            PE: ["Recife", "Jaboatão dos Guararapes", "Olinda", "Caruaru"],
            PI: ["Teresina", "Picos", "Parnaíba"],
            RJ: ["Rio de Janeiro", "São Gonçalo", "Duque de Caxias", "Nova Iguaçu", "Niterói"],
            RN: ["Natal", "Mossoró", "Parnamirim"],
            RS: ["Porto Alegre", "Caxias do Sul", "Pelotas", "Canoas", "Santa Maria"],
            RO: ["Porto Velho", "Ji-Paraná", "Ariquemes"],
            RR: ["Boa Vista", "Rorainópolis"],
            SC: ["Florianópolis", "Joinville", "Blumenau", "São José", "Criciúma"],
            SP: ["São Paulo", "Guarulhos", "Campinas", "São Bernardo do Campo", "Santo André"],
            SE: ["Aracaju", "Nossa Senhora do Socorro", "Lagarto"],
            TO: ["Palmas", "Araguaína", "Gurupi"]
        };
        
        // Carregar estados da API do IBGE
        async function carregarEstadosPreview() {
            const estadoSelect = document.getElementById('cardPreviewEstadoSelect');
            if (!estadoSelect) return;
            
            try {
                const response = await fetch('https://servicodados.ibge.gov.br/api/v1/localidades/estados');
                const estados = await response.json();
                
                estadoSelect.innerHTML = '<option value="">Selecione um estado</option>';
                estados.sort((a, b) => a.nome.localeCompare(b.nome));
                
                estados.forEach((estado) => {
                    const option = document.createElement('option');
                    option.value = estado.sigla;
                    option.textContent = estado.nome;
                    estadoSelect.appendChild(option);
                });
                
                console.log('✅ Estados carregados no preview');
            } catch (error) {
                console.error('❌ Erro ao carregar estados:', error);
            }
        }
        
        // Carregar cidades da API do IBGE baseado no estado
        async function carregarCidadesPreview(uf) {
            const cidadeSelect = document.getElementById('cardPreviewCidadeSelect');
            if (!cidadeSelect) return;
            
            try {
                if (uf === 'DF') {
                    cidadeSelect.innerHTML = '<option value="">Selecione uma cidade</option>';
                    cidadesDF.forEach((cidade) => {
                        const option = document.createElement('option');
                        option.value = cidade.toLowerCase().replace(/\s+/g, '-');
                        option.textContent = cidade;
                        cidadeSelect.appendChild(option);
                    });
                    return;
                }
                
                const response = await fetch(`https://servicodados.ibge.gov.br/api/v1/localidades/estados/${uf}/municipios`);
                const cidades = await response.json();
                
                cidadeSelect.innerHTML = '<option value="">Selecione uma cidade</option>';
                const capitais = capitaisECidadesPopulosas[uf] || [];
                
                const cidadesPopulosas = [];
                const cidadesDemais = [];
                
                cidades.forEach((cidade) => {
                    if (capitais.includes(cidade.nome)) {
                        cidadesPopulosas.push(cidade);
                    } else {
                        cidadesDemais.push(cidade);
                    }
                });
                
                cidadesPopulosas.sort((a, b) => a.nome.localeCompare(b.nome));
                cidadesDemais.sort((a, b) => a.nome.localeCompare(b.nome));
                const cidadesOrdenadas = [...cidadesPopulosas, ...cidadesDemais];
                
                cidadesOrdenadas.forEach((cidade) => {
                    const option = document.createElement('option');
                    option.value = cidade.nome.toLowerCase().replace(/\s+/g, '-');
                    option.textContent = cidade.nome;
                    cidadeSelect.appendChild(option);
                });
                
                console.log(`✅ Cidades de ${uf} carregadas no preview`);
            } catch (error) {
                console.error(`❌ Erro ao carregar cidades de ${uf}:`, error);
            }
        }
        
        // Flag para evitar loop infinito
        let isUpdatingCardPreview = false;
        
        // Função para atualizar preview do card
        function updateCardPreview() {
            if (isUpdatingCardPreview) return; // Evita loop infinito
            isUpdatingCardPreview = true;
            
            const modal = document.getElementById('cardPreviewModal');
            if (!modal || !modal.classList.contains('show')) {
                isUpdatingCardPreview = false;
                return;
            }
            
            // Atualiza nome no input principal se foi alterado no preview
            const nomeInputPreview = document.getElementById('cardPreviewNameInput');
            const nomeInputPrincipal = document.getElementById('profile-name');
            
            if (nomeInputPreview && nomeInputPrincipal && nomeInputPreview.value) {
                nomeInputPrincipal.value = nomeInputPreview.value;
                // Dispara evento para atualizar contador, mas sem chamar updateCardPreview novamente
                const inputEvent = new Event('input', { bubbles: true });
                // Marca o evento para evitar recursão
                inputEvent._skipUpdateCardPreview = true;
                nomeInputPrincipal.dispatchEvent(inputEvent);
            }
            
            isUpdatingCardPreview = false;
        }
        
        // Função para gerenciar o fluxo sequencial do preview
        function managePreviewFlow(keepInputVisible = false) {
            const nomeInput = document.getElementById('cardPreviewNameInput');
            const nomeDisplay = document.getElementById('cardPreviewNameDisplay');
            const estadoSelect = document.getElementById('cardPreviewEstadoSelect');
            const estadoDisplay = document.getElementById('cardPreviewEstadoDisplay');
            const cidadeSelect = document.getElementById('cardPreviewCidadeSelect');
            const locationWrapper = document.getElementById('cardPreviewLocationDisplay');
            const cidadeDisplayItem = document.getElementById('cardPreviewCidadeDisplay');
            const estadoDisplayItem = document.getElementById('cardPreviewEstadoDisplayClickable');
            
            if (!nomeInput) return;
            
            const nomeValor = nomeInput.value.trim();
            
            // Se nome está vazio, mantém input com pulso
            if (!nomeValor) {
                nomeInput.style.display = 'block';
                if (nomeDisplay) nomeDisplay.style.display = 'none';
                nomeInput.classList.add('pulse-required');
                if (estadoSelect) estadoSelect.style.display = 'none';
                if (estadoDisplay) estadoDisplay.style.display = 'none';
                if (cidadeSelect) cidadeSelect.style.display = 'none';
                if (locationWrapper) locationWrapper.style.display = 'none';
                return;
            }
            
            // Nome preenchido
            nomeInput.classList.remove('pulse-required');
            if (nomeDisplay) nomeDisplay.textContent = nomeValor;
            
            // Só esconde o input se não estiver mantendo visível (ou seja, quando perder foco)
            if (!keepInputVisible) {
                nomeInput.style.display = 'none';
                if (nomeDisplay) nomeDisplay.style.display = 'block';
            } else {
                // Mantém input visível enquanto está digitando
                if (nomeDisplay) nomeDisplay.style.display = 'none';
            }
            
            // Se estado não está selecionado, mostra select com pulso
            if (!previewEstado) {
                if (estadoSelect) {
                    estadoSelect.style.display = 'block';
                    estadoSelect.classList.add('pulse-required');
                }
                if (estadoDisplay) estadoDisplay.style.display = 'none';
                if (cidadeSelect) cidadeSelect.style.display = 'none';
                if (locationWrapper) locationWrapper.style.display = 'none';
                return;
            }
            
            // Estado selecionado - esconde select (não mostra display separado do estado)
            if (estadoSelect) {
                estadoSelect.classList.remove('pulse-required');
                estadoSelect.style.display = 'none';
            }
            
            // Não mostra display do estado separado - será mostrado junto com cidade
            if (estadoDisplay) {
                estadoDisplay.style.display = 'none';
            }
            
            // Se cidade não está selecionada, mostra select com pulso
            if (!previewCidade) {
                if (cidadeSelect) {
                    cidadeSelect.style.display = 'block';
                    cidadeSelect.classList.add('pulse-required');
                }
                if (locationWrapper) locationWrapper.style.display = 'none';
                return;
            }
            
            // Tudo preenchido - mostra apenas displays (nome na primeira linha, cidade/UF na segunda)
            if (cidadeSelect) {
                cidadeSelect.classList.remove('pulse-required');
                cidadeSelect.style.display = 'none';
            }
            
            const cidadeNomeSelecionado = cidadeSelect && cidadeSelect.options[cidadeSelect.selectedIndex]?.text || '';
            // Pega a sigla do estado (UF) ao invés do nome completo
            const estadoSigla = previewEstado || (estadoSelect && estadoSelect.value) || '';
            
            // Atualiza displays separados de cidade e estado
            if (cidadeNomeSelecionado && estadoSigla && locationWrapper) {
                if (cidadeDisplayItem) cidadeDisplayItem.textContent = cidadeNomeSelecionado;
                if (estadoDisplayItem) estadoDisplayItem.textContent = estadoSigla;
                locationWrapper.style.display = 'flex';
            }
        }
        
        // Função para resetar preview (apaga tudo)
        function resetCardPreview() {
            const nomeInput = document.getElementById('cardPreviewNameInput');
            const nomeInputPrincipal = document.getElementById('profile-name');
            const estadoSelect = document.getElementById('cardPreviewEstadoSelect');
            const cidadeSelect = document.getElementById('cardPreviewCidadeSelect');
            const previewImage = document.getElementById('cardPreviewImage');
            const profileImage = document.getElementById('profile-image');
            
            // Reseta nome
            if (nomeInput) nomeInput.value = '';
            if (nomeInputPrincipal) nomeInputPrincipal.value = '';
            
            // Reseta estado e cidade
            previewEstado = '';
            previewCidade = '';
            
            if (estadoSelect) {
                estadoSelect.value = '';
                estadoSelect.innerHTML = '<option value="">Selecione um estado</option>';
            }
            
            if (cidadeSelect) {
                cidadeSelect.value = '';
                cidadeSelect.innerHTML = '<option value="">Selecione uma cidade</option>';
            }
            
            // Reseta imagem do preview
            if (previewImage) previewImage.src = '';
            
            // Reseta imagem do perfil
            if (profileImage) {
                profileImage.src = '';
                profileImage.style.opacity = '0';
            }
            
            // Reseta overlay e botões
            const profileOverlay = document.getElementById('profile-upload-overlay');
            const btnChangeCapa = document.getElementById('btn-change-capa');
            const profileStatus = document.getElementById('profile-status-indicator');
            
            if (profileOverlay) {
                profileOverlay.style.display = 'flex';
                profileOverlay.style.opacity = '1';
            }
            
            if (btnChangeCapa) {
                btnChangeCapa.style.display = 'none';
                btnChangeCapa.classList.remove('show');
            }
            
            if (profileStatus) {
                profileStatus.style.display = 'none';
            }
            
            // Reseta input de arquivo
            const capaInput = document.getElementById('capa-photo');
            if (capaInput) capaInput.value = '';
            
            // Reinicializa o fluxo
            managePreviewFlow();
            
            console.log('🔄 Preview resetado');
        }
        
        // Função para fechar preview (mantém dados)
        function closeCardPreview() {
            const modal = document.getElementById('cardPreviewModal');
            if (modal) {
                modal.classList.remove('show');
                modal.style.display = 'none';
                modal.style.visibility = 'hidden';
                modal.style.opacity = '0';
                document.body.style.overflow = 'auto';
            }
        }
        
        // Event listeners para fechar o modal e gerenciar campos
        document.addEventListener('DOMContentLoaded', function() {
            const confirmBtn = document.getElementById('confirmCardPreview');
            const cancelBtn = document.getElementById('cancelCardPreview');
            const modal = document.getElementById('cardPreviewModal');
            const nomeInput = document.getElementById('cardPreviewNameInput');
            const nomeDisplay = document.getElementById('cardPreviewNameDisplay');
            const estadoSelect = document.getElementById('cardPreviewEstadoSelect');
            const estadoDisplay = document.getElementById('cardPreviewEstadoDisplay');
            const cidadeSelect = document.getElementById('cardPreviewCidadeSelect');
            const locationWrapper = document.getElementById('cardPreviewLocationDisplay');
            const cidadeDisplayItem = document.getElementById('cardPreviewCidadeDisplay');
            const estadoDisplayItem = document.getElementById('cardPreviewEstadoDisplayClickable');
            
            if (confirmBtn) {
                confirmBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    closeCardPreview();
                });
            }
            
            if (cancelBtn) {
                cancelBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    closeCardPreview();
                });
            }
            
            // Fechar ao clicar fora do card - mas só se não estiver editando
            if (modal) {
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        // Verifica se está editando algum campo
                        const nomeInput = document.getElementById('cardPreviewNameInput');
                        const estadoSelect = document.getElementById('cardPreviewEstadoSelect');
                        const cidadeSelect = document.getElementById('cardPreviewCidadeSelect');
                        
                        const isEditing = (nomeInput && nomeInput.style.display === 'block') ||
                                         (estadoSelect && estadoSelect.style.display === 'block') ||
                                         (cidadeSelect && cidadeSelect.style.display === 'block');
                        
                        if (!isEditing) {
                            closeCardPreview();
                        }
                    }
                });
            }
            
            // Fechar com ESC
            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape' && modal && modal.classList.contains('show')) {
                    closeCardPreview();
                }
            });
            
            // Event listener para nome
            if (nomeInput) {
                // Remove pulso quando começar a digitar
                nomeInput.addEventListener('focus', function() {
                    this.classList.remove('pulse-required');
                });
                
                // Atualiza preview em tempo real mas não esconde o input
                nomeInput.addEventListener('input', function() {
                    updateCardPreview();
                    // Remove pulso quando tiver conteúdo
                    if (this.value.trim()) {
                        this.classList.remove('pulse-required');
                    } else {
                        this.classList.add('pulse-required');
                    }
                    // Mantém input visível enquanto digita (keepInputVisible = true)
                    managePreviewFlow(true);
                });
                
                // Só esconde o input quando perder o foco E tiver conteúdo
                nomeInput.addEventListener('blur', function() {
                    if (this.value.trim()) {
                        managePreviewFlow();
                    } else {
                        // Se estiver vazio, mantém o input visível com pulso
                        this.classList.add('pulse-required');
                        managePreviewFlow();
                    }
                });
                
                // Permitir Enter para confirmar
                nomeInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter') {
                        e.preventDefault();
                        this.blur(); // Força o blur para aplicar a mudança
                    }
                });
            }
            
            // Click no display do nome para editar
            if (nomeDisplay) {
                nomeDisplay.addEventListener('click', function() {
                    nomeInput.style.display = 'block';
                    nomeDisplay.style.display = 'none';
                    // Pequeno delay para garantir que o display foi escondido
                    setTimeout(() => {
                        nomeInput.focus();
                        // Move o cursor para o final
                        nomeInput.setSelectionRange(nomeInput.value.length, nomeInput.value.length);
                    }, 10);
                });
            }
            
            // Event listener para estado
            if (estadoSelect) {
                estadoSelect.addEventListener('change', function() {
                    previewEstado = this.value;
                    if (previewEstado) {
                        carregarCidadesPreview(previewEstado);
                        managePreviewFlow();
                    } else {
                        // Se desselecionar, reseta cidade também
                        previewCidade = '';
                        if (cidadeSelect) {
                            cidadeSelect.innerHTML = '<option value="">Selecione uma cidade</option>';
                            cidadeSelect.value = '';
                        }
                        managePreviewFlow();
                    }
                });
                
                // Blur - se clicar fora, mantém seleção atual se houver valor
                estadoSelect.addEventListener('blur', function() {
                    // Se não mudou o valor ou ficou vazio mas tinha um estado antes, mantém
                    if (!this.value && previewEstado) {
                        // Restaura o valor anterior se ficou vazio
                        this.value = previewEstado;
                    } else if (this.value) {
                        // Se tem um valor, atualiza
                        previewEstado = this.value;
                    }
                    managePreviewFlow();
                });
            }
            
            // Não precisa mais editar estado separadamente, ele será editado junto com a cidade
            
            // Event listener para cidade
            if (cidadeSelect) {
                cidadeSelect.addEventListener('change', function() {
                    // Se selecionou a mesma cidade que já estava, permite manter ou alterar
                    if (this.value === previewCidade && previewCidade) {
                        // Mantém a seleção atual, mas permite mudar se quiser
                        console.log('📍 Cidade selecionada:', this.value);
                    }
                    previewCidade = this.value;
                    managePreviewFlow();
                });
                
                // Blur - se clicar fora, mantém seleção atual se houver valor
                cidadeSelect.addEventListener('blur', function() {
                    // Se não mudou o valor ou ficou vazio mas tinha uma cidade antes, mantém
                    if (!this.value && previewCidade) {
                        // Restaura o valor anterior se ficou vazio
                        this.value = previewCidade;
                    } else if (this.value) {
                        // Se tem um valor, atualiza
                        previewCidade = this.value;
                    }
                    managePreviewFlow();
                });
                
                // Permite reabrir o select mesmo quando já está selecionado
                cidadeSelect.addEventListener('mousedown', function(e) {
                    // Se já tem cidade selecionada, permite editar
                    if (previewCidade && this.style.display === 'none') {
                        const locationWrapper = document.getElementById('cardPreviewLocationDisplay');
                        if (locationWrapper) locationWrapper.style.display = 'none';
                        this.style.display = 'block';
                        this.classList.remove('pulse-required');
                    }
                });
            }
            
            // Click na área da cidade (esquerda) para editar cidade
            if (cidadeDisplayItem) {
                cidadeDisplayItem.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Permite editar cidade
                    if (cidadeSelect) {
                        cidadeSelect.style.display = 'block';
                        if (locationWrapper) locationWrapper.style.display = 'none';
                        if (previewCidade) {
                            cidadeSelect.value = previewCidade;
                        }
                        cidadeSelect.focus();
                        cidadeSelect.classList.remove('pulse-required');
                        // Esconde estado enquanto edita cidade
                        if (estadoSelect) estadoSelect.style.display = 'none';
                    }
                });
            }
            
            // Click na área do estado (direita) para editar estado
            if (estadoDisplayItem) {
                estadoDisplayItem.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Permite editar estado
                    if (estadoSelect) {
                        estadoSelect.style.display = 'block';
                        if (locationWrapper) locationWrapper.style.display = 'none';
                        if (previewEstado) {
                            estadoSelect.value = previewEstado;
                        }
                        estadoSelect.focus();
                        estadoSelect.classList.remove('pulse-required');
                        // Esconde cidade enquanto edita estado
                        if (cidadeSelect) cidadeSelect.style.display = 'none';
                    }
                });
            }
            
            // Click no display do estado para editar (se existir)
            const estadoDisplayEl = document.getElementById('cardPreviewEstadoDisplay');
            if (estadoDisplayEl) {
                estadoDisplayEl.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    // Permite editar estado
                    if (estadoSelect) {
                        estadoSelect.style.display = 'block';
                        estadoDisplayEl.style.display = 'none';
                        if (previewEstado) {
                            estadoSelect.value = previewEstado;
                        }
                        estadoSelect.focus();
                        estadoSelect.classList.remove('pulse-required');
                        // Esconde cidade enquanto edita estado
                        if (cidadeSelect) cidadeSelect.style.display = 'none';
                        if (cidadeDisplay) cidadeDisplay.style.display = 'none';
                    }
                });
            }
            
            // Permite clicar no select de estado mesmo quando já está selecionado
            if (estadoSelect) {
                estadoSelect.addEventListener('mousedown', function(e) {
                    // Permite editar mesmo quando já está selecionado
                    if (previewEstado && this.style.display === 'none') {
                        if (estadoDisplayEl) estadoDisplayEl.style.display = 'none';
                        this.style.display = 'block';
                        if (cidadeSelect) cidadeSelect.style.display = 'none';
                        if (cidadeDisplay) cidadeDisplay.style.display = 'none';
                        this.classList.remove('pulse-required');
                    }
                });
            }
            
            // Botão Reset foi removido - agora temos apenas Cancelar, Trocar Foto e Confirmar
            
            // Botão Trocar Foto - mantém dados mas troca a foto
            const changePhotoBtn = document.getElementById('changeCardPhoto');
            if (changePhotoBtn) {
                changePhotoBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    // Fecha o modal temporariamente para selecionar nova foto
                    const modal = document.getElementById('cardPreviewModal');
                    if (modal) {
                        modal.style.display = 'none';
                        modal.classList.remove('show');
                    }
                    
                    // Aciona o input de foto de capa
                    const capaInput = document.getElementById('capa-photo');
                    if (capaInput) {
                        capaInput.click();
                    }
                });
            }
        });
    </script>

    <!-- Popup de Cadastro -->
    <div id="cadastro-popup" class="cadastro-popup">
        <div class="cadastro-popup__content">
            <div class="cadastro-popup__header">
                <h3>Escolha o tipo de cadastro</h3>
                <button class="cadastro-popup__close" onclick="closeCadastroPopup()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="cadastro-popup__options">
                <a href="register.html" class="cadastro-option">
                    <div class="cadastro-option__icon">
                        <i class="fas fa-user-plus"></i>
                    </div>
                    <div class="cadastro-option__text">
                        <h4>Cadastrar Cliente</h4>
                        <p>Para quem procura serviços</p>
                    </div>
                </a>
                <a href="selecao-categoria.html" class="cadastro-option">
                    <div class="cadastro-option__icon">
                        <i class="fas fa-star"></i>
                    </div>
                    <div class="cadastro-option__text">
                        <h4>Cadastro de Acompanhante</h4>
                        <p>Para quem oferece serviços</p>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <script>
        // Função para abrir o popup de cadastro
        function openCadastroPopup() {
            const popup = document.getElementById('cadastro-popup');
            if (popup) {
                popup.classList.add('show');
                document.body.style.overflow = 'hidden'; // Previne scroll do body
            }
        }

        // Função para fechar o popup de cadastro
        function closeCadastroPopup() {
            const popup = document.getElementById('cadastro-popup');
            if (popup) {
                popup.classList.remove('show');
                document.body.style.overflow = ''; // Restaura scroll do body
            }
        }

        // Função global para abrir popup de cadastro
        window.openCadastroPopup = openCadastroPopup;
        window.closeCadastroPopup = closeCadastroPopup;

        // Fechar popup ao clicar no overlay
        document.addEventListener('DOMContentLoaded', function() {
            const popup = document.getElementById('cadastro-popup');
            if (popup) {
                popup.addEventListener('click', function(e) {
                    if (e.target === popup) {
                        closeCadastroPopup();
                    }
                });
            }
        });
    </script>
    
    <!-- Script para Upload de Documentos de Verificação -->
    <script>
        // ============================================
        // UPLOAD DE DOCUMENTOS DE VERIFICAÇÃO
        // ============================================
        function setupVerificationUploads() {
            // Documento Frente
            setupVerificationFileUpload('documento-frente', 'documento-frente-preview', 'documento-frente-overlay', 'btn-change-documento-frente', 'image');
            
            // Documento Verso
            setupVerificationFileUpload('documento-verso', 'documento-verso-preview', 'documento-verso-overlay', 'btn-change-documento-verso', 'image');
            
            // Selfie com Documento
            setupVerificationFileUpload('selfie-documento', 'selfie-documento-preview', 'selfie-documento-overlay', 'btn-change-selfie-documento', 'image');
            
            // Vídeo de Verificação
            setupVerificationFileUpload('verification-video', 'verification-video-preview', 'verification-video-overlay', 'btn-change-verification-video', 'video');
        }
        
        function setupVerificationFileUpload(inputId, previewId, overlayId, btnChangeId, fileType) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            const overlay = document.getElementById(overlayId);
            const btnChange = document.getElementById(btnChangeId);
            const uploadBox = input?.closest('.verification-upload-box');
            
            if (!input || !preview) return;
            
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                // Em breve podera adicionar videos, 100MB para vídeos)
                const maxSize = fileType === 'video' ? 100 * 1024 * 1024 : 10 * 1024 * 1024;
                if (file.size > maxSize) {
                    alert(`Arquivo muito grande. Tamanho máximo: ${fileType === 'video' ? '100MB' : '10MB'}`);
                    input.value = '';
                    return;
                }
                
                if (fileType === 'image') {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; border-radius: 8px;">`;
                        preview.style.display = 'flex';
                        if (overlay) overlay.style.display = 'none';
                        if (btnChange) btnChange.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else if (fileType === 'video') {
                    const url = URL.createObjectURL(file);
                    preview.innerHTML = `
                        <video controls style="max-width: 100%; max-height: 100%; width: auto; height: auto; object-fit: contain; border-radius: 8px;">
                            <source src="${url}" type="${file.type}">
                        </video>
                    `;
                    preview.style.display = 'flex';
                    if (overlay) overlay.style.display = 'none';
                    if (btnChange) btnChange.style.display = 'block';
                }
            });
            
            // Botão de trocar
            if (btnChange) {
                btnChange.addEventListener('click', function(e) {
                    e.stopPropagation();
                    input.click();
                });
            }
        }
        
        // Inicializar uploads de verificação quando o DOM estiver pronto
        function initVerificationUploads() {
            // Verificar se os elementos existem antes de inicializar
            const documentoFrente = document.getElementById('documento-frente');
            if (!documentoFrente) {
                console.warn('⚠️ Elementos de verificação não encontrados, tentando novamente...');
                setTimeout(initVerificationUploads, 500);
                return;
            }
            
            setupVerificationUploads();
            console.log('✅ Uploads de documentos de verificação inicializados!');
        }
        
        // Tentar inicializar quando o DOM estiver pronto
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initVerificationUploads);
        } else {
            // DOM já está pronto
            initVerificationUploads();
        }
    </script>
    
    <!-- Aplicar validações em tempo real -->
    <script>
        // Aplicar validações em tempo real nos campos de altura e valor
        setTimeout(() => {
            const alturaInput = document.getElementById('info-altura');
            const valorInput = document.getElementById('info-valor');
            
            if (alturaInput) {
                const alturaError = document.getElementById('altura-error');
                if (alturaError) {
                    applyHeightValidation(alturaInput, alturaError);
                } else {
                    applyHeightValidation(alturaInput);
                }
            }
            
            if (valorInput) {
                const valorError = document.getElementById('valor-error');
                if (valorError) {
                    applyPriceValidation(valorInput, valorError);
                } else {
                    applyPriceValidation(valorInput);
                }
            }
        }, 500);
    </script>
    
</body>
</html>