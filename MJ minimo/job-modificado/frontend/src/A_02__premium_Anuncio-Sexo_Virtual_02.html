<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil - Mansão do Job (Modo Configuração)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>
    <!-- Módulo de Validações -->
    <script src="js/formValidations.js"></script>
    <script src="js/applyValidationsToAllPages.js"></script>
    <style>
        :root {
            --primary-color: #dc3545;
            --secondary-color: #6c757d;
            --accent-color: #ffc107;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --text-dark: #212529;
            --text-muted: #6c757d;
            --border-color: #dee2e6;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.15);
            --purple-bg: #efeefa;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Efeito de fundo fixo translúcido */
        .page-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: blur(8px) brightness(0.3);
            z-index: -2;
            transform: scale(1.1); /* Evita bordas brancas do blur */
        }

        .content-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
            pointer-events: none;
        }


        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text-dark);
            line-height: 1.6;
            padding-top: 0; /* Removido padding para banner de configuração */
            margin: 0;
            padding-bottom: 100px; /* Espaço para a barra fixa */
            width: 100%;
            overflow-x: auto;
            min-width: 320px;
            position: relative;
            transition: filter 0.3s ease;
        }

        /* Bloquear scroll quando modal estiver aberto */
        body.modal-open {
            overflow: hidden;
            filter: blur(2px);
        }

        /* Background com screenshot da página anterior */
        .page-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: blur(2px) brightness(0.7);
        }

        /* Overlay escuro apenas sobre o conteúdo central */
        .content-overlay {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 1200px;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            pointer-events: none;
            backdrop-filter: blur(1px);
        }

        .content-overlay:hover {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(2px);
        }




        /* Header específico para esta página */
        #cabecalho.header {
            background: var(--bg-white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1001; /* Acima do banner */
            width: 100%;
            height: 4cm; /* 4cm de altura vertical */
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        #cabecalho .contem {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            box-sizing: border-box;
        }
        
        #cabecalho .header-logo-text {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            flex: 1;
            text-align: left;
            text-align: center;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        /* Menu Container - Mesma largura do header e formulário */
        .menu-container-wrapper {
            width: 100%;
            max-width: 1200px;
            margin: 1rem auto;
            padding: 0 2rem;
            box-sizing: border-box;
        }
        
        /* Menu Fullscreen Style - Disponível em todas as resoluções */
        .menu-topo-mobile {
            display: block;
            position: relative;
            width: 100%;
        }
        
        .nav {
            display: flex;
            justify-content: flex-end;
            align-items: center;
        }
        
        .menu-topo-mobile {
            pointer-events: auto;
        }
        
        .menu-topo-mobile a {
            pointer-events: none;
        }
        
        /* Hamburger Menu Button - Estilo CodePen com caixa vermelha */
        .toggle-menu {
            background-color: var(--primary-color);
            border: none;
            cursor: pointer;
            display: flex;
            height: auto;
            outline: none;
            padding: 0.75rem 1.5rem;
            pointer-events: initial;
            position: relative;
            vertical-align: middle;
            z-index: 1110;
            align-items: center;
            justify-content: space-between;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            transition: background-color 0.3s ease;
            box-sizing: border-box;
            width: 100%;
        }
        
        /* Desktop: botão ocupa toda largura do container (mesma do header) */
        @media (min-width: 1025px) {
            .toggle-menu {
                width: 100%;
                padding: 0.75rem 1.5rem;
                border-radius: 0;
            }
            
            .menu-topo-mobile {
                display: block;
                width: 100%;
            }
        }
        
        .toggle-menu:hover {
            background-color: #c82333;
        }
        
        .hamburger-icon {
            background-color: white;
            content: "";
            display: block;
            height: 3px;
            position: relative;
            transform-origin: center;
            transition: background-color 0.3s ease, transform 0.3s ease;
            width: 30px;
            border-radius: 2px;
            flex-shrink: 0;
        }
        
        .hamburger-icon:before,
        .hamburger-icon:after {
            background-color: white;
            content: "";
            display: block;
            height: 3px;
            position: absolute;
            left: 0;
            transform-origin: center;
            transition: transform 0.3s ease, top 0.3s ease;
            width: 30px;
            border-radius: 2px;
        }
        
        .hamburger-icon:before {
            top: -10px;
        }
        
        .hamburger-icon:after {
            top: 10px;
        }
        
        .toggle-menu.active .hamburger-icon {
            background-color: transparent;
        }
        
        .toggle-menu.active .hamburger-icon:before {
            top: 0;
            transform: rotate(45deg);
        }
        
        .toggle-menu.active .hamburger-icon:after {
            top: 0;
            transform: rotate(-45deg);
        }
        
        .menu-text {
            color: white;
            font-weight: 600;
            font-size: 1rem;
            margin-left: auto;
            flex-shrink: 0;
            padding-left: 1rem;
        }
        
        .toggle-menu {
            gap: 0.5rem;
        }
        
        /* Fullscreen Menu - Estilo CodePen */
        #menu {
            background: var(--primary-color);
            height: 100vh;
            left: 0;
            opacity: 0;
            overflow: hidden;
            position: fixed;
            text-align: center;
            top: 0;
            transition: opacity 0.7s ease-in-out, visibility 0.7s ease-in-out;
            visibility: hidden;
            width: 100%;
            z-index: 1100;
        }
        
        #menu.open {
            opacity: 1;
            visibility: visible;
        }
        
        #menu.open .main-nav li {
            animation-duration: 0.8s;
            animation-fill-mode: both;
            animation-name: fadeInUp;
        }
        
        #menu.open .main-nav li:nth-child(1) { animation-delay: 0.1s; }
        #menu.open .main-nav li:nth-child(2) { animation-delay: 0.15s; }
        #menu.open .main-nav li:nth-child(3) { animation-delay: 0.2s; }
        #menu.open .main-nav li:nth-child(4) { animation-delay: 0.25s; }
        #menu.open .main-nav li:nth-child(5) { animation-delay: 0.3s; }
        #menu.open .main-nav li:nth-child(6) { animation-delay: 0.35s; }
        #menu.open .main-nav li:nth-child(7) { animation-delay: 0.4s; }
        #menu.open .main-nav li:nth-child(8) { animation-delay: 0.45s; }
        #menu.open .main-nav li:nth-child(9) { animation-delay: 0.5s; }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translate3d(0, 30px, 0);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }
        
        #menu .main-nav {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            max-width: 600px;
        }
        
        #menu .main-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        #menu .main-nav ul:hover a {
            opacity: 0.6;
        }
        
        #menu .main-nav > ul > li {
            margin: 0.5rem 0;
        }
        
        #menu .main-nav a {
            -webkit-transform: translateZ(0);
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            color: #ffffff;
            display: block;
            font-size: 2.5rem;
            font-weight: 700;
            padding: 1rem 2rem;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        #menu .main-nav a:hover {
            opacity: 1 !important;
            transform: translateX(10px);
        }
        
        #menu .main-nav .parent-item {
            position: relative;
        }
        
        #menu .main-nav .parent-link {
            cursor: pointer;
        }
        
        #menu .main-nav .parent-link::after {
            content: " ▼";
            font-size: 1.5rem;
            margin-left: 1rem;
            transition: transform 0.3s ease;
            display: inline-block;
        }
        
        #menu .main-nav .parent-item.active .parent-link::after {
            transform: rotate(180deg);
        }
        
        #menu .main-nav .submenu {
            display: none;
            list-style: none;
            margin: 0;
            padding: 0;
            margin-top: 0.5rem;
            padding-left: 2rem;
        }
        
        #menu .main-nav .parent-item.active .submenu {
            display: block;
        }
        
        #menu .main-nav .submenu li {
            margin: 0.3rem 0;
        }
        
        #menu .main-nav .submenu li a {
            font-size: 1.8rem;
            padding: 0.5rem 1rem;
            opacity: 0.85;
            font-weight: 500;
            letter-spacing: 1px;
        }
        
        #menu .main-nav .submenu li a:hover {
            opacity: 1 !important;
        }
        
        @media (max-width: 1024px) {
            /* Layout mobile/tablet: menu ocupa toda largura */
            .menu-container-wrapper {
                padding: 0 1rem;
            }
            
            #cadastroForm {
                padding: 0 1rem !important;
            }
            
            .menu-topo-mobile {
                width: 100%;
            }
            
            .toggle-menu {
                width: 100%;
                border-radius: 0;
            }
            
            #cabecalho .contem {
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 0.5rem 1rem;
                position: relative;
            }
            
            #cabecalho .header-logo-text {
                font-size: 1.5rem;
                margin: 0;
                width: 100%;
                text-align: center;
            }
            
            #cabecalho.header {
                height: auto;
                min-height: auto;
                padding: 0.75rem 0;
            }
        }
        
        @media (max-width: 768px) {
            #cabecalho.header {
                height: auto;
                min-height: auto;
                padding: 0.5rem 0;
            }
            
            #cabecalho .header-logo-text {
                font-size: 1.3rem;
            }
            
            .toggle-menu {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            
            .hamburger-icon {
                width: 26px;
            }
            
            .hamburger-icon:before,
            .hamburger-icon:after {
                width: 26px;
            }
            
            .menu-text {
                font-size: 0.9rem;
            }
            
            #menu .main-nav a {
                font-size: 2rem;
                padding: 0.8rem 1.5rem;
            }
            
            #menu .main-nav .submenu li a {
                font-size: 1.5rem;
            }
        }

        /* Header dentro da área útil */
        .ficha-fixed-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        /* Container do header com mesmo tamanho do fixed-bottom */
        .ficha-header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem; /* Mesmo padding do fixed-bottom */
            box-sizing: border-box;
        }

        .ficha-fixed-header header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }

        .navbar-brand {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }

        .ficha-header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .ficha-contextual-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }

        .close-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .close-btn:hover {
            background: #c82333;
        }

        .ficha-top-line {
            background: var(--primary-color);
            color: white;
            padding: 0.5rem 2rem;
            text-align: center;
        }

        .localization {
            font-size: 0.9rem;
        }

        .localization a {
            color: inherit;
            text-decoration: none;
        }

        /* Container Principal */
        .ficha-column-container {
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            min-height: calc(100vh - 158px);
            padding: 1rem; /* Mesmo padding do fixed-bottom e header */
            gap: 1rem;
            width: 100%;
            box-sizing: border-box;
            justify-content: flex-start;
            position: relative;
            z-index: 1;
        }

        /* Grid das colunas */
        .ficha-columns-grid {
            display: flex;
            gap: 1rem;
            flex: 1;
            align-items: flex-start;
            height: calc(100vh - 158px);
        }

        .ficha-column {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 0;
        }

        .ficha-column:first-child {
            width: 60%;
            max-width: 720px;
            background: var(--bg-white);
            border-radius: 10px;
            padding: 1rem;
            box-shadow: var(--shadow);
            /* Estilização da scrollbar */
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) rgba(0, 0, 0, 0.1);
        }

        .ficha-column:first-child::-webkit-scrollbar {
            width: 8px;
        }

        .ficha-column:first-child::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }

        .ficha-column:first-child::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        .ficha-column:first-child::-webkit-scrollbar-thumb:hover {
            background: #c82333;
        }

        .ficha-column:last-child {
            width: 40%;
            max-width: 480px;
            background: var(--purple-bg);
            border-radius: 10px;
            padding: 1rem;
            box-shadow: var(--shadow);
            /* Estilização da scrollbar */
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) rgba(0, 0, 0, 0.1);
        }

        .ficha-column:last-child::-webkit-scrollbar {
            width: 8px;
        }

        .ficha-column:last-child::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }

        .ficha-column:last-child::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        .ficha-column:last-child::-webkit-scrollbar-thumb:hover {
            background: #c82333;
        }

        /* Swiper Principal */
        .ficha-images-slider-container {
            position: relative;
            margin-bottom: 1rem;
        }

        .ficha-images-slider {
            height: 70vh;
            border-radius: 15px;
            overflow: hidden;
        }

        .ficha-images-slider .swiper-slide {
            text-align: center;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ficha-images-slider .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
            max-width: 100%;
            max-height: 100%;
        }

        .ficha-media-expand-icon {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 30px;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
        }

        /* Swiper Thumbnails */
        .ficha-images-thumbnail-slider {
            height: 80px;
            margin-top: 1rem;
            display: none; /* Esconder thumbnails já que só temos uma foto */
        }

        .ficha-images-thumbnail-slider .swiper-slide {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.3s;
        }

        .ficha-images-thumbnail-slider .swiper-slide-thumb-active {
            opacity: 1;
        }

        .ficha-images-thumbnail-slider .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Paginação - Escondida já que só temos uma foto */
        .swiper-pagination {
            display: none;
        }

        /* Navegação - Escondida já que só temos uma foto */
        .swiper-button-next,
        .swiper-button-prev {
            display: none;
        }

        .swiper-button-next:after,
        .swiper-button-prev:after {
            font-size: 18px;
        }

        /* Seção de Fotos */
        .ficha-column-box {
            background: var(--bg-white);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
        }

        .ficha-column-box h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--text-dark);
            font-size: 1.2rem;
        }

        .ficha-column-box h4 img {
            width: 20px;
            height: 20px;
        }

        /* Grid de Fotos */
        .ficha-media-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .ficha-media-item-container {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
            min-height: 380px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
        }

        .ficha-media-item-container:hover {
            transform: scale(1.02);
        }

        .ficha-media-item {
            width: 100%;
            height: 380px;
            object-fit: cover;
            object-position: center;
            min-width: 100%;
            min-height: 100%;
        }

        .ficha-media-item-counter {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .ficha-media-share-icon,
        .ficha-media-expand-icon {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 24px;
            height: 24px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
        }

        /* Informações do Perfil */
        .ficha-favorites-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            cursor: pointer;
            z-index: 10;
        }

        .ficha-favorites-btn img {
            width: 30px;
            height: 30px;
        }

        .ficha-column-box h1 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        /* Input do nome do perfil */
        .profile-name-input {
            font-size: 1.8rem !important;
            font-weight: bold !important;
            border: 2px solid transparent !important;
            border-radius: 8px !important;
            padding: 0.5rem 1rem !important;
            background: transparent !important;
            color: var(--text-dark) !important;
            transition: all 0.3s !important;
            width: 100% !important;
            margin-bottom: 0.5rem !important;
        }
        
        .profile-name-input:focus {
            outline: none !important;
            border-color: var(--primary-color) !important;
            background: rgba(220, 53, 69, 0.05) !important;
        }
        
        .profile-name-input:hover {
            border-color: rgba(220, 53, 69, 0.3) !important;
        }
        
        .profile-name-char-counter {
            position: absolute;
            bottom: -20px;
            right: 0;
            font-size: 0.75rem;
            color: #666;
        }
        
        .profile-name-char-counter.warning {
            color: #ffc107;
        }
        
        .profile-name-char-counter.danger {
            color: var(--primary-color);
        }

        .fecha-creacion {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .fecha-creacion img {
            width: 16px;
            height: 16px;
        }

        /* Cachês */
        .ficha-tarifas ul {
            list-style: none;
            padding: 0;
        }

        .ficha-tarifas li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .ficha-tarifas li:last-child {
            border-bottom: none;
        }
        
        /* Campos de Cachê Editáveis */
        .cache-options {
            margin-bottom: 1.5rem;
        }
        
        .cache-options label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            font-weight: 500;
        }
        
        .cache-options input[type="radio"] {
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        
        .cache-fields {
            margin-top: 1rem;
        }
        
        .cache-field-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 0.75rem;
            align-items: center;
        }
        
        .cache-minutos-input,
        .cache-preco-input {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .cache-minutos-input:focus,
        .cache-preco-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.1);
        }
        
        .cache-minutos-input:disabled,
        .cache-preco-input:disabled {
            background-color: #f5f5f5;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .cache-minutos-input {
            width: 50px;
            max-width: 50px;
        }
        
        .cache-preco-input {
            width: 70px;
            max-width: 70px;
        }
        
        /* Estilos para validação de checkboxes */
        .checkbox-group-required {
            animation: pulse 2s infinite;
        }
        
        .checkbox-group-required.valid {
            animation: none;
        }
        
        @keyframes pulse {
            0%, 100% {
                box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
            }
            50% {
                box-shadow: 0 0 0 10px rgba(220, 53, 69, 0);
            }
        }
        
        .error-message {
            display: none;
            color: #dc3545;
            font-size: 12px;
            margin-top: 5px;
        }
        
        #cache-validation-message {
            color: var(--primary-color);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .cache-field-row {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
            
            .cache-minutos-input,
            .cache-preco-input {
                width: 100%;
            }
        }

        /* Descrição */
        .ad-description-text {
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        
        .description-textarea {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }
        
        .description-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
        }
        
        .description-textarea::placeholder {
            color: #adb5bd;
        }
        
        .description-char-counter {
            margin-top: 0.5rem;
            text-align: right;
            font-size: 0.875rem;
            color: #6c757d;
            transition: color 0.3s ease;
        }
        
        .description-char-counter.min-warning {
            color: #ffc107;
            font-weight: 600;
        }
        
        .description-char-counter.warning {
            color: #ffc107;
        }
        
        .description-char-counter.danger {
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .description-security-warning {
            margin-top: 0.5rem;
            padding: 0.75rem;
            background-color: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 5px;
            color: #856404;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .description-security-warning.error {
            background-color: #f8d7da;
            border-color: var(--primary-color);
            color: #721c24;
        }
        
        .description-security-warning i {
            font-size: 1rem;
        }

        .ficha-description-read-more {
            color: var(--primary-color);
            cursor: pointer;
            font-weight: bold;
            text-align: center;
            padding: 0.5rem;
            border-top: 1px solid var(--border-color);
            margin-top: 1rem;
        }

        /* Dados Pessoais */
        .ficha-data-row-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ficha-data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .ficha-data-row:last-child {
            border-bottom: none;
        }
        
        /* Campos editáveis de informações pessoais */
        .personal-info-input,
        .personal-info-select {
            width: 100%;
            max-width: 200px;
            padding: 0.5rem;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .personal-info-input:focus,
        .personal-info-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.1);
        }
        
        .personal-info-input:required:invalid {
            border-color: #ffc107;
        }
        
        .personal-info-input:required:valid {
            border-color: #28a745;
        }
        
        .radio-group,
        .checkbox-group {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .checkbox-group {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }
        
        .radio-group label,
        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-weight: normal;
        }
        
        /* Seção de Verificação */
        .verification-section {
            margin-bottom: 2rem;
        }
        
        .verification-card {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 2px solid #e9ecef;
        }
        
        .verification-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }
        
        .verification-icon {
            font-size: 2rem;
            color: var(--primary-color);
        }
        
        .verification-header h3 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--text-dark);
            font-weight: 600;
        }
        
        .verification-card p {
            color: var(--text-muted);
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .verification-benefits {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .verification-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--bg-light);
        }
        
        .radio-item:hover {
            border-color: var(--primary-color);
            background: #fff5f5;
        }
        
        .radio-item input[type="radio"] {
            display: none;
        }
        
        .radio-mark {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .radio-item input[type="radio"]:checked + .radio-mark {
            border-color: var(--primary-color);
            background: var(--primary-color);
        }
        
        .radio-item input[type="radio"]:checked + .radio-mark::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
        }
        
        .radio-text {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }
        
        .radio-text strong {
            color: var(--text-dark);
            font-size: 1rem;
        }
        
        .radio-text small {
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        .verification-upload-box {
            min-height: 250px;
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%);
            border: 2px dashed #007bff;
        }
        
        .verification-upload-box input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            z-index: 3;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.75rem;
            color: var(--text-dark);
            font-size: 1rem;
            font-weight: 500;
        }
        
        @media (max-width: 1024px) {
            .verification-card {
                padding: 1.5rem;
            }
            
            .verification-header h3 {
                font-size: 1.25rem;
            }
            
            .verification-upload-box {
                min-height: 200px;
            }
        }
        
        .radio-group input[type="radio"],
        .checkbox-group input[type="checkbox"] {
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        
        #pagamento-validation-message {
            color: var(--primary-color);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .personal-info-input,
            .personal-info-select {
                max-width: 100%;
            }
            
            .radio-group {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }

        .ficha-data-row-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .ficha-data-row-label img {
            width: 16px;
            height: 16px;
        }

        .ficha-data-row-value {
            color: var(--text-muted);
        }

        /* Serviços */
        .services-category {
            margin-bottom: 1.5rem;
        }

        .services-category h5 {
            color: var(--primary-color);
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.25rem;
        }

        .services-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .service-tag {
            background: var(--bg-white);
            border: 2px solid var(--border-color);
            color: var(--text-dark);
        }
        
        /* Estilos para checkboxes de serviços */
        .services-category {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .services-category h5 {
            color: #007bff;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 8px;
        }
        
        .service-checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 12px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .service-checkbox-label:hover {
            border-color: var(--primary-color);
            background: #fff5f5;
        }
        
        .service-checkbox-label input[type="checkbox"] {
            margin-right: 8px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        
        .service-checkbox-label input[type="checkbox"]:checked + span {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .service-checkbox-label input[type="checkbox"]:checked {
            accent-color: var(--primary-color);
        }
        
        /* Estilo quando checkbox está marcado - aplicado via JavaScript */
        .service-checkbox-label.checked {
            border-color: var(--primary-color) !important;
            background: #fff5f5 !important;
        }

        .service-tag:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        /* Mapa */
        .mapSection-container {
            margin-top: 1rem;
        }

        .map-link {
            display: block;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .map-link img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .popup {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem;
            text-align: center;
            font-size: 0.9rem;
        }

        .ficha-location-bar {
            display: flex;
            gap: 1rem;
        }

        .ficha-location-bar a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.9rem;
        }

        .ficha-location-bar img {
            width: 16px;
            height: 16px;
        }

        /* Botões de Ação */
        .ficha-btn-actions-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .btn-area,
        .btn-delete,
        .btn-report {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
            text-decoration: none;
            color: var(--text-dark);
        }

        .btn-area {
            background: var(--bg-light);
        }

        .btn-delete {
            background: #f8d7da;
            color: #721c24;
        }

        .btn-report {
            background: #fff3cd;
            color: #856404;
        }

        .btn-area:hover,
        .btn-delete:hover,
        .btn-report:hover {
            opacity: 0.8;
        }

        /* Barra de Contato Fixa */
        .fixed-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-white);
            padding: 1rem;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            border-radius: 20px 20px 0 0;
        }

        /* Classe d-flex para compatibilidade */
        .d-flex {
            display: flex;
        }

        .me-1 {
            margin-right: 0.5rem;
        }

        .ms-1 {
            margin-left: 0.5rem;
        }

        .call-bottombar-btn,
        .whatsapp-bottombar-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 15px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .call-bottombar-btn {
            background: var(--primary-color);
            color: white;
        }

        .call-bottombar-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
            background: #c82333;
        }

        .call-bottombar-btn i {
            font-size: 1.1rem;
        }

        .whatsapp-bottombar-btn {
            background: #25d366;
            color: white;
        }

        .whatsapp-bottombar-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
            background: #20ba5a;
        }

        .whatsapp-bottombar-btn i {
            font-size: 1.2rem;
        }

        /* Estilos para números de telefone */
        .phone-celular {
            font-weight: bold;
            font-size: 0.9rem;
        }

        .whatsapp-bottombar-btn span {
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* Modal - Estilo Fancybox */
        .modal {
            --fancybox-color: #dbdbdb;
            --fancybox-hover-color: #fff;
            --fancybox-bg: rgba(24, 24, 27, 0.98);
            --fancybox-slide-gap: 10px;
            --f-button-width: 40px;
            --f-button-height: 40px;
            --f-button-border: 0;
            --f-button-border-radius: 0;
            --f-button-color: #374151;
            --f-button-bg: #f8f8f8;
            --f-button-hover-bg: #e0e0e0;
            --f-button-active-bg: #d0d0d0;
            --f-button-shadow: none;
            --f-button-transition: all 0.15s ease;
            --f-button-transform: none;
            --f-button-svg-width: 20px;
            --f-button-svg-height: 20px;
            --f-button-svg-stroke-width: 1.5;
            --f-button-svg-fill: none;
            --f-button-svg-filter: none;
            --f-button-svg-disabled-opacity: 0.65;
            
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            direction: ltr;
            flex-direction: column;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            color: #f8f8f8;
            -webkit-tap-highlight-color: transparent;
            overflow: visible;
            z-index: 1050;
            outline: 0;
            transform-origin: top left;
            -webkit-text-size-adjust: 100%;
            -moz-text-size-adjust: none;
            -ms-text-size-adjust: 100%;
            text-size-adjust: 100%;
            overscroll-behavior-y: contain;
            background: var(--fancybox-bg);
        }

        .modal.show {
            display: flex;
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            z-index: -1;
            background: var(--fancybox-bg);
            opacity: 1;
            will-change: opacity;
        }

        .modal-content {
            position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
        }

        .modal-image-container {
            position: relative;
            max-width: 100%;
            max-height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Navegação sobre a imagem */
        .modal-image-container .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 30;
        }

        .modal-image-container .modal-nav.prev {
            left: 2px;
        }

        .modal-image-container .modal-nav.next {
            right: 2px;
        }

        /* Botões menores e mais próximos da imagem */
        .modal-image-container .modal-nav-button {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6));
            border: 1px solid rgba(255, 255, 255, 0.3);
            opacity: 0.8;
        }

        .modal-image-container .modal-nav-button:hover {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.7));
            border-color: rgba(255, 255, 255, 0.6);
            opacity: 1;
            transform: scale(1.1);
        }

        .modal-image-container .modal-nav-button svg {
            width: 24px;
            height: 24px;
        }

        .modal-content img,
        .modal-content video {
            max-width: 100%;
            max-height: 80vh;
            width: auto;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            object-fit: contain;
        }

        /* Toolbar */
        .modal-toolbar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            z-index: 10;
        }

        .modal-toolbar-left {
            display: flex;
            align-items: center;
        }

        .modal-toolbar-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-infobar {
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .modal-button {
            width: var(--f-button-width);
            height: var(--f-button-height);
            border: var(--f-button-border);
            border-radius: var(--f-button-border-radius);
            background: var(--f-button-bg);
            color: var(--f-button-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--f-button-transition);
            box-shadow: var(--f-button-shadow);
            transform: var(--f-button-transform);
        }

        .modal-button:hover {
            background: var(--f-button-hover-bg);
            color: var(--fancybox-hover-color);
        }

        .modal-button:active {
            background: var(--f-button-active-bg);
        }

        .modal-button svg {
            width: var(--f-button-svg-width);
            height: var(--f-button-svg-height);
            stroke-width: var(--f-button-svg-stroke-width);
            fill: var(--f-button-svg-fill);
            filter: var(--f-button-svg-filter);
        }

        /* Navigation */
        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 20;
        }

        .modal-nav.prev {
            left: 5px;
        }

        .modal-nav.next {
            right: 5px;
        }

        .modal-nav-button {
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.7));
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.95;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .modal-nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-nav-button:hover {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0.8));
            border-color: rgba(255, 255, 255, 0.7);
            opacity: 1;
            transform: scale(1.2);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
        }

        .modal-nav-button:hover::before {
            opacity: 1;
        }

        .modal-nav-button:active {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }

        .modal-nav-button svg {
            width: 32px;
            height: 32px;
            filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.4));
            position: relative;
            z-index: 1;
        }

        /* Thumbnails */
        .modal-thumbnails {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
            overflow-x: auto;
            z-index: 10;
            min-height: 90px;
            align-items: center;
        }

        .modal-thumbnail {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: #333;
            flex-shrink: 0;
            position: relative;
        }

        .modal-thumbnail:hover {
            opacity: 0.9;
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .modal-thumbnail.active {
            opacity: 1;
            border-color: #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .modal-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* Placeholder para thumbnails sem imagem */
        .modal-thumbnail::before {
            content: '📷';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #666;
            z-index: 1;
        }

        .modal-thumbnail img {
            position: relative;
            z-index: 2;
        }

        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--bg-light);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Centralização para todos os níveis de zoom */
        html {
            width: 100%;
            overflow-x: auto;
        }

        /* Garantir centralização em zoom extremo */
        @media (min-width: 1px) {
            .ficha-column-container {
                margin-left: auto;
                margin-right: auto;
            }
        }

        /* Player de Áudio */
        .audio-player-wrapper {
            width: 100%;
        }

        .audio-player-wrapper .border {
            border-color: #dee2e6;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .audio-player-wrapper button {
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .audio-player-wrapper button:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .audio-player-wrapper svg {
            transition: transform 0.2s ease;
        }

        .audio-player-wrapper button:hover svg {
            transform: scale(1.1);
        }

        .audio-player-wrapper .text-xs {
            font-size: 12px;
            font-weight: 500;
        }

        .audio-player-wrapper .text-neutral-gray-17 {
            color: #6c757d;
        }

        .audio-player-wrapper .leading-14px {
            line-height: 14px;
        }

        .audio-player-wrapper .min-w-34px {
            min-width: 34px;
        }

        .audio-player-wrapper .text-right {
            text-align: right;
        }

        .audio-player-wrapper .w-8 {
            width: 32px;
        }

        .audio-player-wrapper .h-56px {
            height: 56px;
        }

        .audio-player-wrapper .pr-3 {
            padding-right: 12px;
        }

        .audio-player-wrapper .gap-2 {
            gap: 8px;
        }

        .audio-player-wrapper .p-3 {
            padding: 12px;
        }

        .audio-player-wrapper .pr-0 {
            padding-right: 0;
        }

        .audio-player-wrapper .flex {
            display: flex;
        }

        .audio-player-wrapper .items-center {
            align-items: center;
        }

        .audio-player-wrapper .justify-between {
            justify-content: space-between;
        }

        .audio-player-wrapper .justify-start {
            justify-content: flex-start;
        }

        .audio-player-wrapper .w-full {
            width: 100%;
        }

        .audio-player-wrapper .relative {
            position: relative;
        }

        .audio-player-wrapper .overflow-hidden {
            overflow: hidden;
        }

        .audio-player-wrapper .z-0 {
            z-index: 0;
        }

        .audio-player-wrapper .flex-1 {
            flex: 1;
        }

        .audio-player-wrapper .opacity-20 {
            opacity: 0.2;
        }

        .audio-player-wrapper .absolute {
            position: absolute;
        }

        .audio-player-wrapper .h-10 {
            height: 40px;
        }

        .audio-player-wrapper .top-1-2 {
            top: 50%;
        }

        .audio-player-wrapper .translate-y-1-2 {
            transform: translateY(-50%);
        }

        .audio-player-wrapper .left-0 {
            left: 0;
        }

        .audio-player-wrapper .z-10 {
            z-index: -10;
        }

        .audio-player-wrapper .w-0-5 {
            width: 2px;
        }

        .audio-player-wrapper .rounded-full {
            border-radius: 9999px;
        }

        .audio-player-wrapper .bg-primary-coral-6 {
            background-color: #E25352;
        }

        .audio-player-wrapper .transition-all {
            transition: all 0.2s ease;
        }

        .audio-player-wrapper .duration-200 {
            transition-duration: 200ms;
        }

        .audio-player-wrapper .gap-3px {
            gap: 3px;
        }

        /* Efeitos do Equalizador */
        .audio-player-wrapper .w-0-5 {
            transition: height 0.1s ease, opacity 0.1s ease;
            will-change: height, opacity;
        }

        .audio-player-wrapper .bg-primary-coral-6 {
            background: linear-gradient(180deg, #E25352 0%, #ff6b6b 100%);
            box-shadow: 0 0 4px rgba(226, 83, 82, 0.3);
        }

        /* Animação de pulso quando tocando */
        .audio-player-wrapper.playing .bg-primary-coral-6 {
            animation: equalizerPulse 0.5s ease-in-out infinite alternate;
        }

        @keyframes equalizerPulse {
            0% {
                box-shadow: 0 0 4px rgba(226, 83, 82, 0.3);
            }
            100% {
                box-shadow: 0 0 8px rgba(226, 83, 82, 0.6);
            }
        }

        /* Efeito de brilho nas barras ativas */
        .audio-player-wrapper .w-0-5.active {
            background: linear-gradient(180deg, #ff6b6b 0%, #E25352 50%, #ff6b6b 100%);
            box-shadow: 0 0 6px rgba(255, 107, 107, 0.8);
        }

        /* Responsivo */
        /* Desktop: Scroll independente para cada coluna */
        @media (min-width: 1025px) {
            .ficha-columns-grid {
                align-items: flex-start;
            }
            
            .ficha-column:first-child,
            .ficha-column:last-child {
                max-height: calc(100vh - 158px);
                overflow-y: auto;
                overflow-x: hidden;
                position: sticky;
                top: 0;
                align-self: flex-start;
            }
        }
        
        @media (max-width: 1024px) {
            /* Layout mobile/tablet: banner primeiro, depois informações */
            .ficha-column-container {
                flex-direction: column;
                padding: 0;
                gap: 0;
                max-width: 100%;
                margin: 0;
            }
            
            .ficha-columns-grid {
                flex-direction: column;
                gap: 0;
                height: auto;
            }
            
            .ficha-column:first-child,
            .ficha-column:last-child {
                height: auto;
                position: relative;
                overflow-y: visible;
            }
            
            /* Banner ocupa tela inteira e fica fixo */
            .ficha-column:first-child {
                width: 100%;
                max-width: 100%;
                padding: 0;
                border-radius: 0;
                background: transparent;
                box-shadow: none;
                order: 1;
                position: relative;
            }
            
            .ficha-images-slider-container {
                margin-bottom: 0;
                position: relative;
            }
            
            .banner-upload-container {
                width: 100vw;
                height: 100vh;
                border-radius: 0;
                position: fixed;
                top: 0;
                left: 0;
                z-index: 100;
                margin: 0;
            }
            
            /* Galeria de upload aparece após scroll do banner */
            .ficha-column:first-child .ficha-column-box {
                margin-top: 100vh; /* Espaço para o banner fixo */
                padding: 1rem;
                background: var(--bg-white);
                border-radius: 0;
                position: relative;
                z-index: 101;
            }
            
            /* Coluna de informações abaixo do banner e galeria */
            .ficha-column:last-child {
                width: 100%;
                max-width: 100%;
                padding: 1rem;
                border-radius: 0;
                background: var(--purple-bg);
                margin-top: 0; /* Já tem espaço do banner acima */
                order: 2;
                max-height: none;
                overflow-y: visible;
                position: relative;
                z-index: 101; /* Acima do banner */
            }
        }
        
        @media (max-width: 768px) {
            .ficha-column-container {
                padding: 0;
                gap: 0;
            }
            
            .ficha-column:first-child,
            .ficha-column:last-child {
                width: 100%;
                max-width: none;
            }
            
            .ficha-column:last-child {
                padding: 0.75rem;
            }
            
            .banner-upload-container {
                height: 100vh;
            }
            
            /* Galeria de upload em mobile */
            #gallery-upload-grid {
                grid-template-columns: 1fr !important;
                gap: 0.75rem !important;
            }
            
            .foto-upload-box {
                min-height: 300px !important;
            }
            
            /* Ajustar padding da coluna de informações */
            .ficha-column:last-child .ficha-column-box {
                padding: 1rem;
                margin-bottom: 0.75rem;
            }
            
            .ficha-media-grid {
                grid-template-columns: 1fr;
            }
            
            .ficha-media-item {
                height: 300px; /* Tamanho menor em mobile */
                min-width: 100%;
                min-height: 100%;
            }
            
            .ficha-media-item-container {
                min-height: 300px; /* Altura mínima em mobile */
            }
            
            .fixed-bottom {
                flex-direction: row;
                justify-content: space-between;
                gap: 0.5rem;
            }
            
            .call-bottombar-btn,
            .whatsapp-bottombar-btn {
                width: 32%;
                padding: 0.4rem 0.8rem;
                font-size: 0.75rem;
                min-width: 120px;
                max-width: 160px;
            }
            
            .ficha-fixed-header {
                padding: 0.5rem 1rem;
            }
            
            .ficha-top-line {
                padding: 0.5rem 1rem;
            }
        }
        
        /* Estilos para Upload de Banner e Galeria */
        .banner-upload-container {
            position: relative;
            width: 100%;
            height: 70vh;
            border-radius: 15px;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.8) 0%, rgba(108, 117, 125, 0.8) 100%);
        }
        
        .banner-upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.8) 0%, rgba(108, 117, 125, 0.8) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2;
            transition: opacity 0.3s;
            cursor: pointer;
            pointer-events: none;
        }
        
        .banner-upload-overlay:hover {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.9) 0%, rgba(108, 117, 125, 0.9) 100%) !important;
        }
        
        .profile-banner {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.3s;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .btn-change-banner-overlay {
            display: none;
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 3;
            background: rgba(0, 123, 255, 0.9);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .btn-change-banner-overlay:hover {
            background: rgba(0, 123, 255, 1) !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4) !important;
        }
        
        .foto-upload-box {
            position: relative;
            border: none;
            border-radius: 8px;
            padding: 0;
            text-align: center;
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%);
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 380px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .foto-upload-box:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .galeria-upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2;
            pointer-events: none;
        }
        
        .photo-preview {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 8px;
            z-index: 1;
        }
        
        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-preview {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 8px;
            z-index: 1;
        }
        
        .video-preview video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .btn-change-photo {
            display: none;
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 3;
            background: rgba(0, 123, 255, 0.95);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .btn-change-photo:hover {
            background: rgba(0, 123, 255, 1);
            transform: scale(1.05);
        }
        
        @media (max-width: 768px) {
            .banner-upload-container {
                height: 50vh;
            }
            
            .foto-upload-box {
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Background com screenshot da página anterior -->
    <div class="page-background" id="page-background"></div>
    
    <!-- Overlay escuro -->
    <div class="content-overlay"></div>
    

    <!-- Container Principal -->
    <div class="ficha-column-container">
        
    <!-- Header -->
    <header class="header" id="cabecalho">
        <div class="contem">
            <!-- Logo/Texto -->
            <div class="header-logo-text">
                Mansao do Job
            </div>
        </div>
    </header>
    
    <!-- Menu Fullscreen -->
    <div id="menu" class="">
        <nav class="main-nav">
            <ul>
                <li><a href="A_01__index.html" title="INÍCIO">HOME</a></li>
                <li><a href="A_02__premium_copy.html" title="MULHERES">MULHERES</a></li>
                <li class="parent-item">
                    <a href="#" title="ACOMPANHANTES POR REGIÃO" class="parent-link">POR REGIÃO</a>
                    <ul class="submenu">
                        <li><a href="#" title="ASA NORTE">Asa Norte</a></li>
                        <li><a href="#" title="ASA SUL">Asa Sul</a></li>
                        <li><a href="#" title="SUDOESTE">Sudoeste</a></li>
                        <li><a href="#" title="ÁGUAS CLARAS">Águas Claras</a></li>
                        <li><a href="#" title="LAGO SUL">Lago Sul</a></li>
                        <li><a href="#" title="GUARÁ I e II">Guará</a></li>
                    </ul>
                </li>
                <li><a href="#" title="MASSAGEM SENSUAL ERÓTICA">MASSAGISTAS</a></li>
                <li><a href="A_02__premium_Anuncio-Sexo_Virtual_02.html" title="ATENDIMENTO VIRTUAL">VIRTUAL</a></li>
                <li><a href="#" title="TRANSEX">TRAVESTIS</a></li>
                <li><a href="#" title="GAROTOS DE PROGRAMA">HOMENS</a></li>
                <li><a href="#" title="ANUNCIAR NO SITE">Publicar Anuncio</a></li>
            </ul>
        </nav>
    </div>

    <!-- Formulário de Cadastro -->
    <form id="cadastroForm" enctype="multipart/form-data" style="max-width: 1200px; margin: 0 auto; width: 100%; padding: 0 2rem; box-sizing: border-box;">
        <!-- Grid das Colunas -->
        <div class="ficha-columns-grid">
        <!-- Coluna da Esquerda - Banner e Galeria -->
        <div class="ficha-column">
            <!-- Banner Upload Container -->
            <div class="ficha-images-slider-container" style="position: relative; margin-bottom: 1rem;">
                <div class="banner-upload-container" id="banner-upload-container" style="position: relative; width: 100%; height: 70vh; border-radius: 15px; overflow: hidden; background: linear-gradient(135deg, rgba(220, 53, 69, 0.8) 0%, rgba(108, 117, 125, 0.8) 100%);">
                    <!-- Banner preview -->
                    <img src="" 
                         alt="Banner" class="profile-banner" id="profile-banner" 
                         style="width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.3s; position: absolute; top: 0; left: 0; z-index: 1;">
                    
                    <!-- Overlay de upload (aparece quando não há banner) -->
                    <div class="banner-upload-overlay" id="banner-upload-overlay" 
                         style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(135deg, rgba(220, 53, 69, 0.8) 0%, rgba(108, 117, 125, 0.8) 100%); display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; transition: opacity 0.3s; cursor: pointer; pointer-events: none;">
                        <input type="file" id="banner-photo" name="foto_banner" accept="image/*" required 
                               style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div style="pointer-events: none; z-index: 1;">
                            <i class="fas fa-image" style="font-size: 3rem; color: white; margin-bottom: 15px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span style="color: white; font-size: 1.1rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);">Clique para adicionar foto do banner</span>
                            <small style="color: rgba(255, 255, 255, 0.95); font-size: 0.9rem; margin-top: 5px; text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3); display: block; text-align: center;">Imagem promocional do anúncio</small>
                        </div>
                    </div>
                    
                    <!-- Botão de trocar banner (aparece quando há banner) -->
                    <button type="button" class="btn-change-banner-overlay" id="btn-change-banner" 
                            style="display: none; position: absolute; top: 20px; left: 20px; z-index: 3; background: rgba(0, 123, 255, 0.9); color: white; border: none; border-radius: 8px; padding: 10px 20px; cursor: pointer; font-size: 14px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                        <i class="fas fa-exchange-alt"></i> Trocar Banner
                    </button>
                </div>
            </div>

            <!-- Seção de Galeria de Fotos e Vídeos -->
            <div class="ficha-column-box">
                <h4>
                    <i class="fas fa-images"></i>
                    Galeria de Fotos e Vídeos
                </h4>
                <p style="margin-bottom: 15px; color: #666; font-size: 0.9rem;">
                    Adicione fotos e vídeos para sua galeria (mínimo 1 foto obrigatória)
                </p>
                <div class="ficha-media-grid" id="gallery-upload-grid" style="grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <!-- Galeria Upload Box 1 -->
                    <div class="foto-upload-box" id="galeria-upload-box-1" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-1" name="galeria_1" accept="image/*" required data-min-galeria="1" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-1" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-1" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-1" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    
                    <!-- Galeria Upload Box 2 -->
                    <div class="foto-upload-box" id="galeria-upload-box-2" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-2" name="galeria_2" accept="image/*" required data-min-galeria="2" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-2" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-2" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-2" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    
                    <!-- Galeria Upload Box 3 -->
                    <div class="foto-upload-box" id="galeria-upload-box-3" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-3" name="galeria_3" accept="image/*" required data-min-galeria="3" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-3" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-3" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-3" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    
                    <!-- Galeria Upload Box 4 -->
                    <div class="foto-upload-box" id="galeria-upload-box-4" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-4" name="galeria_4" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-4" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-4" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-4" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    
                    <!-- Galeria Upload Box 5 -->
                    <div class="foto-upload-box" id="galeria-upload-box-5" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-5" name="galeria_5" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-5" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-5" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-5" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    
                    <!-- Galeria Upload Box 6 -->
                    <div class="foto-upload-box" id="galeria-upload-box-6" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-6" name="galeria_6" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-6" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-6" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-6" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    
                    <!-- Galeria Upload Box 7 -->
                    <div class="foto-upload-box" id="galeria-upload-box-7" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-7" name="galeria_7" accept="image/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-7" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-camera upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                        </div>
                        <div class="photo-preview" id="galeria-preview-7" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-7" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(0, 123, 255, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    
                    <!-- Galeria Upload Box 8 (Vídeo) -->
                    <div class="foto-upload-box" id="galeria-upload-box-8" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(220, 53, 69, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-8" name="galeria_8" accept="video/*" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 10; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-8" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-video upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar vídeo</span>
                            <small style="color: rgba(255, 255, 255, 0.95); font-size: 0.75rem; margin-top: 5px; text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3);">Vídeo (máx. 100MB)</small>
                        </div>
                        <div class="photo-preview" id="galeria-preview-8" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <div class="video-preview" id="galeria-video-preview-8" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-8" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(220, 53, 69, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                    
                    <!-- Galeria Upload Box 9 (Foto de Stories) -->
                    <div class="foto-upload-box" id="galeria-upload-box-9" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(40, 167, 69, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); cursor: pointer; transition: all 0.3s ease; min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <input type="file" id="galeria-photo-9" name="galeria_9" accept="image/*" required style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; opacity: 0; cursor: pointer; z-index: 3; pointer-events: auto;">
                        <div class="galeria-upload-overlay" id="galeria-overlay-9" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 2; pointer-events: none;">
                            <i class="fas fa-images upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                            <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para adicionar foto</span>
                            <small style="color: rgba(255, 255, 255, 0.95); font-size: 0.75rem; margin-top: 5px; text-shadow: 0 1px 5px rgba(0, 0, 0, 0.3); font-weight: 600;">📸 Foto de Stories</small>
                        </div>
                        <div class="photo-preview" id="galeria-preview-9" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <button type="button" class="btn-change-photo" id="btn-change-galeria-9" style="display: none; position: absolute; top: 10px; left: 10px; z-index: 3; background: rgba(40, 167, 69, 0.95); color: white; border: none; border-radius: 8px; padding: 8px 15px; cursor: pointer; font-size: 12px; font-weight: 500; box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); transition: all 0.3s;">
                            <i class="fas fa-exchange-alt"></i> Trocar
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Seção de Verificação -->
            <div class="ficha-column-box" style="margin-top: 2rem;">
                <div class="verification-section">
                    <div class="verification-card">
                        <div class="verification-header">
                            <i class="fas fa-shield-check verification-icon"></i>
                            <h3>Verificação</h3>
                        </div>
                        <p>
                            Quero verificar meu anúncio e multiplicar minhas chamadas
                        </p>
                        <p class="verification-benefits">
                            É fácil, rápido e não precisa mostrar nenhum documento.
                            Destaque-se como real, gere confiança e multiplique seus
                            resultados.
                        </p>
                        <div class="verification-options">
                            <label class="radio-item">
                                <input type="radio" name="verificacao" value="sim" checked autocomplete="off">
                                <span class="radio-mark"></span>
                                <span class="radio-text">
                                    <strong>Verificar agora</strong>
                                    <small>Anime-se hoje!</small>
                                </span>
                            </label>
                            <label class="radio-item">
                                <input type="radio" name="verificacao" value="depois" autocomplete="off">
                                <span class="radio-mark"></span>
                                <span class="radio-text">
                                    <strong>Agora não tenho tempo, farei mais tarde</strong>
                                </span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- UPLOAD DE DOCUMENTOS PARA VERIFICAÇÃO -->
                <div class="verification-section" style="margin-top: 30px; display: block; visibility: visible; opacity: 1;">
                    <div class="verification-card">
                        <div class="verification-header">
                            <i class="fas fa-id-card verification-icon"></i>
                            <h3><u>UPLOAD DE DOCUMENTOS PARA VERIFICAÇÃO</u></h3>
                        </div>
                        
                        <!-- CAIXA 1: FOTO DOCUMENTO FRENTE -->
                        <div class="form-group">
                            <label><strong>📄 Foto Documento Frente:</strong></label>
                            <div class="foto-upload-box verification-upload-box" id="documento-frente-upload-box">
                                <input type="file" id="documento-frente" name="documento-frente" accept="image/*" autocomplete="off" style="pointer-events: auto; cursor: pointer;">
                                <div class="galeria-upload-overlay" id="documento-frente-overlay">
                                    <i class="fas fa-id-card upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                                    <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para enviar foto da frente do documento<br><small>RG, CNH ou Passaporte</small></span>
                                </div>
                                <div class="photo-preview" id="documento-frente-preview" style="display: none;"></div>
                                <button type="button" class="btn-change-photo" id="btn-change-documento-frente" style="display: none;">
                                    <i class="fas fa-exchange-alt"></i> Trocar
                                </button>
                            </div>
                        </div>
                        
                        <!-- CAIXA 2: FOTO DOCUMENTO VERSO -->
                        <div class="form-group">
                            <label><strong>📄 Foto Documento Verso:</strong></label>
                            <div class="foto-upload-box verification-upload-box" id="documento-verso-upload-box">
                                <input type="file" id="documento-verso" name="documento-verso" accept="image/*" autocomplete="off" style="pointer-events: auto; cursor: pointer;">
                                <div class="galeria-upload-overlay" id="documento-verso-overlay">
                                    <i class="fas fa-id-card upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                                    <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para enviar foto do verso do documento<br><small>Parte de trás do documento</small></span>
                                </div>
                                <div class="photo-preview" id="documento-verso-preview" style="display: none;"></div>
                                <button type="button" class="btn-change-photo" id="btn-change-documento-verso" style="display: none;">
                                    <i class="fas fa-exchange-alt"></i> Trocar
                                </button>
                            </div>
                        </div>
                        
                        <!-- CAIXA 3: FOTO DOCUMENTO COM SELFIE -->
                        <div class="form-group">
                            <label><strong>🤳 Foto Documento com Selfie:</strong></label>
                            <div class="foto-upload-box verification-upload-box" id="selfie-documento-upload-box">
                                <input type="file" id="selfie-documento" name="selfie-documento" accept="image/*" autocomplete="off" style="pointer-events: auto; cursor: pointer;">
                                <div class="galeria-upload-overlay" id="selfie-documento-overlay">
                                    <i class="fas fa-user-circle upload-icon" style="font-size: 2rem; color: white; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                                    <span class="upload-text" style="color: white; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para enviar selfie com documento<br><small>Segurando o documento próximo ao rosto</small></span>
                                </div>
                                <div class="photo-preview" id="selfie-documento-preview" style="display: none;"></div>
                                <button type="button" class="btn-change-photo" id="btn-change-selfie-documento" style="display: none;">
                                    <i class="fas fa-exchange-alt"></i> Trocar
                                </button>
                            </div>
                        </div>
                        
                        <!-- CAIXA 4: VÍDEO DE VERIFICAÇÃO -->
                        <div class="form-group">
                            <label><strong>🎥 Vídeo de Verificação:</strong></label>
                            <div class="foto-upload-box verification-upload-box" id="verification-video-upload-box" style="border-color: #dc3545;">
                                <input type="file" id="verification-video" name="verification-video" accept="video/*" autocomplete="off" style="pointer-events: auto; cursor: pointer;">
                                <div class="galeria-upload-overlay" id="verification-video-overlay">
                                    <i class="fas fa-video upload-icon" style="font-size: 2rem; color: #dc3545; margin-bottom: 10px; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);"></i>
                                    <span class="upload-text" style="color: #dc3545; font-size: 0.85rem; font-weight: 500; text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); padding: 0 10px; text-align: center;">Clique para enviar vídeo de verificação<br><small>Máx. 100MB • Até 30 segundos</small></span>
                                </div>
                                <div class="video-preview" id="verification-video-preview" style="display: none;"></div>
                                <button type="button" class="btn-change-photo" id="btn-change-verification-video" style="display: none;">
                                    <i class="fas fa-exchange-alt"></i> Trocar
                                </button>
                            </div>
                            <small style="color: #666; font-style: italic; display: block; margin-top: 0.5rem;">
                                Este campo é opcional. Pode ser preenchido posteriormente.
                            </small>
                        </div>
                    </div>
                </div>
                
                <!-- Botão de Confirmação após upload de documentos -->
                <div style="text-align: center; margin-top: 2rem; padding: 1.5rem;">
                    <button type="button" id="btn-confirmar-verificacao" onclick="confirmarVerificacao()" style="background: linear-gradient(135deg, rgb(0, 123, 255) 0%, rgb(0, 86, 179) 100%); color: white; border: none; padding: 1rem 2.5rem; border-radius: 10px; font-size: 1.1rem; font-weight: 600; cursor: pointer; transition: 0.3s; box-shadow: rgba(0, 123, 255, 0.3) 0px 4px 15px; display: inline-flex; align-items: center; gap: 10px;">
                        <i class="fas fa-check-circle"></i>
                        <span>Confirmar Verificação</span>
                    </button>
                    <div id="verificacao-status" style="margin-top: 1rem; font-size: 0.9rem; min-height: 25px;"></div>
                </div>
            </div>
        </div>

        <!-- Coluna da Direita - Informações -->
        <div class="ficha-column">
            <!-- Informações Básicas -->
            <div class="ficha-column-box">
                <div class="ficha-favorites-btn">
                    <i class="far fa-heart" style="font-size: 1.5rem; color: var(--primary-color);"></i>
                </div>
                <div style="position: relative;">
                    <input type="text" id="profile-name" name="nome" class="profile-name-input" maxlength="30" required placeholder="Digite o nome do anúncio (máx. 30 caracteres)" value="" style="width: 100%; font-size: 1.8rem; font-weight: bold; border: 2px solid transparent; border-radius: 8px; padding: 0.5rem 1rem; background: transparent; color: var(--text-dark); transition: all 0.3s;">
                    <div class="profile-name-char-counter" style="position: absolute; bottom: -20px; right: 0; font-size: 0.75rem; color: #666;">
                        <span id="profile-name-char-count">19</span>/30
                    </div>
                </div>
                <div class="fecha-creacion">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="creation-date">22/10/2025</span>
                </div>
                
                <div class="ficha-tarifas">
                    <h4>Cachês <span style="color: var(--primary-color);">*</span></h4>
                    
                    <!-- Opções de Cachê -->
                    <div class="cache-options" style="margin-bottom: 1.5rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.5rem; cursor: pointer;">
                            <input type="radio" name="cache-option" value="combinar" id="cache-combinar" checked style="cursor: pointer;">
                            <span>A combinar</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="cache-option" value="editar" id="cache-editar" style="cursor: pointer;">
                            <span>Editar valores</span>
                        </label>
                    </div>
                    
                    <!-- Campos de Cachê -->
                    <div id="cache-fields" class="cache-fields" style="display: none;">
                        <div class="cache-field-row">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="number" name="cache_minutos_1" id="cache_minutos_1" value="2" min="1" max="60" class="cache-minutos-input" disabled>
                                <span>minutos</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>R$</span>
                                <input type="number" name="cache_preco_1" id="cache_preco_1" min="1" max="1000" step="0.01" placeholder="0.00" class="cache-preco-input" disabled>
                            </div>
                        </div>
                        
                        <div class="cache-field-row">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="number" name="cache_minutos_2" id="cache_minutos_2" value="3" min="1" max="60" class="cache-minutos-input" disabled>
                                <span>minutos</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>R$</span>
                                <input type="number" name="cache_preco_2" id="cache_preco_2" min="1" max="1000" step="0.01" placeholder="0.00" class="cache-preco-input" disabled>
                            </div>
                        </div>
                        
                        <div class="cache-field-row">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="number" name="cache_minutos_3" id="cache_minutos_3" value="4" min="1" max="60" class="cache-minutos-input" disabled>
                                <span>minutos</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>R$</span>
                                <input type="number" name="cache_preco_3" id="cache_preco_3" min="1" max="1000" step="0.01" placeholder="0.00" class="cache-preco-input" disabled>
                            </div>
                        </div>
                        
                        <div class="cache-field-row">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="number" name="cache_minutos_4" id="cache_minutos_4" value="5" min="1" max="60" class="cache-minutos-input" disabled>
                                <span>minutos</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>R$</span>
                                <input type="number" name="cache_preco_4" id="cache_preco_4" min="1" max="1000" step="0.01" placeholder="0.00" class="cache-preco-input" disabled>
                            </div>
                        </div>
                        
                        <div class="cache-field-row">
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <input type="number" name="cache_minutos_5" id="cache_minutos_5" value="10" min="1" max="60" class="cache-minutos-input" disabled>
                                <span>minutos</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span>R$</span>
                                <input type="number" name="cache_preco_5" id="cache_preco_5" min="1" max="1000" step="0.01" placeholder="0.00" class="cache-preco-input" disabled>
                            </div>
                        </div>
                        
                        <div id="cache-validation-message" style="color: var(--primary-color); font-size: 0.875rem; margin-top: 0.5rem; display: none;">
                            * Por favor, preencha pelo menos um campo de cachê
                        </div>
                    </div>
                </div>
            </div>

            <!-- Descrição -->
            <div class="ficha-column-box">
                <h4>Descrição <span style="color: var(--primary-color);">*</span></h4>
                <div id="textDescription">
                    <textarea 
                        id="description-text" 
                        name="descricao" 
                        class="description-textarea" 
                        maxlength="1000" 
                        minlength="100"
                        rows="6" 
                        placeholder="Descreva seus serviços, experiência e o que você oferece... (mínimo 100, máximo 1000 caracteres)"
                        required
                    ></textarea>
                    <div class="description-char-counter">
                        <span id="description-char-count">0</span> / 1000 caracteres <span style="color: var(--primary-color); margin-left: 0.5rem;">(mínimo: 100)</span>
                    </div>
                    <div id="description-security-warning" class="description-security-warning" style="display: none;"></div>
                </div>
            </div>

            <!-- Áudio de Apresentação -->
            <div class="ficha-column-box" id="audio-upload-container">
                <h4>Áudio de Apresentação</h4>
                <div class="ficha-audio">
                    <div class="audio-upload-area" id="audio-upload-area">
                        <div class="audio-upload-placeholder" id="audio-upload-placeholder">
                            <i class="fas fa-microphone" style="font-size: 2.5rem; color: var(--primary-color); margin-bottom: 1rem;"></i>
                            <p style="color: #666; margin-bottom: 1rem;">Adicione ou grave um áudio de apresentação</p>
                            <button type="button" class="btn-audio-option" id="btn-upload-audio" style="background: var(--primary-color); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600; margin: 0.5rem; transition: all 0.3s;">
                                <i class="fas fa-upload"></i> Adicionar Áudio
                            </button>
                            <button type="button" class="btn-audio-option" id="btn-record-audio" style="background: #28a745; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600; margin: 0.5rem; transition: all 0.3s;">
                                <i class="fas fa-microphone"></i> Gravar Áudio
                            </button>
                            <input type="file" id="audio-file-input" name="audio_apresentacao" accept="audio/*" style="display: none;">
                        </div>
                        
                        <!-- Área de gravação (oculta inicialmente) -->
                        <div class="audio-recording-area" id="audio-recording-area" style="display: none;">
                            <div class="recording-controls" style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
                                <div class="recording-status" id="recording-status" style="text-align: center;">
                                    <div class="recording-indicator" id="recording-indicator" style="display: inline-block; width: 12px; height: 12px; background: var(--primary-color); border-radius: 50%; margin-right: 0.5rem; animation: pulse 1.5s infinite;"></div>
                                    <span id="recording-text">Gravando...</span>
                                </div>
                                <div class="recording-timer" id="recording-timer" style="font-size: 1.5rem; font-weight: bold; color: var(--primary-color);">00:00</div>
                                <div class="recording-buttons" style="display: flex; gap: 1rem;">
                                    <button type="button" id="btn-stop-recording" style="background: var(--primary-color); color: white; border: none; padding: 0.75rem 2rem; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                        <i class="fas fa-stop"></i> Parar
                                    </button>
                                    <button type="button" id="btn-cancel-recording" style="background: #6c757d; color: white; border: none; padding: 0.75rem 2rem; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                        <i class="fas fa-times"></i> Cancelar
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Preview do áudio (oculto inicialmente) -->
                        <div class="audio-preview-area" id="audio-preview-area" style="display: none;">
                            <div class="audio-preview-controls" style="display: flex; align-items: center; gap: 1rem; background: #f8f9fa; border-radius: 12px; padding: 15px; border: 1px solid #dee2e6;">
                                <button type="button" id="btn-play-preview" style="background: var(--primary-color); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center;">
                                    <i class="fas fa-play" id="play-icon"></i>
                                </button>
                                <div style="flex: 1;">
                                    <div style="font-size: 0.9rem; color: #666; margin-bottom: 0.25rem;">Áudio de apresentação</div>
                                    <div id="audio-duration-display" style="font-size: 0.85rem; color: #999;">00:00</div>
                                </div>
                                <button type="button" id="btn-remove-audio" style="background: #dc3545; color: white; border: none; padding: 0.5rem 1rem; border-radius: 8px; cursor: pointer; font-weight: 600;">
                                    <i class="fas fa-trash"></i> Remover
                                </button>
                            </div>
                            <audio id="audio-preview-player" style="display: none;"></audio>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Informações Pessoais -->
            <div class="ficha-column-box">
                <h4>Informações Pessoais</h4>
                <div class="ficha-data-row-container" id="personal-data">
                    <!-- Idade (Obrigatório) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-birthday-cake"></i>
                            <span>Idade <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="number" name="idade" id="info-idade" min="18" max="99" required class="personal-info-input" placeholder="Idade" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                        </div>
                    </div>
                    
                    <!-- Peso (Obrigatório) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-weight"></i>
                            <span>Peso <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="number" name="peso" id="info-peso" min="30" max="200" required class="personal-info-input" placeholder="Peso (kg)" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                        </div>
                    </div>
                    
                    <!-- Altura (Obrigatório) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-ruler-vertical"></i>
                            <span>Altura <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="text" name="altura" id="info-altura" required class="personal-info-input" placeholder="Ex: 1.82m ou 182cm" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                            <small data-help="altura" style="color: #666; font-size: 11px; display: block; margin-top: 4px;">Mínimo: 45cm | Máximo: 2m45cm (245cm)</small>
                            <div id="altura-error" class="error-message" style="display: none; color: #dc3545; font-size: 12px; margin-top: 5px;"></div>
                        </div>
                    </div>
                    
                    <!-- Faz Oral sem (Obrigatório) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-kiss-wink-heart"></i>
                            <span>Oral sem <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="oral-sem" id="info-oral-sem" required class="personal-info-select" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                                <option value="">Selecione</option>
                                <option value="sim">Sim</option>
                                <option value="nao">Não</option>
                                <option value="talvez">Talvez</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Beija (Obrigatório) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-kiss"></i>
                            <span>Beija <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="beija" id="info-beija" required class="personal-info-select" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                                <option value="">Selecione</option>
                                <option value="sim">Sim</option>
                                <option value="nao">Não</option>
                                <option value="talvez">Talvez</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Faz Anal (Obrigatório) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-user-friends"></i>
                            <span>Anal <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="anal" id="info-anal" required class="personal-info-select" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                                <option value="">Selecione</option>
                                <option value="sim">Sim</option>
                                <option value="nao">Não</option>
                                <option value="talvez">Talvez</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Local (Opcional) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-map-marker-alt"></i>
                            <span>Local</span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="local" id="info-local" class="personal-info-select" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                                <option value="">Selecione</option>
                                <option value="sim">Sim</option>
                                <option value="nao">Não</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Mora só (Obrigatório) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-home"></i>
                            <span>Mora só <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="mora-so" id="info-mora-so" required class="personal-info-select" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white; cursor: pointer;">
                                <option value="">Selecione</option>
                                <option value="sim">Sim</option>
                                <option value="nao">Não</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Horário de Atendimento (Obrigatório) -->
                    <div class="ficha-data-row" style="grid-column: span 1;">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-clock"></i>
                            <span>Horário de Atendimento <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value" style="width: 100%;">
                            <div style="margin-bottom: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 8px;">
                                    <input type="radio" name="horario-24h" id="horario-24h-sim" value="sim" style="margin-right: 8px;">
                                    <span>24 horas todos os dias</span>
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="radio" name="horario-24h" id="horario-24h-nao" value="nao" style="margin-right: 8px;">
                                    <span>Não</span>
                                </label>
                            </div>
                            <div id="horario-custom-container" style="display: none; margin-top: 10px;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <div>
                                        <label style="font-size: 12px; color: #666; display: block; margin-bottom: 5px;">Horário de Início *</label>
                                        <input type="time" id="horario-inicio" name="horario-inicio" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                                    </div>
                                    <div>
                                        <label style="font-size: 12px; color: #666; display: block; margin-bottom: 5px;">Horário de Fim *</label>
                                        <input type="time" id="horario-fim" name="horario-fim" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Formas de Pagamento (Obrigatório - pelo menos uma) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-credit-card"></i>
                            <span>Formas de Pagamento <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <div id="pagamento-checkbox-group" class="checkbox-group-required" style="margin-top: 8px; display: flex; flex-direction: column; gap: 0.5rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" name="pagamento" value="dinheiro" id="pagamento-dinheiro" style="cursor: pointer;">
                                    <span>Dinheiro</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" name="pagamento" value="pix" id="pagamento-pix" style="cursor: pointer;">
                                    <span>PIX</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" name="pagamento" value="debito" id="pagamento-debito" style="cursor: pointer;">
                                    <span>Débito</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" name="pagamento" value="credito" id="pagamento-credito" style="cursor: pointer;">
                                    <span>Crédito</span>
                                </label>
                            </div>
                            <small style="color: #666; font-size: 12px; display: block; margin-top: 5px;">Selecione pelo menos uma opção</small>
                        </div>
                    </div>
                    
                    <!-- WhatsApp (Obrigatório) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fab fa-whatsapp"></i>
                            <span>WhatsApp <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="tel" name="whatsapp" id="whatsapp" required class="personal-info-input" placeholder="Ex: (11) 99999-9999" pattern="[\(]?[0-9]{2}[\)]?[\s]?[0-9]{4,5}[\-]?[0-9]{4}" maxlength="15">
                            <small style="color: #666; font-size: 0.75rem; display: block; margin-top: 0.25rem;">Formato: (11) 99999-9999</small>
                            <!-- Campos ocultos para estado e cidade (preenchidos automaticamente pelo DDD) -->
                            <input type="hidden" id="estado" name="estado">
                            <input type="hidden" id="cidade" name="cidade">
                        </div>
                    </div>
                </div>
            </div>

            <!-- SERVIÇOS OFERECIDOS -->
            <div class="ficha-column-box">
                <h4>SERVIÇOS OFERECIDOS</h4>
                <p style="color: #666; margin-bottom: 1.5rem;">Selecione os serviços que você oferece</p>
                
                <!-- Serviços Virtuais Principais -->
                <div class="services-category">
                    <h5>Serviços Virtuais Principais</h5>
                    <div class="services-tags">
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="videochamada">
                            <span>Videochamada</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="chamada-video">
                            <span>Chamada de vídeo</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="sexting">
                            <span>Sexting</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="mostro-rosto">
                            <span>Mostro o rosto</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="cara-a-cara">
                            <span>Cara a cara</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="ligacao-previa">
                            <span>Ligação prévia</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="atendimento-24h">
                            <span>Atendimento 24h</span>
                        </label>
                    </div>
                </div>
                
                <!-- Fantasias e Atividades Virtuais -->
                <div class="services-category">
                    <h5>Fantasias e Atividades Virtuais</h5>
                    <div class="services-tags">
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="striptease">
                            <span>Striptease</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="masturbacao">
                            <span>Masturbação</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="masturbacao-interativa">
                            <span>Masturbação interativa</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="squirting">
                            <span>Squirting</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="sexo-oral-virtual">
                            <span>Sexo oral virtual</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="penetracao-virtual">
                            <span>Penetração virtual</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="sexo-anal-virtual">
                            <span>Sexo anal virtual</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="chuva-dourada">
                            <span>Chuva dourada</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="avaliar-penis">
                            <span>Avaliar seu pênis</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="falar-sujo">
                            <span>Falar sujo</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="jogos-papeis">
                            <span>Jogos de papéis</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="jogos-eroticos">
                            <span>Jogos eróticos</span>
                        </label>
                    </div>
                </div>
                
                <!-- Conteúdos para Venda -->
                <div class="services-category">
                    <h5>Conteúdos para Venda</h5>
                    <div class="services-tags">
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="packs-fotos">
                            <span>Packs de fotos</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="packs-videos">
                            <span>Packs de vídeos</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="videos-personalizados">
                            <span>Vídeos personalizados</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="audios-eroticos">
                            <span>Áudios eróticos</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="audios-personalizados">
                            <span>Áudios personalizados</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="roupa-intima">
                            <span>Roupa íntima</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="conteudos-exclusivos">
                            <span>Conteúdos exclusivos</span>
                        </label>
                    </div>
                </div>
                
                <!-- Fetichismo e BDSM Virtual -->
                <div class="services-category">
                    <h5>Fetichismo e BDSM Virtual</h5>
                    <div class="services-tags">
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="dominacao">
                            <span>Dominação</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="dominacao-virtual">
                            <span>Dominação virtual</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="humilhacao">
                            <span>Humilhação</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="punheta-guiada">
                            <span>Punheta guiada</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="podolatria">
                            <span>Podolatria</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="fetichismo">
                            <span>Fetichismo</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="inversao">
                            <span>Inversão</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="anal-sem-frescura">
                            <span>Anal sem frescura</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="brinquedos-sexuais">
                            <span>Brinquedos sexuais</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="vibrador-controlado">
                            <span>Vibrador controlado</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="plug-anal">
                            <span>Plug anal</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="dupla-penetracao">
                            <span>Dupla penetração</span>
                        </label>
                    </div>
                </div>
                
                <!-- Fantasias e Figurinos -->
                <div class="services-category">
                    <h5>Fantasias e Figurinos</h5>
                    <div class="services-tags">
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="fantasias">
                            <span>Fantasias</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="figurinos">
                            <span>Figurinos</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="disfarces">
                            <span>Disfarces</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="lingerie">
                            <span>Lingerie</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="cosplay">
                            <span>Cosplay</span>
                        </label>
                    </div>
                </div>
                
                <!-- Perfil e Estilo -->
                <div class="services-category">
                    <h5>Perfil e Estilo</h5>
                    <div class="services-tags">
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="estilo-namoradinha">
                            <span>Estilo namoradinha</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="estilo-ninfeta">
                            <span>Estilo ninfeta</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="estilo-princesinha">
                            <span>Estilo princesinha</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="sem-frescura">
                            <span>Sem frescura</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="ativa">
                            <span>Ativa</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="passiva">
                            <span>Passiva</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="versatil">
                            <span>Versátil</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="inversao-papeis">
                            <span>Inversão de papéis</span>
                        </label>
                    </div>
                </div>
                
                <!-- Atendimento -->
                <div class="services-category">
                    <h5>Atendimento</h5>
                    <div class="services-tags">
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="atendo-homens">
                            <span>Atendo homens</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="atendo-mulheres">
                            <span>Atendo mulheres</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="atendo-casais">
                            <span>Atendo casais</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="atendo-trans">
                            <span>Atendo trans</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="atendo-nao-binarios">
                            <span>Atendo não binários</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="chamadas-individuais">
                            <span>Chamadas individuais</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="chamadas-com-amigas">
                            <span>Chamadas com amigas</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="participacao-ativa-cliente">
                            <span>Participação ativa do cliente</span>
                        </label>
                    </div>
                </div>
                
                <!-- Serviços Extras -->
                <div class="services-category">
                    <h5>Serviços Extras</h5>
                    <div class="services-tags">
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="sem-limite">
                            <span>Sem limite</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="sexcam">
                            <span>Sexcam</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="camgirl">
                            <span>Camgirl</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="qualidade-hd">
                            <span>Qualidade HD</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="iluminacao-profissional">
                            <span>Iluminação profissional</span>
                        </label>
                        <label class="service-checkbox-label">
                            <input type="checkbox" name="servicos[]" value="interacao-natural">
                            <span>Interação natural</span>
                        </label>
                    </div>
                </div>
            </div>

            <!-- Mapa -->
            <div class="ficha-column-box" id="map-section" style="display: none;">
                <h4>Mapa em: 📍<span id="map-location">-</span></h4>
                <div class="mapSection-container">
                    <a class="map-link" id="map-link" target="_blank">
                        <span class="popup">Abra o Google Maps</span>
                        <img id="map-image" alt="Mapa">
                    </a>
                    <div class="ficha-location-bar">
                        <a id="directions-link" target="_blank">
                            <i class="fas fa-directions"></i>
                            Como chegar
                        </a>
                        <a id="streetview-link" target="_blank">
                            <i class="fas fa-street-view"></i>
                            Street View
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Botão de Submit do Formulário -->
    <div style="max-width: 1200px; margin: 2rem auto; padding: 0 2rem; text-align: center;">
        <button type="submit" id="submit-cadastro-btn" style="background: linear-gradient(135deg, #dc3545 0%, #ff6b6b 100%); color: white; border: none; padding: 1rem 3rem; border-radius: 50px; font-size: 1.1rem; font-weight: 600; cursor: pointer; box-shadow: 0 4px 15px rgba(220, 53, 69, 0.4); transition: all 0.3s ease; display: inline-flex; align-items: center; gap: 10px;">
            <i class="fas fa-check-circle"></i>
            Salvar Anúncio
        </button>
    </div>

    <!-- Barra de Contato Fixa -->
    <div id="phoneCallSection" class="fixed-bottom d-flex">
        <a id="phoneCallBtn" href="#" class="call-bottombar-btn me-1" data-ficha-id="">
            <i class="fas fa-mobile-alt"></i>
            <span class="phone-celular">(11) 99999-9999</span>
        </a>
        <a id="whatsAppBtn" class="whatsapp-bottombar-btn ms-1" href="#" data-mobile-href="#" target="_blank" data-ficha-id="">
            <i class="fab fa-whatsapp"></i>
            <span>Whatsapp</span>
        </a>
    </div>
    </form>

    <!-- Modal - Estilo Fancybox -->
    <div id="gallery-modal" class="modal">
        <div class="modal-backdrop"></div>
        
        <!-- Toolbar -->
        <div class="modal-toolbar">
            <div class="modal-toolbar-left">
                <div class="modal-infobar">
                    <span id="modal-current-index">1</span>/<span id="modal-total-count">1</span>
                </div>
            </div>
            <div class="modal-toolbar-right">
                <button class="modal-button" title="Toggle zoom level" id="modal-zoom-btn">
                    <svg viewBox="0 0 24 24">
                        <g><line x1="11" y1="8" x2="11" y2="14"></line></g>
                        <circle cx="11" cy="11" r="7.5"></circle>
                        <path d="m21 21-4.35-4.35M8 11h6"></path>
                    </svg>
                </button>
                <button class="modal-button" title="Toggle slideshow" id="modal-slideshow-btn">
                    <svg viewBox="0 0 24 24">
                        <g><path d="M8 4v16l13 -8z"></path></g>
                        <g><path d="M8 4v15M17 4v15"></path></g>
                    </svg>
                </button>
                <button class="modal-button" title="Toggle full-screen mode" id="modal-fullscreen-btn">
                    <svg viewBox="0 0 24 24">
                        <g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"></path></g>
                        <g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"></path></g>
                    </svg>
                </button>
                <button class="modal-button" title="Toggle thumbnails" id="modal-thumbs-btn">
                    <svg viewBox="0 0 24 24">
                        <circle cx="5.5" cy="5.5" r="1"></circle>
                        <circle cx="12" cy="5.5" r="1"></circle>
                        <circle cx="18.5" cy="5.5" r="1"></circle>
                        <circle cx="5.5" cy="12" r="1"></circle>
                        <circle cx="12" cy="12" r="1"></circle>
                        <circle cx="18.5" cy="12" r="1"></circle>
                        <circle cx="5.5" cy="18.5" r="1"></circle>
                        <circle cx="12" cy="18.5" r="1"></circle>
                        <circle cx="18.5" cy="18.5" r="1"></circle>
                    </svg>
                </button>
                <button class="modal-button" title="Close" id="modal-close-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="m19.5 4.5-15 15M4.5 4.5l15 15"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Content -->
        <div class="modal-content">
            <div class="modal-image-container">
                <!-- Navigation sobre a imagem -->
                <div class="modal-nav prev">
                    <button class="modal-nav-button" id="modal-prev-btn" title="Imagem anterior">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                </div>
                <div class="modal-nav next">
                    <button class="modal-nav-button" id="modal-next-btn" title="Próxima imagem">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
                
            <img id="modal-image" style="display: none;">
            <video id="modal-video" controls style="display: none;">
                Seu navegador não suporta vídeos.
            </video>
            </div>
        </div>

        <!-- Thumbnails -->
        <div class="modal-thumbnails" id="modal-thumbnails">
            <!-- Thumbnails serão gerados dinamicamente -->
        </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // Variáveis globais
        let mainSwiper = null;
        let thumbSwiper = null;
        let currentAnuncio = null;

        // Inicializar Firebase
        console.log("🔥 Inicializando Firebase...");
        if (typeof firebaseConfig !== 'undefined') {
            firebase.initializeApp(firebaseConfig);
            console.log("✅ Firebase inicializado com sucesso!");
        } else {
            console.warn("⚠️ firebaseConfig não encontrado, usando dados de teste");
        }

        // Função para capturar screenshot da página anterior
        function capturePreviousPageScreenshot() {
            try {
                // Verificar se há screenshot salvo no localStorage
                const savedScreenshot = localStorage.getItem('previousPageScreenshot');
                if (savedScreenshot) {
                    console.log("📸 Usando screenshot salvo da página anterior");
                    document.getElementById('page-background').style.backgroundImage = `url(${savedScreenshot})`;
                    return;
                }
                
                // Se não há screenshot, usar uma imagem de fundo padrão
                console.log("📸 Nenhum screenshot encontrado, usando fundo padrão");
                document.getElementById('page-background').style.backgroundImage = 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'100%25\' height=\'100%25\'%3E%3Cdefs%3E%3Cpattern id=\'grid\' width=\'20\' height=\'20\' patternUnits=\'userSpaceOnUse\'%3E%3Cpath d=\'M 20 0 L 0 0 0 20\' fill=\'none\' stroke=\'%23ddd\' stroke-width=\'1\'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width=\'100%25\' height=\'100%25\' fill=\'%23f8f9fa\'/%3E%3Crect width=\'100%25\' height=\'100%25\' fill=\'url(%23grid)\'/%3E%3C/svg%3E")';
            } catch (error) {
                console.error("❌ Erro ao carregar screenshot:", error);
            }
        }

        // Função para fechar o overlay e voltar à página anterior
        function closeOverlay() {
            try {
                console.log("🚪 Fechando overlay...");
                
                // Verificar se há URL de retorno salva
                const returnUrl = localStorage.getItem('returnUrl') || 'http://127.0.0.1:8080/A_02__premium.html';
                const returnScroll = localStorage.getItem('returnScroll') || '0';
                
                console.log("🔄 Voltando para:", returnUrl);
                console.log("📍 Posição do scroll:", returnScroll);
                
                // Limpar dados temporários
                localStorage.removeItem('previousPageScreenshot');
                localStorage.removeItem('returnUrl');
                localStorage.removeItem('returnScroll');
                
                // Voltar para a página anterior
                window.location.href = returnUrl;
                
            } catch (error) {
                console.error("❌ Erro ao fechar overlay:", error);
                // Fallback: voltar para página padrão
                window.location.href = 'http://127.0.0.1:8080/A_02__premium.html';
            }
        }

        // Função setupSideClickToClose removida - funcionalidade de clique nas laterais desabilitada

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            console.log("🔥 DOM carregado, iniciando...");
            
            
            // Capturar screenshot da página anterior
            capturePreviousPageScreenshot();
            
            // Funcionalidade de clique nas laterais removida
            
            // Carregar dados do perfil
            loadProfileData();
            initModals();
            
            // Controlar visibilidade da seção de upload de documentos
            setupVerificationSectionVisibility();
            
            // Header agora está integrado no container
        });
        
        // Função para controlar visibilidade da seção de upload de documentos
        function setupVerificationSectionVisibility() {
            // Aguardar um pouco para garantir que o DOM está totalmente carregado
            setTimeout(function() {
                const verificationSection = document.querySelector('.verification-section[style*="margin-top: 30px"]');
                const verificationRadios = document.querySelectorAll('input[name="verificacao"]');
                
                if (!verificationSection) {
                    console.warn('⚠️ Seção de verificação não encontrada');
                    // Tentar novamente após mais tempo
                    setTimeout(setupVerificationSectionVisibility, 500);
                    return;
                }
                
                if (!verificationRadios.length) {
                    console.warn('⚠️ Radio buttons de verificação não encontrados');
                    return;
                }
                
                // Garantir que a seção esteja visível por padrão (já que "sim" está checked)
                verificationSection.style.display = 'block';
                verificationSection.style.visibility = 'visible';
                verificationSection.style.opacity = '1';
                
                // Função para atualizar visibilidade
                function updateVerificationSectionVisibility() {
                    const checkedRadio = document.querySelector('input[name="verificacao"]:checked');
                    
                    if (checkedRadio && checkedRadio.value === 'sim') {
                        // Mostrar seção de upload quando "Verificar agora" está selecionado
                        verificationSection.style.display = 'block';
                        verificationSection.style.visibility = 'visible';
                        verificationSection.style.opacity = '1';
                        console.log('✅ Seção de upload de documentos: VISÍVEL');
                    } else {
                        // Ocultar seção de upload quando "Depois" está selecionado
                        verificationSection.style.display = 'none';
                        console.log('ℹ️ Seção de upload de documentos: OCULTA');
                    }
                }
                
                // Adicionar listeners aos radio buttons
                verificationRadios.forEach(radio => {
                    radio.addEventListener('change', updateVerificationSectionVisibility);
                });
                
                // Atualizar visibilidade inicial
                updateVerificationSectionVisibility();
                
                console.log('✅ Controle de visibilidade da seção de verificação configurado');
            }, 300);
        }

        // Função para obter parâmetros da URL
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Função para obter URL base da API
        function getApiBaseUrl() {
            return 'http://localhost:5001';
        }

        // Função para carregar dados do perfil
        async function loadProfileData() {
            try {
                console.log("🔥 INICIANDO loadProfileData...");
                const profileId = getUrlParameter('id');
                const profileName = getUrlParameter('name');
                
                console.log("🔥 Carregando dados do perfil...");
                console.log("🔥 Profile ID:", profileId);
                console.log("🔥 Profile Name:", profileName);

                let anuncio = null;

                // Tentar buscar dados do Firebase primeiro
                if (typeof firebase !== 'undefined' && firebase.firestore) {
                    try {
                        console.log("🔥 Buscando dados do Firebase...");
                        
                        // Se temos um ID específico, buscar por ele
                        if (profileId) {
                            const doc = await firebase.firestore().collection('anuncios').doc(profileId).get();
                            if (doc.exists) {
                                anuncio = { id: doc.id, ...doc.data() };
                                console.log("✅ Dados encontrados no Firebase:", anuncio);
                            }
                        } else {
                            // Buscar o primeiro anúncio disponível
                            const snapshot = await firebase.firestore().collection('anuncios').limit(1).get();
                            if (!snapshot.empty) {
                                const doc = snapshot.docs[0];
                                anuncio = { id: doc.id, ...doc.data() };
                                console.log("✅ Primeiro anúncio encontrado no Firebase:", anuncio);
                            }
                        }
                    } catch (firebaseError) {
                        console.warn("⚠️ Erro ao buscar no Firebase:", firebaseError);
                    }
                }

                // Se não encontrou no Firebase, usar dados de teste
                if (!anuncio) {
                    console.log("📝 Usando dados de teste...");
                    anuncio = {
                        id: profileId || "teste-001",
                        nome: profileName || "Modelo Premium Teste",
                        idade: 25,
                        cidade: "São Paulo",
                        estado: "SP",
                        bairro: "Vila Madalena",
                        telefone_celular: "(11) 99999-9999",
                        telefone_fixo: "(11) 3333-4444",
                        email: "modelo@teste.com",
                        descricao: "Profissional experiente com 5 anos de atuação. Especializado em massagem relaxante e terapêutica. Ambiente acolhedor e seguro para seu total conforto. Atendo 24h com muito carinho e dedicação.",
                        preco_30min: 150,
                        preco_1h: 200,
                        preco_2h: 350,
                        genero: "Mulher",
                        categoria: "Massagem",
                        corpo: "Atlético",
                        estatura: "Alta",
                        altura: "1.70m",
                        peso: "65kg",
                        nacionalidade: "Brasileira",
                        faz_oral_sem: true,
                        beija: true,
                        faz_anal: false,
                        mora_so: true,
                        local: "Casa própria",
                        atende: "Local próprio",
                        horario_24h: true,
                        aceita_cartao: true,
                        aceita_dinheiro: true,
                        aceita_pix: true,
                        servicos_basicos: ["Beijos na boca", "Oral com camisinha", "Massagem erótica"],
                        servicos_especiais: ["Beijo negro", "Ejaculação facial"],
                        fetichismo_bdsm: ["Fetichismo", "Lingerie"],
                        atendimento_grupo: ["Atenção à casais"],
                        perfil_estilo: ["Ativa", "Versátil", "Experta principiantes"],
                        servicos_extras: ["Fantasias e figurinos", "Sexcam"],
                        foto_capa_url: "fotinha/fotos/avatar.jpg",
                        foto_banner_url: "fotinha/fotos/avatar (5).jpg",
                        foto_stories_url: "fotinha/fotos/avatar (7).jpg",
                        video_capa_url: null,
                        audio_url: "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT", // Áudio de teste em base64
                        galeria_1_url: "fotinha/fotos/avatar.jpg",
                        galeria_2_url: "fotinha/fotos/avatar (5).jpg",
                        galeria_3_url: "fotinha/fotos/avatar (7).jpg",
                        galeria_4_url: "fotinha/fotos/avatar.jpg",
                        galeria_5_url: "fotinha/fotos/avatar (5).jpg",
                        galeria_6_url: "fotinha/fotos/avatar (7).jpg",
                        galeria_7_url: "fotinha/fotos/avatar.jpg",
                        galeria_8_url: "fotinha/fotos/avatar (5).jpg",
                        verification_video_url: null,
                        documento_frente_url: null,
                        documento_verso_url: null,
                        selfie_documento_url: null,
                        createdAt: new Date(),
                        userId: "teste-user-001",
                        userEmail: "teste@exemplo.com"
                    };
                }

                // Processar URLs de mídia
                if (anuncio) {
                    // Criar array de galeria a partir dos campos individuais
                    const galeria = [];
                    for (let i = 1; i <= 8; i++) {
                        const url = anuncio[`galeria_${i}_url`];
                        if (url) {
                            galeria.push(url);
                        }
                    }
                    
                    anuncio.mediaFiles = {
                        galeria: galeria,
                        video: anuncio.video_capa_url,
                        audio: anuncio.audio_url
                    };

                    // Adicionar serviços baseados na categoria
                    anuncio.servicos = getServicesByCategory(anuncio.categoria);
                }

                currentAnuncio = anuncio;
                updateProfileData(anuncio);
                initSwipers();
                
            } catch (error) {
                console.error('❌ Erro ao carregar dados do perfil:', error);
            }
        }

        // Função para obter serviços baseados na categoria
        function getServicesByCategory(categoria) {
            const servicesMap = {
                "Massagem": ["Massagem Relaxante", "Massagem Terapêutica", "Drenagem Linfática", "Massagem Esportiva"],
                "Acompanhante": ["Acompanhamento Social", "Eventos Corporativos", "Jantares", "Viagens"],
                "Escort": ["Encontros Discretos", "Acompanhamento VIP", "Massagem Sensual", "Relaxamento"],
                "Outros": ["Serviços Personalizados", "Consultoria", "Atendimento Especializado"]
            };
            
            return servicesMap[categoria] || ["Serviços Personalizados"];
        }

        // Função para carregar player de áudio
        function loadAudioPlayer(anuncio) {
            console.log("🎵 loadAudioPlayer chamada com:", anuncio);
            
            const audioContainer = document.getElementById('audio-player-container');
            console.log("🎵 audioContainer encontrado:", !!audioContainer);
            
            if (!audioContainer) {
                console.error("❌ Container do player de áudio não encontrado!");
                return;
            }

            // Sempre mostrar o container do player
            audioContainer.style.display = 'block';
            
            const audioUrl = anuncio.audio_url || anuncio.mediaFiles?.audio;
            if (!audioUrl) {
                console.log("🎵 Nenhum áudio encontrado, mas container será exibido");
                // Mostrar mensagem de "sem áudio"
                const audioPlayer = audioContainer.querySelector('#audio-player');
                const startButton = audioContainer.querySelector('#start-player-button');
                const pauseButton = audioContainer.querySelector('#pause-player-button');
                const durationText = audioContainer.querySelector('#duration-text');
                
                if (startButton) startButton.style.display = 'none';
                if (pauseButton) pauseButton.style.display = 'none';
                if (durationText) durationText.textContent = 'Sem áudio';
                
                return;
            }

            console.log("🎵 Carregando player de áudio:", audioUrl);
            audioContainer.style.display = 'block';

            // Criar elementos do player
            const audioPlayer = audioContainer.querySelector('#audio-player');
            const startButton = audioContainer.querySelector('#start-player-button');
            const pauseButton = audioContainer.querySelector('#pause-player-button');
            const durationText = audioContainer.querySelector('#duration-text');
            const waveSection = audioContainer.querySelector('#wave-section');

            if (audioPlayer) {
                audioPlayer.src = audioUrl;
                audioPlayer.crossOrigin = 'anonymous'; // Necessário para análise de áudio
                
                // Gerar ondas visuais com equalizador
                generateAudioWaves(waveSection);
                
                // Event listeners
                startButton.addEventListener('click', async () => {
                    try {
                        await audioPlayer.play();
                        startButton.style.display = 'none';
                        pauseButton.style.display = 'block';
                        console.log("🎵 Áudio iniciado - equalizador ativo");
                    } catch (error) {
                        console.error("❌ Erro ao reproduzir áudio:", error);
                    }
                });

                pauseButton.addEventListener('click', () => {
                    audioPlayer.pause();
                    startButton.style.display = 'block';
                    pauseButton.style.display = 'none';
                    console.log("⏸️ Áudio pausado - equalizador inativo");
                });

                audioPlayer.addEventListener('loadedmetadata', () => {
                    const duration = Math.floor(audioPlayer.duration);
                    const minutes = Math.floor(duration / 60);
                    const seconds = duration % 60;
                    durationText.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                    console.log("🎵 Metadados do áudio carregados");
                });

                audioPlayer.addEventListener('ended', () => {
                    startButton.style.display = 'block';
                    pauseButton.style.display = 'none';
                    console.log("🔚 Áudio finalizado");
                });

                audioPlayer.addEventListener('pause', () => {
                    startButton.style.display = 'block';
                    pauseButton.style.display = 'none';
                });

                // Evento para quando o áudio está pronto
                audioPlayer.addEventListener('canplaythrough', () => {
                    console.log("🎵 Áudio pronto para reprodução com equalizador");
                });
            }
        }

        // Função para gerar ondas de áudio visuais
        function generateAudioWaves(container) {
            if (!container) return;

            // Limpar ondas existentes
            container.innerHTML = '';

            // Gerar 200 barras de onda
            for (let i = 0; i < 200; i++) {
                const bar = document.createElement('div');
                bar.className = 'w-0.5 rounded-full bg-primary-coral-6 transition-all duration-200';
                
                // Altura aleatória entre 8px e 32px
                const height = Math.random() * 24 + 8;
                bar.style.height = `${height}px`;
                
                container.appendChild(bar);
            }

            // Animar as ondas
            animateWaves(container);
        }

        // Função para animar as ondas com efeito de equalizador
        function animateWaves(container) {
            const bars = container.querySelectorAll('div');
            let animationId;
            let isPlaying = false;
            let audioContext = null;
            let analyser = null;
            let dataArray = null;
            let source = null;

            // Configurar AudioContext para análise de áudio
            function setupAudioAnalysis(audioElement) {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    analyser = audioContext.createAnalyser();
                    source = audioContext.createMediaElementSource(audioElement);
                    
                    source.connect(analyser);
                    analyser.connect(audioContext.destination);
                    
                    analyser.fftSize = 256;
                    const bufferLength = analyser.frequencyBinCount;
                    dataArray = new Uint8Array(bufferLength);
                    
                    console.log("🎵 AudioContext configurado para equalizador");
                } catch (error) {
                    console.warn("⚠️ Erro ao configurar AudioContext:", error);
                }
            }

            // Função de animação com equalizador
            function animate() {
                if (isPlaying && analyser && dataArray) {
                    // Usar dados reais do áudio
                    analyser.getByteFrequencyData(dataArray);
                    
                    bars.forEach((bar, index) => {
                        // Mapear dados de frequência para altura das barras
                        const dataIndex = Math.floor((index / bars.length) * dataArray.length);
                        const frequency = dataArray[dataIndex] || 0;
                        const normalizedFreq = frequency / 255;
                        
                        // Altura baseada na frequência + movimento suave
                        const time = Date.now() * 0.001;
                        const wave = Math.sin(time * 3 + index * 0.2) * 0.3;
                        const height = 8 + (normalizedFreq * 24) + (wave * 8);
                        
                        bar.style.height = `${Math.max(4, height)}px`;
                        bar.style.opacity = 0.2 + (normalizedFreq * 0.8);
                        
                        // Adicionar classe 'active' para barras com alta frequência
                        if (normalizedFreq > 0.7) {
                            bar.classList.add('active');
                        } else {
                            bar.classList.remove('active');
                        }
                    });
                } else {
                    // Animação padrão quando não está tocando
                    bars.forEach((bar, index) => {
                        const time = Date.now() * 0.001;
                        const wave = Math.sin(time * 2 + index * 0.1) * 0.5 + 0.5;
                        const height = 8 + wave * 16;
                        bar.style.height = `${height}px`;
                        bar.style.opacity = 0.2 + (wave * 0.3);
                    });
                }
                
                animationId = requestAnimationFrame(animate);
            }

            // Iniciar animação
            animate();

            // Configurar eventos do áudio
            const audioElement = document.getElementById('audio-player');
            if (audioElement) {
                audioElement.addEventListener('play', () => {
                    isPlaying = true;
                    container.closest('.audio-player-wrapper').classList.add('playing');
                    if (!audioContext) {
                        setupAudioAnalysis(audioElement);
                    }
                    if (audioContext && audioContext.state === 'suspended') {
                        audioContext.resume();
                    }
                });

                audioElement.addEventListener('pause', () => {
                    isPlaying = false;
                    container.closest('.audio-player-wrapper').classList.remove('playing');
                });

                audioElement.addEventListener('ended', () => {
                    isPlaying = false;
                    container.closest('.audio-player-wrapper').classList.remove('playing');
                });
            }

            // Parar animação quando necessário
            container.addEventListener('mouseleave', () => {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
            });

            // Retornar função para limpar recursos
            return () => {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                if (audioContext) {
                    audioContext.close();
                }
            };
        }

        // Função para atualizar dados do perfil
        function updateProfileData(anuncio) {
            // Atualizar título da página
            document.title = `Perfil - ${anuncio.nome || 'Anúncio'} | Mansão do Job`;
            
            // Atualizar nome
            const profileNameInput = document.getElementById('profile-name');
            if (profileNameInput) {
                profileNameInput.value = anuncio.nome || 'Nome não disponível';
                // Atualizar contador de caracteres
                const charCount = document.getElementById('profile-name-char-count');
                if (charCount) {
                    charCount.textContent = profileNameInput.value.length;
                }
            }
            
            // Atualizar data de criação
            document.getElementById('creation-date').textContent = '22/10/2025';
            
            // Atualizar localização
            const location = `${anuncio.cidade || 'Não informado'}, ${anuncio.estado || 'Não informado'}`;
            document.getElementById('location-text').textContent = location;
            
            // Atualizar preços
            updatePrices(anuncio);
            
            // Atualizar descrição
            updateDescription(anuncio);
            
            // Atualizar dados pessoais
            updatePersonalData(anuncio);
            
            // Atualizar serviços
            updateServices(anuncio);
            
            // Atualizar mapa
            updateMap(anuncio);
            
            // Atualizar contatos
            updateContacts(anuncio);
            
            // Carregar galeria
            console.log("📸 Chamando loadGallery...");
            loadGallery(anuncio);
            
            // Carregar player de áudio
            loadAudioPlayer(anuncio);
            
            // Popular campos do formulário (se existirem)
            populateFormFields(anuncio);
        }

        // Função para popular campos do formulário
        function populateFormFields(anuncio) {
            console.log("📝 Populando campos do formulário:", anuncio);
            
            // Informações básicas
            setFieldValue('nome_anuncio', anuncio.nome);
            setFieldValue('idade', anuncio.idade);
            setFieldValue('nacionalidade', anuncio.nacionalidade);
            setFieldValue('telefone_celular', anuncio.telefone_celular);
            setFieldValue('telefone_fixo', anuncio.telefone_fixo);
            setFieldValue('descricao', anuncio.descricao);
            
            // Localização
            setSelectValue('estado', anuncio.estado);
            setFieldValue('cidade', anuncio.cidade);
            setFieldValue('bairro', anuncio.bairro);
            
            // Categoria e tipo
            setSelectValue('genero', anuncio.genero);
            setSelectValue('categoria', anuncio.categoria);
            
            // Informações físicas
            setFieldValue('peso', anuncio.peso);
            setFieldValue('altura', anuncio.altura);
            
            // Preferências de atendimento
            setCheckboxValue('faz_oral_sem', anuncio.faz_oral_sem);
            setCheckboxValue('beija', anuncio.beija);
            setCheckboxValue('faz_anal', anuncio.faz_anal);
            
            // Local e atendimento
            setCheckboxValue('mora_so', anuncio.mora_so);
            
            // Horário
            setCheckboxValue('horario_24h', anuncio.horario_24h);
            
            // Formas de pagamento
            setCheckboxValue('aceita_cartao', anuncio.aceita_cartao);
            setCheckboxValue('aceita_dinheiro', anuncio.aceita_dinheiro);
            setCheckboxValue('aceita_pix', anuncio.aceita_pix);
            
            // Preços
            setFieldValue('preco_30min', anuncio.preco_30min);
            setFieldValue('preco_1h', anuncio.preco_1h);
            setFieldValue('preco_2h', anuncio.preco_2h);
            
            // Serviços
            setCheckboxGroup('servicos_basicos', anuncio.servicos_basicos);
            setCheckboxGroup('servicos_especiais', anuncio.servicos_especiais);
            setCheckboxGroup('fetichismo_bdsm', anuncio.fetichismo_bdsm);
            setCheckboxGroup('atendimento_grupo', anuncio.atendimento_grupo);
            setCheckboxGroup('perfil_estilo', anuncio.perfil_estilo);
            setCheckboxGroup('servicos_extras', anuncio.servicos_extras);
            
            console.log("✅ Campos do formulário populados!");
        }

        // Funções auxiliares para popular campos
        function setFieldValue(fieldId, value) {
            const field = document.getElementById(fieldId);
            if (field && value) {
                field.value = value;
                console.log(`📝 Campo ${fieldId} definido como: ${value}`);
            }
        }

        function setSelectValue(selectId, value) {
            const select = document.getElementById(selectId);
            if (select && value) {
                select.value = value;
                console.log(`📝 Select ${selectId} definido como: ${value}`);
            }
        }

        function setCheckboxValue(checkboxId, value) {
            const checkbox = document.getElementById(checkboxId);
            if (checkbox && value !== undefined) {
                checkbox.checked = value;
                console.log(`📝 Checkbox ${checkboxId} definido como: ${value}`);
            }
        }

        function setCheckboxGroup(groupName, values) {
            if (!values || !Array.isArray(values)) return;
            
            values.forEach(value => {
                const checkbox = document.querySelector(`input[name="${groupName}"][value="${value}"]`);
                if (checkbox) {
                    checkbox.checked = true;
                    console.log(`📝 Checkbox ${groupName}[${value}] marcado`);
                }
            });
        }

        // Função para atualizar preços
        function updatePrices(anuncio) {
            const pricesList = document.getElementById('prices-list');
            pricesList.innerHTML = '';
            
            if (anuncio.preco_1h) {
                const li = document.createElement('li');
                li.innerHTML = `<span>1 hora: R$ ${anuncio.preco_1h}</span>`;
                pricesList.appendChild(li);
            }
            
            if (anuncio.preco_2h) {
                const li = document.createElement('li');
                li.innerHTML = `<span>2 horas: R$ ${anuncio.preco_2h}</span>`;
                pricesList.appendChild(li);
            }
            
            if (anuncio.preco_pernoite) {
                const li = document.createElement('li');
                li.innerHTML = `<span>Pernoite: R$ ${anuncio.preco_pernoite}</span>`;
                pricesList.appendChild(li);
            }
            
            if (pricesList.children.length === 0) {
                const li = document.createElement('li');
                li.innerHTML = '<span>Não disponível</span>';
                pricesList.appendChild(li);
            }
        }

        // Função para atualizar descrição
        function updateDescription(anuncio) {
            const descriptionText = document.getElementById('description-text');
            const description = anuncio.descricao || anuncio.description || 'Descrição não disponível';
            
            if (description.length > 200) {
                descriptionText.innerHTML = description.substring(0, 200) + '...';
                document.querySelector('.ficha-description-read-more').style.display = 'block';
            } else {
                descriptionText.innerHTML = description;
                document.querySelector('.ficha-description-read-more').style.display = 'none';
            }
        }

        // Função para alternar descrição
        function toggleDescription() {
            const descriptionText = document.getElementById('description-text');
            const readMoreBtn = document.querySelector('.ficha-description-read-more span');
            
            if (descriptionText.innerHTML.includes('...')) {
                descriptionText.innerHTML = currentAnuncio.descricao || currentAnuncio.description || 'Descrição não disponível';
                readMoreBtn.textContent = 'Ler menos';
            } else {
                const description = currentAnuncio.descricao || currentAnuncio.description || 'Descrição não disponível';
                descriptionText.innerHTML = description.substring(0, 200) + '...';
                readMoreBtn.textContent = 'Ler mais';
            }
        }

        // Função para atualizar dados pessoais
        function updatePersonalData(anuncio) {
            const personalData = document.getElementById('personal-data');
            personalData.innerHTML = '';
            
            const dataFields = [
                { key: 'idade', label: 'Idade', icon: 'fas fa-birthday-cake', value: '25' },
                { key: 'altura', label: 'Altura', icon: 'fas fa-ruler-vertical', value: '1.70m' },
                { key: 'peso', label: 'Peso', icon: 'fas fa-weight', value: '65kg' },
                { key: 'oral_sem', label: 'Faz Oral sem', icon: 'fas fa-kiss', value: 'Sim' },
                { key: 'beija', label: 'Beija', icon: 'fas fa-heart', value: 'Sim' },
                { key: 'anal', label: 'Faz Anal', icon: 'fas fa-user', value: 'Sim' },
                { key: 'mora_so', label: 'Mora só', icon: 'fas fa-home', value: 'Sim' },
                { key: 'horario', label: 'Horário de Atendimento', icon: 'fas fa-clock', value: '24h' },
                { key: 'pagamento', label: 'Formas de Pagamento', icon: 'fas fa-credit-card', value: '<i class="fas fa-money-bill-wave" style="color: #28a745; margin-right: 8px;"></i>Dinheiro <i class="fab fa-pix" style="color: #32BCAD; margin: 0 8px;"></i>PIX <i class="fas fa-credit-card" style="color: #007bff; margin-right: 4px;"></i>Débito <i class="fas fa-credit-card" style="color: #6f42c1; margin: 0 4px 0 8px;"></i>Crédito' }
            ];
            
            dataFields.forEach(field => {
                    const row = document.createElement('div');
                    row.className = 'ficha-data-row';
                    row.innerHTML = `
                        <div class="ficha-data-row-label">
                            <i class="${field.icon}"></i>
                            <span>${field.label}</span>
                        </div>
                    <div class="ficha-data-row-value">${field.value}</div>
                    `;
                    personalData.appendChild(row);
            });
        }

        // Função para atualizar serviços
        function updateServices(anuncio) {
            const servicesSection = document.getElementById('services-section');
            const servicesList = document.getElementById('services-list');
            
            const services = [];
            
            // Adicionar serviços baseados nos dados
            if (anuncio.beija === 'sim') services.push('Beijos na boca');
            if (anuncio['oral-sem'] === 'sim') services.push('Oral sem camisinha');
            if (anuncio.anal === 'sim') services.push('Sexo anal');
            if (anuncio['mora-so'] === 'sim') services.push('Mora sozinha');
            if (anuncio.local === 'com-local') services.push('Com local');
            
            // Adicionar serviços padrão
            services.push('Whatsapp', 'PIX', 'Cartão de crédito');
            
            if (services.length > 0) {
                servicesList.innerHTML = '';
                services.forEach(service => {
                    const li = document.createElement('li');
                    li.innerHTML = `<a class="btn btn-outline-secondary">${service}</a>`;
                    servicesList.appendChild(li);
                });
                servicesSection.style.display = 'block';
            }
        }

        // Função para atualizar mapa
        function updateMap(anuncio) {
            const mapSection = document.getElementById('map-section');
            const mapLocation = document.getElementById('map-location');
            const mapLink = document.getElementById('map-link');
            const mapImage = document.getElementById('map-image');
            const directionsLink = document.getElementById('directions-link');
            const streetviewLink = document.getElementById('streetview-link');
            
            if (anuncio.cidade && anuncio.estado) {
                const location = `${anuncio.cidade}, ${anuncio.estado}`;
                mapLocation.textContent = location;
                
                // Coordenadas aproximadas para Brasília (exemplo)
                const lat = -15.8267;
                const lng = -47.9218;
                
                mapLink.href = `https://www.google.com/maps/search/?api=1&query=${lat},${lng}`;
                mapImage.src = `https://maps.googleapis.com/maps/api/staticmap?center=${lat},${lng}&zoom=13&size=400x150&markers=${lat},${lng}&key=YOUR_API_KEY`;
                mapImage.alt = `Mapa de ${location}`;
                
                directionsLink.href = `https://maps.google.com/?q=${lat},${lng}`;
                streetviewLink.href = `https://www.google.com/maps?q=${lat},${lng}&layer=c&cbll=${lat},${lng}`;
                
                mapSection.style.display = 'block';
            }
        }

        // Função para atualizar contatos
        function updateContacts(anuncio) {
            const phoneNumber = anuncio.telefone_celular || anuncio.telefone || 'Não informado';
            const phoneBtn = document.getElementById('phoneCallBtn');
            const whatsappBtn = document.getElementById('whatsAppBtn');
            const phoneDisplay = document.querySelector('.phone-celular');
            
            if (phoneDisplay) {
                phoneDisplay.textContent = phoneNumber;
            }
            
            if (phoneBtn) {
                const phoneClean = phoneNumber.replace(/\D/g, '');
                phoneBtn.href = `tel:${phoneClean}`;
            }
            
            if (whatsappBtn) {
                const phoneClean = phoneNumber.replace(/\D/g, '');
                const whatsappText = encodeURIComponent('Olá, vi seu anúncio na Mansão do Job');
                const whatsappWebUrl = `https://wa.me/55${phoneClean}?text=${whatsappText}`;
                const whatsappMobileUrl = `whatsapp://send?phone=55${phoneClean}&text=${whatsappText}`;
                
                whatsappBtn.href = whatsappWebUrl;
                whatsappBtn.setAttribute('data-mobile-href', whatsappMobileUrl);
            }
        }

        // Função para carregar galeria
        function loadGallery(anuncio) {
            console.log("📸 Iniciando loadGallery com anuncio:", anuncio);
            
            // Aguardar um pouco para garantir que os elementos estejam prontos
            setTimeout(() => {
                const mainWrapper = document.getElementById('main-swiper-wrapper');
                const thumbWrapper = document.getElementById('thumb-swiper-wrapper');
                const photosGrid = document.getElementById('photos-grid');
                const videosSection = document.getElementById('videos-section');
                const videosGrid = document.getElementById('videos-grid');
                
                console.log("📸 Elementos encontrados:", {
                    mainWrapper: !!mainWrapper,
                    thumbWrapper: !!thumbWrapper,
                    photosGrid: !!photosGrid,
                    videosSection: !!videosSection,
                    videosGrid: !!videosGrid
                });
                
                if (!photosGrid) {
                    console.error("❌ photosGrid não encontrado!");
                    return;
                }
            
                // Limpar conteúdo anterior
                if (mainWrapper) mainWrapper.innerHTML = '';
                if (thumbWrapper) thumbWrapper.innerHTML = '';
                if (photosGrid) photosGrid.innerHTML = '';
                if (videosGrid) videosGrid.innerHTML = '';
                
                const fotos = [];
                const videos = [];
            
                // Adicionar fotos da pasta teste (apenas as que existem)
                const fotosExtras = [
                    'fotinha/fotos/avatar.jpg',
                    'fotinha/fotos/avatar (5).jpg',
                    'fotinha/fotos/avatar (7).jpg',
                    'fotinha/fotos/avatar.jpg',
                    'fotinha/fotos/avatar (5).jpg',
                    'fotinha/fotos/avatar (7).jpg',
                    'fotinha/fotos/avatar.jpg',
                    'fotinha/fotos/avatar (5).jpg',
                    'fotinha/fotos/avatar (7).jpg',
                    'fotinha/fotos/avatar.jpg',
                    'fotinha/fotos/avatar (5).jpg',
                    'fotinha/fotos/avatar (7).jpg',
                    'fotinha/fotos/avatar.jpg',
                    'fotinha/fotos/avatar (5).jpg',
                    'fotinha/fotos/avatar (7).jpg'
                ];
                
                // Adicionar todas as fotos da pasta teste
                fotos.push(...fotosExtras);
                
                console.log("📸 Total de fotos encontradas:", fotos.length);
                console.log("📸 Fotos selecionadas:", fotos);
            
                // Adicionar vídeos
                if (anuncio.mediaFiles?.videos && Array.isArray(anuncio.mediaFiles.videos)) {
                    videos.push(...anuncio.mediaFiles.videos);
                }
                if (videos.length === 0) {
                    videos.push('https://storage.googleapis.com/copia-do-job.firebasestorage.app/video%20teste.mp4');
                }
            
            // Criar apenas UMA foto principal de alta qualidade
            const fotoPrincipal = anuncio.foto_capa_url || anuncio.foto_capa || anuncio.coverImage || anuncio.fotoPerfil || fotos[0] || 'fotinha/fotos/avatar.jpg';
            
            const slide = document.createElement('div');
            slide.className = 'swiper-slide';
            slide.innerHTML = `
                <img src="${fotoPrincipal}" alt="Foto Principal" style="width: 100%; height: 100%; object-fit: cover;">
            `;
            mainWrapper.appendChild(slide);
            
            // Criar thumbnail da foto principal
            const thumbSlide = document.createElement('div');
            thumbSlide.className = 'swiper-slide';
            thumbSlide.innerHTML = `<img src="${fotoPrincipal}" alt="Thumb Principal">`;
            thumbWrapper.appendChild(thumbSlide);
            
            // Criar grid de fotos (2 por linha)
            console.log("📸 Criando grid de fotos com", fotos.length, "fotos");
            fotos.forEach((foto, index) => {
                const container = document.createElement('div');
                container.className = 'ficha-media-item-container';
                container.innerHTML = `
                    <div class="ficha-media-item-counter">${index + 1}/${fotos.length}</div>
                    <img class="ficha-media-share-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE4IDE2LjA4QzE2LjI0IDE2LjA4IDE0LjY2IDE3LjA0IDEzLjUgMTguNDhDMTIuMzQgMTcuMDQgMTAuNzYgMTYuMDggOSAxNi4wOEM1LjY5IDE2LjA4IDMgMTguNzcgMyAyMi4wOEg1QzUgMTkuNzkgNi43OSAxOCA5IDE4QzExLjIxIDE4IDEzIDE5Ljc5IDEzIDIyLjA4SDE1QzE1IDE4Ljc3IDEyLjMxIDE2LjA4IDkgMTYuMDhaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="share" onclick="shareImage('${foto}')">
                    <img class="ficha-media-expand-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE1IDNIMjFWMjlIMTVWMTVIMTNWMTNIMTVWMzZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="expand" onclick="openModal('${foto}', 'image')">
                    <a onclick="openModal('${foto}', 'image')">
                        <img class="ficha-media-item" src="${foto}" alt="Foto ${index + 1}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div style="display:none; width:100%; height:380px; background:#f0f0f0; display:flex; align-items:center; justify-content:center; color:#666; font-size:14px; border: 2px dashed #ccc;">Erro ao carregar imagem</div>
                    </a>
                `;
                photosGrid.appendChild(container);
                console.log("📸 Foto adicionada ao grid:", foto, "Index:", index);
            });
            
            console.log("📸 Grid de fotos finalizado. Total de elementos no photosGrid:", photosGrid.children.length);
            
            // Garantir que o grid seja visível
            if (photosGrid) {
                photosGrid.style.display = 'grid';
                photosGrid.style.visibility = 'visible';
                photosGrid.style.opacity = '1';
                console.log("📸 CSS do photosGrid aplicado:", {
                    display: photosGrid.style.display,
                    visibility: photosGrid.style.visibility,
                    opacity: photosGrid.style.opacity
                });
            }
            
            // Criar grid de vídeos
            if (videos.length > 0) {
                videos.forEach((video, index) => {
                    const container = document.createElement('div');
                    container.className = 'ficha-media-item-container';
                    container.innerHTML = `
                        <div class="ficha-media-item-counter">${index + 1}/${videos.length}</div>
                        <img class="ficha-media-share-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE4IDE2LjA4QzE2LjI0IDE2LjA4IDE0LjY2IDE3LjA0IDEzLjUgMTguNDhDMTIuMzQgMTcuMDQgMTAuNzYgMTYuMDggOSAxNi4wOEM1LjY5IDE2LjA4IDMgMTguNzcgMyAyMi4wOEg1QzUgMTkuNzkgNi43OSAxOCA5IDE4QzExLjIxIDE4IDEzIDE5Ljc5IDEzIDIyLjA4SDE1QzE1IDE4Ljc3IDEyLjMxIDE2LjA4IDkgMTYuMDhaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="share" onclick="shareVideo('${video}')">
                        <img class="ficha-media-expand-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE1IDNIMjFWMjlIMTVWMTVIMTNWMTNIMTVWMzZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="expand" onclick="openModal('${video}', 'video')">
                        <a onclick="openModal('${video}', 'video')">
                            <video class="ficha-media-item" muted>
                                <source src="${video}" type="video/mp4">
                                Seu navegador não suporta vídeos.
                            </video>
                        </a>
                    `;
                    videosGrid.appendChild(container);
                });
                videosSection.style.display = 'block';
            }
            }, 100); // Fechar o setTimeout
        }

        // Função para inicializar Swipers
        function initSwipers() {
            // Swiper principal - desabilitado já que só temos uma foto
            mainSwiper = new Swiper('.ficha-images-slider', {
                loop: false,
                spaceBetween: 0,
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                pagination: {
                    el: '.swiper-pagination',
                    type: 'fraction',
                },
                allowTouchMove: false,
                enabled: false
            });
            
            // Swiper de thumbnails - desabilitado já que só temos uma foto
            thumbSwiper = new Swiper('.ficha-images-thumbnail-slider', {
                spaceBetween: 10,
                slidesPerView: 'auto',
                freeMode: true,
                watchSlidesProgress: true,
                enabled: false
            });
            
            // Conectar os swipers
            mainSwiper.thumbs.swiper = thumbSwiper;
        }

        // Variáveis globais para o modal
        let currentMediaIndex = 0;
        let mediaItems = [];
        let isFullscreen = false;
        let isSlideshowActive = false;
        let slideshowInterval = null;

        // Função para abrir modal
        function openModal(mediaSrc, type = 'image', index = 0) {
            const modal = document.getElementById('gallery-modal');
            const modalImage = document.getElementById('modal-image');
            const modalVideo = document.getElementById('modal-video');
            
            // Coletar todas as mídias da galeria
            collectMediaItems();
            
            // Definir índice atual
            currentMediaIndex = index;
            
            // Mostrar modal
            modal.classList.add('show');
            
            // Atualizar conteúdo
            updateModalContent();
            
            // Atualizar thumbnails
            updateThumbnails();
            
            // Atualizar contador
            updateCounter();
        }

        // Coletar todas as mídias da galeria
        function collectMediaItems() {
            mediaItems = [];
            console.log('🔥 Coletando itens de mídia...');
            
            // Buscar por containers de mídia
            const photoContainers = document.querySelectorAll('.ficha-media-item-container');
            console.log('📦 Containers encontrados:', photoContainers.length);
            
            // Também buscar por imagens diretamente na galeria
            const allImages = document.querySelectorAll('.ficha-media-item');
            console.log('🖼️ Imagens diretas encontradas:', allImages.length);
            
            // Processar containers
            photoContainers.forEach((container, index) => {
                const img = container.querySelector('img.ficha-media-item');
                const video = container.querySelector('video');
                
                if (img && img.src) {
                    console.log('✅ Imagem encontrada no container:', img.src);
                    mediaItems.push({
                        src: img.src,
                        type: 'image',
                        index: index
                    });
                } else if (video && video.querySelector('source')) {
                    const source = video.querySelector('source');
                    console.log('✅ Vídeo encontrado no container:', source.src);
                    mediaItems.push({
                        src: source.src,
                        type: 'video',
                        index: index
                    });
                }
            });
            
            // Se não encontrou nada nos containers, buscar diretamente
            if (mediaItems.length === 0) {
                allImages.forEach((img, index) => {
                    if (img.src) {
                        console.log('✅ Imagem direta encontrada:', img.src);
                        mediaItems.push({
                            src: img.src,
                            type: 'image',
                            index: index
                        });
                    }
                });
            }
            
            // Se ainda não encontrou nada, usar dados do anúncio
            if (mediaItems.length === 0 && currentAnuncio) {
                console.log('🔄 Usando dados do anúncio para criar thumbnails...');
                
                // Usar foto de capa
                if (currentAnuncio.foto_capa_url) {
                    mediaItems.push({
                        src: currentAnuncio.foto_capa_url,
                        type: 'image',
                        index: 0
                    });
                }
                
                // Usar galeria
                for (let i = 1; i <= 8; i++) {
                    const url = currentAnuncio[`galeria_${i}_url`];
                    if (url) {
                        mediaItems.push({
                            src: url,
                            type: 'image',
                            index: i
                        });
                    }
                }
            }
            
            console.log('📊 Total de itens coletados:', mediaItems.length);
        }

        // Atualizar conteúdo do modal
        function updateModalContent() {
            const modalImage = document.getElementById('modal-image');
            const modalVideo = document.getElementById('modal-video');
            const currentItem = mediaItems[currentMediaIndex];
            
            if (!currentItem) return;
            
            if (currentItem.type === 'video') {
                modalImage.style.display = 'none';
                modalVideo.style.display = 'block';
                modalVideo.src = currentItem.src;
                modalVideo.play();
            } else {
                modalImage.style.display = 'block';
                modalVideo.style.display = 'none';
                modalImage.src = currentItem.src;
            }
        }

        // Atualizar thumbnails
        function updateThumbnails() {
            const thumbnailsContainer = document.getElementById('modal-thumbnails');
            thumbnailsContainer.innerHTML = '';
            
            console.log('🔥 Atualizando thumbnails, total de itens:', mediaItems.length);
            
            if (mediaItems.length === 0) {
                console.log('⚠️ Nenhum item de mídia encontrado');
                return;
            }
            
            mediaItems.forEach((item, index) => {
                const thumbnail = document.createElement('div');
                thumbnail.className = `modal-thumbnail ${index === currentMediaIndex ? 'active' : ''}`;
                thumbnail.onclick = () => goToSlide(index);
                
                const img = document.createElement('img');
                img.src = item.src;
                img.alt = `Thumbnail ${index + 1}`;
                
                // Adicionar tratamento de erro para imagens
                img.onerror = function() {
                    console.log('❌ Erro ao carregar thumbnail:', item.src);
                    this.style.display = 'none';
                    // Criar placeholder
                    const placeholder = document.createElement('div');
                    placeholder.style.cssText = `
                        width: 100%;
                        height: 100%;
                        background: #333;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: #fff;
                        font-size: 12px;
                    `;
                    placeholder.textContent = '?';
                    thumbnail.appendChild(placeholder);
                };
                
                img.onload = function() {
                    console.log('✅ Thumbnail carregada:', item.src);
                };
                
                thumbnail.appendChild(img);
                thumbnailsContainer.appendChild(thumbnail);
            });
        }

        // Atualizar contador
        function updateCounter() {
            document.getElementById('modal-current-index').textContent = currentMediaIndex + 1;
            document.getElementById('modal-total-count').textContent = mediaItems.length;
        }

        // Navegar para slide específico
        function goToSlide(index) {
            if (index >= 0 && index < mediaItems.length) {
                currentMediaIndex = index;
                updateModalContent();
                updateThumbnails();
                updateCounter();
            }
        }

        // Próximo slide
        function nextSlide() {
            const nextIndex = (currentMediaIndex + 1) % mediaItems.length;
            goToSlide(nextIndex);
        }

        // Slide anterior
        function prevSlide() {
            const prevIndex = currentMediaIndex === 0 ? mediaItems.length - 1 : currentMediaIndex - 1;
            goToSlide(prevIndex);
        }

        // Função para fechar modal
        function closeModal() {
            const modal = document.getElementById('gallery-modal');
            const modalVideo = document.getElementById('modal-video');
            
            modal.classList.remove('show');
            
            if (modalVideo) {
                modalVideo.pause();
                modalVideo.currentTime = 0;
            }
            
            // Parar slideshow se estiver ativo
            if (slideshowInterval) {
                clearInterval(slideshowInterval);
                slideshowInterval = null;
                isSlideshowActive = false;
            }
        }

        // Função para toggle fullscreen
        function toggleFullscreen() {
            const modal = document.getElementById('gallery-modal');
            
            if (!isFullscreen) {
                if (modal.requestFullscreen) {
                    modal.requestFullscreen();
                } else if (modal.webkitRequestFullscreen) {
                    modal.webkitRequestFullscreen();
                } else if (modal.msRequestFullscreen) {
                    modal.msRequestFullscreen();
                }
                isFullscreen = true;
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                isFullscreen = false;
            }
        }

        // Função para toggle slideshow
        function toggleSlideshow() {
            if (isSlideshowActive) {
                clearInterval(slideshowInterval);
                slideshowInterval = null;
                isSlideshowActive = false;
            } else {
                slideshowInterval = setInterval(() => {
                    nextSlide();
                }, 3000); // 3 segundos
                isSlideshowActive = true;
            }
        }

        // Função para toggle thumbnails
        function toggleThumbnails() {
            const thumbnails = document.getElementById('modal-thumbnails');
            thumbnails.style.display = thumbnails.style.display === 'none' ? 'flex' : 'none';
        }

        // Função para compartilhar imagem
        function shareImage(imageSrc) {
            if (navigator.share) {
                navigator.share({
                    title: 'Veja esta foto',
                    text: 'Foto de ' + (currentAnuncio?.nome || 'anúncio'),
                    url: imageSrc
                });
            } else {
                // Fallback para copiar URL
                navigator.clipboard.writeText(imageSrc).then(() => {
                    alert('URL da imagem copiada para a área de transferência!');
                });
            }
        }

        // Função para compartilhar vídeo
        function shareVideo(videoSrc) {
            if (navigator.share) {
                navigator.share({
                    title: 'Veja este vídeo',
                    text: 'Vídeo de ' + (currentAnuncio?.nome || 'anúncio'),
                    url: videoSrc
                });
            } else {
                // Fallback para copiar URL
                navigator.clipboard.writeText(videoSrc).then(() => {
                    alert('URL do vídeo copiada para a área de transferência!');
                });
            }
        }

        // Header agora está integrado no container - não precisa de scroll behavior

        // Função para inicializar modais
        function initModals() {
            const modal = document.getElementById('gallery-modal');
            
            // Event listeners para botões
            document.getElementById('modal-close-btn').onclick = closeModal;
            document.getElementById('modal-prev-btn').onclick = prevSlide;
            document.getElementById('modal-next-btn').onclick = nextSlide;
            document.getElementById('modal-fullscreen-btn').onclick = toggleFullscreen;
            document.getElementById('modal-slideshow-btn').onclick = toggleSlideshow;
            document.getElementById('modal-thumbs-btn').onclick = toggleThumbnails;
            
            // Fechar modal clicando no backdrop
            modal.onclick = function(event) {
                if (event.target === modal || event.target.classList.contains('modal-backdrop')) {
                    closeModal();
                }
            }
            
            // Navegação com teclado
            document.addEventListener('keydown', function(event) {
                if (!modal.classList.contains('show')) return;
                
                switch(event.key) {
                    case 'Escape':
                        closeModal();
                        break;
                    case 'ArrowLeft':
                        prevSlide();
                        break;
                    case 'ArrowRight':
                        nextSlide();
                        break;
                    case 'f':
                    case 'F':
                        toggleFullscreen();
                        break;
                    case ' ':
                        event.preventDefault();
                        toggleSlideshow();
                        break;
                }
            });
        }
    </script>

    <!-- Script para efeito de fundo fixo translúcido e navegação de volta -->
    <script>
        // Carrega imagem de fundo da galeria anterior, se houver
        document.addEventListener('DOMContentLoaded', function() {
            const bgImage = sessionStorage.getItem("lastGalleryBackground");
            if (bgImage) {
                const pageBackground = document.getElementById('page-background');
                if (pageBackground) {
                    pageBackground.style.backgroundImage = `url(${bgImage})`;
                    console.log('✅ Imagem de fundo aplicada com sucesso!');
                }
            } else {
                console.log('ℹ️ Nenhuma imagem de fundo encontrada no sessionStorage');
            }

            // Funcionalidade de clique nas laterais removida conforme solicitado
        });
        
        // ============================================
        // WHATSAPP MOBILE DETECTION
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const whatsappBtn = document.getElementById('whatsAppBtn');
            if (whatsappBtn) {
                // Detectar se é mobile e usar o link apropriado
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                if (isMobile) {
                    whatsappBtn.addEventListener('click', function(e) {
                        const mobileHref = this.getAttribute('data-mobile-href');
                        if (mobileHref) {
                            window.location.href = mobileHref;
                            e.preventDefault();
                            return false;
                        }
                    });
                }
            }
        });
        
        // ============================================
        // UPLOAD DE BANNER E GALERIA
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('📸 Inicializando uploads de banner e galeria...');
            
            // Aguardar um pouco para garantir que todos os elementos estejam carregados
            setTimeout(function() {
                // Banner - Upload com zoom e ajuste (mesmo comportamento da página modelo)
                const bannerInput = document.getElementById('banner-photo');
                const bannerPreview = document.getElementById('profile-banner');
                const btnChangeBanner = document.getElementById('btn-change-banner');
                const bannerOverlay = document.getElementById('banner-upload-overlay');
                const bannerContainer = document.getElementById('banner-upload-container') || bannerPreview?.parentElement;
                
                // Debug: Verificar se os elementos foram encontrados
                console.log('🔍 Banner - Elementos encontrados:', {
                    bannerInput: !!bannerInput,
                    bannerPreview: !!bannerPreview,
                    btnChangeBanner: !!btnChangeBanner,
                    bannerOverlay: !!bannerOverlay,
                    bannerContainer: !!bannerContainer
                });
                
                // Variáveis para controle de ajuste
                let bannerScale = 1;
                let bannerPos = { x: 0, y: 0 };
                let isDraggingBanner = false;
                let bannerStart = { x: 0, y: 0 };
                let initialDistance = null;
                let isAdjustingMode = false;
                let originalImageSrc = null;
                
                // Função para aplicar transformação na imagem
                function applyBannerTransform() {
                    if (bannerPreview) {
                        // Garantir que a imagem tenha position absolute para funcionar corretamente
                        if (bannerPreview.style.position !== 'absolute') {
                            bannerPreview.style.position = 'absolute';
                        }
                        // Aplicar transformação com origem no topo esquerdo (0,0) para cálculo preciso
                        bannerPreview.style.transformOrigin = '0 0';
                        bannerPreview.style.transform = `translate(${bannerPos.x}px, ${bannerPos.y}px) scale(${bannerScale})`;
                        bannerPreview.style.cursor = isAdjustingMode ? 'grab' : 'default';
                    }
                }
                
                // Função para centralizar imagem inicialmente
                function centerBannerImage() {
                    if (!bannerPreview || !bannerContainer) return;
                    const img = bannerPreview;
                    const container = bannerContainer;
                    
                    // Função auxiliar para calcular e aplicar centralização
                    const calculateAndCenter = () => {
                        // Aguardar um frame para garantir que o layout esteja atualizado
                        requestAnimationFrame(() => {
                            // Usar getBoundingClientRect para obter dimensões reais do container
                            const containerRect = container.getBoundingClientRect();
                            const containerWidth = containerRect.width || container.offsetWidth || container.clientWidth;
                            const containerHeight = containerRect.height || container.offsetHeight || container.clientHeight;
                            
                            // Obter dimensões ORIGINAIS da imagem (naturalWidth/naturalHeight)
                            const imgNaturalWidth = img.naturalWidth || 0;
                            const imgNaturalHeight = img.naturalHeight || 0;
                            
                            // Se a imagem ainda não carregou completamente, tentar novamente
                            if (imgNaturalWidth === 0 || imgNaturalHeight === 0) {
                                setTimeout(calculateAndCenter, 100);
                                return false;
                            }
                            
                            if (containerWidth > 0 && containerHeight > 0) {
                                // Definir a imagem com suas dimensões naturais
                                if (bannerPreview) {
                                    bannerPreview.style.position = 'absolute';
                                    bannerPreview.style.left = '0';
                                    bannerPreview.style.top = '0';
                                    bannerPreview.style.right = 'auto';
                                    bannerPreview.style.bottom = 'auto';
                                    bannerPreview.style.margin = '0';
                                    bannerPreview.style.padding = '0';
                                    bannerPreview.style.objectFit = 'none';
                                    bannerPreview.style.objectPosition = '0 0';
                                    // Definir dimensões naturais da imagem
                                    bannerPreview.style.width = imgNaturalWidth + 'px';
                                    bannerPreview.style.height = imgNaturalHeight + 'px';
                                }
                                
                                // Aguardar um frame para o navegador aplicar as dimensões
                                requestAnimationFrame(() => {
                                    // Calcular escala inicial para caber no container (mantém proporção)
                                    const scaleX = containerWidth / imgNaturalWidth;
                                    const scaleY = containerHeight / imgNaturalHeight;
                                    bannerScale = Math.min(scaleX, scaleY, 1);
                                    
                                    // Calcular dimensões da imagem após escalar
                                    const scaledWidth = imgNaturalWidth * bannerScale;
                                    const scaledHeight = imgNaturalHeight * bannerScale;
                                    
                                    // Centralizar: posição = (largura_container - largura_imagem_escalada) / 2
                                    bannerPos.x = (containerWidth - scaledWidth) / 2;
                                    bannerPos.y = (containerHeight - scaledHeight) / 2;
                                    
                                    applyBannerTransform();
                                });
                                
                                return true;
                            }
                            return false;
                        });
                    };
                    
                    // Se a imagem já está carregada, centralizar imediatamente
                    if (img.complete && img.naturalWidth > 0) {
                        calculateAndCenter();
                    } else {
                        // Caso contrário, aguardar o carregamento
                        img.onload = function() {
                            setTimeout(() => {
                                if (!calculateAndCenter()) {
                                    setTimeout(calculateAndCenter, 100);
                                }
                            }, 50);
                        };
                        
                        // Se a imagem já tem src mas ainda não carregou, forçar verificação
                        if (img.src && !img.complete) {
                            setTimeout(() => {
                                if (img.complete && img.naturalWidth > 0) {
                                    calculateAndCenter();
                                }
                            }, 100);
                        }
                    }
                }
                
                if (bannerInput && bannerPreview) {
                    console.log('✅ Banner - Event listener configurado com sucesso');
                    bannerInput.addEventListener('change', function(e) {
                        console.log('📸 Banner - Arquivo selecionado:', e.target.files[0]?.name);
                        const file = e.target.files[0];
                        if (!file || !file.type.match('image.*')) {
                            console.warn('⚠️ Banner - Arquivo inválido selecionado');
                            alert('Por favor, selecione um arquivo de imagem.');
                            return;
                        }
                        
                        console.log('📸 Banner - Iniciando leitura do arquivo...');
                        const reader = new FileReader();
                        reader.onerror = function() {
                            console.error('❌ Banner - Erro ao ler arquivo');
                            alert('Erro ao ler o arquivo. Por favor, tente novamente.');
                        };
                        reader.onload = function(e) {
                            console.log('✅ Banner - Arquivo lido com sucesso');
                            const imageSrc = e.target.result;
                            originalImageSrc = imageSrc;
                            
                            // Resetar transformações
                            bannerScale = 1;
                            bannerPos = { x: 0, y: 0 };
                            isAdjustingMode = true;
                            
                            // Esconder overlay de upload
                            if (bannerOverlay) {
                                bannerOverlay.style.opacity = '0';
                                setTimeout(() => {
                                    bannerOverlay.style.display = 'none';
                                    bannerOverlay.style.pointerEvents = 'none';
                                }, 300);
                            }
                            
                            // Mostrar banner em modo ajuste
                            console.log('🖼️ Banner - Atualizando preview com imagem');
                            bannerPreview.src = imageSrc;
                            bannerPreview.style.display = 'block';
                            bannerPreview.style.opacity = '1';
                            bannerPreview.style.zIndex = '2'; // Garantir que está acima do overlay
                            bannerPreview.style.visibility = 'visible';
                            console.log('✅ Banner - Preview atualizado, opacity:', bannerPreview.style.opacity, 'display:', bannerPreview.style.display, 'zIndex:', bannerPreview.style.zIndex);
                            
                            // Resetar todos os estilos que possam interferir
                            bannerPreview.style.maxWidth = 'none';
                            bannerPreview.style.maxHeight = 'none';
                            bannerPreview.style.minWidth = '0';
                            bannerPreview.style.minHeight = '0';
                            bannerPreview.style.objectFit = 'none';
                            bannerPreview.style.objectPosition = '0 0';
                            
                            // Garantir posicionamento absoluto e resetar posição inicial
                            bannerPreview.style.position = 'absolute';
                            bannerPreview.style.left = '0';
                            bannerPreview.style.top = '0';
                            bannerPreview.style.margin = '0';
                            bannerPreview.style.padding = '0';
                            
                            // Ajustar container - manter altura original ou usar 450px se não tiver altura definida
                            if (bannerContainer) {
                                const currentHeight = bannerContainer.style.height || window.getComputedStyle(bannerContainer).height;
                                if (!currentHeight || currentHeight === 'auto' || currentHeight === '0px') {
                                    bannerContainer.style.height = '450px';
                                }
                                console.log('📐 Banner - Altura do container:', bannerContainer.style.height);
                            }
                            
                            // Mostrar botão de trocar
                            if (btnChangeBanner) {
                                btnChangeBanner.style.display = 'block';
                            }
                            
                            // Centralizar imagem após carregar
                            bannerPreview.onload = function() {
                                const delay = window.innerWidth > 768 ? 150 : 50;
                                setTimeout(() => {
                                    centerBannerImage();
                                    if (window.innerWidth > 768) {
                                        setTimeout(() => {
                                            centerBannerImage();
                                        }, 200);
                                    }
                                }, delay);
                            };
                            
                            // Se a imagem já está carregada (cache), centralizar imediatamente
                            if (bannerPreview.complete && bannerPreview.naturalWidth > 0) {
                                const delay = window.innerWidth > 768 ? 200 : 100;
                                setTimeout(() => {
                                    centerBannerImage();
                                    if (window.innerWidth > 768) {
                                        setTimeout(() => {
                                            centerBannerImage();
                                        }, 300);
                                    }
                                }, delay);
                            }
                        };
                        reader.readAsDataURL(file);
                    });
                }
                
                // Zoom com roda do mouse (desktop)
                if (bannerContainer) {
                    bannerContainer.addEventListener('wheel', function(e) {
                        if (!isAdjustingMode) return;
                        e.preventDefault();
                        bannerScale += e.deltaY * -0.001;
                        bannerScale = Math.min(Math.max(0.5, bannerScale), 3);
                        applyBannerTransform();
                    });
                }
                
                // Arrastar a imagem (desktop)
                let mouseStartY = 0;
                let isActuallyDragging = false;
                
                if (bannerPreview) {
                    bannerPreview.addEventListener('mousedown', function(e) {
                        if (!isAdjustingMode) return;
                        e.preventDefault();
                        e.stopPropagation();
                        isDraggingBanner = true;
                        isActuallyDragging = false;
                        mouseStartY = e.clientY;
                        bannerStart = { x: e.clientX - bannerPos.x, y: e.clientY - bannerPos.y };
                        bannerPreview.style.cursor = 'grabbing';
                    });
                }
                
                window.addEventListener('mouseup', function(e) {
                    if (isDraggingBanner) {
                        isDraggingBanner = false;
                        isActuallyDragging = false;
                        if (bannerPreview) {
                            bannerPreview.style.cursor = 'grab';
                        }
                        document.body.style.overflow = '';
                    }
                });
                
                window.addEventListener('mousemove', function(e) {
                    if (!isDraggingBanner || !isAdjustingMode) return;
                    
                    // Verificar se é realmente um arrasto (movimento significativo)
                    const deltaY = Math.abs(e.clientY - mouseStartY);
                    if (deltaY > 3) {
                        isActuallyDragging = true;
                        e.preventDefault();
                        e.stopPropagation();
                        document.body.style.overflow = 'hidden';
                    }
                    
                    if (isActuallyDragging) {
                        bannerPos.x = e.clientX - bannerStart.x;
                        bannerPos.y = e.clientY - bannerStart.y;
                        applyBannerTransform();
                    }
                });
                
                // Toque com dois dedos para zoom (mobile)
                if (bannerContainer) {
                    let touchStartTime = 0;
                    let touchStartY = 0;
                    
                    bannerContainer.addEventListener('touchmove', function(e) {
                        if (!isAdjustingMode) return;
                        if (e.touches.length === 2) {
                            e.preventDefault();
                            const dist = Math.hypot(
                                e.touches[0].pageX - e.touches[1].pageX,
                                e.touches[0].pageY - e.touches[1].pageY
                            );
                            if (!initialDistance) initialDistance = dist;
                            const delta = dist / initialDistance;
                            bannerScale = Math.min(Math.max(0.5, bannerScale * delta), 3);
                            initialDistance = dist;
                            applyBannerTransform();
                        } else if (e.touches.length === 1 && isDraggingBanner) {
                            const touch = e.touches[0];
                            const deltaY = Math.abs(touch.pageY - touchStartY);
                            const timeDelta = Date.now() - touchStartTime;
                            
                            if (deltaY > 5 || timeDelta > 50) {
                                e.preventDefault();
                                document.body.style.overflow = 'hidden';
                            }
                            
                            bannerPos.x = touch.pageX - bannerStart.x;
                            bannerPos.y = touch.pageY - bannerStart.y;
                            applyBannerTransform();
                        }
                    }, { passive: false });
                    
                    bannerContainer.addEventListener('touchstart', function(e) {
                        if (!isAdjustingMode) return;
                        if (e.touches.length === 1) {
                            touchStartTime = Date.now();
                            touchStartY = e.touches[0].pageY;
                            isDraggingBanner = true;
                            bannerStart = { x: e.touches[0].pageX - bannerPos.x, y: e.touches[0].pageY - bannerPos.y };
                        }
                    }, { passive: true });
                    
                    bannerContainer.addEventListener('touchend', function(e) {
                        isDraggingBanner = false;
                        initialDistance = null;
                        document.body.style.overflow = '';
                        touchStartTime = 0;
                    });
                }
                
                if (btnChangeBanner && bannerInput) {
                    btnChangeBanner.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        bannerInput.click();
                    });
                }
                
                // Setup Gallery Uploads (Fotos 1-9)
                for (let i = 1; i <= 9; i++) {
                    const galeriaInput = document.getElementById(`galeria-photo-${i}`);
                    const galeriaPreview = document.getElementById(`galeria-preview-${i}`);
                    const galeriaOverlay = document.getElementById(`galeria-overlay-${i}`);
                    const btnChangeGaleria = document.getElementById(`btn-change-galeria-${i}`);
                    const uploadBox = document.getElementById(`galeria-upload-box-${i}`);
                    
                    console.log(`🔍 Galeria ${i} - Input:`, !!galeriaInput, 'Preview:', !!galeriaPreview, 'Overlay:', !!galeriaOverlay);
                    
                    if (galeriaInput) {
                        console.log(`✅ Galeria Input ${i} encontrado, configurando...`);
                        
                        // Garantir que o input está clicável e visível
                        galeriaInput.style.pointerEvents = 'auto';
                        galeriaInput.style.cursor = 'pointer';
                        galeriaInput.style.zIndex = '10';
                        galeriaInput.style.position = 'absolute';
                        galeriaInput.style.top = '0';
                        galeriaInput.style.left = '0';
                        galeriaInput.style.width = '100%';
                        galeriaInput.style.height = '100%';
                        galeriaInput.style.opacity = '0';
                        
                        // Teste direto de clique
                        galeriaInput.addEventListener('click', function(e) {
                            console.log(`🖱️ Galeria ${i} input clicado diretamente!`);
                            e.stopPropagation();
                        });
                        
                        // Verificar se é vídeo (box 8) ou imagem
                        const isVideo = i === 8;
                        const acceptType = isVideo ? 'video/*' : 'image/*';
                        
                        if (galeriaInput.accept !== acceptType) {
                            galeriaInput.setAttribute('accept', acceptType);
                        }
                        
                        galeriaInput.addEventListener('change', function(e) {
                            console.log(`📸 Galeria ${i} file selecionado:`, e.target.files[0]?.name);
                            const file = e.target.files[0];
                            
                            if (!file) {
                                console.warn(`⚠️ Nenhum arquivo selecionado para galeria ${i}`);
                                return;
                            }
                            
                            if (isVideo) {
                                if (!file.type.match('video.*')) {
                                    alert('Por favor, selecione um arquivo de vídeo.');
                                    return;
                                }
                                
                                // Verificar tamanho do arquivo (máx 100MB)
                                if (file.size > 100 * 1024 * 1024) {
                                    alert('O vídeo deve ter no máximo 100MB.');
                                    return;
                                }
                                
                                const reader = new FileReader();
                                reader.onerror = function() {
                                    console.error(`❌ Galeria ${i} (vídeo) - Erro ao ler arquivo`);
                                    alert('Erro ao ler o arquivo. Por favor, tente novamente.');
                                };
                                reader.onload = function(e) {
                                    console.log(`✅ Galeria ${i} (vídeo) - Arquivo lido com sucesso`);
                                    const url = e.target.result;
                                    
                                    // Criar elemento video se não existir
                                    const videoPreview = document.getElementById(`galeria-video-preview-${i}`);
                                    if (videoPreview) {
                                        console.log(`🎥 Galeria ${i} - Criando preview do vídeo`);
                                        let video = videoPreview.querySelector('video');
                                        if (!video) {
                                            video = document.createElement('video');
                                            video.style.width = '100%';
                                            video.style.height = '100%';
                                            video.style.objectFit = 'cover';
                                            video.controls = true;
                                            videoPreview.appendChild(video);
                                            console.log(`🎥 Galeria ${i} - Elemento video criado`);
                                        }
                                        
                                        video.src = url;
                                        videoPreview.style.display = 'block';
                                        if (galeriaPreview) galeriaPreview.style.display = 'none';
                                        console.log(`✅ Galeria ${i} (vídeo) - Preview exibido`);
                                    } else {
                                        console.warn(`⚠️ Galeria ${i} (vídeo) - Elemento videoPreview não encontrado`);
                                    }
                                    
                                    // Esconde overlay e mostra botão de trocar
                                    if (galeriaOverlay) {
                                        galeriaOverlay.style.opacity = '0';
                                        setTimeout(() => {
                                            galeriaOverlay.style.display = 'none';
                                        }, 300);
                                    }
                                    if (btnChangeGaleria) {
                                        btnChangeGaleria.style.display = 'block';
                                    }
                                };
                                reader.readAsDataURL(file);
                            } else {
                                if (!file.type.match('image.*')) {
                                    alert('Por favor, selecione um arquivo de imagem.');
                                    return;
                                }
                                
                                const reader = new FileReader();
                                reader.onerror = function() {
                                    console.error(`❌ Galeria ${i} - Erro ao ler arquivo`);
                                    alert('Erro ao ler o arquivo. Por favor, tente novamente.');
                                };
                                reader.onload = function(e) {
                                    console.log(`✅ Galeria ${i} - Arquivo lido com sucesso`);
                                    const url = e.target.result;
                                    
                                    // Update preview usando innerHTML (mesmo método da página funcional)
                                    if (galeriaPreview) {
                                        console.log(`🖼️ Galeria ${i} - Atualizando preview da imagem`);
                                        const uploadBox = document.getElementById(`galeria-upload-box-${i}`);
                                        const uploadIcon = uploadBox?.querySelector('.upload-icon');
                                        const uploadText = uploadBox?.querySelector('.upload-text');
                                        
                                        // Usar innerHTML para garantir que o preview seja atualizado corretamente
                                        galeriaPreview.innerHTML = `<img src="${url}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
                                        galeriaPreview.style.display = 'block';
                                        galeriaPreview.style.zIndex = '1';
                                        
                                        // Esconder overlay e elementos de upload quando há preview
                                        if (galeriaOverlay) {
                                            galeriaOverlay.style.display = 'none';
                                        }
                                        if (uploadIcon) {
                                            uploadIcon.style.display = 'none';
                                        }
                                        if (uploadText) {
                                            uploadText.style.display = 'none';
                                        }
                                        
                                        console.log(`✅ Galeria ${i} - Preview exibido, display:`, galeriaPreview.style.display);
                                    } else {
                                        console.warn(`⚠️ Galeria ${i} - Elemento preview não encontrado`);
                                    }
                                    
                                    // Mostrar botão de trocar
                                    if (btnChangeGaleria) {
                                        btnChangeGaleria.style.display = 'inline-block';
                                    }
                                };
                                reader.readAsDataURL(file);
                            }
                        });
                        
                        // Adicionar listener de clique no overlay também
                        if (galeriaOverlay) {
                            galeriaOverlay.style.cursor = 'pointer';
                            galeriaOverlay.addEventListener('click', function(e) {
                                e.preventDefault();
                                e.stopPropagation();
                                console.log(`🖱️ Galeria ${i} overlay clicado, disparando click no input`);
                                if (galeriaInput) {
                                    galeriaInput.click();
                                }
                            });
                        }
                        
                        // Também adicionar no box inteiro para garantir
                        if (uploadBox) {
                            uploadBox.style.cursor = 'pointer';
                            uploadBox.addEventListener('click', function(e) {
                                // Só disparar se não for clique em botão ou preview
                                if (!e.target.closest('.btn-change-photo') && 
                                    !e.target.closest('.photo-preview') && 
                                    !e.target.closest('.video-preview') &&
                                    !e.target.closest('input[type="file"]')) {
                                    e.preventDefault();
                                    e.stopPropagation();
                                    console.log(`🖱️ Galeria ${i} box clicado, disparando click no input`);
                                    if (galeriaInput) {
                                        galeriaInput.click();
                                    }
                                }
                            });
                        }
                    } else {
                        console.warn(`⚠️ Galeria Input ${i} não encontrado!`);
                    }
                    
                    if (btnChangeGaleria && galeriaInput) {
                        btnChangeGaleria.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            galeriaInput.click();
                        });
                    }
                }
            }, 100); // Aguardar 100ms para garantir que o DOM está totalmente carregado
            
            // Setup Documentos de Verificação
            setTimeout(function() {
                console.log('📄 Inicializando uploads de documentos de verificação...');
                
                // Documento Frente
                const docFrenteInput = document.getElementById('documento-frente');
                const docFrentePreview = document.getElementById('documento-frente-preview');
                const docFrenteOverlay = document.getElementById('documento-frente-overlay');
                const btnChangeDocFrente = document.getElementById('btn-change-documento-frente');
                const docFrenteBox = document.getElementById('documento-frente-upload-box');
                
                if (docFrenteInput) {
                    docFrenteInput.style.pointerEvents = 'auto';
                    docFrenteInput.style.cursor = 'pointer';
                    
                    docFrenteInput.addEventListener('change', function(e) {
                        console.log('📄 Documento frente selecionado:', e.target.files[0]?.name);
                        const file = e.target.files[0];
                        if (!file || !file.type.match('image.*')) {
                            alert('Por favor, selecione um arquivo de imagem.');
                            return;
                        }
                        
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const url = e.target.result;
                            if (docFrentePreview) {
                                let img = docFrentePreview.querySelector('img');
                                if (!img) {
                                    img = document.createElement('img');
                                    img.style.width = '100%';
                                    img.style.height = '100%';
                                    img.style.objectFit = 'cover';
                                    docFrentePreview.appendChild(img);
                                }
                                img.src = url;
                                docFrentePreview.style.display = 'block';
                            }
                            if (docFrenteOverlay) {
                                docFrenteOverlay.style.opacity = '0';
                                setTimeout(() => {
                                    docFrenteOverlay.style.display = 'none';
                                }, 300);
                            }
                            if (btnChangeDocFrente) {
                                btnChangeDocFrente.style.display = 'block';
                            }
                        };
                        reader.readAsDataURL(file);
                    });
                    
                    if (docFrenteOverlay && docFrenteBox) {
                        docFrenteOverlay.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            docFrenteInput.click();
                        });
                        docFrenteBox.addEventListener('click', function(e) {
                            if (!e.target.closest('.btn-change-photo') && !e.target.closest('.photo-preview')) {
                                e.preventDefault();
                                e.stopPropagation();
                                docFrenteInput.click();
                            }
                        });
                    }
                }
                
                if (btnChangeDocFrente && docFrenteInput) {
                    btnChangeDocFrente.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        docFrenteInput.click();
                    });
                }
                
                // Documento Verso
                const docVersoInput = document.getElementById('documento-verso');
                const docVersoPreview = document.getElementById('documento-verso-preview');
                const docVersoOverlay = document.getElementById('documento-verso-overlay');
                const btnChangeDocVerso = document.getElementById('btn-change-documento-verso');
                const docVersoBox = document.getElementById('documento-verso-upload-box');
                
                if (docVersoInput) {
                    docVersoInput.style.pointerEvents = 'auto';
                    docVersoInput.style.cursor = 'pointer';
                    
                    docVersoInput.addEventListener('change', function(e) {
                        console.log('📄 Documento verso selecionado:', e.target.files[0]?.name);
                        const file = e.target.files[0];
                        if (!file || !file.type.match('image.*')) {
                            alert('Por favor, selecione um arquivo de imagem.');
                            return;
                        }
                        
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const url = e.target.result;
                            if (docVersoPreview) {
                                let img = docVersoPreview.querySelector('img');
                                if (!img) {
                                    img = document.createElement('img');
                                    img.style.width = '100%';
                                    img.style.height = '100%';
                                    img.style.objectFit = 'cover';
                                    docVersoPreview.appendChild(img);
                                }
                                img.src = url;
                                docVersoPreview.style.display = 'block';
                            }
                            if (docVersoOverlay) {
                                docVersoOverlay.style.opacity = '0';
                                setTimeout(() => {
                                    docVersoOverlay.style.display = 'none';
                                }, 300);
                            }
                            if (btnChangeDocVerso) {
                                btnChangeDocVerso.style.display = 'block';
                            }
                        };
                        reader.readAsDataURL(file);
                    });
                    
                    if (docVersoOverlay && docVersoBox) {
                        docVersoOverlay.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            docVersoInput.click();
                        });
                        docVersoBox.addEventListener('click', function(e) {
                            if (!e.target.closest('.btn-change-photo') && !e.target.closest('.photo-preview')) {
                                e.preventDefault();
                                e.stopPropagation();
                                docVersoInput.click();
                            }
                        });
                    }
                }
                
                if (btnChangeDocVerso && docVersoInput) {
                    btnChangeDocVerso.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        docVersoInput.click();
                    });
                }
                
                // Selfie com Documento
                const selfieDocInput = document.getElementById('selfie-documento');
                const selfieDocPreview = document.getElementById('selfie-documento-preview');
                const selfieDocOverlay = document.getElementById('selfie-documento-overlay');
                const btnChangeSelfieDoc = document.getElementById('btn-change-selfie-documento');
                const selfieDocBox = document.getElementById('selfie-documento-upload-box');
                
                if (selfieDocInput) {
                    selfieDocInput.style.pointerEvents = 'auto';
                    selfieDocInput.style.cursor = 'pointer';
                    
                    selfieDocInput.addEventListener('change', function(e) {
                        console.log('🤳 Selfie documento selecionado:', e.target.files[0]?.name);
                        const file = e.target.files[0];
                        if (!file || !file.type.match('image.*')) {
                            alert('Por favor, selecione um arquivo de imagem.');
                            return;
                        }
                        
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const url = e.target.result;
                            if (selfieDocPreview) {
                                let img = selfieDocPreview.querySelector('img');
                                if (!img) {
                                    img = document.createElement('img');
                                    img.style.width = '100%';
                                    img.style.height = '100%';
                                    img.style.objectFit = 'cover';
                                    selfieDocPreview.appendChild(img);
                                }
                                img.src = url;
                                selfieDocPreview.style.display = 'block';
                            }
                            if (selfieDocOverlay) {
                                selfieDocOverlay.style.opacity = '0';
                                setTimeout(() => {
                                    selfieDocOverlay.style.display = 'none';
                                }, 300);
                            }
                            if (btnChangeSelfieDoc) {
                                btnChangeSelfieDoc.style.display = 'block';
                            }
                        };
                        reader.readAsDataURL(file);
                    });
                    
                    if (selfieDocOverlay && selfieDocBox) {
                        selfieDocOverlay.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            selfieDocInput.click();
                        });
                        selfieDocBox.addEventListener('click', function(e) {
                            if (!e.target.closest('.btn-change-photo') && !e.target.closest('.photo-preview')) {
                                e.preventDefault();
                                e.stopPropagation();
                                selfieDocInput.click();
                            }
                        });
                    }
                }
                
                if (btnChangeSelfieDoc && selfieDocInput) {
                    btnChangeSelfieDoc.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        selfieDocInput.click();
                    });
                }
                
                // Vídeo de Verificação
                const verifVideoInput = document.getElementById('verification-video');
                const verifVideoPreview = document.getElementById('verification-video-preview');
                const verifVideoOverlay = document.getElementById('verification-video-overlay');
                const btnChangeVerifVideo = document.getElementById('btn-change-verification-video');
                const verifVideoBox = document.getElementById('verification-video-upload-box');
                
                if (verifVideoInput) {
                    verifVideoInput.style.pointerEvents = 'auto';
                    verifVideoInput.style.cursor = 'pointer';
                    
                    verifVideoInput.addEventListener('change', function(e) {
                        console.log('🎥 Vídeo verificação selecionado:', e.target.files[0]?.name);
                        const file = e.target.files[0];
                        if (!file || !file.type.match('video.*')) {
                            alert('Por favor, selecione um arquivo de vídeo.');
                            return;
                        }
                        
                        if (file.size > 100 * 1024 * 1024) {
                            alert('O vídeo deve ter no máximo 100MB.');
                            return;
                        }
                        
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const url = e.target.result;
                            if (verifVideoPreview) {
                                let video = verifVideoPreview.querySelector('video');
                                if (!video) {
                                    video = document.createElement('video');
                                    video.style.width = '100%';
                                    video.style.height = '100%';
                                    video.style.objectFit = 'cover';
                                    video.controls = true;
                                    verifVideoPreview.appendChild(video);
                                }
                                video.src = url;
                                verifVideoPreview.style.display = 'block';
                            }
                            if (verifVideoOverlay) {
                                verifVideoOverlay.style.opacity = '0';
                                setTimeout(() => {
                                    verifVideoOverlay.style.display = 'none';
                                }, 300);
                            }
                            if (btnChangeVerifVideo) {
                                btnChangeVerifVideo.style.display = 'block';
                            }
                        };
                        reader.readAsDataURL(file);
                    });
                    
                    if (verifVideoOverlay && verifVideoBox) {
                        verifVideoOverlay.addEventListener('click', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            verifVideoInput.click();
                        });
                        verifVideoBox.addEventListener('click', function(e) {
                            if (!e.target.closest('.btn-change-photo') && !e.target.closest('.video-preview')) {
                                e.preventDefault();
                                e.stopPropagation();
                                verifVideoInput.click();
                            }
                        });
                    }
                }
                
                if (btnChangeVerifVideo && verifVideoInput) {
                    btnChangeVerifVideo.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        verifVideoInput.click();
                    });
                }
                
                console.log('✅ Uploads de documentos de verificação inicializados!');
            }, 200);
            
            console.log('✅ Uploads de banner e galeria inicializados!');
        });
        
        // ============================================
        // CONTROLE DE CACHÊS EDITÁVEIS
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const cacheCombinar = document.getElementById('cache-combinar');
            const cacheEditar = document.getElementById('cache-editar');
            const cacheFields = document.getElementById('cache-fields');
            const validationMessage = document.getElementById('cache-validation-message');
            
            // Função para obter todos os campos de cachê
            function getCacheInputs() {
                const minutosInputs = document.querySelectorAll('.cache-minutos-input');
                const precoInputs = document.querySelectorAll('.cache-preco-input');
                const allInputs = [...minutosInputs, ...precoInputs];
                console.log('🔍 Campos encontrados:', allInputs.length, 'minutos:', minutosInputs.length, 'preços:', precoInputs.length);
                return allInputs;
            }
            
            // Função para habilitar/desabilitar campos
            function toggleCacheFields() {
                if (!cacheEditar || !cacheCombinar) {
                    console.log('⚠️ Elementos de cache não encontrados');
                    return;
                }
                
                const cacheInputs = getCacheInputs();
                
                if (cacheEditar.checked) {
                    if (cacheFields) cacheFields.style.display = 'block';
                    
                    cacheInputs.forEach((input, index) => {
                        // Remover o atributo disabled completamente
                        input.removeAttribute('disabled');
                        input.disabled = false;
                        input.style.backgroundColor = '#fff';
                        input.style.cursor = 'text';
                        input.readOnly = false;
                        input.style.opacity = '1';
                        
                        console.log(`✅ Campo ${index + 1} habilitado:`, input.id, 'disabled:', input.disabled);
                    });
                    
                    console.log('✅ Todos os campos de cachê habilitados');
                } else {
                    if (cacheFields) cacheFields.style.display = 'none';
                    
                    cacheInputs.forEach(input => {
                        input.disabled = true;
                        input.setAttribute('disabled', 'disabled');
                        input.style.backgroundColor = '#f5f5f5';
                        input.style.cursor = 'not-allowed';
                        input.readOnly = true;
                        // Limpar apenas os preços, manter os minutos
                        if (input.classList.contains('cache-preco-input')) {
                            input.value = '';
                        }
                    });
                    
                    if (validationMessage) {
                        validationMessage.style.display = 'none';
                    }
                }
            }
            
            // Event listeners para os radio buttons
            if (cacheCombinar && cacheEditar) {
                cacheCombinar.addEventListener('change', function() {
                    console.log('🔄 A combinar selecionado');
                    toggleCacheFields();
                });
                cacheEditar.addEventListener('change', function() {
                    console.log('🔄 Editar valores selecionado');
                    toggleCacheFields();
                });
                
                // Inicializar estado após um pequeno delay para garantir que o DOM está pronto
                setTimeout(() => {
                    toggleCacheFields();
                }, 100);
            }
            
            // Validação: verificar se pelo menos um campo está preenchido
            function validateCacheFields() {
                if (!cacheEditar || !cacheEditar.checked) {
                    return true; // Se "A combinar" está selecionado, não precisa validar
                }
                
                let hasFilledField = false;
                for (let i = 1; i <= 5; i++) {
                    const minutosInput = document.getElementById(`cache_minutos_${i}`);
                    const precoInput = document.getElementById(`cache_preco_${i}`);
                    
                    if (minutosInput && precoInput && minutosInput.value && precoInput.value) {
                        hasFilledField = true;
                        break;
                    }
                }
                
                if (!hasFilledField && validationMessage) {
                    validationMessage.style.display = 'block';
                    return false;
                } else if (validationMessage) {
                    validationMessage.style.display = 'none';
                }
                
                return true;
            }
            
            // Adicionar validação aos campos
            function setupCacheInputListeners() {
                const cacheInputs = getCacheInputs();
                cacheInputs.forEach(input => {
                    // Se for campo de preço, adicionar validação especial para decimais
                    if (input.classList.contains('cache-preco-input')) {
                        // Permitir ponto e vírgula no keypress
                        input.addEventListener('keypress', function(e) {
                            const char = String.fromCharCode(e.which);
                            const currentValue = e.target.value;
                            
                            // Permitir números, ponto e vírgula
                            if (!/[0-9.,]/.test(char) && !e.ctrlKey && !e.metaKey && e.key !== 'Backspace' && e.key !== 'Delete' && e.key !== 'ArrowLeft' && e.key !== 'ArrowRight' && e.key !== 'Tab') {
                                e.preventDefault();
                                return false;
                            }
                            
                            // Se já tem ponto ou vírgula, não permitir outro
                            if ((char === '.' || char === ',') && (currentValue.includes('.') || currentValue.includes(','))) {
                                e.preventDefault();
                                return false;
                            }
                        });
                        
                        input.addEventListener('input', function(e) {
                            let value = e.target.value;
                            
                            // Permitir apenas números, ponto e vírgula
                            value = value.replace(/[^0-9.,]/g, '');
                            
                            // Converter vírgula para ponto
                            value = value.replace(',', '.');
                            
                            // Garantir apenas um ponto decimal
                            const parts = value.split('.');
                            if (parts.length > 2) {
                                value = parts[0] + '.' + parts.slice(1).join('');
                            }
                            
                            // Limitar a 2 casas decimais
                            if (parts.length === 2 && parts[1].length > 2) {
                                value = parts[0] + '.' + parts[1].substring(0, 2);
                            }
                            
                            // Validar range de 1 a 1000 apenas se tiver valor completo
                            if (value && value !== '.') {
                                const numValue = parseFloat(value);
                                if (!isNaN(numValue)) {
                                    if (numValue < 1 && value.length > 0) {
                                        // Não corrigir enquanto está digitando, apenas avisar
                                        if (e.target.value !== value) {
                                            e.target.value = value;
                                        }
                                    } else if (numValue > 1000) {
                                        value = '1000';
                                    }
                                }
                            }
                            
                            e.target.value = value;
                            
                            if (validationMessage) {
                                validationMessage.style.display = 'none';
                            }
                        });
                        
                        input.addEventListener('blur', function(e) {
                            const value = parseFloat(e.target.value);
                            if (e.target.value && e.target.value.trim() !== '' && !isNaN(value)) {
                                if (value < 1) {
                                    e.target.value = '1.00';
                                    e.target.setCustomValidity('O valor mínimo é R$ 1,00');
                                } else if (value > 1000) {
                                    e.target.value = '1000.00';
                                    e.target.setCustomValidity('O valor máximo é R$ 1000,00');
                                } else {
                                    // Formatar com 2 casas decimais
                                    e.target.value = value.toFixed(2);
                                    e.target.setCustomValidity('');
                                }
                            } else if (e.target.value && e.target.value.trim() !== '') {
                                e.target.setCustomValidity('Digite um valor válido entre R$ 1,00 e R$ 1000,00');
                            } else {
                                e.target.setCustomValidity('');
                            }
                            validateCacheFields();
                        });
                    } else if (input.classList.contains('cache-minutos-input')) {
                        // Validação para campos de minutos
                        input.addEventListener('input', function(e) {
                            let value = e.target.value;
                            
                            // Permitir apenas números
                            value = value.replace(/[^0-9]/g, '');
                            
                            // Validar range de 1 a 60
                            const numValue = parseInt(value);
                            if (value && !isNaN(numValue)) {
                                if (numValue < 1) {
                                    value = '1';
                                } else if (numValue > 60) {
                                    value = '60';
                                } else {
                                    // Verificar se o valor já existe em outro campo
                                    const currentId = e.target.id;
                                    const allMinutosInputs = document.querySelectorAll('.cache-minutos-input');
                                    let isDuplicate = false;
                                    
                                    allMinutosInputs.forEach(otherInput => {
                                        if (otherInput.id !== currentId && otherInput.value === value && value !== '') {
                                            isDuplicate = true;
                                        }
                                    });
                                    
                                    if (isDuplicate) {
                                        e.target.setCustomValidity('Este valor de minutos já foi usado em outro campo');
                                        e.target.style.borderColor = 'var(--primary-color)';
                                        e.target.style.backgroundColor = '#fff5f5';
                                    } else {
                                        e.target.setCustomValidity('');
                                        e.target.style.borderColor = '';
                                        e.target.style.backgroundColor = '';
                                    }
                                }
                            }
                            
                            e.target.value = value;
                            
                            if (validationMessage) {
                                validationMessage.style.display = 'none';
                            }
                        });
                        
                        input.addEventListener('blur', function(e) {
                            const value = parseInt(e.target.value);
                            if (e.target.value && !isNaN(value)) {
                                if (value < 1) {
                                    e.target.value = '1';
                                    e.target.setCustomValidity('O valor mínimo é 1 minuto');
                                } else if (value > 60) {
                                    e.target.value = '60';
                                    e.target.setCustomValidity('O valor máximo é 60 minutos');
                                } else {
                                    // Verificar duplicatas novamente
                                    const currentId = e.target.id;
                                    const allMinutosInputs = document.querySelectorAll('.cache-minutos-input');
                                    let isDuplicate = false;
                                    
                                    allMinutosInputs.forEach(otherInput => {
                                        if (otherInput.id !== currentId && otherInput.value === e.target.value && e.target.value !== '') {
                                            isDuplicate = true;
                                        }
                                    });
                                    
                                    if (isDuplicate) {
                                        e.target.setCustomValidity('Este valor de minutos já foi usado em outro campo. Por favor, escolha um valor diferente.');
                                        e.target.style.borderColor = 'var(--primary-color)';
                                        e.target.style.backgroundColor = '#fff5f5';
                                        // Não usar alert() para não travar a tela - a mensagem aparece via setCustomValidity
                                    } else {
                                        e.target.setCustomValidity('');
                                        e.target.style.borderColor = '';
                                        e.target.style.backgroundColor = '';
                                    }
                                }
                            }
                            validateCacheFields();
                        });
                        
                        // Limpar mensagem de erro quando o usuário clicar no campo para corrigir
                        input.addEventListener('focus', function(e) {
                            // Limpar a mensagem de validação customizada quando o usuário focar no campo
                            e.target.setCustomValidity('');
                            e.target.style.borderColor = '';
                            e.target.style.backgroundColor = '';
                        });
                    } else {
                        // Para outros campos, manter comportamento padrão
                        input.addEventListener('blur', validateCacheFields);
                        input.addEventListener('input', function() {
                            if (validationMessage) {
                                validationMessage.style.display = 'none';
                            }
                        });
                    }
                });
            }
            
            // Configurar listeners após um pequeno delay
            setTimeout(() => {
                setupCacheInputListeners();
            }, 200);
            
            // Validação no submit do formulário
            const cadastroForm = document.getElementById('cadastroForm');
            if (cadastroForm) {
                cadastroForm.addEventListener('submit', function(e) {
                    if (!validateCacheFields()) {
                        e.preventDefault();
                        e.stopPropagation();
                        alert('Por favor, preencha pelo menos um campo de cachê ou selecione "A combinar".');
                        return false;
                    }
                });
            }
        });
        
        // ============================================
        // VALIDAÇÃO DE SEGURANÇA DA DESCRIÇÃO
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const descriptionTextarea = document.getElementById('description-text');
            const charCount = document.getElementById('description-char-count');
            const charCounter = charCount ? charCount.parentElement : null;
            const securityWarning = document.getElementById('description-security-warning');
            
            if (!descriptionTextarea) return;
            
            // Padrões perigosos para bloquear
            const dangerousPatterns = {
                // SQL Injection
                sql: [
                    /(\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|EXECUTE|UNION|SCRIPT)\b)/gi,
                    /('|"|;|--|\/\*|\*\/)/g,
                    /(\bOR\s+\d+\s*=\s*\d+)/gi,
                    /(\bAND\s+\d+\s*=\s*\d+)/gi
                ],
                // JavaScript/HTML Injection
                script: [
                    /<script[\s\S]*?>[\s\S]*?<\/script>/gi,
                    /<iframe[\s\S]*?>[\s\S]*?<\/iframe>/gi,
                    /javascript:/gi,
                    /on\w+\s*=/gi,
                    /<img[\s\S]*?>/gi,
                    /<audio[\s\S]*?>/gi,
                    /<video[\s\S]*?>/gi,
                    /<embed[\s\S]*?>/gi,
                    /<object[\s\S]*?>/gi,
                    /<link[\s\S]*?>/gi,
                    /<style[\s\S]*?>/gi
                ],
                // Comandos do sistema
                commands: [
                    /(\b(cmd|command|exec|system|eval|shell)\b)/gi,
                    /(\$\{|\`)/g
                ],
                // URLs suspeitas
                urls: [
                    /https?:\/\/[^\s]+/gi,
                    /www\.[^\s]+/gi
                ]
            };
            
            // Função para sanitizar texto
            function sanitizeText(text) {
                let sanitized = text;
                
                // Remover tags HTML
                sanitized = sanitized.replace(/<[^>]*>/g, '');
                
                // Remover padrões perigosos
                Object.values(dangerousPatterns).forEach(patternGroup => {
                    patternGroup.forEach(pattern => {
                        sanitized = sanitized.replace(pattern, '');
                    });
                });
                
                return sanitized;
            }
            
            // Função para verificar números consecutivos (mais de 9)
            function hasLongNumberSequence(text) {
                // Encontrar sequências de números com mais de 9 dígitos
                const numberPattern = /\d{10,}/g;
                return numberPattern.test(text);
            }
            
            // Função para verificar padrões perigosos
            function checkDangerousPatterns(text) {
                const issues = [];
                
                // Verificar SQL
                dangerousPatterns.sql.forEach(pattern => {
                    if (pattern.test(text)) {
                        issues.push('Códigos SQL não são permitidos');
                    }
                });
                
                // Verificar scripts
                dangerousPatterns.script.forEach(pattern => {
                    if (pattern.test(text)) {
                        issues.push('Códigos HTML/JavaScript não são permitidos');
                    }
                });
                
                // Verificar comandos
                dangerousPatterns.commands.forEach(pattern => {
                    if (pattern.test(text)) {
                        issues.push('Comandos do sistema não são permitidos');
                    }
                });
                
                // Verificar URLs
                dangerousPatterns.urls.forEach(pattern => {
                    if (pattern.test(text)) {
                        issues.push('Links não são permitidos');
                    }
                });
                
                // Verificar sequências longas de números
                if (hasLongNumberSequence(text)) {
                    issues.push('Sequências com mais de 9 números não são permitidas');
                }
                
                return issues;
            }
            
            // Atualizar contador de caracteres
            function updateCharCount() {
                const length = descriptionTextarea.value.length;
                const minLength = 100;
                const maxLength = 1000;
                
                if (charCount) {
                    charCount.textContent = length;
                }
                
                if (charCounter) {
                    charCounter.classList.remove('warning', 'danger', 'min-warning');
                    
                    // Validação de mínimo
                    if (length > 0 && length < minLength) {
                        charCounter.classList.add('min-warning');
                        charCounter.style.color = '#ffc107';
                    } 
                    // Validação de máximo
                    else if (length > 900) {
                        charCounter.classList.add('danger');
                        charCounter.style.color = 'var(--primary-color)';
                    } else if (length > 800) {
                        charCounter.classList.add('warning');
                        charCounter.style.color = '#ffc107';
                    } else if (length >= minLength) {
                        charCounter.style.color = '#28a745';
                    } else {
                        charCounter.style.color = '#6c757d';
                    }
                }
                
                // Validar campo
                if (length > 0 && length < minLength) {
                    descriptionTextarea.setCustomValidity(`A descrição deve ter pelo menos ${minLength} caracteres. Atualmente: ${length} caracteres.`);
                    descriptionTextarea.style.borderColor = '#ffc107';
                } else if (length >= minLength && length <= maxLength) {
                    descriptionTextarea.setCustomValidity('');
                    descriptionTextarea.style.borderColor = '';
                } else if (length > maxLength) {
                    descriptionTextarea.setCustomValidity(`A descrição não pode ter mais de ${maxLength} caracteres.`);
                    descriptionTextarea.style.borderColor = 'var(--primary-color)';
                }
            }
            
            // Mostrar aviso de segurança
            function showSecurityWarning(message, isError = false) {
                if (!securityWarning) return;
                
                securityWarning.innerHTML = `<i class="fas fa-${isError ? 'exclamation-triangle' : 'info-circle'}"></i> ${message}`;
                securityWarning.className = `description-security-warning ${isError ? 'error' : ''}`;
                securityWarning.style.display = 'flex';
            }
            
            // Esconder aviso de segurança
            function hideSecurityWarning() {
                if (securityWarning) {
                    securityWarning.style.display = 'none';
                }
            }
            
            // Event listener para input
            descriptionTextarea.addEventListener('input', function(e) {
                let value = e.target.value;
                const originalValue = value;
                
                // Verificar padrões perigosos
                const issues = checkDangerousPatterns(value);
                
                if (issues.length > 0) {
                    // Sanitizar o texto
                    value = sanitizeText(value);
                    
                    // Atualizar o valor do textarea
                    const cursorPosition = e.target.selectionStart;
                    e.target.value = value;
                    
                    // Restaurar posição do cursor (ajustada)
                    const lengthDiff = originalValue.length - value.length;
                    const newPosition = Math.max(0, cursorPosition - lengthDiff);
                    e.target.setSelectionRange(newPosition, newPosition);
                    
                    // Mostrar aviso
                    showSecurityWarning(issues[0], true);
                    
                    // Esconder aviso após 5 segundos
                    setTimeout(() => {
                        hideSecurityWarning();
                    }, 5000);
                } else {
                    hideSecurityWarning();
                }
                
                // Atualizar contador
                updateCharCount();
            });
            
            // Event listener para paste (colar)
            descriptionTextarea.addEventListener('paste', function(e) {
                e.preventDefault();
                
                // Obter texto colado
                const pastedText = (e.clipboardData || window.clipboardData).getData('text');
                
                // Sanitizar texto colado
                let sanitized = sanitizeText(pastedText);
                
                // Verificar padrões perigosos
                const issues = checkDangerousPatterns(sanitized);
                
                if (issues.length > 0) {
                    showSecurityWarning('Conteúdo colado contém elementos não permitidos e foi removido.', true);
                    setTimeout(() => {
                        hideSecurityWarning();
                    }, 5000);
                    return;
                }
                
                // Inserir texto sanitizado
                const start = e.target.selectionStart;
                const end = e.target.selectionEnd;
                const currentValue = e.target.value;
                const newValue = currentValue.substring(0, start) + sanitized + currentValue.substring(end);
                
                // Verificar limite de caracteres
                if (newValue.length > 1000) {
                    const truncated = newValue.substring(0, 1000);
                    e.target.value = truncated;
                    showSecurityWarning('Limite de 1000 caracteres atingido.', false);
                    setTimeout(() => {
                        hideSecurityWarning();
                    }, 3000);
                } else {
                    e.target.value = newValue;
                }
                
                // Atualizar contador
                updateCharCount();
                
                // Restaurar posição do cursor
                const newPosition = start + sanitized.length;
                e.target.setSelectionRange(newPosition, newPosition);
            });
            
            // Validação no submit
            const cadastroForm = document.getElementById('cadastroForm');
            if (cadastroForm) {
                cadastroForm.addEventListener('submit', function(e) {
                    const value = descriptionTextarea.value.trim();
                    const minLength = 100;
                    const maxLength = 1000;
                    
                    // Verificar se está vazio
                    if (!value) {
                        e.preventDefault();
                        showSecurityWarning('A descrição é obrigatória.', true);
                        descriptionTextarea.focus();
                        return false;
                    }
                    
                    // Verificar mínimo de caracteres
                    if (value.length < minLength) {
                        e.preventDefault();
                        showSecurityWarning(`A descrição deve ter pelo menos ${minLength} caracteres. Atualmente: ${value.length} caracteres.`, true);
                        descriptionTextarea.focus();
                        return false;
                    }
                    
                    // Verificar máximo de caracteres
                    if (value.length > maxLength) {
                        e.preventDefault();
                        showSecurityWarning(`A descrição não pode ter mais de ${maxLength} caracteres.`, true);
                        descriptionTextarea.focus();
                        return false;
                    }
                    
                    // Verificar padrões perigosos uma última vez
                    const issues = checkDangerousPatterns(value);
                    if (issues.length > 0) {
                        e.preventDefault();
                        showSecurityWarning('A descrição contém conteúdo não permitido. Por favor, revise.', true);
                        descriptionTextarea.focus();
                        return false;
                    }
                });
            }
            
            // Inicializar contador
            updateCharCount();
        });
        
        // ============================================
        // FORMATAÇÃO E VALIDAÇÃO DE TELEFONE/WHATSAPP
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const telefoneInput = document.getElementById('telefone_celular');
            const whatsappInput = document.getElementById('whatsapp');
            
            // Função para formatar telefone: (XX) 9XXXX-XXXX ou (XX) XXXX-XXXX
            function formatPhone(value) {
                const numbers = value.replace(/\D/g, '');
                
                if (numbers.length <= 2) {
                    return numbers ? `(${numbers}` : '';
                } else if (numbers.length <= 6) {
                    return `(${numbers.slice(0, 2)}) ${numbers.slice(2)}`;
                } else if (numbers.length <= 10) {
                    return `(${numbers.slice(0, 2)}) ${numbers.slice(2, 6)}-${numbers.slice(6)}`;
                } else {
                    return `(${numbers.slice(0, 2)}) ${numbers.slice(2, 7)}-${numbers.slice(7, 11)}`;
                }
            }
            
            // Função para atualizar botões da barra fixa
            function updateBottomBar() {
                const phoneBtn = document.getElementById('phoneCallBtn');
                const whatsappBtn = document.getElementById('whatsAppBtn');
                const phoneDisplay = document.querySelector('.phone-celular');
                
                const telefone = telefoneInput ? telefoneInput.value.replace(/\D/g, '') : '';
                const whatsapp = whatsappInput ? whatsappInput.value.replace(/\D/g, '') : '';
                
                if (phoneBtn && telefone) {
                    phoneBtn.href = `tel:${telefone}`;
                }
                
                if (phoneDisplay && telefoneInput) {
                    phoneDisplay.textContent = telefoneInput.value || '(11) 99999-9999';
                }
                
                if (whatsappBtn && whatsapp) {
                    const whatsappText = encodeURIComponent('Olá, vi seu anúncio na Mansão do Job');
                    const whatsappWebUrl = `https://wa.me/55${whatsapp}?text=${whatsappText}`;
                    const whatsappMobileUrl = `whatsapp://send?phone=55${whatsapp}&text=${whatsappText}`;
                    
                    whatsappBtn.href = whatsappWebUrl;
                    whatsappBtn.setAttribute('data-mobile-href', whatsappMobileUrl);
                }
            }
            
            // Formatação automática do telefone
            if (telefoneInput) {
                telefoneInput.addEventListener('input', function(e) {
                    const formatted = formatPhone(e.target.value);
                    e.target.value = formatted;
                    updateBottomBar();
                });
                
                telefoneInput.addEventListener('blur', function() {
                    const numbers = this.value.replace(/\D/g, '');
                    if (numbers.length < 10) {
                        this.setCustomValidity('Telefone deve ter pelo menos 10 dígitos');
                    } else {
                        this.setCustomValidity('');
                    }
                });
            }
            
            // Formatação automática do WhatsApp
            if (whatsappInput) {
                whatsappInput.addEventListener('input', function(e) {
                    const formatted = formatPhone(e.target.value);
                    e.target.value = formatted;
                    updateBottomBar();
                });
                
                whatsappInput.addEventListener('blur', function() {
                    const numbers = this.value.replace(/\D/g, '');
                    if (numbers.length < 10) {
                        this.setCustomValidity('WhatsApp deve ter pelo menos 10 dígitos');
                    } else {
                        this.setCustomValidity('');
                    }
                });
                
                // Opção: copiar telefone para WhatsApp se WhatsApp estiver vazio
                if (telefoneInput) {
                    telefoneInput.addEventListener('blur', function() {
                        if (!whatsappInput.value && this.value) {
                            whatsappInput.value = this.value;
                            updateBottomBar();
                        }
                    });
                }
            }
            
            // Atualizar barra fixa ao carregar
            updateBottomBar();
        });
        
        // ============================================
        // CONTADOR DE CARACTERES DO NOME
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const profileNameInput = document.getElementById('profile-name');
            const profileNameCharCount = document.getElementById('profile-name-char-count');
            const profileNameCharCounter = document.querySelector('.profile-name-char-counter');
            
            if (profileNameInput) {
                // Atualizar contador inicial
                function updateNameCharCount() {
                    const length = profileNameInput.value.length;
                    if (profileNameCharCount) {
                        profileNameCharCount.textContent = length;
                    }
                    
                    // Atualizar estilo do contador
                    if (profileNameCharCounter) {
                        profileNameCharCounter.classList.remove('warning', 'danger');
                        if (length > 25) {
                            profileNameCharCounter.classList.add('danger');
                        } else if (length > 20) {
                            profileNameCharCounter.classList.add('warning');
                        }
                    }
                }
                
                // Event listener para input
                profileNameInput.addEventListener('input', updateNameCharCount);
                
                // Inicializar contador
                updateNameCharCount();
            }
        });
        
        // ============================================
        // VALIDAÇÃO DE INFORMAÇÕES PESSOAIS
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // Horário 24h - mostrar/esconder campos customizados
            const horario24hSim = document.getElementById('horario-24h-sim');
            const horario24hNao = document.getElementById('horario-24h-nao');
            const horarioCustomContainer = document.getElementById('horario-custom-container');
            const horarioInicio = document.getElementById('horario-inicio');
            const horarioFim = document.getElementById('horario-fim');
            
            function toggleHorarioCustom() {
                if (horario24hNao && horario24hNao.checked && horarioCustomContainer) {
                    horarioCustomContainer.style.display = 'block';
                    if (horarioInicio) horarioInicio.required = true;
                    if (horarioFim) horarioFim.required = true;
                } else {
                    if (horarioCustomContainer) horarioCustomContainer.style.display = 'none';
                    if (horarioInicio) {
                        horarioInicio.required = false;
                        horarioInicio.value = '';
                    }
                    if (horarioFim) {
                        horarioFim.required = false;
                        horarioFim.value = '';
                    }
                }
            }
            
            if (horario24hSim) {
                horario24hSim.addEventListener('change', toggleHorarioCustom);
            }
            if (horario24hNao) {
                horario24hNao.addEventListener('change', toggleHorarioCustom);
            }
            
            // Validação de checkboxes "Formas de Pagamento" (pelo menos 1 obrigatório)
            const pagamentoCheckboxes = document.querySelectorAll('input[name="pagamento"]');
            const pagamentoGroup = document.getElementById('pagamento-checkbox-group');
            
            function updatePagamentoPulse() {
                const checked = Array.from(pagamentoCheckboxes).some(cb => cb.checked);
                if (pagamentoGroup) {
                    if (checked) {
                        pagamentoGroup.classList.remove('checkbox-group-required');
                        pagamentoGroup.classList.add('valid');
                    } else {
                        pagamentoGroup.classList.add('checkbox-group-required');
                        pagamentoGroup.classList.remove('valid');
                    }
                }
            }
            
            pagamentoCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const checked = Array.from(pagamentoCheckboxes).some(cb => cb.checked);
                    updatePagamentoPulse();
                    if (!checked) {
                        this.setCustomValidity('Selecione pelo menos uma forma de pagamento');
                    } else {
                        pagamentoCheckboxes.forEach(cb => cb.setCustomValidity(''));
                    }
                });
            });
            
            // Inicializa pulso para "Formas de Pagamento"
            updatePagamentoPulse();
            
            // ============================================
            // DETECÇÃO DE ESTADO/CIDADE POR DDD
            // ============================================
            
            // Mapeamento completo de DDDs brasileiros para Estado e Cidade
            const dddToLocation = {
                // São Paulo
                '11': { estado: 'SP', cidade: 'São Paulo' },
                '12': { estado: 'SP', cidade: 'São José dos Campos' },
                '13': { estado: 'SP', cidade: 'Santos' },
                '14': { estado: 'SP', cidade: 'Bauru' },
                '15': { estado: 'SP', cidade: 'Sorocaba' },
                '16': { estado: 'SP', cidade: 'Ribeirão Preto' },
                '17': { estado: 'SP', cidade: 'São José do Rio Preto' },
                '18': { estado: 'SP', cidade: 'Presidente Prudente' },
                '19': { estado: 'SP', cidade: 'Campinas' },
                
                // Rio de Janeiro
                '21': { estado: 'RJ', cidade: 'Rio de Janeiro' },
                '22': { estado: 'RJ', cidade: 'Campos dos Goytacazes' },
                '24': { estado: 'RJ', cidade: 'Volta Redonda' },
                
                // Espírito Santo
                '27': { estado: 'ES', cidade: 'Vitória' },
                '28': { estado: 'ES', cidade: 'Cachoeiro de Itapemirim' },
                
                // Minas Gerais
                '31': { estado: 'MG', cidade: 'Belo Horizonte' },
                '32': { estado: 'MG', cidade: 'Juiz de Fora' },
                '33': { estado: 'MG', cidade: 'Governador Valadares' },
                '34': { estado: 'MG', cidade: 'Uberlândia' },
                '35': { estado: 'MG', cidade: 'Poços de Caldas' },
                '37': { estado: 'MG', cidade: 'Divinópolis' },
                '38': { estado: 'MG', cidade: 'Montes Claros' },
                
                // Paraná
                '41': { estado: 'PR', cidade: 'Curitiba' },
                '42': { estado: 'PR', cidade: 'Ponta Grossa' },
                '43': { estado: 'PR', cidade: 'Londrina' },
                '44': { estado: 'PR', cidade: 'Maringá' },
                '45': { estado: 'PR', cidade: 'Foz do Iguaçu' },
                '46': { estado: 'PR', cidade: 'Francisco Beltrão' },
                
                // Santa Catarina
                '47': { estado: 'SC', cidade: 'Joinville' },
                '48': { estado: 'SC', cidade: 'Florianópolis' },
                '49': { estado: 'SC', cidade: 'Chapecó' },
                
                // Rio Grande do Sul
                '51': { estado: 'RS', cidade: 'Porto Alegre' },
                '53': { estado: 'RS', cidade: 'Pelotas' },
                '54': { estado: 'RS', cidade: 'Caxias do Sul' },
                '55': { estado: 'RS', cidade: 'Santa Maria' },
                
                // Distrito Federal e Goiás
                '61': { estado: 'DF', cidade: 'Brasília' },
                '62': { estado: 'GO', cidade: 'Goiânia' },
                '64': { estado: 'GO', cidade: 'Rio Verde' },
                
                // Mato Grosso e Mato Grosso do Sul
                '65': { estado: 'MT', cidade: 'Cuiabá' },
                '66': { estado: 'MT', cidade: 'Rondonópolis' },
                '67': { estado: 'MS', cidade: 'Campo Grande' },
                '68': { estado: 'AC', cidade: 'Rio Branco' },
                '69': { estado: 'RO', cidade: 'Porto Velho' },
                
                // Bahia
                '71': { estado: 'BA', cidade: 'Salvador' },
                '73': { estado: 'BA', cidade: 'Ilhéus' },
                '74': { estado: 'BA', cidade: 'Juazeiro' },
                '75': { estado: 'BA', cidade: 'Feira de Santana' },
                '77': { estado: 'BA', cidade: 'Vitória da Conquista' },
                
                // Sergipe
                '79': { estado: 'SE', cidade: 'Aracaju' },
                
                // Pernambuco
                '81': { estado: 'PE', cidade: 'Recife' },
                '87': { estado: 'PE', cidade: 'Petrolina' },
                
                // Alagoas
                '82': { estado: 'AL', cidade: 'Maceió' },
                
                // Paraíba
                '83': { estado: 'PB', cidade: 'João Pessoa' },
                
                // Rio Grande do Norte
                '84': { estado: 'RN', cidade: 'Natal' },
                
                // Ceará
                '85': { estado: 'CE', cidade: 'Fortaleza' },
                '88': { estado: 'CE', cidade: 'Juazeiro do Norte' },
                
                // Piauí
                '86': { estado: 'PI', cidade: 'Teresina' },
                '89': { estado: 'PI', cidade: 'Picos' },
                
                // Maranhão
                '98': { estado: 'MA', cidade: 'São Luís' },
                '99': { estado: 'MA', cidade: 'Imperatriz' },
                
                // Pará
                '91': { estado: 'PA', cidade: 'Belém' },
                '93': { estado: 'PA', cidade: 'Santarém' },
                '94': { estado: 'PA', cidade: 'Marabá' },
                
                // Amazonas
                '92': { estado: 'AM', cidade: 'Manaus' },
                '97': { estado: 'AM', cidade: 'Coari' },
                
                // Roraima
                '95': { estado: 'RR', cidade: 'Boa Vista' },
                
                // Amapá
                '96': { estado: 'AP', cidade: 'Macapá' },
                
                // Tocantins
                '63': { estado: 'TO', cidade: 'Palmas' }
            };
            
            // Função para extrair DDD de um número de telefone
            function extractDDD(phoneNumber) {
                if (!phoneNumber) return null;
                // Remove todos os caracteres não numéricos
                const numbersOnly = phoneNumber.replace(/\D/g, '');
                // Retorna os primeiros 2 dígitos (DDD)
                if (numbersOnly.length >= 2) {
                    return numbersOnly.substring(0, 2);
                }
                return null;
            }
            
            // Função para detectar e preencher estado/cidade baseado no DDD
            function detectLocationFromDDD(phoneNumber) {
                const ddd = extractDDD(phoneNumber);
                const estadoInput = document.getElementById('estado');
                const cidadeInput = document.getElementById('cidade');
                
                if (!ddd || !dddToLocation[ddd]) {
                    // DDD não encontrado ou inválido
                    if (estadoInput) estadoInput.value = '';
                    if (cidadeInput) cidadeInput.value = '';
                    return;
                }
                
                const location = dddToLocation[ddd];
                if (estadoInput) estadoInput.value = location.estado;
                if (cidadeInput) cidadeInput.value = location.cidade;
                
                console.log(`📍 DDD ${ddd} detectado: ${location.cidade} - ${location.estado}`);
            }
            
            // Adicionar listener ao campo WhatsApp para detectar DDD automaticamente
            const whatsappInput = document.getElementById('whatsapp');
            if (whatsappInput) {
                whatsappInput.addEventListener('input', function(e) {
                    detectLocationFromDDD(e.target.value);
                });
                
                whatsappInput.addEventListener('blur', function(e) {
                    detectLocationFromDDD(e.target.value);
                });
            }
            
            // Validação no submit do formulário
            if (cadastroForm) {
                cadastroForm.addEventListener('submit', function(e) {
                    // Validar altura usando função do formValidations.js
                    const alturaInput = document.getElementById('info-altura');
                    if (alturaInput && alturaInput.value) {
                        const alturaError = document.getElementById('altura-error');
                        if (typeof validateHeight === 'function') {
                            const alturaValidation = validateHeight(alturaInput.value, alturaInput, alturaError);
                            if (!alturaValidation.valid) {
                                e.preventDefault();
                                alturaInput.focus();
                                return false;
                            }
                        }
                    }
                    
                    // Validar Formas de Pagamento
                    const pagamentoChecked = Array.from(pagamentoCheckboxes).some(cb => cb.checked);
                    if (!pagamentoChecked) {
                        e.preventDefault();
                        alert('Por favor, selecione pelo menos uma forma de pagamento');
                        return false;
                    }
                    
                    // Validar horário customizado se necessário
                    if (horario24hNao && horario24hNao.checked) {
                        if (!horarioInicio || !horarioInicio.value) {
                            e.preventDefault();
                            alert('Por favor, preencha o horário de início');
                            if (horarioInicio) horarioInicio.focus();
                            return false;
                        }
                        if (!horarioFim || !horarioFim.value) {
                            e.preventDefault();
                            alert('Por favor, preencha o horário de fim');
                            if (horarioFim) horarioFim.focus();
                            return false;
                        }
                    }
                    
                    // Validar formas de pagamento
                    if (!validatePagamento()) {
                        hasErrors = true;
                    }
                    
                    if (hasErrors) {
                        e.preventDefault();
                        e.stopPropagation();
                        return false;
                    }
                });
            }
        });
        
        // ============================================
        // ESTILIZAÇÃO DE CHECKBOXES DE SERVIÇOS
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const serviceCheckboxes = document.querySelectorAll('.service-checkbox-label input[type="checkbox"]');
            
            serviceCheckboxes.forEach(checkbox => {
                // Aplicar estilo inicial se já estiver marcado
                updateCheckboxStyle(checkbox);
                
                // Adicionar listener para mudanças
                checkbox.addEventListener('change', function() {
                    updateCheckboxStyle(this);
                });
            });
            
            function updateCheckboxStyle(checkbox) {
                const label = checkbox.closest('.service-checkbox-label');
                if (!label) return;
                
                if (checkbox.checked) {
                    label.classList.add('checked');
                } else {
                    label.classList.remove('checked');
                }
            }
        });
        
        // ============================================
        // MENU FULLSCREEN MOBILE/TABLET
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const toggleMenu = document.getElementById('toggle-menu');
            const menu = document.getElementById('menu');
            
            // Menu foi removido, então não inicializamos o toggle
            if (false && toggleMenu && menu) {
                // Função para toggle do menu
                function toggleMenuFunction(e) {
                    console.log('🍔 Menu toggle clicado!', e);
                    
                    if (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        e.stopImmediatePropagation();
                    }
                    
                    // Prevenir qualquer navegação
                    if (e && e.defaultPrevented === false) {
                        e.preventDefault();
                    }
                    
                    toggleMenu.classList.toggle('active');
                    menu.classList.toggle('open');
                    
                    // Bloquear scroll do body quando menu estiver aberto
                    if (menu.classList.contains('open')) {
                        document.body.style.overflow = 'hidden';
                    } else {
                        document.body.style.overflow = '';
                    }
                    
                    return false;
                }
                
                // Toggle do menu principal - múltiplos listeners para garantir
                toggleMenu.addEventListener('click', toggleMenuFunction, true);
                toggleMenu.addEventListener('click', toggleMenuFunction, false);
                
                // Prevenir qualquer ação padrão no nav também
                const menuNav = document.querySelector('.menu-topo-mobile');
                if (menuNav) {
                    menuNav.addEventListener('click', function(e) {
                        if (e.target.closest('.toggle-menu') || e.target === toggleMenu || toggleMenu.contains(e.target)) {
                            e.preventDefault();
                            e.stopPropagation();
                            e.stopImmediatePropagation();
                            toggleMenuFunction(e);
                            return false;
                        }
                    }, true);
                }
                
                // Prevenir submit de formulário se o botão for clicado
                toggleMenu.setAttribute('type', 'button');
                toggleMenu.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleMenuFunction(e);
                    return false;
                };
                
                // Controlar submenus (POR REGIÃO)
                const parentLinks = menu.querySelectorAll('.parent-link');
                parentLinks.forEach(parentLink => {
                    parentLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        const parentItem = this.parentElement;
                        parentItem.classList.toggle('active');
                    });
                });
                
                // Fechar menu ao clicar em um link (exceto submenu)
                const menuLinks = menu.querySelectorAll('.main-nav > ul > li > a:not(.parent-link)');
                menuLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        // Fechar menu após um pequeno delay para permitir navegação
                        setTimeout(() => {
                            toggleMenu.classList.remove('active');
                            menu.classList.remove('open');
                            document.body.style.overflow = '';
                        }, 100);
                    });
                });
                
                // Fechar menu ao clicar fora (no overlay)
                menu.addEventListener('click', function(e) {
                    if (e.target === menu) {
                        toggleMenu.classList.remove('active');
                        menu.classList.remove('open');
                        document.body.style.overflow = '';
                    }
                });
                
                console.log('✅ Menu fullscreen mobile inicializado!');
            }
        });
        
        // ============================================
        // UPLOAD E GRAVAÇÃO DE ÁUDIO
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const btnUploadAudio = document.getElementById('btn-upload-audio');
            const btnRecordAudio = document.getElementById('btn-record-audio');
            const audioFileInput = document.getElementById('audio-file-input');
            const audioUploadPlaceholder = document.getElementById('audio-upload-placeholder');
            const audioRecordingArea = document.getElementById('audio-recording-area');
            const audioPreviewArea = document.getElementById('audio-preview-area');
            
            if (!btnUploadAudio || !btnRecordAudio || !audioFileInput) {
                console.warn('⚠️ Elementos de áudio não encontrados');
                return;
            }
            
            // Botão de upload de áudio
            btnUploadAudio.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('🎵 Botão de upload de áudio clicado');
                if (audioFileInput) {
                    audioFileInput.click();
                }
            });
            
            // Quando um arquivo de áudio é selecionado
            audioFileInput.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                console.log('🎵 Arquivo de áudio selecionado:', file.name, file.type);
                
                // Validar tipo de arquivo
                if (!file.type.startsWith('audio/')) {
                    alert('Por favor, selecione um arquivo de áudio válido.');
                    audioFileInput.value = '';
                    return;
                }
                
                // Validar tamanho (máx 50MB)
                const maxSize = 50 * 1024 * 1024; // 50MB
                if (file.size > maxSize) {
                    alert('Arquivo muito grande. Tamanho máximo: 50MB');
                    audioFileInput.value = '';
                    return;
                }
                
                // Criar URL do objeto para preview
                const audioUrl = URL.createObjectURL(file);
                const audioPreviewPlayer = document.getElementById('audio-preview-player');
                const btnPlayPreview = document.getElementById('btn-play-preview');
                const playIcon = document.getElementById('play-icon');
                const audioDurationDisplay = document.getElementById('audio-duration-display');
                
                if (audioPreviewPlayer) {
                    audioPreviewPlayer.src = audioUrl;
                    
                    // Atualizar duração quando carregar
                    audioPreviewPlayer.addEventListener('loadedmetadata', function() {
                        const duration = audioPreviewPlayer.duration;
                        const minutes = Math.floor(duration / 60);
                        const seconds = Math.floor(duration % 60);
                        if (audioDurationDisplay) {
                            audioDurationDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                        }
                    });
                }
                
                // Controlar play/pause
                if (btnPlayPreview && audioPreviewPlayer) {
                    let isPlaying = false;
                    btnPlayPreview.addEventListener('click', function() {
                        if (isPlaying) {
                            audioPreviewPlayer.pause();
                            if (playIcon) playIcon.className = 'fas fa-play';
                            isPlaying = false;
                        } else {
                            audioPreviewPlayer.play();
                            if (playIcon) playIcon.className = 'fas fa-pause';
                            isPlaying = true;
                        }
                    });
                    
                    audioPreviewPlayer.addEventListener('ended', function() {
                        if (playIcon) playIcon.className = 'fas fa-play';
                        isPlaying = false;
                    });
                }
                
                // Botão de remover áudio
                const btnRemoveAudio = document.getElementById('btn-remove-audio');
                if (btnRemoveAudio) {
                    btnRemoveAudio.addEventListener('click', function() {
                        audioFileInput.value = '';
                        if (audioPreviewPlayer) {
                            audioPreviewPlayer.src = '';
                            audioPreviewPlayer.pause();
                        }
                        if (audioUploadPlaceholder) audioUploadPlaceholder.style.display = 'block';
                        if (audioPreviewArea) audioPreviewArea.style.display = 'none';
                        if (audioRecordingArea) audioRecordingArea.style.display = 'none';
                    });
                }
                
                // Mostrar preview e esconder placeholder
                if (audioUploadPlaceholder) audioUploadPlaceholder.style.display = 'none';
                if (audioPreviewArea) audioPreviewArea.style.display = 'block';
                if (audioRecordingArea) audioRecordingArea.style.display = 'none';
            });
            
            // Botão de gravar áudio
            btnRecordAudio.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                console.log('🎤 Botão de gravar áudio clicado');
                
                // Verificar se o navegador suporta MediaRecorder
                if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
                    alert('Seu navegador não suporta gravação de áudio. Use o botão "Adicionar Áudio" para fazer upload de um arquivo.');
                    return;
                }
                
                // Solicitar permissão de microfone
                navigator.mediaDevices.getUserMedia({ audio: true })
                    .then(function(stream) {
                        console.log('✅ Permissão de microfone concedida');
                        
                        // Mostrar área de gravação
                        if (audioUploadPlaceholder) audioUploadPlaceholder.style.display = 'none';
                        if (audioPreviewArea) audioPreviewArea.style.display = 'none';
                        if (audioRecordingArea) audioRecordingArea.style.display = 'block';
                        
                        // Iniciar gravação
                        const mediaRecorder = new MediaRecorder(stream);
                        const audioChunks = [];
                        
                        mediaRecorder.ondataavailable = function(event) {
                            audioChunks.push(event.data);
                        };
                        
                        mediaRecorder.onstop = function() {
                            const audioBlob = new Blob(audioChunks, { type: 'audio/webm' });
                            const audioUrl = URL.createObjectURL(audioBlob);
                            
                            // Criar um arquivo File a partir do Blob
                            const audioFile = new File([audioBlob], 'audio-gravado.webm', { type: 'audio/webm' });
                            
                            // Criar um DataTransfer para simular seleção de arquivo
                            const dataTransfer = new DataTransfer();
                            dataTransfer.items.add(audioFile);
                            audioFileInput.files = dataTransfer.files;
                            
                            // Disparar evento change manualmente
                            const changeEvent = new Event('change', { bubbles: true });
                            audioFileInput.dispatchEvent(changeEvent);
                            
                            // Parar todas as tracks do stream
                            stream.getTracks().forEach(track => track.stop());
                        };
                        
                        // Iniciar gravação
                        mediaRecorder.start();
                        
                        // Atualizar timer
                        let seconds = 0;
                        const recordingTimer = document.getElementById('recording-timer');
                        const recordingText = document.getElementById('recording-text');
                        const recordingIndicator = document.getElementById('recording-indicator');
                        
                        const timerInterval = setInterval(function() {
                            seconds++;
                            const minutes = Math.floor(seconds / 60);
                            const secs = seconds % 60;
                            if (recordingTimer) {
                                recordingTimer.textContent = `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
                            }
                        }, 1000);
                        
                        // Botão de parar gravação
                        const btnStopRecording = document.getElementById('btn-stop-recording');
                        if (btnStopRecording) {
                            btnStopRecording.onclick = function() {
                                mediaRecorder.stop();
                                clearInterval(timerInterval);
                                if (audioRecordingArea) audioRecordingArea.style.display = 'none';
                            };
                        }
                        
                        // Botão de cancelar gravação
                        const btnCancelRecording = document.getElementById('btn-cancel-recording');
                        if (btnCancelRecording) {
                            btnCancelRecording.onclick = function() {
                                mediaRecorder.stop();
                                clearInterval(timerInterval);
                                stream.getTracks().forEach(track => track.stop());
                                if (audioUploadPlaceholder) audioUploadPlaceholder.style.display = 'block';
                                if (audioRecordingArea) audioRecordingArea.style.display = 'none';
                                if (audioPreviewArea) audioPreviewArea.style.display = 'none';
                            };
                        }
                    })
                    .catch(function(error) {
                        console.error('❌ Erro ao acessar microfone:', error);
                        alert('Não foi possível acessar o microfone. Verifique as permissões do navegador.');
                    });
            });
            
            console.log('✅ Sistema de áudio inicializado');
        });
        
        // ============================================
        // UPLOAD DE DOCUMENTOS DE VERIFICAÇÃO
        // ============================================
        function setupVerificationUploads() {
            // Documento Frente
            setupVerificationFileUpload('documento-frente', 'documento-frente-preview', 'documento-frente-overlay', 'btn-change-documento-frente', 'image');
            
            // Documento Verso
            setupVerificationFileUpload('documento-verso', 'documento-verso-preview', 'documento-verso-overlay', 'btn-change-documento-verso', 'image');
            
            // Selfie com Documento
            setupVerificationFileUpload('selfie-documento', 'selfie-documento-preview', 'selfie-documento-overlay', 'btn-change-selfie-documento', 'image');
            
            // Vídeo de Verificação
            setupVerificationFileUpload('verification-video', 'verification-video-preview', 'verification-video-overlay', 'btn-change-verification-video', 'video');
        }
        
        function setupVerificationFileUpload(inputId, previewId, overlayId, btnChangeId, fileType) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            const overlay = document.getElementById(overlayId);
            const btnChange = document.getElementById(btnChangeId);
            const uploadBox = input?.closest('.verification-upload-box');
            
            if (!input || !preview) return;
            
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                // Validar tamanho (máx 10MB para imagens, 100MB para vídeos)
                const maxSize = fileType === 'video' ? 100 * 1024 * 1024 : 10 * 1024 * 1024;
                if (file.size > maxSize) {
                    alert(`Arquivo muito grande. Tamanho máximo: ${fileType === 'video' ? '100MB' : '10MB'}`);
                    input.value = '';
                    return;
                }
                
                if (fileType === 'image') {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.innerHTML = `<img src="${e.target.result}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
                        preview.style.display = 'block';
                        if (overlay) overlay.style.display = 'none';
                        if (btnChange) btnChange.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else if (fileType === 'video') {
                    const url = URL.createObjectURL(file);
                    preview.innerHTML = `
                        <video controls style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                            <source src="${url}" type="${file.type}">
                        </video>
                    `;
                    preview.style.display = 'block';
                    if (overlay) overlay.style.display = 'none';
                    if (btnChange) btnChange.style.display = 'block';
                }
            });
            
            // Botão de trocar
            if (btnChange) {
                btnChange.addEventListener('click', function(e) {
                    e.stopPropagation();
                    input.click();
                });
            }
        }
        
        // Função para confirmar verificação
        function confirmarVerificacao() {
            const statusDiv = document.getElementById('verificacao-status');
            const verificacaoRadio = document.querySelector('input[name="verificacao"]:checked');
            const documentoFrente = document.getElementById('documento-frente');
            const documentoVerso = document.getElementById('documento-verso');
            const selfieDocumento = document.getElementById('selfie-documento');
            const verificationSection = document.querySelector('.verification-section[style*="margin-top: 30px"]');
            
            if (!verificacaoRadio) {
                if (statusDiv) {
                    statusDiv.innerHTML = '<span style="color: var(--primary-color);">⚠️ Por favor, selecione uma opção de verificação.</span>';
                }
                return;
            }
            
            const verificacaoValue = verificacaoRadio.value;
            
            if (verificacaoValue === 'sim') {
                // Verificar se a seção de upload está visível
                if (verificationSection && verificationSection.style.display === 'none') {
                    // Se a seção estiver oculta, mostrar ela primeiro
                    verificationSection.style.display = 'block';
                    if (statusDiv) {
                        statusDiv.innerHTML = '<span style="color: #ffc107;">ℹ️ Por favor, preencha os campos de upload acima.</span>';
                    }
                    // Scroll suave até a seção
                    verificationSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    return;
                }
                
                // Verificar se os documentos obrigatórios foram enviados
                let hasErrors = false;
                const missingDocs = [];
                
                if (!documentoFrente || !documentoFrente.files || !documentoFrente.files[0]) {
                    missingDocs.push('Foto Documento Frente');
                    hasErrors = true;
                }
                
                if (!documentoVerso || !documentoVerso.files || !documentoVerso.files[0]) {
                    missingDocs.push('Foto Documento Verso');
                    hasErrors = true;
                }
                
                if (!selfieDocumento || !selfieDocumento.files || !selfieDocumento.files[0]) {
                    missingDocs.push('Foto Documento com Selfie');
                    hasErrors = true;
                }
                
                if (hasErrors) {
                    if (statusDiv) {
                        statusDiv.innerHTML = `<span style="color: var(--primary-color);">⚠️ Por favor, envie todos os documentos obrigatórios: ${missingDocs.join(', ')}</span>`;
                    }
                    // Scroll até a seção de upload
                    if (verificationSection) {
                        verificationSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                    return;
                }
                
                // Todos os documentos foram enviados
                if (statusDiv) {
                    statusDiv.innerHTML = '<span style="color: #28a745;">✅ Documentos enviados com sucesso! A verificação será processada em breve.</span>';
                }
                
                // Salvar status de verificação
                localStorage.setItem('verificacao_status', 'pendente');
                localStorage.setItem('verificacao_data', new Date().toISOString());
                
            } else if (verificacaoValue === 'depois') {
                if (statusDiv) {
                    statusDiv.innerHTML = '<span style="color: #ffc107;">ℹ️ Você pode fazer a verificação mais tarde através do seu painel.</span>';
                }
                localStorage.setItem('verificacao_status', 'pendente');
            }
        }
        
        // ============================================
        // FUNÇÕES DE UPLOAD DE ARQUIVOS
        // ============================================
        // Função para fazer upload de arquivo público para Firebase Storage
        async function uploadPublicFileToStorage(file, anuncioId, userId, fieldName) {
            try {
                if (typeof firebase === 'undefined' || !firebase.storage) {
                    throw new Error('Firebase Storage não inicializado');
                }
                
                const storageRef = firebase.storage().ref();
                const timestamp = Date.now();
                const fileName = `${fieldName}_${timestamp}_${file.name}`;
                
                // Verificar se é arquivo de verificação para salvar na pasta upload_doc
                const verificationFields = ['documento-frente', 'documento-verso', 'selfie-documento', 'verification-video'];
                const isVerificationFile = verificationFields.includes(fieldName);
                
                // Definir caminho do arquivo
                const filePath = isVerificationFile 
                    ? `anuncios/${anuncioId}/upload_doc/${fileName}`
                    : `anuncios/${anuncioId}/${fileName}`;
                
                const fileRef = storageRef.child(filePath);
                
                console.log(`📁 Fazendo upload público: ${fieldName} -> ${file.name}${isVerificationFile ? ' (pasta upload_doc)' : ''}`);
                
                const snapshot = await fileRef.put(file);
                const downloadURL = await snapshot.ref.getDownloadURL();
                
                console.log(`✅ Upload público concluído: ${fieldName} -> ${downloadURL}`);
                
                return downloadURL;
            } catch (error) {
                console.error(`❌ Erro no upload público de ${fieldName}:`, error);
                throw error;
            }
        }
        
        // Função para fazer upload de arquivo privado para Firebase Storage
        async function uploadPrivateFileToStorage(file, userId, fieldName) {
            try {
                if (typeof firebase === 'undefined' || !firebase.storage) {
                    throw new Error('Firebase Storage não inicializado');
                }
                
                const storageRef = firebase.storage().ref();
                const timestamp = Date.now();
                const fileName = `${fieldName}_${timestamp}_${file.name}`;
                
                // Estrutura: users-private-verification/{userId}/documents/{fileName} ou videos/{fileName}
                const fileType = fieldName.includes('video') ? 'videos' : 'documents';
                const fileRef = storageRef.child(`users-private-verification/${userId}/${fileType}/${fileName}`);
                
                console.log(`🔒 Fazendo upload privado: ${fieldName} -> ${file.name}`);
                
                const snapshot = await fileRef.put(file);
                const downloadURL = await snapshot.ref.getDownloadURL();
                
                console.log(`✅ Upload privado concluído: ${fieldName} -> ${downloadURL}`);
                
                return downloadURL;
            } catch (error) {
                console.error(`❌ Erro no upload privado de ${fieldName}:`, error);
                throw error;
            }
        }
        
        // Função legada (mantida para compatibilidade)
        async function uploadFileToStorage(file, anuncioId, fieldName) {
            return uploadPublicFileToStorage(file, anuncioId, null, fieldName);
        }

        // Função para fazer upload de arquivos PÚBLICOS (banner, galeria, áudio, vídeo do anúncio)
        async function uploadPublicFilesToFirebase(formElement, anuncioId, userId) {
            const uploadPromises = [];
            const fileFields = {};
            
            // Upload de foto banner
            const bannerInput = document.getElementById('banner-photo');
            if (bannerInput && bannerInput.files && bannerInput.files[0]) {
                const file = bannerInput.files[0];
                uploadPromises.push(
                    uploadPublicFileToStorage(file, anuncioId, userId, 'foto_banner').then(url => {
                        fileFields.foto_banner = url;
                        fileFields.foto_banner_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do banner:', error);
                    })
                );
            }
            
            // Upload de galeria (1-9)
            for (let i = 1; i <= 9; i++) {
                const galeriaInput = document.getElementById(`galeria-photo-${i}`);
                if (galeriaInput && galeriaInput.files && galeriaInput.files[0]) {
                    const file = galeriaInput.files[0];
                    const fieldName = i === 9 ? 'foto_stories' : `galeria_${i}`;
                    uploadPromises.push(
                        uploadPublicFileToStorage(file, anuncioId, userId, fieldName).then(url => {
                            fileFields[fieldName] = url;
                            fileFields[`${fieldName}_name`] = file.name;
                        }).catch(error => {
                            console.error(`Erro no upload da galeria ${i}:`, error);
                        })
                    );
                }
            }
            
            // Upload de áudio (se houver)
            // Verificar ambos os IDs possíveis: audio-file-input (novo) e audio-file (legado)
            const audioInput = document.getElementById('audio-file-input') || document.getElementById('audio-file');
            if (audioInput && audioInput.files && audioInput.files[0]) {
                const file = audioInput.files[0];
                console.log('🎵 Arquivo de áudio encontrado:', file.name, 'Tamanho:', file.size);
                uploadPromises.push(
                    uploadPublicFileToStorage(file, anuncioId, userId, 'audio').then(url => {
                        console.log('✅ Áudio enviado com sucesso:', url);
                        fileFields.audioUrl = url;
                        fileFields.audio_url = url; // Também salvar com nome alternativo
                        fileFields.audio_name = file.name;
                    }).catch(error => {
                        console.error('❌ Erro no upload do áudio:', error);
                    })
                );
            } else {
                console.log('⚠️ Nenhum arquivo de áudio encontrado para upload');
            }
            
            // Aguardar todos os uploads
            if (uploadPromises.length > 0) {
                await Promise.all(uploadPromises);
                console.log('✅ Todos os arquivos públicos foram enviados com sucesso');
            }
            
            return fileFields;
        }
        
        // Função para fazer upload de arquivos PRIVADOS (documentos de verificação)
        async function uploadPrivateFilesToFirebase(formElement, userId, anuncioId) {
            const uploadPromises = [];
            const fileFields = {};
            
            // Upload de documentos de verificação (salvos na pasta upload_doc do anúncio)
            const verificationFields = [
                { id: 'documento-frente', name: 'documento-frente', fieldName: 'documento_frente' },
                { id: 'documento-verso', name: 'documento-verso', fieldName: 'documento_verso' },
                { id: 'selfie-documento', name: 'selfie-documento', fieldName: 'selfie_documento' },
                { id: 'verification-video', name: 'verification-video', fieldName: 'verification_video' }
            ];
            
            verificationFields.forEach(field => {
                const input = document.getElementById(field.id);
                if (input && input.files && input.files[0]) {
                    const file = input.files[0];
                    // Se temos anuncioId, usar uploadPublicFileToStorage com a pasta upload_doc
                    // Caso contrário, usar uploadPrivateFileToStorage (fallback)
                    if (anuncioId) {
                        uploadPromises.push(
                            uploadPublicFileToStorage(file, anuncioId, userId, field.name).then(url => {
                                fileFields[`${field.fieldName}_url`] = url;
                                fileFields[`${field.fieldName}_name`] = file.name;
                            }).catch(error => {
                                console.error(`Erro no upload de ${field.name}:`, error);
                            })
                        );
                    } else {
                        uploadPromises.push(
                            uploadPrivateFileToStorage(file, userId, field.fieldName).then(url => {
                                fileFields[`${field.fieldName}_url`] = url;
                                fileFields[`${field.fieldName}_name`] = file.name;
                            }).catch(error => {
                                console.error(`Erro no upload de ${field.name}:`, error);
                            })
                        );
                    }
                }
            });
            
            // Upload antigo (mantido para compatibilidade)
            const documentoFrente = document.getElementById('documento-frente');
            if (documentoFrente && documentoFrente.files && documentoFrente.files[0] && !anuncioId) {
                const file = documentoFrente.files[0];
                uploadPromises.push(
                    uploadPrivateFileToStorage(file, userId, 'documento_frente').then(url => {
                        fileFields.documento_frente_url = url;
                        fileFields.documento_frente_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do documento frente:', error);
                    })
                );
            }
            
            const documentoVerso = document.getElementById('documento-verso');
            if (documentoVerso && documentoVerso.files && documentoVerso.files[0] && !anuncioId) {
                const file = documentoVerso.files[0];
                uploadPromises.push(
                    uploadPrivateFileToStorage(file, userId, 'documento_verso').then(url => {
                        fileFields.documento_verso_url = url;
                        fileFields.documento_verso_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do documento verso:', error);
                    })
                );
            }
            
            const selfieDocumento = document.getElementById('selfie-documento');
            if (selfieDocumento && selfieDocumento.files && selfieDocumento.files[0] && !anuncioId) {
                const file = selfieDocumento.files[0];
                uploadPromises.push(
                    uploadPrivateFileToStorage(file, userId, 'selfie_documento').then(url => {
                        fileFields.selfie_documento_url = url;
                        fileFields.selfie_documento_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload da selfie com documento:', error);
                    })
                );
            }
            
            const verificationVideo = document.getElementById('verification-video');
            if (verificationVideo && verificationVideo.files && verificationVideo.files[0] && !anuncioId) {
                const file = verificationVideo.files[0];
                uploadPromises.push(
                    uploadPrivateFileToStorage(file, userId, 'verification_video').then(url => {
                        fileFields.verification_video_url = url;
                        fileFields.verification_video_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do vídeo de verificação:', error);
                    })
                );
            }
            
            // Aguardar todos os uploads
            if (uploadPromises.length > 0) {
                await Promise.all(uploadPromises);
                console.log('✅ Todos os arquivos privados foram enviados com sucesso');
            }
            
            return fileFields;
        }
        
        // Função legada (mantida para compatibilidade)
        async function uploadFilesToFirebase(formElement, anuncioId) {
            const uploadPromises = [];
            const fileFields = {};
            
            // Upload de foto banner
            const bannerInput = document.getElementById('banner-photo');
            if (bannerInput && bannerInput.files && bannerInput.files[0]) {
                const file = bannerInput.files[0];
                uploadPromises.push(
                    uploadFileToStorage(file, anuncioId, 'foto_banner').then(url => {
                        fileFields.foto_banner = url;
                        fileFields.foto_banner_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do banner:', error);
                    })
                );
            }
            
            // Upload de galeria (1-9)
            for (let i = 1; i <= 9; i++) {
                const galeriaInput = document.getElementById(`galeria-photo-${i}`);
                if (galeriaInput && galeriaInput.files && galeriaInput.files[0]) {
                    const file = galeriaInput.files[0];
                    const fieldName = i === 9 ? 'foto_stories' : `galeria_${i}`;
                    uploadPromises.push(
                        uploadFileToStorage(file, anuncioId, fieldName).then(url => {
                            fileFields[fieldName] = url;
                            fileFields[`${fieldName}_name`] = file.name;
                        }).catch(error => {
                            console.error(`Erro no upload da galeria ${i}:`, error);
                        })
                    );
                }
            }
            
            // Upload de áudio (se houver)
            // Verificar ambos os IDs possíveis: audio-file-input (novo) e audio-file (legado)
            const audioInput = document.getElementById('audio-file-input') || document.getElementById('audio-file');
            if (audioInput && audioInput.files && audioInput.files[0]) {
                const file = audioInput.files[0];
                console.log('🎵 Arquivo de áudio encontrado (legado):', file.name);
                uploadPromises.push(
                    uploadFileToStorage(file, anuncioId, 'audio').then(url => {
                        console.log('✅ Áudio enviado com sucesso (legado):', url);
                        fileFields.audioUrl = url;
                        fileFields.audio_url = url; // Também salvar com nome alternativo
                        fileFields.audio_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do áudio:', error);
                    })
                );
            }
            
            // Upload de documentos de verificação (em pasta separada e segura)
            const documentoFrente = document.getElementById('documento-frente');
            if (documentoFrente && documentoFrente.files && documentoFrente.files[0]) {
                const file = documentoFrente.files[0];
                uploadPromises.push(
                    uploadFileToStorage(file, anuncioId, 'verification/documento_frente').then(url => {
                        fileFields.documento_frente_url = url;
                        fileFields.documento_frente_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do documento frente:', error);
                    })
                );
            }
            
            const documentoVerso = document.getElementById('documento-verso');
            if (documentoVerso && documentoVerso.files && documentoVerso.files[0]) {
                const file = documentoVerso.files[0];
                uploadPromises.push(
                    uploadFileToStorage(file, anuncioId, 'verification/documento_verso').then(url => {
                        fileFields.documento_verso_url = url;
                        fileFields.documento_verso_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do documento verso:', error);
                    })
                );
            }
            
            const selfieDocumento = document.getElementById('selfie-documento');
            if (selfieDocumento && selfieDocumento.files && selfieDocumento.files[0]) {
                const file = selfieDocumento.files[0];
                uploadPromises.push(
                    uploadFileToStorage(file, anuncioId, 'verification/selfie_documento').then(url => {
                        fileFields.selfie_documento_url = url;
                        fileFields.selfie_documento_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload da selfie com documento:', error);
                    })
                );
            }
            
            const verificationVideo = document.getElementById('verification-video');
            if (verificationVideo && verificationVideo.files && verificationVideo.files[0]) {
                const file = verificationVideo.files[0];
                uploadPromises.push(
                    uploadFileToStorage(file, anuncioId, 'verification/video').then(url => {
                        fileFields.verification_video_url = url;
                        fileFields.verification_video_name = file.name;
                    }).catch(error => {
                        console.error('Erro no upload do vídeo de verificação:', error);
                    })
                );
            }
            
            // Aguardar todos os uploads
            if (uploadPromises.length > 0) {
                await Promise.all(uploadPromises);
                console.log('✅ Todos os arquivos foram enviados com sucesso');
            }
            
            return fileFields;
        }
        
        // Função legada (mantida para compatibilidade)
        async function uploadFilesToFirebase(formElement, anuncioId) {
            return uploadPublicFilesToFirebase(formElement, anuncioId, null);
        }
        
        // ============================================
        // COLETA E SALVAMENTO DE DADOS DO FORMULÁRIO
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar uploads de verificação
            setupVerificationUploads();
            const cadastroForm = document.getElementById('cadastroForm');
            
            if (cadastroForm) {
                cadastroForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    try {
                        // Validar altura usando função do formValidations.js
                        const alturaInput = document.getElementById('info-altura');
                        if (alturaInput && alturaInput.value) {
                            const alturaError = document.getElementById('altura-error');
                            if (typeof validateHeight === 'function') {
                                const alturaValidation = validateHeight(alturaInput.value, alturaInput, alturaError);
                                if (!alturaValidation.valid) {
                                    alert('Por favor, corrija os erros no campo de Altura antes de continuar.');
                                    alturaInput.focus();
                                    return;
                                }
                            }
                        }
                        
                        // Validar Formas de Pagamento
                        const pagamentoCheckboxesSubmit = document.querySelectorAll('input[name="pagamento"]');
                        const pagamentoChecked = Array.from(pagamentoCheckboxesSubmit).some(cb => cb.checked);
                        if (!pagamentoChecked) {
                            alert('Por favor, selecione pelo menos uma forma de pagamento');
                            return;
                        }
                        
                        // Validar nome do anúncio
                        const profileName = document.getElementById('profile-name')?.value?.trim();
                        if (!profileName) {
                            alert('⚠️ Por favor, preencha o nome do anúncio.');
                            document.getElementById('profile-name')?.focus();
                            return;
                        }
                        
                        // Validar serviços - pelo menos 1 em cada seção
                        const serviceCategories = [
                            { name: 'Serviços Virtuais Principais', selector: '.services-category:nth-of-type(1) input[type="checkbox"]' },
                            { name: 'Fantasias e Atividades Virtuais', selector: '.services-category:nth-of-type(2) input[type="checkbox"]' },
                            { name: 'Conteúdos para Venda', selector: '.services-category:nth-of-type(3) input[type="checkbox"]' },
                            { name: 'Fetichismo e BDSM Virtual', selector: '.services-category:nth-of-type(4) input[type="checkbox"]' },
                            { name: 'Fantasias e Figurinos', selector: '.services-category:nth-of-type(5) input[type="checkbox"]' },
                            { name: 'Perfil e Estilo', selector: '.services-category:nth-of-type(6) input[type="checkbox"]' },
                            { name: 'Atendimento', selector: '.services-category:nth-of-type(7) input[type="checkbox"]' },
                            { name: 'Serviços Extras', selector: '.services-category:nth-of-type(8) input[type="checkbox"]' }
                        ];
                        
                        const missingServices = [];
                        serviceCategories.forEach(category => {
                            const checkboxes = document.querySelectorAll(category.selector);
                            const checked = Array.from(checkboxes).some(cb => cb.checked);
                            if (!checked) {
                                missingServices.push(category.name);
                            }
                        });
                        
                        if (missingServices.length > 0) {
                            alert(`⚠️ Por favor, selecione pelo menos 1 opção em cada seção de serviços:\n\n${missingServices.join('\n')}`);
                            return;
                        }
                        
                        // Obter gênero e categoria do localStorage (salvos na página de seleção)
                        const selectedCategory = localStorage.getItem('selectedCategory') || localStorage.getItem('userCategory') || '';
                        const selectedCategoria = localStorage.getItem('selectedCategoria') || localStorage.getItem('userCategoria') || 'sexo-virtual';
                        
                        console.log('📝 Coletando dados do formulário...');
                        console.log('👤 Gênero selecionado:', selectedCategory);
                        console.log('📂 Categoria selecionada:', selectedCategoria);
                        
                        // Coletar dados do formulário
                        const formData = new FormData(cadastroForm);
                        const data = {};
                        
                        // Dados básicos
                        data.nome = document.getElementById('profile-name')?.value || '';
                        data.descricao = document.getElementById('description-text')?.value || '';
                        
                        // Informações pessoais
                        data.idade = document.getElementById('info-idade')?.value || '';
                        data.peso = document.getElementById('info-peso')?.value || '';
                        data.altura = document.getElementById('info-altura')?.value || '';
                        
                        // Contato
                        data.whatsapp_number = document.getElementById('whatsapp')?.value || '';
                        
                        // Localização (detectada automaticamente pelo DDD do WhatsApp)
                        data.estado = document.getElementById('estado')?.value || null;
                        data.cidade = document.getElementById('cidade')?.value || null;
                        
                        // Horário de atendimento
                        const horario24hSim = document.getElementById('horario-24h-sim');
                        const horario24hNao = document.getElementById('horario-24h-nao');
                        if (horario24hSim && horario24hSim.checked) {
                            data.horario_atendimento = '24h';
                        } else if (horario24hNao && horario24hNao.checked) {
                            const horarioInicio = document.getElementById('horario-inicio')?.value || '';
                            const horarioFim = document.getElementById('horario-fim')?.value || '';
                            data.horario_atendimento = `${horarioInicio} - ${horarioFim}`;
                        }
                        
                        // Formas de pagamento
                        const pagamentoCheckboxes = document.querySelectorAll('.pagamento-checkbox:checked');
                        data.formas_pagamento = Array.from(pagamentoCheckboxes).map(cb => cb.value);
                        
                        // Serviços
                        // IMPORTANTE: Os checkboxes têm name="servicos[]", então precisamos buscar com os colchetes
                        const servicosCheckboxes = document.querySelectorAll('input[name="servicos[]"]:checked');
                        data.servicos = Array.from(servicosCheckboxes).map(cb => cb.value);
                        
                        // Logs detalhados para debug
                        console.log('📋 SERVIÇOS - Checkboxes encontrados:', servicosCheckboxes.length);
                        console.log('📋 SERVIÇOS - Array criado:', data.servicos);
                        console.log('📋 SERVIÇOS - Tipo:', typeof data.servicos);
                        console.log('📋 SERVIÇOS - É array?', Array.isArray(data.servicos));
                        console.log('📋 SERVIÇOS - Tamanho:', data.servicos.length);
                        console.log('📋 SERVIÇOS - Conteúdo completo:', JSON.stringify(data.servicos, null, 2));
                        
                        // Verificar cada checkbox individualmente
                        servicosCheckboxes.forEach((cb, index) => {
                            console.log(`📋 SERVIÇOS - Checkbox ${index + 1}:`, {
                                value: cb.value,
                                name: cb.name,
                                checked: cb.checked,
                                id: cb.id
                            });
                        });
                        
                        // VALIDAÇÃO: Verificar se pelo menos 1 serviço foi selecionado em cada categoria
                        const categoriasServicos = {
                            'Serviços Virtuais Principais': ['videochamada', 'chamada-video', 'sexting', 'mostro-rosto', 'cara-a-cara', 'ligacao-previa', 'atendimento-24h'],
                            'Fantasias e Atividades Virtuais': ['striptease', 'masturbacao', 'masturbacao-interativa', 'squirting', 'sexo-oral-virtual', 'penetracao-virtual', 'sexo-anal-virtual', 'chuva-dourada', 'avaliar-penis', 'falar-sujo', 'jogos-papeis', 'jogos-eroticos'],
                            'Conteúdos para Venda': ['packs-fotos', 'packs-videos', 'videos-personalizados', 'audios-eroticos', 'audios-personalizados', 'roupa-intima', 'conteudos-exclusivos'],
                            'Fetichismo e BDSM Virtual': ['dominacao', 'dominacao-virtual', 'humilhacao', 'punheta-guiada', 'podolatria', 'fetichismo', 'inversao', 'anal-sem-frescura', 'brinquedos-sexuais', 'vibrador-controlado', 'plug-anal', 'dupla-penetracao'],
                            'Fantasias e Figurinos': ['fantasias', 'figurinos', 'disfarces', 'lingerie', 'cosplay'],
                            'Perfil e Estilo': ['estilo-namoradinha', 'estilo-ninfeta', 'estilo-princesinha', 'sem-frescura', 'ativa', 'passiva', 'versatil', 'inversao-papeis'],
                            'Atendimento': ['atendo-homens', 'atendo-mulheres', 'atendo-casais', 'atendo-trans', 'atendo-nao-binarios', 'chamadas-individuais', 'chamadas-com-amigas', 'participacao-ativa-cliente'],
                            'Serviços Extras': ['sem-limite', 'sexcam', 'camgirl', 'qualidade-hd', 'iluminacao-profissional', 'interacao-natural']
                        };
                        
                        const categoriasSemServicos = [];
                        Object.keys(categoriasServicos).forEach(categoriaNome => {
                            const servicosDaCategoria = categoriasServicos[categoriaNome];
                            const temServicoSelecionado = servicosDaCategoria.some(servico => data.servicos.includes(servico));
                            if (!temServicoSelecionado) {
                                categoriasSemServicos.push(categoriaNome);
                            }
                        });
                        
                        if (categoriasSemServicos.length > 0) {
                            alert(`⚠️ ATENÇÃO!\n\nVocê deve selecionar pelo menos 1 serviço em cada categoria:\n\n${categoriasSemServicos.join('\n')}\n\nPor favor, selecione pelo menos um serviço em cada categoria antes de salvar.`);
                            return; // Parar o salvamento
                        }
                        
                        // Cachês
                        const cacheAcombinar = document.getElementById('cache-acombinar');
                        const cacheEditar = document.getElementById('cache-editar');
                        if (cacheAcombinar && cacheAcombinar.checked) {
                            data.cache = 'A combinar';
                        } else if (cacheEditar && cacheEditar.checked) {
                            const cacheData = [];
                            for (let i = 1; i <= 5; i++) {
                                const minutos = document.getElementById(`cache_minutos_${i}`)?.value;
                                const preco = document.getElementById(`cache_preco_${i}`)?.value;
                                if (minutos && preco) {
                                    cacheData.push(`${minutos} min: R$ ${preco}`);
                                }
                            }
                            data.cache = cacheData.join(', ');
                        }
                        
                        // IMPORTANTE: Salvar gênero e categoria para que o anúncio apareça na página correta
                        data.gender = selectedCategory; // mulher, trans, homem, mulher-luxo
                        data.category = selectedCategoria; // sexo-virtual
                        data.type = selectedCategoria; // sexo-virtual
                        data.categoria = selectedCategoria; // sexo-virtual
                        
                        // Mapear gênero para a página de listagem correta
                        const genderPageMap = {
                            'mulher': 'A_02__premium_copy.html',
                            'trans': 'A_02__premium_trans_copy.html',
                            'homem': 'A_02__premium_homens_copy.html',
                            'mulher-luxo': 'luxo.html'
                        };
                        data.returnPage = genderPageMap[selectedCategory] || 'A_02__premium_copy.html';
                        
                        // Timestamps
                        data.created_at = new Date().toISOString();
                        data.updated_at = new Date().toISOString();
                        if (firebase.firestore && firebase.firestore.FieldValue) {
                            data.createdAt = firebase.firestore.FieldValue.serverTimestamp();
                            data.updatedAt = firebase.firestore.FieldValue.serverTimestamp();
                        }
                        
                        // Status
                        data.status = 'active';
                        data.isActive = true;
                        data.isPublic = true;
                        
                        // Verificação
                        const verificacaoRadio = document.querySelector('input[name="verificacao"]:checked');
                        data.verificacao = verificacaoRadio ? verificacaoRadio.value : 'depois';
                        data.verificacao_status = data.verificacao === 'sim' ? 'pendente' : 'nao_solicitada';
                        data.verificacao_data = new Date().toISOString();
                        
                        // Obter userId (do usuário autenticado ou gerar um temporário)
                        // Usar firebase.auth() diretamente para evitar erro de inicialização
                        const currentAuth = typeof firebase !== 'undefined' && firebase.auth ? firebase.auth() : null;
                        const currentUser = currentAuth ? currentAuth.currentUser : null;
                        const userId = currentUser ? currentUser.uid : `temp_${Date.now()}`;
                        data.userId = userId;
                        data.userEmail = currentUser ? currentUser.email : null;
                        
                        // SEPARAÇÃO DE DADOS PÚBLICOS E PRIVADOS
                        // Dados públicos (para coleção 'anuncios')
                        const publicData = {
                            // Informações básicas públicas
                            nome: data.nome,
                            descricao: data.descricao,
                            idade: data.idade,
                            peso: data.peso,
                            altura: data.altura,
                            
                            // Localização (pode ser público) - usar null em vez de undefined
                            cidade: data.cidade || null,
                            estado: data.estado || null,
                            bairro: data.bairro || null,
                            
                            // Serviços e categorias
                            servicos: data.servicos,
                            cache: data.cache,
                            formas_pagamento: data.formas_pagamento,
                            horario_atendimento: data.horario_atendimento,
                            
                            // Categorias
                            gender: data.gender,
                            category: data.category,
                            type: data.type,
                            categoria: data.categoria,
                            
                            // Status e timestamps
                            status: data.status,
                            isActive: data.isActive,
                            isPublic: data.isPublic,
                            verificacao: data.verificacao,
                            verificacao_status: data.verificacao_status,
                            
                            // Timestamps
                            created_at: data.created_at,
                            updated_at: data.updated_at,
                            createdAt: data.createdAt,
                            updatedAt: data.updatedAt,
                            
                            // Referência ao usuário (apenas ID, não dados sensíveis)
                            userId: userId,
                            returnPage: data.returnPage
                        };
                        
                        // Dados privados (para coleção 'privateAdvertiserData')
                        const privateData = {
                            // Dados sensíveis
                            whatsapp_number: data.whatsapp_number,
                            
                            // Dados de verificação (serão adicionados após upload)
                            documento_frente_url: null,
                            documento_verso_url: null,
                            selfie_documento_url: null,
                            verification_video_url: null,
                            
                            // Metadados
                            verificacao_data: data.verificacao_data,
                            createdAt: data.createdAt,
                            updatedAt: data.updatedAt
                        };
                        
                        // Função auxiliar para remover campos undefined (Firestore não aceita undefined)
                        function removeUndefinedFields(obj) {
                            const cleaned = {};
                            for (const key in obj) {
                                if (obj[key] !== undefined) {
                                    cleaned[key] = obj[key];
                                }
                            }
                            return cleaned;
                        }
                        
                        // Limpar campos undefined antes de salvar
                        const cleanedPublicData = removeUndefinedFields(publicData);
                        const cleanedPrivateData = removeUndefinedFields(privateData);
                        
                        // Log completo do objeto antes de salvar
                        console.log('📦 DADOS PÚBLICOS:', cleanedPublicData);
                        console.log('🔒 DADOS PRIVADOS:', cleanedPrivateData);
                        console.log('📦 TODOS OS CAMPOS DO OBJETO DATA:', Object.keys(data));
                        
                        console.log('✅ Dados coletados e separados:', { publicData: cleanedPublicData, privateData: cleanedPrivateData });
                        
                        // Verificar se Firebase está inicializado
                        if (typeof firebase === 'undefined' || !firebase.firestore) {
                            throw new Error('Firebase não inicializado. Aguarde alguns instantes e tente novamente.');
                        }
                        
                        const db = firebase.firestore();
                        // Usar firebase.auth() diretamente para evitar erro de inicialização
                        const authInstance = typeof firebase !== 'undefined' && firebase.auth ? firebase.auth() : null;
                        
                        // Tentar autenticação anônima se não houver usuário autenticado
                        if (authInstance && !authInstance.currentUser) {
                            console.log('🔐 Nenhum usuário autenticado, tentando autenticação anônima...');
                            try {
                                await authInstance.signInAnonymously();
                                console.log('✅ Autenticação anônima realizada com sucesso');
                            } catch (authError) {
                                console.warn('⚠️ Erro na autenticação anônima:', authError);
                                // Continuar mesmo sem autenticação (depende das regras do Firestore)
                            }
                        }
                        
                        // Mostrar loading no botão
                        const submitBtn = document.getElementById('submit-cadastro-btn');
                        const originalBtnText = submitBtn.innerHTML;
                        submitBtn.disabled = true;
                        submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Salvando...';
                        
                        try {
                            // Tentar salvar na coleção 'advertisements' primeiro, se falhar, tentar 'anuncios'
                            let docRef;
                            try {
                                console.log('💾 SALVANDO NO FIREBASE - Estrutura Separada');
                                
                                // 1. Salvar dados públicos na coleção 'anuncios'
                                console.log('📝 Salvando dados públicos em "anuncios"...');
                                docRef = await db.collection('anuncios').add(cleanedPublicData);
                                const anuncioId = docRef.id;
                                console.log('✅ Dados públicos salvos na coleção "anuncios" com ID:', anuncioId);
                                
                                // 2. Salvar dados privados na coleção 'privateAdvertiserData'
                                console.log('🔒 Salvando dados privados em "privateAdvertiserData"...');
                                const privateDataRef = db.collection('privateAdvertiserData').doc(userId);
                                await privateDataRef.set({
                                    ...cleanedPrivateData,
                                    anuncioId: anuncioId, // Referência ao anúncio público
                                    userId: userId
                                }, { merge: true });
                                console.log('✅ Dados privados salvos em "privateAdvertiserData" para userId:', userId);
                                
                                // 3. Fazer upload de arquivos públicos (banner, galeria, áudio, vídeo)
                                console.log('📁 Fazendo upload de arquivos públicos...');
                                const publicFileFields = await uploadPublicFilesToFirebase(cadastroForm, anuncioId, userId);
                                
                                // 4. Fazer upload de arquivos privados (documentos de verificação)
                                console.log('🔒 Fazendo upload de arquivos privados...');
                                const privateFileFields = await uploadPrivateFilesToFirebase(cadastroForm, userId, anuncioId);
                                
                                // 5. Atualizar documento público com URLs dos arquivos públicos
                                if (Object.keys(publicFileFields).length > 0) {
                                    await docRef.update(publicFileFields);
                                    console.log('✅ URLs dos arquivos públicos atualizadas no documento');
                                }
                                
                                // 6. Atualizar documento privado com URLs dos arquivos privados
                                if (Object.keys(privateFileFields).length > 0) {
                                    await privateDataRef.update(privateFileFields);
                                    console.log('✅ URLs dos arquivos privados atualizadas no documento');
                                }
                                
                                // Verificar o que foi realmente salvo
                                setTimeout(async () => {
                                    const docSalvo = await db.collection('anuncios').doc(anuncioId).get();
                                    if (docSalvo.exists) {
                                        const dadosSalvos = docSalvo.data();
                                        console.log('🔍 VERIFICAÇÃO PÓS-SALVAMENTO (Público):');
                                        console.log('🔍 servicos no banco:', dadosSalvos.servicos);
                                        console.log('🔍 servicos type:', typeof dadosSalvos.servicos);
                                        console.log('🔍 servicos isArray:', Array.isArray(dadosSalvos.servicos));
                                        console.log('🔍 servicos length:', dadosSalvos.servicos ? dadosSalvos.servicos.length : 0);
                                    }
                                }, 2000);
                            } catch (collectionError) {
                                console.warn('⚠️ Erro ao salvar com estrutura separada, tentando método antigo...', collectionError);
                                // Fallback: tentar método antigo
                                try {
                                    docRef = await db.collection('anuncios').add(data);
                                    const fileFields = await uploadFilesToFirebase(cadastroForm, docRef.id);
                                    if (Object.keys(fileFields).length > 0) {
                                        await docRef.update(fileFields);
                                    }
                                } catch (fallbackError) {
                                    throw collectionError; // Lançar erro original
                                }
                            }
                            
                            // Mostrar mensagem de sucesso
                            alert('✅ Anúncio criado com sucesso!');
                            
                            // Redirecionar para a página de listagem baseada no gênero após 2 segundos
                            setTimeout(() => {
                                window.location.href = data.returnPage;
                            }, 2000);
                            
                        } catch (error) {
                            console.error('❌ Erro ao salvar no Firebase:', error);
                            
                            let errorMessage = '❌ Erro ao criar anúncio: ' + error.message;
                            
                            // Mensagem específica para erro de permissões
                            if (error.code === 'permission-denied' || error.message.includes('permissions')) {
                                errorMessage += '\n\n⚠️ Erro de permissões do Firebase.\n';
                                errorMessage += 'Possíveis soluções:\n';
                                errorMessage += '1. Verifique as regras de segurança do Firestore\n';
                                errorMessage += '2. Certifique-se de que a autenticação está configurada\n';
                                errorMessage += '3. Verifique se a coleção "advertisements" ou "anuncios" existe\n';
                                errorMessage += '\nVerifique o console (F12) para mais detalhes.';
                            }
                            
                            alert(errorMessage);
                            // Restaurar botão em caso de erro
                            submitBtn.disabled = false;
                            submitBtn.innerHTML = originalBtnText;
                        }
                        
                    } catch (error) {
                        console.error('❌ Erro ao processar formulário:', error);
                        alert('Erro ao processar formulário: ' + error.message);
                    }
                });
            }
        });
    </script>
</body>
</html>
