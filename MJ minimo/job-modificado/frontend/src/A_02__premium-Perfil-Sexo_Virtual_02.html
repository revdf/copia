<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil - Mans√£o do Job (Modo Configura√ß√£o)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <!-- Firebase Config -->
    <script src="firebase-config.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@7/dist/wavesurfer.min.js"></script>
    <style>
        :root {
            --primary-color: #dc3545;
            --secondary-color: #6c757d;
            --accent-color: #ffc107;
            --bg-light: #f8f9fa;
            --bg-white: #ffffff;
            --text-dark: #212529;
            --text-muted: #6c757d;
            --border-color: #dee2e6;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 4px 20px rgba(0, 0, 0, 0.15);
            --purple-bg: #efeefa;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Efeito de fundo fixo transl√∫cido */
        .page-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: blur(8px) brightness(0.3);
            z-index: -2;
            transform: scale(1.1); /* Evita bordas brancas do blur */
        }

        .content-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
            pointer-events: none;
        }


        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: var(--text-dark);
            line-height: 1.6;
            padding-top: 0; /* Removido padding para banner de configura√ß√£o */
            margin: 0;
            padding-bottom: 100px; /* Espa√ßo para a barra fixa */
            width: 100%;
            overflow-x: auto;
            min-width: 320px;
            position: relative;
            transition: filter 0.3s ease;
        }

        /* Bloquear scroll quando modal estiver aberto */
        body.modal-open {
            overflow: hidden;
            filter: blur(2px);
        }

        /* Background com screenshot da p√°gina anterior */
        .page-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            filter: blur(2px) brightness(0.7);
        }

        /* Overlay escuro apenas sobre o conte√∫do central */
        .content-overlay {
            position: fixed;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 1200px;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 0;
            cursor: pointer;
            transition: all 0.3s ease;
            pointer-events: none;
            backdrop-filter: blur(1px);
        }

        .content-overlay:hover {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(2px);
        }




        /* Header espec√≠fico para esta p√°gina */
        #cabecalho.header {
            background: var(--bg-white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1001; /* Acima do banner */
            width: 100%;
            height: 2cm; /* Metade da altura (2cm) */
            display: flex;
            align-items: center;
            justify-content: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        #cabecalho .contem {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            box-sizing: border-box;
        }
        
        #cabecalho .header-logo-text {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-color);
            flex: 1;
            text-align: left;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        
        #cabecalho .ficha-header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-left: auto;
        }
        
        /* Menu Container - Mesma largura do header e formul√°rio */
        .menu-container-wrapper {
            width: 100%;
            max-width: 1200px;
            margin: 1rem auto;
            padding: 0 2rem;
            box-sizing: border-box;
        }
        
        /* Menu Fullscreen Style - Dispon√≠vel em todas as resolu√ß√µes */
        .menu-topo-mobile {
            display: block;
            position: relative;
            width: 100%;
        }
        
        .nav {
            display: flex;
            justify-content: flex-end;
            align-items: center;
        }
        
        .menu-topo-mobile {
            pointer-events: auto;
        }
        
        .menu-topo-mobile a {
            pointer-events: none;
        }
        
        /* Hamburger Menu Button - Estilo CodePen com caixa vermelha */
        .toggle-menu {
            background-color: var(--primary-color);
            border: none;
            cursor: pointer;
            display: flex;
            height: auto;
            outline: none;
            padding: 0.75rem 1.5rem;
            pointer-events: initial;
            position: relative;
            vertical-align: middle;
            z-index: 1110;
            align-items: center;
            justify-content: space-between;
            color: white;
            font-weight: 600;
            font-size: 1rem;
            transition: background-color 0.3s ease;
            box-sizing: border-box;
            width: 100%;
        }
        
        /* Desktop: bot√£o ocupa toda largura do container (mesma do header) */
        @media (min-width: 1025px) {
            .toggle-menu {
                width: 100%;
                padding: 0.75rem 1.5rem;
                border-radius: 0;
            }
            
            .menu-topo-mobile {
                display: block;
                width: 100%;
            }
        }
        
        .toggle-menu:hover {
            background-color: #c82333;
        }
        
        .hamburger-icon {
            background-color: white;
            content: "";
            display: block;
            height: 3px;
            position: relative;
            transform-origin: center;
            transition: background-color 0.3s ease, transform 0.3s ease;
            width: 30px;
            border-radius: 2px;
            flex-shrink: 0;
        }
        
        .hamburger-icon:before,
        .hamburger-icon:after {
            background-color: white;
            content: "";
            display: block;
            height: 3px;
            position: absolute;
            left: 0;
            transform-origin: center;
            transition: transform 0.3s ease, top 0.3s ease;
            width: 30px;
            border-radius: 2px;
        }
        
        .hamburger-icon:before {
            top: -10px;
        }
        
        .hamburger-icon:after {
            top: 10px;
        }
        
        .toggle-menu.active .hamburger-icon {
            background-color: transparent;
        }
        
        .toggle-menu.active .hamburger-icon:before {
            top: 0;
            transform: rotate(45deg);
        }
        
        .toggle-menu.active .hamburger-icon:after {
            top: 0;
            transform: rotate(-45deg);
        }
        
        .menu-text {
            color: white;
            font-weight: 600;
            font-size: 1rem;
            margin-left: auto;
            flex-shrink: 0;
            padding-left: 1rem;
        }
        
        .toggle-menu {
            gap: 0.5rem;
        }
        
        /* Fullscreen Menu - Estilo CodePen */
        #menu {
            background: var(--primary-color);
            height: 100vh;
            left: 0;
            opacity: 0;
            overflow: hidden;
            position: fixed;
            text-align: center;
            top: 0;
            transition: opacity 0.7s ease-in-out, visibility 0.7s ease-in-out;
            visibility: hidden;
            width: 100%;
            z-index: 1100;
        }
        
        #menu.open {
            opacity: 1;
            visibility: visible;
        }
        
        #menu.open .main-nav li {
            animation-duration: 0.8s;
            animation-fill-mode: both;
            animation-name: fadeInUp;
        }
        
        #menu.open .main-nav li:nth-child(1) { animation-delay: 0.1s; }
        #menu.open .main-nav li:nth-child(2) { animation-delay: 0.15s; }
        #menu.open .main-nav li:nth-child(3) { animation-delay: 0.2s; }
        #menu.open .main-nav li:nth-child(4) { animation-delay: 0.25s; }
        #menu.open .main-nav li:nth-child(5) { animation-delay: 0.3s; }
        #menu.open .main-nav li:nth-child(6) { animation-delay: 0.35s; }
        #menu.open .main-nav li:nth-child(7) { animation-delay: 0.4s; }
        #menu.open .main-nav li:nth-child(8) { animation-delay: 0.45s; }
        #menu.open .main-nav li:nth-child(9) { animation-delay: 0.5s; }
        
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.5;
                transform: scale(1.1);
            }
        }

        .audio-action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2) !important;
        }

        .audio-action-btn:active {
            transform: translateY(0);
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translate3d(0, 30px, 0);
            }
            to {
                opacity: 1;
                transform: translate3d(0, 0, 0);
            }
        }
        
        #menu .main-nav {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            max-width: 600px;
        }
        
        #menu .main-nav ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }
        
        #menu .main-nav ul:hover a {
            opacity: 0.6;
        }
        
        #menu .main-nav > ul > li {
            margin: 0.5rem 0;
        }
        
        #menu .main-nav a {
            -webkit-transform: translateZ(0);
            transform: translateZ(0);
            transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
            color: #ffffff;
            display: block;
            font-size: 2.5rem;
            font-weight: 700;
            padding: 1rem 2rem;
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 2px;
        }
        
        #menu .main-nav a:hover {
            opacity: 1 !important;
            transform: translateX(10px);
        }
        
        #menu .main-nav .parent-item {
            position: relative;
        }
        
        #menu .main-nav .parent-link {
            cursor: pointer;
        }
        
        #menu .main-nav .parent-link::after {
            content: " ‚ñº";
            font-size: 1.5rem;
            margin-left: 1rem;
            transition: transform 0.3s ease;
            display: inline-block;
        }
        
        #menu .main-nav .parent-item.active .parent-link::after {
            transform: rotate(180deg);
        }
        
        #menu .main-nav .submenu {
            display: none;
            list-style: none;
            margin: 0;
            padding: 0;
            margin-top: 0.5rem;
            padding-left: 2rem;
        }
        
        #menu .main-nav .parent-item.active .submenu {
            display: block;
        }
        
        #menu .main-nav .submenu li {
            margin: 0.3rem 0;
        }
        
        #menu .main-nav .submenu li a {
            font-size: 1.8rem;
            padding: 0.5rem 1rem;
            opacity: 0.85;
            font-weight: 500;
            letter-spacing: 1px;
        }
        
        #menu .main-nav .submenu li a:hover {
            opacity: 1 !important;
        }
        
        @media (max-width: 1024px) {
            /* Layout mobile/tablet: menu ocupa toda largura */
            .menu-container-wrapper {
                padding: 0 1rem;
            }
            
            #profile-view-container {
                padding: 0 1rem !important;
            }
            
            .menu-topo-mobile {
                width: 100%;
            }
            
            .toggle-menu {
                width: 100%;
                border-radius: 0;
            }
            
            #cabecalho .contem {
                flex-direction: column;
                justify-content: center;
                align-items: center;
                padding: 0.5rem 1rem;
                position: relative;
            }
            
            #cabecalho .header-logo-text {
                font-size: 1.5rem;
                margin: 0;
                width: 100%;
                text-align: center;
            }
            
            #cabecalho.header {
                height: auto;
                min-height: auto;
                padding: 0.75rem 0;
            }
        }
        
        /* Bloco de informa√ß√µes mobile/tablet - vis√≠vel apenas em telas menores */
        .mobile-info-box {
            display: none !important;
        }
        
        /* Ocultar vers√£o desktop em mobile/tablet */
        @media (max-width: 1024px) {
            .mobile-info-box {
                display: block !important;
            }
            
            /* Ocultar a primeira ficha-column-box (vers√£o desktop) em mobile/tablet */
            .ficha-column:last-child > .ficha-column-box:nth-of-type(1) {
                display: none !important;
            }
        }
        
        /* Mostrar vers√£o desktop apenas em telas maiores */
        @media (min-width: 1025px) {
            .mobile-info-box {
                display: none !important;
            }
            
            .ficha-column:last-child > .ficha-column-box:nth-of-type(1) {
                display: flex !important;
            }
        }
        
        @media (max-width: 768px) {
            #cabecalho.header {
                height: auto;
                min-height: auto;
                padding: 0.5rem 0;
            }
            
            #cabecalho .header-logo-text {
                font-size: 1.3rem;
            }
            
            .toggle-menu {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            
            .hamburger-icon {
                width: 26px;
            }
            
            .hamburger-icon:before,
            .hamburger-icon:after {
                width: 26px;
            }
            
            .menu-text {
                font-size: 0.9rem;
            }
            
            #menu .main-nav a {
                font-size: 2rem;
                padding: 0.8rem 1.5rem;
            }
            
            #menu .main-nav .submenu li a {
                font-size: 1.5rem;
            }
        }

        /* Header dentro da √°rea √∫til */
        .ficha-fixed-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        /* Container do header com mesmo tamanho do fixed-bottom */
        .ficha-header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 1rem; /* Mesmo padding do fixed-bottom */
            box-sizing: border-box;
        }

        .ficha-fixed-header header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            box-sizing: border-box;
        }

        .navbar-brand {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-color);
            text-decoration: none;
        }

        .ficha-header-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .ficha-contextual-button {
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }

        .close-btn {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            cursor: pointer;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .close-btn:hover {
            background: #c82333;
        }

        .ficha-top-line {
            background: var(--primary-color);
            color: white;
            padding: 0.5rem 2rem;
            text-align: center;
        }

        .localization {
            font-size: 0.9rem;
        }

        .localization a {
            color: inherit;
            text-decoration: none;
        }

        /* Container Principal */
        .ficha-column-container {
            display: flex;
            flex-direction: column;
            max-width: 1200px;
            margin: 0 auto;
            min-height: calc(100vh - 158px);
            padding: 1rem; /* Mesmo padding do fixed-bottom e header */
            gap: 1rem;
            width: 100%;
            box-sizing: border-box;
            justify-content: flex-start;
            position: relative;
            z-index: 1;
        }

        /* Grid das colunas */
        .ficha-columns-grid {
            display: flex;
            gap: 1rem;
            flex: 1;
            align-items: flex-start;
            height: calc(100vh - 158px);
        }

        .ficha-column {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            padding: 0;
        }

        .ficha-column:first-child {
            width: 60%;
            max-width: 720px;
            background: var(--bg-white);
            border-radius: 10px;
            padding: 1rem;
            box-shadow: var(--shadow);
            /* Estiliza√ß√£o da scrollbar */
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) rgba(0, 0, 0, 0.1);
        }

        .ficha-column:first-child::-webkit-scrollbar {
            width: 8px;
        }

        .ficha-column:first-child::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }

        .ficha-column:first-child::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        .ficha-column:first-child::-webkit-scrollbar-thumb:hover {
            background: #c82333;
        }

        .ficha-column:last-child {
            width: 40%;
            max-width: 480px;
            background: var(--purple-bg);
            border-radius: 10px;
            padding: 1rem;
            box-shadow: var(--shadow);
            /* Estiliza√ß√£o da scrollbar */
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) rgba(0, 0, 0, 0.1);
        }

        .ficha-column:last-child::-webkit-scrollbar {
            width: 8px;
        }

        .ficha-column:last-child::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.05);
            border-radius: 10px;
        }

        .ficha-column:last-child::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 10px;
        }

        .ficha-column:last-child::-webkit-scrollbar-thumb:hover {
            background: #c82333;
        }

        /* Swiper Principal */
        .ficha-images-slider-container {
            position: relative;
            margin-bottom: 1rem;
        }

        .ficha-images-slider {
            height: 70vh;
            border-radius: 15px;
            overflow: hidden;
        }

        .ficha-images-slider .swiper-slide {
            text-align: center;
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ficha-images-slider .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
            max-width: 100%;
            max-height: 100%;
        }

        .ficha-media-expand-icon {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 30px;
            height: 30px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
        }

        /* Swiper Thumbnails */
        .ficha-images-thumbnail-slider {
            height: 80px;
            margin-top: 1rem;
            display: none; /* Esconder thumbnails j√° que s√≥ temos uma foto */
        }

        .ficha-images-thumbnail-slider .swiper-slide {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            opacity: 0.6;
            transition: opacity 0.3s;
        }

        .ficha-images-thumbnail-slider .swiper-slide-thumb-active {
            opacity: 1;
        }

        .ficha-images-thumbnail-slider .swiper-slide img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* Pagina√ß√£o - Escondida j√° que s√≥ temos uma foto */
        .swiper-pagination {
            display: none;
        }

        /* Navega√ß√£o - Escondida j√° que s√≥ temos uma foto */
        .swiper-button-next,
        .swiper-button-prev {
            display: none;
        }

        .swiper-button-next:after,
        .swiper-button-prev:after {
            font-size: 18px;
        }

        /* Se√ß√£o de Fotos */
        .ficha-column-box {
            background: var(--bg-white);
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
        }

        .ficha-column-box h4 {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: var(--text-dark);
            font-size: 1.2rem;
        }

        .ficha-column-box h4 img {
            width: 20px;
            height: 20px;
        }

        /* Grid de Fotos */
        .ficha-media-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .ficha-media-item-container {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.3s;
            min-height: 380px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
        }

        .ficha-media-item-container:hover {
            transform: scale(1.02);
        }

        .ficha-media-item {
            width: 100%;
            height: 380px;
            object-fit: cover;
            object-position: center;
            min-width: 100%;
            min-height: 100%;
        }

        .ficha-media-item-counter {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.25rem 0.5rem;
            border-radius: 15px;
            font-size: 0.8rem;
        }

        .ficha-media-share-icon,
        .ficha-media-expand-icon {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 24px;
            height: 24px;
            background: rgba(0, 0, 0, 0.7);
            border-radius: 50%;
            cursor: pointer;
            z-index: 10;
        }

        /* Informa√ß√µes do Perfil */
        .ficha-favorites-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            cursor: pointer;
            z-index: 10;
        }

        .ficha-favorites-btn img {
            width: 30px;
            height: 30px;
        }

        .ficha-column-box h1 {
            font-size: 2rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }
        
        /* Input do nome do perfil */
        .profile-name-input {
            font-size: 1.8rem !important;
            font-weight: bold !important;
            border: 2px solid transparent !important;
            border-radius: 8px !important;
            padding: 0.5rem 1rem !important;
            background: transparent !important;
            color: var(--text-dark) !important;
            transition: all 0.3s !important;
            width: 100% !important;
            margin-bottom: 0.5rem !important;
        }
        
        .profile-name-input:focus {
            outline: none !important;
            border-color: var(--primary-color) !important;
            background: rgba(220, 53, 69, 0.05) !important;
        }
        
        .profile-name-input:hover {
            border-color: rgba(220, 53, 69, 0.3) !important;
        }
        
        .profile-name-char-counter {
            position: absolute;
            bottom: -20px;
            right: 0;
            font-size: 0.75rem;
            color: #666;
        }
        
        .profile-name-char-counter.warning {
            color: #ffc107;
        }
        
        .profile-name-char-counter.danger {
            color: var(--primary-color);
        }

        .fecha-creacion {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-muted);
            margin-bottom: 1rem;
            font-size: 0.9rem;
        }

        .fecha-creacion img {
            width: 16px;
            height: 16px;
        }

        /* Cach√™s */
        .ficha-tarifas {
            width: 100%;
        }

        .ficha-tarifas h4 {
            margin-bottom: 1rem;
            color: var(--text-dark);
            font-size: 1.3rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .ficha-tarifas h4::before {
            content: "üí∞";
            font-size: 1.2rem;
        }

        .ficha-tarifas ul {
            list-style: none;
            padding: 0;
        }

        .ficha-tarifas li {
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .ficha-tarifas li:last-child {
            border-bottom: none;
        }

        /* Container de exibi√ß√£o de cach√™s */
        #cache-display-container,
        #cache-display-container-mobile {
            width: 100%;
            margin-top: 1rem;
        }

        #cache-display,
        #cache-display-mobile {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
            width: 100%;
        }
        
        /* Campos de Cach√™ Edit√°veis */
        .cache-options {
            margin-bottom: 1.5rem;
        }
        
        .cache-options label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
            cursor: pointer;
            font-weight: 500;
        }
        
        .cache-options input[type="radio"] {
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        
        .cache-fields {
            margin-top: 1rem;
        }
        
        .cache-field-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            margin-bottom: 0.75rem;
            align-items: center;
        }
        
        .cache-minutos-input,
        .cache-preco-input {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .cache-minutos-input:focus,
        .cache-preco-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.1);
        }
        
        .cache-minutos-input:disabled,
        .cache-preco-input:disabled {
            background-color: #f5f5f5;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .cache-minutos-input {
            width: 100px;
        }
        
        .cache-preco-input {
            width: 120px;
        }
        
        #cache-validation-message {
            color: var(--primary-color);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .cache-field-row {
                grid-template-columns: 1fr;
                gap: 0.5rem;
            }
            
            .cache-minutos-input,
            .cache-preco-input {
                width: 100%;
            }
        }

        /* Descri√ß√£o */
        .ad-description-text {
            line-height: 1.8;
            margin-bottom: 1rem;
        }
        
        .description-textarea {
            width: 100%;
            min-height: 150px;
            padding: 1rem;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            line-height: 1.6;
            resize: vertical;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }
        
        .description-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.1);
        }
        
        .description-textarea::placeholder {
            color: #adb5bd;
        }
        
        .description-char-counter {
            margin-top: 0.5rem;
            text-align: right;
            font-size: 0.875rem;
            color: #6c757d;
            transition: color 0.3s ease;
        }
        
        .description-char-counter.min-warning {
            color: #ffc107;
            font-weight: 600;
        }
        
        .description-char-counter.warning {
            color: #ffc107;
        }
        
        .description-char-counter.danger {
            color: var(--primary-color);
            font-weight: bold;
        }
        
        .description-security-warning {
            margin-top: 0.5rem;
            padding: 0.75rem;
            background-color: #fff3cd;
            border: 1px solid #ffc107;
            border-radius: 5px;
            color: #856404;
            font-size: 0.875rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .description-security-warning.error {
            background-color: #f8d7da;
            border-color: var(--primary-color);
            color: #721c24;
        }
        
        .description-security-warning i {
            font-size: 1rem;
        }

        .ficha-description-read-more {
            color: var(--primary-color);
            text-align: center;
            padding: 0.25rem;
            margin-top: 0.5rem;
        }

        .read-more-btn {
            background: transparent !important;
            color: var(--primary-color) !important;
            border: none !important;
            padding: 0.25rem 0.5rem !important;
            cursor: pointer !important;
            font-size: 0.75rem !important;
            font-weight: 500 !important;
            transition: all 0.3s ease !important;
            display: inline-flex !important;
            align-items: center !important;
            gap: 0.25rem !important;
            border-radius: 4px !important;
        }

        .read-more-btn:hover {
            background: rgba(220, 53, 69, 0.1) !important;
            color: var(--primary-color) !important;
        }

        .read-more-btn.expanded .read-more-icon {
            transform: rotate(180deg);
        }

        .read-more-text {
            font-size: 0.75rem;
        }

        .read-more-icon {
            font-size: 0.7rem;
            transition: transform 0.3s ease;
        }

        /* Dados Pessoais */
        .ficha-data-row-container {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .ficha-data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .ficha-data-row:last-child {
            border-bottom: none;
        }
        
        /* Campos edit√°veis de informa√ß√µes pessoais */
        .personal-info-input,
        .personal-info-select {
            width: 100%;
            max-width: 200px;
            padding: 0.5rem;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            font-size: 0.95rem;
            transition: all 0.3s ease;
        }
        
        .personal-info-input:focus,
        .personal-info-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(220, 53, 69, 0.1);
        }
        
        .personal-info-input:required:invalid {
            border-color: #ffc107;
        }
        
        .personal-info-input:required:valid {
            border-color: #28a745;
        }
        
        .radio-group,
        .checkbox-group {
            display: flex;
            gap: 1rem;
            align-items: center;
        }
        
        .checkbox-group {
            flex-direction: column;
            align-items: flex-start;
            gap: 0.5rem;
        }
        
        .radio-group label,
        .checkbox-group label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            font-weight: normal;
        }
        
        /* Se√ß√£o de Verifica√ß√£o */
        .verification-section {
            margin-bottom: 2rem;
        }
        
        .verification-card {
            background: var(--bg-white);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            border: 2px solid #e9ecef;
        }
        
        .verification-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
        }
        
        .verification-icon {
            font-size: 2rem;
            color: var(--primary-color);
        }
        
        .verification-header h3 {
            margin: 0;
            font-size: 1.5rem;
            color: var(--text-dark);
            font-weight: 600;
        }
        
        .verification-card p {
            color: var(--text-muted);
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        
        .verification-benefits {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.6;
        }
        
        .verification-options {
            display: flex;
            flex-direction: column;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .radio-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: var(--bg-light);
        }
        
        .radio-item:hover {
            border-color: var(--primary-color);
            background: #fff5f5;
        }
        
        .radio-item input[type="radio"] {
            display: none;
        }
        
        .radio-mark {
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            position: relative;
            transition: all 0.3s ease;
            flex-shrink: 0;
        }
        
        .radio-item input[type="radio"]:checked + .radio-mark {
            border-color: var(--primary-color);
            background: var(--primary-color);
        }
        
        .radio-item input[type="radio"]:checked + .radio-mark::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
        }
        
        .radio-text {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 0.25rem;
        }
        
        .radio-text strong {
            color: var(--text-dark);
            font-size: 1rem;
        }
        
        .radio-text small {
            color: var(--text-muted);
            font-size: 0.85rem;
        }
        
        .verification-upload-box {
            min-height: 250px;
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%);
            border: 2px dashed #007bff;
        }
        
        .verification-upload-box input[type="file"] {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
            z-index: 3;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.75rem;
            color: var(--text-dark);
            font-size: 1rem;
            font-weight: 500;
        }
        
        @media (max-width: 1024px) {
            .verification-card {
                padding: 1.5rem;
            }
            
            .verification-header h3 {
                font-size: 1.25rem;
            }
            
            .verification-upload-box {
                min-height: 200px;
            }
        }
        
        .radio-group input[type="radio"],
        .checkbox-group input[type="checkbox"] {
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        
        #pagamento-validation-message {
            color: var(--primary-color);
            font-size: 0.875rem;
            margin-top: 0.5rem;
            font-weight: 500;
        }
        
        @media (max-width: 768px) {
            .personal-info-input,
            .personal-info-select {
                max-width: 100%;
            }
            
            .radio-group {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }
        
        /* Estilos para preview de √°udio (baseado em modelo-cadastro-anuncios.html) */
        .audio-preview {
            position: relative;
            width: 100%;
            min-height: auto;
            display: block;
            border-radius: 8px;
            overflow: visible;
            background: transparent;
            padding: 0;
        }
        
        .audio-preview.show {
            display: block;
        }
        
        .interactive-audio-player {
            width: 100%;
            max-width: 100%;
        }
        
        .audio-player-button {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            padding: 0.5rem;
            background: #ffffff;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            gap: 0.5rem;
            overflow: hidden;
        }
        
        .audio-player-button:hover:not(:disabled) {
            background: #f8f9fa;
            border-color: #dee2e6;
        }
        
        .audio-player-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .audio-player-button.playing {
            border-color: #1abc9c;
        }
        
        .no-audio-message {
            margin-top: 0.75rem;
            padding: 0.5rem;
            text-align: center;
            color: #6c757d;
            font-size: 0.875rem;
            font-style: italic;
        }
        
        .play-icon-wrapper {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .play-icon-wrapper svg {
            width: 100%;
            height: 100%;
        }
        
        .play-icon-wrapper .play-icon {
            fill: #263238;
        }
        
        .play-icon-wrapper .pause-icon {
            display: none;
        }
        
        .play-icon-wrapper .pause-icon rect {
            fill: #263238;
        }
        
        .audio-player-button.playing .play-icon-wrapper .play-icon {
            display: none;
        }
        
        .audio-player-button.playing .play-icon-wrapper .pause-icon {
            display: block;
        }
        
        .waveform-bars-container {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: flex-start;
            gap: 3px;
            height: 20px;
            padding: 0 0.5rem;
            overflow: hidden;
        }
        
        .waveform-bar {
            width: 2px;
            border-radius: 1px;
            background: #263238;
            transition: all 0.15s ease;
            min-height: 4px;
        }
        
        .audio-player-button.playing .waveform-bar {
            animation: wavePulse 1.5s ease-in-out infinite;
        }
        
        @keyframes wavePulse {
            0%, 100% {
                opacity: 0.6;
            }
            50% {
                opacity: 1;
            }
        }
        
        .audio-timer {
            font-size: 0.75rem;
            font-weight: 500;
            color: #263238;
            min-width: 35px;
            text-align: right;
            flex-shrink: 0;
        }
        
        .waveform-container {
            display: none;
        }
        
        .audio-player-controls {
            display: none;
        }
        
        .upload-area.has-audio {
            border-color: #28a745;
            background-color: #f8fff9;
        }
        
        .upload-area.has-audio .fas {
            color: #28a745;
        }
        
        .upload-area.has-audio p {
            color: #28a745;
            font-weight: 500;
        }
        
        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: #fff;
        }

        .ficha-data-row-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 500;
        }

        .ficha-data-row-label img {
            width: 16px;
            height: 16px;
        }

        .ficha-data-row-value {
            color: var(--text-muted);
        }

        /* Servi√ßos */
        .services-category {
            margin-bottom: 1.5rem;
        }

        .services-category h5 {
            color: var(--primary-color);
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 0.25rem;
        }

        .services-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .service-tag {
            background: var(--bg-white);
            border: 2px solid var(--border-color);
            color: var(--text-dark);
        }
        
        /* Estilos para checkboxes de servi√ßos */
        .services-category {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .services-category h5 {
            color: #007bff;
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 15px;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 8px;
        }
        
        .service-checkbox-label {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding: 8px 12px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 20px;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .service-checkbox-label:hover {
            border-color: var(--primary-color);
            background: #fff5f5;
        }
        
        .service-checkbox-label input[type="checkbox"] {
            margin-right: 8px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        
        .service-checkbox-label input[type="checkbox"]:checked + span {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .service-checkbox-label input[type="checkbox"]:checked {
            accent-color: var(--primary-color);
        }
        
        /* Estilo quando checkbox est√° marcado - aplicado via JavaScript */
        .service-checkbox-label.checked {
            border-color: var(--primary-color) !important;
            background: #fff5f5 !important;
            padding: 0.4rem 0.8rem;
            border-radius: 15px;
            font-size: 0.85rem;
            transition: all 0.3s;
            display: inline-block;
        }

        .service-tag:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateY(-1px);
        }

        /* Mapa */
        .mapSection-container {
            margin-top: 1rem;
        }

        .map-link {
            display: block;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 1rem;
        }

        .map-link img {
            width: 100%;
            height: 150px;
            object-fit: cover;
        }

        .popup {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 0.5rem;
            text-align: center;
            font-size: 0.9rem;
        }

        .ficha-location-bar {
            display: flex;
            gap: 1rem;
        }

        .ficha-location-bar a {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--primary-color);
            text-decoration: none;
            font-size: 0.9rem;
        }

        .ficha-location-bar img {
            width: 16px;
            height: 16px;
        }

        /* Bot√µes de A√ß√£o */
        .ficha-btn-actions-container {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .btn-area,
        .btn-delete,
        .btn-report {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s;
            text-decoration: none;
            color: var(--text-dark);
        }

        .btn-area {
            background: var(--bg-light);
        }

        .btn-delete {
            background: #f8d7da;
            color: #721c24;
        }

        .btn-report {
            background: #fff3cd;
            color: #856404;
        }

        .btn-area:hover,
        .btn-delete:hover,
        .btn-report:hover {
            opacity: 0.8;
        }

        /* Barra de Contato Fixa */
        .fixed-bottom {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--bg-white);
            padding: 1rem;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0.5rem;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            box-sizing: border-box;
            border-radius: 20px 20px 0 0;
        }

        /* Classe d-flex para compatibilidade */
        .d-flex {
            display: flex;
        }

        .me-1 {
            margin-right: 0.5rem;
        }

        .ms-1 {
            margin-left: 0.5rem;
        }

        .call-bottombar-btn,
        .whatsapp-bottombar-btn {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.75rem 1rem;
            border-radius: 15px;
            text-decoration: none;
            font-weight: bold;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
        }

        .call-bottombar-btn {
            background: var(--primary-color);
            color: white;
        }

        .call-bottombar-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(220, 53, 69, 0.4);
            background: #c82333;
        }

        .call-bottombar-btn i {
            font-size: 1.1rem;
        }

        .whatsapp-bottombar-btn {
            background: #25d366;
            color: white;
        }

        .whatsapp-bottombar-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 211, 102, 0.4);
            background: #20ba5a;
        }

        .whatsapp-bottombar-btn i {
            font-size: 1.2rem;
        }

        /* Estilos para n√∫meros de telefone */
        .phone-celular {
            font-weight: bold;
            font-size: 0.9rem;
        }

        .whatsapp-bottombar-btn span {
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* Modal - Estilo Fancybox */
        .modal {
            --fancybox-color: #dbdbdb;
            --fancybox-hover-color: #fff;
            --fancybox-bg: rgba(24, 24, 27, 0.98);
            --fancybox-slide-gap: 10px;
            --f-button-width: 40px;
            --f-button-height: 40px;
            --f-button-border: 0;
            --f-button-border-radius: 0;
            --f-button-color: #374151;
            --f-button-bg: #f8f8f8;
            --f-button-hover-bg: #e0e0e0;
            --f-button-active-bg: #d0d0d0;
            --f-button-shadow: none;
            --f-button-transition: all 0.15s ease;
            --f-button-transform: none;
            --f-button-svg-width: 20px;
            --f-button-svg-height: 20px;
            --f-button-svg-stroke-width: 1.5;
            --f-button-svg-fill: none;
            --f-button-svg-filter: none;
            --f-button-svg-disabled-opacity: 0.65;
            
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            direction: ltr;
            flex-direction: column;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            color: #f8f8f8;
            -webkit-tap-highlight-color: transparent;
            overflow: visible;
            z-index: 1050;
            outline: 0;
            transform-origin: top left;
            -webkit-text-size-adjust: 100%;
            -moz-text-size-adjust: none;
            -ms-text-size-adjust: 100%;
            text-size-adjust: 100%;
            overscroll-behavior-y: contain;
            background: var(--fancybox-bg);
        }

        .modal.show {
            display: flex;
        }

        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            right: 0;
            z-index: -1;
            background: var(--fancybox-bg);
            opacity: 1;
            will-change: opacity;
        }

        .modal-content {
            position: relative;
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            overflow: hidden;
        }

        .modal-image-container {
            position: relative;
            max-width: 100%;
            max-height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Navega√ß√£o sobre a imagem */
        .modal-image-container .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 30;
        }

        .modal-image-container .modal-nav.prev {
            left: 2px;
        }

        .modal-image-container .modal-nav.next {
            right: 2px;
        }

        /* Bot√µes menores e mais pr√≥ximos da imagem */
        .modal-image-container .modal-nav-button {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.6));
            border: 1px solid rgba(255, 255, 255, 0.3);
            opacity: 0.8;
        }

        .modal-image-container .modal-nav-button:hover {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.7));
            border-color: rgba(255, 255, 255, 0.6);
            opacity: 1;
            transform: scale(1.1);
        }

        .modal-image-container .modal-nav-button svg {
            width: 24px;
            height: 24px;
        }

        .modal-content img,
        .modal-content video {
            max-width: 100%;
            max-height: 80vh;
            width: auto;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            object-fit: contain;
        }

        /* Toolbar */
        .modal-toolbar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            z-index: 10;
        }

        .modal-toolbar-left {
            display: flex;
            align-items: center;
        }

        .modal-toolbar-right {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-infobar {
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .modal-button {
            width: var(--f-button-width);
            height: var(--f-button-height);
            border: var(--f-button-border);
            border-radius: var(--f-button-border-radius);
            background: var(--f-button-bg);
            color: var(--f-button-color);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--f-button-transition);
            box-shadow: var(--f-button-shadow);
            transform: var(--f-button-transform);
        }

        .modal-button:hover {
            background: var(--f-button-hover-bg);
            color: var(--fancybox-hover-color);
        }

        .modal-button:active {
            background: var(--f-button-active-bg);
        }

        .modal-button svg {
            width: var(--f-button-svg-width);
            height: var(--f-button-svg-height);
            stroke-width: var(--f-button-svg-stroke-width);
            fill: var(--f-button-svg-fill);
            filter: var(--f-button-svg-filter);
        }

        /* Navigation */
        .modal-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            z-index: 20;
        }

        .modal-nav.prev {
            left: 5px;
        }

        .modal-nav.next {
            right: 5px;
        }

        .modal-nav-button {
            width: 65px;
            height: 65px;
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.7));
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0.95;
            backdrop-filter: blur(15px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .modal-nav-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .modal-nav-button:hover {
            background: linear-gradient(135deg, rgba(0, 0, 0, 0.95), rgba(0, 0, 0, 0.8));
            border-color: rgba(255, 255, 255, 0.7);
            opacity: 1;
            transform: scale(1.2);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.5);
        }

        .modal-nav-button:hover::before {
            opacity: 1;
        }

        .modal-nav-button:active {
            transform: scale(1.1);
            box-shadow: 0 6px 25px rgba(0, 0, 0, 0.4);
        }

        .modal-nav-button svg {
            width: 32px;
            height: 32px;
            filter: drop-shadow(0 3px 6px rgba(0, 0, 0, 0.4));
            position: relative;
            z-index: 1;
        }

        /* Thumbnails */
        .modal-thumbnails {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 10px;
            overflow-x: auto;
            z-index: 10;
            min-height: 90px;
            align-items: center;
        }

        .modal-thumbnail {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            background: #333;
            flex-shrink: 0;
            position: relative;
        }

        .modal-thumbnail:hover {
            opacity: 0.9;
            transform: scale(1.1);
            border-color: rgba(255, 255, 255, 0.5);
        }

        .modal-thumbnail.active {
            opacity: 1;
            border-color: #fff;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .modal-thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        /* Placeholder para thumbnails sem imagem */
        .modal-thumbnail::before {
            content: 'üì∑';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 20px;
            color: #666;
            z-index: 1;
        }

        .modal-thumbnail img {
            position: relative;
            z-index: 2;
        }

        /* Loading */
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid var(--bg-light);
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Centraliza√ß√£o para todos os n√≠veis de zoom */
        html {
            width: 100%;
            overflow-x: auto;
        }

        /* Garantir centraliza√ß√£o em zoom extremo */
        @media (min-width: 1px) {
            .ficha-column-container {
                margin-left: auto;
                margin-right: auto;
            }
        }

        /* Player de √Åudio */
        .audio-player-wrapper {
            width: 100%;
        }

        .audio-player-wrapper .border {
            border-color: #dee2e6;
            border-radius: 12px;
            overflow: hidden;
            position: relative;
        }

        .audio-player-wrapper button {
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .audio-player-wrapper button:hover {
            background: rgba(0, 0, 0, 0.05);
        }

        .audio-player-wrapper svg {
            transition: transform 0.2s ease;
        }

        .audio-player-wrapper button:hover svg {
            transform: scale(1.1);
        }

        .audio-player-wrapper .text-xs {
            font-size: 12px;
            font-weight: 500;
        }

        .audio-player-wrapper .text-neutral-gray-17 {
            color: #6c757d;
        }

        .audio-player-wrapper .leading-14px {
            line-height: 14px;
        }

        .audio-player-wrapper .min-w-34px {
            min-width: 34px;
        }

        .audio-player-wrapper .text-right {
            text-align: right;
        }

        .audio-player-wrapper .w-8 {
            width: 32px;
        }

        .audio-player-wrapper .h-56px {
            height: 56px;
        }

        .audio-player-wrapper .pr-3 {
            padding-right: 12px;
        }

        .audio-player-wrapper .gap-2 {
            gap: 8px;
        }

        .audio-player-wrapper .p-3 {
            padding: 12px;
        }

        .audio-player-wrapper .pr-0 {
            padding-right: 0;
        }

        .audio-player-wrapper .flex {
            display: flex;
        }

        .audio-player-wrapper .items-center {
            align-items: center;
        }

        .audio-player-wrapper .justify-between {
            justify-content: space-between;
        }

        .audio-player-wrapper .justify-start {
            justify-content: flex-start;
        }

        .audio-player-wrapper .w-full {
            width: 100%;
        }

        .audio-player-wrapper .relative {
            position: relative;
        }

        .audio-player-wrapper .overflow-hidden {
            overflow: hidden;
        }

        .audio-player-wrapper .z-0 {
            z-index: 0;
        }

        .audio-player-wrapper .flex-1 {
            flex: 1;
        }

        .audio-player-wrapper .opacity-20 {
            opacity: 0.2;
        }

        .audio-player-wrapper .absolute {
            position: absolute;
        }

        .audio-player-wrapper .h-10 {
            height: 40px;
        }

        .audio-player-wrapper .top-1-2 {
            top: 50%;
        }

        .audio-player-wrapper .translate-y-1-2 {
            transform: translateY(-50%);
        }

        .audio-player-wrapper .left-0 {
            left: 0;
        }

        .audio-player-wrapper .z-10 {
            z-index: -10;
        }

        .audio-player-wrapper .w-0-5 {
            width: 2px;
        }

        .audio-player-wrapper .rounded-full {
            border-radius: 9999px;
        }

        .audio-player-wrapper .bg-primary-coral-6 {
            background-color: #E25352;
        }

        .audio-player-wrapper .transition-all {
            transition: all 0.2s ease;
        }

        .audio-player-wrapper .duration-200 {
            transition-duration: 200ms;
        }

        .audio-player-wrapper .gap-3px {
            gap: 3px;
        }

        /* Efeitos do Equalizador */
        .audio-player-wrapper .w-0-5 {
            transition: height 0.1s ease, opacity 0.1s ease;
            will-change: height, opacity;
        }

        .audio-player-wrapper .bg-primary-coral-6 {
            background: linear-gradient(180deg, #E25352 0%, #ff6b6b 100%);
            box-shadow: 0 0 4px rgba(226, 83, 82, 0.3);
        }

        /* Anima√ß√£o de pulso quando tocando */
        .audio-player-wrapper.playing .bg-primary-coral-6 {
            animation: equalizerPulse 0.5s ease-in-out infinite alternate;
        }

        @keyframes equalizerPulse {
            0% {
                box-shadow: 0 0 4px rgba(226, 83, 82, 0.3);
            }
            100% {
                box-shadow: 0 0 8px rgba(226, 83, 82, 0.6);
            }
        }

        /* Efeito de brilho nas barras ativas */
        .audio-player-wrapper .w-0-5.active {
            background: linear-gradient(180deg, #ff6b6b 0%, #E25352 50%, #ff6b6b 100%);
            box-shadow: 0 0 6px rgba(255, 107, 107, 0.8);
        }

        /* Responsivo */
        /* Desktop: Scroll independente para cada coluna */
        @media (min-width: 1025px) {
            .ficha-columns-grid {
                align-items: flex-start;
            }
            
            .ficha-column:first-child,
            .ficha-column:last-child {
                max-height: calc(100vh - 158px);
                overflow-y: auto;
                overflow-x: hidden;
                position: sticky;
                top: 0;
                align-self: flex-start;
            }
        }
        
        @media (max-width: 1024px) {
            /* Layout mobile/tablet: banner primeiro, depois informa√ß√µes */
            .ficha-column-container {
                flex-direction: column;
                padding: 0;
                gap: 0;
                max-width: 100%;
                margin: 0;
            }
            
            .ficha-columns-grid {
                flex-direction: column;
                display: flex;
                gap: 1rem;
                height: auto;
            }
            
            .ficha-column:first-child,
            .ficha-column:last-child {
                height: auto;
                position: relative;
                overflow-y: visible;
            }
            
            /* Banner ocupa tela inteira e fica fixo - PRIMEIRO */
            .ficha-column:first-child {
                width: 100%;
                max-width: 100%;
                padding: 0;
                border-radius: 0;
                background: transparent;
                box-shadow: none;
                order: 1; /* Primeiro elemento */
                position: relative;
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }
            
            /* Banner container - aparece primeiro */
            .ficha-images-slider-container {
                margin-bottom: 0;
                position: relative;
                order: 1; /* Primeiro dentro da coluna */
            }
            
            .banner-upload-container {
                width: 100vw;
                height: 100vh;
                border-radius: 0;
                position: relative; /* Mudado de fixed para relative para que o mobile-info-box apare√ßa logo abaixo */
                top: 0;
                left: 0;
                z-index: 100;
                margin: 0;
            }
            
            /* Galeria de upload aparece ap√≥s o mobile-info-box */
            .ficha-column:first-child .ficha-column-box {
                margin-top: 0; /* Removido margin-top para ficar mais pr√≥ximo */
                padding: 1rem;
                background: var(--bg-white);
                border-radius: 0;
                position: relative;
                z-index: 101;
                order: 3; /* Depois do banner e mobile-info-box */
            }
            
            /* Em mobile/tablet, cada ficha-column-box dentro da coluna direita se comporta como uma coluna separada */
            .ficha-column:last-child {
                width: 100% !important;
                max-width: 100% !important;
                display: contents !important; /* Faz os filhos se comportarem como se fossem filhos diretos do grid */
                padding: 0 !important;
                border-radius: 0 !important;
                background: transparent !important;
                box-shadow: none !important;
                margin-top: 0 !important;
                order: 2; /* Depois do banner */
                max-height: none !important;
            }
            
            /* Cada ficha-column-box se comporta como uma coluna separada em mobile */
            .ficha-column:last-child > .ficha-column-box {
                width: 100%;
                background: var(--purple-bg);
                border-radius: 10px;
                padding: 1rem;
                box-shadow: var(--shadow);
                margin-bottom: 1rem;
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }
            
            /* Garantir que o bloco mobile-info-box tamb√©m se comporte como uma coluna separada - SEGUNDO ap√≥s o banner */
            .mobile-info-box {
                width: 100%;
                background: var(--purple-bg);
                border-radius: 10px;
                padding: 1rem;
                box-shadow: var(--shadow);
                margin-bottom: 1rem;
                margin-top: 0; /* Sem margem superior para ficar colado ao banner */
                order: 2; /* Segundo elemento, logo ap√≥s o banner */
                position: relative;
                z-index: 101;
            }
            
            /* Ajustar posi√ß√£o do banner para que o mobile-info-box fique logo abaixo */
            .ficha-images-slider-container {
                margin-bottom: 0; /* Sem margem inferior para ficar colado ao mobile-info-box */
            }
            
            /* Primeira ficha-column-box (Informa√ß√µes B√°sicas) - TERCEIRO */
            .ficha-column:last-child > .ficha-column-box:nth-of-type(1) {
                order: 3;
            }
            
            /* Segunda ficha-column-box (Descri√ß√£o) - QUARTO */
            .ficha-column:last-child > .ficha-column-box:nth-of-type(2) {
                order: 4;
            }
            
            /* Terceira ficha-column-box (√Åudio) - QUINTO */
            .ficha-column:last-child > .ficha-column-box:nth-of-type(3) {
                order: 5;
            }
            
            /* Quarta ficha-column-box (Informa√ß√µes Pessoais) - SEXTO */
            .ficha-column:last-child > .ficha-column-box:nth-of-type(4) {
                order: 6;
            }
            
            /* Quinta ficha-column-box (Servi√ßos) - S√âTIMO */
            .ficha-column:last-child > .ficha-column-box:nth-of-type(5) {
                order: 7;
            }
            
            /* Sexta ficha-column-box (Mapa) - OITAVO */
            .ficha-column:last-child > .ficha-column-box:nth-of-type(6) {
                order: 8;
            }
        }
        
        @media (max-width: 768px) {
            .ficha-column-container {
                padding: 0;
                gap: 0;
            }
            
            .ficha-column:first-child,
            .ficha-column:last-child {
                width: 100%;
                max-width: none;
            }
            
            .ficha-column:last-child {
                padding: 0.75rem;
            }
            
            .banner-upload-container {
                height: 100vh;
            }
            
            /* Galeria de upload em mobile */
            #gallery-upload-grid {
                grid-template-columns: 1fr !important;
                gap: 0.75rem !important;
            }
            
            .foto-upload-box {
                min-height: 300px !important;
            }
            
            /* Ajustar padding da coluna de informa√ß√µes */
            .ficha-column:last-child .ficha-column-box {
                padding: 1rem;
                margin-bottom: 0.75rem;
            }
            
            .ficha-media-grid {
                grid-template-columns: 1fr;
            }
            
            .ficha-media-item {
                height: 300px; /* Tamanho menor em mobile */
                min-width: 100%;
                min-height: 100%;
            }
            
            .ficha-media-item-container {
                min-height: 300px; /* Altura m√≠nima em mobile */
            }
            
            .fixed-bottom {
                flex-direction: row;
                justify-content: space-between;
                gap: 0.5rem;
            }
            
            .call-bottombar-btn,
            .whatsapp-bottombar-btn {
                width: 32%;
                padding: 0.4rem 0.8rem;
                font-size: 0.75rem;
                min-width: 120px;
                max-width: 160px;
            }
            
            .ficha-fixed-header {
                padding: 0.5rem 1rem;
            }
            
            .ficha-top-line {
                padding: 0.5rem 1rem;
            }
        }
        
        /* Estilos para Upload de Banner e Galeria */
        .banner-upload-container {
            position: relative;
            width: 100%;
            height: 70vh;
            border-radius: 15px;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.8) 0%, rgba(108, 117, 125, 0.8) 100%);
        }
        
        .banner-upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.8) 0%, rgba(108, 117, 125, 0.8) 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2;
            transition: opacity 0.3s;
            cursor: pointer;
            pointer-events: none;
        }
        
        .banner-upload-overlay:hover {
            background: linear-gradient(135deg, rgba(220, 53, 69, 0.9) 0%, rgba(108, 117, 125, 0.9) 100%) !important;
        }
        
        .profile-banner {
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 0.3s;
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }
        
        .btn-change-banner-overlay {
            display: none;
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 3;
            background: rgba(0, 123, 255, 0.9);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .btn-change-banner-overlay:hover {
            background: rgba(0, 123, 255, 1) !important;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4) !important;
        }
        
        .foto-upload-box {
            position: relative;
            border: none;
            border-radius: 8px;
            padding: 0;
            text-align: center;
            background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%);
            cursor: pointer;
            transition: all 0.3s ease;
            min-height: 380px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }
        
        .foto-upload-box:hover {
            transform: scale(1.02);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .galeria-upload-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 2;
            pointer-events: none;
        }
        
        .photo-preview {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 8px;
            z-index: 1;
        }
        
        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .video-preview {
            display: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            border-radius: 8px;
            z-index: 1;
        }
        
        .video-preview video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .btn-change-photo {
            display: none;
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 3;
            background: rgba(0, 123, 255, 0.95);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s;
        }
        
        .btn-change-photo:hover {
            background: rgba(0, 123, 255, 1);
            transform: scale(1.05);
        }
        
        @media (max-width: 768px) {
            .banner-upload-container {
                height: 50vh;
            }
            
            .foto-upload-box {
                min-height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Background com screenshot da p√°gina anterior -->
    <div class="page-background" id="page-background"></div>
    
    <!-- Overlay escuro -->
    <div class="content-overlay"></div>
    

    <!-- Container Principal -->
    <div class="ficha-column-container">
        
    <!-- Header -->
    <header class="header" id="cabecalho">
        <div class="contem">
            <!-- Logo/Texto -->
            <div class="header-logo-text">
                Mansao do Job
            </div>
            
            <!-- Ficha Header Actions -->
            <div class="ficha-header-actions" style="display: flex; align-items: center; gap: 1rem;">
                <div class="navigation-arrows" style="display: flex; gap: 1rem;">
                    <div id="prevAd" data-ficha-id="" style="width: 40px; height: 40px; background: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.3s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                        <i class="fas fa-chevron-left" style="color: white; font-size: 1.2rem;"></i>
                    </div>
                    <div id="nextAd" data-ficha-id="" style="width: 40px; height: 40px; background: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; transition: 0.3s;" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                        <i class="fas fa-chevron-right" style="color: white; font-size: 1.2rem;"></i>
                    </div>
                </div>
                <button id="closeAd" type="button" class="btn" onclick="closeAdAndReturn()" style="background: var(--primary-color); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; display: flex; align-items: center; gap: 0.5rem; font-weight: 600; transition: 0.3s; opacity: 1;" onmouseover="this.style.opacity='0.8'" onmouseout="this.style.opacity='1'">
                    <i class="fas fa-times" style="font-size: 1.2rem;"></i>
                    <span>Fechar</span>
                </button>
            </div>
        </div>
    </header>
    
    <!-- Menu Fullscreen -->
    <div id="menu" class="">
        <nav class="main-nav">
            <ul>
                <li><a href="A_01__index.html" title="IN√çCIO">HOME</a></li>
                <li><a href="A_02__premium_copy.html" title="MULHERES">MULHERES</a></li>
                <li class="parent-item">
                    <a href="#" title="ACOMPANHANTES POR REGI√ÉO" class="parent-link">POR REGI√ÉO</a>
                    <ul class="submenu">
                        <li><a href="#" title="ASA NORTE">Asa Norte</a></li>
                        <li><a href="#" title="ASA SUL">Asa Sul</a></li>
                        <li><a href="#" title="SUDOESTE">Sudoeste</a></li>
                        <li><a href="#" title="√ÅGUAS CLARAS">√Åguas Claras</a></li>
                        <li><a href="#" title="LAGO SUL">Lago Sul</a></li>
                        <li><a href="#" title="GUAR√Å I e II">Guar√°</a></li>
                    </ul>
                </li>
                <li><a href="A_02__premium_massagistas_copy.html" title="MASSAGEM SENSUAL ER√ìTICA">MASSAGISTAS</a></li>
                <li><a href="A_02__premium_Anuncio-Sexo_Virtual.html" title="ATENDIMENTO VIRTUAL">VIRTUAL</a></li>
                <li><a href="A_02__premium_trans_copy.html" title="TRANSEX">TRAVESTIS</a></li>
                <li><a href="A_02__premium_homens_copy.html" title="GAROTOS DE PROGRAMA">HOMENS</a></li>
                <li><a href="A_02__premium_Anuncio-Sexo_Virtual.html" title="ANUNCIAR NO SITE">Publicar Anuncio</a></li>
            </ul>
        </nav>
    </div>

    <!-- Container de Visualiza√ß√£o -->
    <div id="profile-view-container" style="max-width: 1200px; margin: 0 auto; width: 100%; padding: 0 2rem; box-sizing: border-box;">
        <!-- Grid das Colunas -->
        <div class="ficha-columns-grid">
        <!-- Coluna da Esquerda - Banner e Galeria -->
        <div class="ficha-column">
            <!-- Banner Upload Container -->
            <div class="ficha-images-slider-container" style="position: relative; margin-bottom: 1rem;">
                <div class="banner-upload-container" style="position: relative; width: 100%; height: 70vh; border-radius: 15px; overflow: hidden; background: linear-gradient(135deg, rgba(220, 53, 69, 0.8) 0%, rgba(108, 117, 125, 0.8) 100%);">
                    <!-- Banner preview -->
                    <img src="" 
                         alt="Banner" class="profile-banner" id="profile-banner" 
                         style="width: 100%; height: 100%; object-fit: cover; opacity: 0; transition: opacity 0.3s; position: absolute; top: 0; left: 0; z-index: 2;">
                    
                </div>
            </div>

            <!-- Informa√ß√µes B√°sicas (Mobile/Tablet - Ap√≥s Banner) -->
            <div class="ficha-column-box mobile-info-box" style="display: none;">
                <div style="width: 100%;">
                    <h2 id="profile-name-display-mobile" style="width: 100%; font-size: 1.8rem; font-weight: bold; padding: 0.5rem 1rem; color: var(--text-dark); margin: 0;">Carregando...</h2>
                </div>
                <div class="fecha-creacion">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="creation-date-mobile">22/10/2025</span>
                </div>
                
                <div class="ficha-tarifas">
                    <h4>Cach√™s</h4>
                    
                    <!-- Exibi√ß√£o de Cach√™s do Banco de Dados -->
                    <div id="cache-display-container-mobile" style="margin-top: 1rem;">
                        <div id="cache-display-mobile" style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <p style="color: #666; font-style: italic;">Carregando informa√ß√µes de cach√™...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Se√ß√£o de Galeria de Fotos e V√≠deos -->
            <div class="ficha-column-box">
                <h4>
                    <i class="fas fa-images"></i>
                    Galeria de Fotos e V√≠deos
                </h4>
                <p style="margin-bottom: 15px; color: #666; font-size: 0.9rem;">
                    Adicione fotos e v√≠deos para sua galeria (m√≠nimo 1 foto obrigat√≥ria)
                </p>
                <div class="ficha-media-grid" id="gallery-upload-grid" style="grid-template-columns: repeat(2, 1fr); gap: 1rem;">
                    <!-- Galeria Box 1 (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-1" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-1" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                    
                    <!-- Galeria Box 2 (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-2" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-2" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                    
                    <!-- Galeria Box 3 (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-3" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-3" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                    
                    <!-- Galeria Box 4 (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-4" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-4" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                    
                    <!-- Galeria Box 5 (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-5" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-5" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                    
                    <!-- Galeria Box 6 (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-6" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-6" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                    
                    <!-- Galeria Box 7 (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-7" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(0, 123, 255, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-7" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                    
                    <!-- Galeria Box 8 - V√≠deo (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-8" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(220, 53, 69, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-8" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                        <div class="video-preview" id="galeria-video-preview-8" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                    
                    <!-- Galeria Box 9 - Foto de Stories (apenas visualiza√ß√£o) -->
                    <div class="foto-upload-box" id="galeria-upload-box-9" style="position: relative; border: none; border-radius: 8px; padding: 0; text-align: center; background: linear-gradient(135deg, rgba(40, 167, 69, 0.85) 0%, rgba(108, 117, 125, 0.85) 100%); min-height: 380px; display: flex; flex-direction: column; align-items: center; justify-content: center; overflow: hidden;">
                        <div class="photo-preview" id="galeria-preview-9" style="display: none; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border-radius: 8px; z-index: 1;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Coluna da Direita - Informa√ß√µes -->
        <div class="ficha-column">
            <!-- Informa√ß√µes B√°sicas -->
            <div class="ficha-column-box">
                <div style="width: 100%;">
                    <h2 id="profile-name-display" style="width: 100%; font-size: 1.8rem; font-weight: bold; padding: 0.5rem 1rem; color: var(--text-dark); margin: 0;">Carregando...</h2>
                </div>
                <div class="fecha-creacion">
                    <i class="fas fa-calendar-alt"></i>
                    <span id="creation-date">22/10/2025</span>
                </div>
                
                <div class="ficha-tarifas">
                    <h4>Cach√™s</h4>
                    
                    <!-- Exibi√ß√£o de Cach√™s do Banco de Dados -->
                    <div id="cache-display-container" style="margin-top: 1rem;">
                        <div id="cache-display" style="display: flex; flex-direction: column; gap: 0.75rem;">
                            <p style="color: #666; font-style: italic;">Carregando informa√ß√µes de cach√™...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Descri√ß√£o -->
            <div class="ficha-column-box">
                <h4>Descri√ß√£o</h4>
                <div id="textDescription">
                    <div id="description-text" style="padding: 1.25rem; background: #f8f9fa; border-radius: 8px; line-height: 1.8; color: var(--text-dark); min-height: 120px; white-space: pre-wrap; word-wrap: break-word; font-size: 1rem; max-height: none; transition: all 0.3s ease;">
                        Carregando descri√ß√£o...
                    </div>
                    <div class="ficha-description-read-more" style="margin-top: 0.5rem; display: none; text-align: center;">
                        <button type="button" onclick="toggleDescription()" class="read-more-btn" style="background: transparent; color: var(--primary-color); border: none; padding: 0.25rem 0.5rem; cursor: pointer; font-size: 0.75rem; font-weight: 500; transition: all 0.3s; display: inline-flex; align-items: center; gap: 0.25rem;">
                            <span class="read-more-text">Ler mais</span>
                            <i class="fas fa-chevron-down read-more-icon" style="font-size: 0.7rem; transition: transform 0.3s;"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- √Åudio de Apresenta√ß√£o -->
            <div class="ficha-column-box" id="audio-upload-container">
                <h4>√Åudio de Apresenta√ß√£o</h4>
                <div class="form-group">
                    <div class="audio-upload">
                        <div class="upload-area" id="audio-upload-box" style="position: relative; border: 2px dashed #dee2e6; border-radius: 8px; padding: 0.75rem 1rem; text-align: center; transition: all 0.3s; background: #f8f9fa; min-height: 70px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                            <!-- Preview do √°udio -->
                            <div class="audio-preview" id="audio-preview" style="z-index: 2; width: 100%;">
                                <div class="interactive-audio-player" id="interactive-audio-player" style="width: 100%;">
                                    <button type="button" class="audio-player-button" id="audioPlayerButton" disabled>
                                        <div class="play-icon-wrapper">
                                            <svg width="20" height="20" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                <path class="play-icon" d="M7.0987 10.5002L10.3487 8.41683C10.5043 8.31683 10.582 8.17794 10.582 8.00016C10.582 7.82238 10.5043 7.6835 10.3487 7.5835L7.0987 5.50016C6.93203 5.38905 6.76259 5.38072 6.59036 5.47516C6.41814 5.56961 6.33203 5.71683 6.33203 5.91683V10.0835C6.33203 10.2835 6.41814 10.4307 6.59036 10.5252C6.76259 10.6196 6.93203 10.6113 7.0987 10.5002ZM7.9987 14.6668C7.07648 14.6668 6.20981 14.4918 5.3987 14.1418C4.58759 13.7918 3.88203 13.3168 3.28203 12.7168C2.68203 12.1168 2.20703 11.4113 1.85703 10.6002C1.50703 9.78905 1.33203 8.92238 1.33203 8.00016C1.33203 7.07794 1.50703 6.21127 1.85703 5.40016C2.20703 4.58905 2.68203 3.8835 3.28203 3.2835C3.88203 2.6835 4.58759 2.2085 5.3987 1.8585C6.20981 1.5085 7.07648 1.3335 7.9987 1.3335C8.92092 1.3335 9.78759 1.5085 10.5987 1.8585C11.4098 2.2085 12.1154 2.6835 12.7154 3.2835C13.3154 3.8835 13.7904 4.58905 14.1404 5.40016C14.4904 6.21127 14.6654 7.07794 14.6654 8.00016C14.6654 8.92238 14.4904 9.78905 14.1404 10.6002C13.7904 11.4113 13.3154 12.1168 12.7154 12.7168C12.1154 13.3168 11.4098 13.7918 10.5987 14.1418C9.78759 14.4918 8.92092 14.6668 7.9987 14.6668ZM7.9987 13.3335C9.48759 13.3335 10.7487 12.8168 11.782 11.7835C12.8154 10.7502 13.332 9.48905 13.332 8.00016C13.332 6.51127 12.8154 5.25016 11.782 4.21683C10.7487 3.1835 9.48759 2.66683 7.9987 2.66683C6.50981 2.66683 5.2487 3.1835 4.21536 4.21683C3.18203 5.25016 2.66536 6.51127 2.66536 8.00016C2.66536 9.48905 3.18203 10.7502 4.21536 11.7835C5.2487 12.8168 6.50981 13.3335 7.9987 13.3335Z" fill="#263238"></path>
                                                <g class="pause-icon" style="display: none;">
                                                    <rect x="5" y="4" width="2" height="8" fill="#263238"></rect>
                                                    <rect x="9" y="4" width="2" height="8" fill="#263238"></rect>
                                                </g>
                                            </svg>
                                        </div>
                                        <div class="waveform-bars-container" id="waveformBars"></div>
                                        <span class="audio-timer" id="audioTime">00:00</span>
                                    </button>
                                    <!-- Mensagem quando n√£o h√° √°udio -->
                                    <div class="no-audio-message" id="noAudioMessage" style="display: none; margin-top: 0.75rem; padding: 0.5rem; text-align: center; color: #6c757d; font-size: 0.875rem; font-style: italic;">
                                        <i class="fas fa-info-circle" style="margin-right: 0.5rem;"></i>
                                        Nenhum √°udio cadastrado
                                    </div>
                                    <!-- WaveSurfer container oculto (usado apenas para an√°lise) -->
                                    <div class="waveform-container" style="display: none;">
                                        <div id="waveform"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Informa√ß√µes Pessoais -->
            <div class="ficha-column-box">
                <h4>Informa√ß√µes Pessoais</h4>
                <div class="ficha-data-row-container" id="personal-data">
                    <!-- Idade (Obrigat√≥rio) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-birthday-cake"></i>
                            <span>Idade <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="number" name="idade" id="info-idade" min="18" max="99" required class="personal-info-input" placeholder="Idade" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                        </div>
                    </div>
                    
                    <!-- Peso (Obrigat√≥rio) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-weight"></i>
                            <span>Peso <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="number" name="peso" id="info-peso" min="30" max="200" required class="personal-info-input" placeholder="Peso (kg)" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                        </div>
                    </div>
                    
                    <!-- Altura (Obrigat√≥rio) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-ruler-vertical"></i>
                            <span>Altura <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="text" name="altura" id="info-altura" required class="personal-info-input" placeholder="Ex: 1.82m ou 182cm" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                        </div>
                    </div>
                    
                    <!-- Faz Oral sem (Opcional) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-kiss"></i>
                            <span>Faz Oral sem</span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="faz_oral_sem" id="faz_oral_sem" class="personal-info-select">
                                <option value="">Selecione</option>
                                <option value="Sim">Sim</option>
                                <option value="N√£o">N√£o</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Beija (Opcional) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-heart"></i>
                            <span>Beija</span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="beija" id="beija" class="personal-info-select">
                                <option value="">Selecione</option>
                                <option value="Sim">Sim</option>
                                <option value="N√£o">N√£o</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Faz Anal (Opcional) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-user"></i>
                            <span>Faz Anal</span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="faz_anal" id="faz_anal" class="personal-info-select">
                                <option value="">Selecione</option>
                                <option value="Sim">Sim</option>
                                <option value="N√£o">N√£o</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Mora s√≥ (Opcional) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-home"></i>
                            <span>Mora s√≥</span>
                        </div>
                        <div class="ficha-data-row-value">
                            <select name="mora_so" id="mora_so" class="personal-info-select">
                                <option value="">Selecione</option>
                                <option value="Sim">Sim</option>
                                <option value="N√£o">N√£o</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Hor√°rio de Atendimento (Obrigat√≥rio) -->
                    <div class="ficha-data-row" style="grid-column: span 1;">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-clock"></i>
                            <span>Hor√°rio de Atendimento <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value" style="width: 100%;">
                            <div style="margin-bottom: 10px;">
                                <label style="display: flex; align-items: center; cursor: pointer; margin-bottom: 8px;">
                                    <input type="radio" name="horario-24h" id="horario-24h-sim" value="sim" style="margin-right: 8px;">
                                    <span>24 horas todos os dias</span>
                                </label>
                                <label style="display: flex; align-items: center; cursor: pointer;">
                                    <input type="radio" name="horario-24h" id="horario-24h-nao" value="nao" style="margin-right: 8px;">
                                    <span>N√£o</span>
                                </label>
                            </div>
                            <div id="horario-custom-container" style="display: none; margin-top: 10px;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                    <div>
                                        <label style="font-size: 12px; color: #666; display: block; margin-bottom: 5px;">Hor√°rio de In√≠cio *</label>
                                        <input type="time" id="horario-inicio" name="horario-inicio" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                                    </div>
                                    <div>
                                        <label style="font-size: 12px; color: #666; display: block; margin-bottom: 5px;">Hor√°rio de Fim *</label>
                                        <input type="time" id="horario-fim" name="horario-fim" style="width: 100%; padding: 8px; border: 2px solid #e9ecef; border-radius: 6px; font-size: 14px; box-sizing: border-box; background: white;">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Formas de Pagamento (Obrigat√≥rio - pelo menos uma) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-credit-card"></i>
                            <span>Formas de Pagamento <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <div class="checkbox-group" style="display: flex; flex-direction: column; gap: 0.5rem;">
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" name="pagamento[]" value="PIX" id="pagamento-pix" class="pagamento-checkbox" style="cursor: pointer;">
                                    <span>PIX</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" name="pagamento[]" value="Cart√£o" id="pagamento-cartao" class="pagamento-checkbox" style="cursor: pointer;">
                                    <span>Cart√£o</span>
                                </label>
                                <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                                    <input type="checkbox" name="pagamento[]" value="Cripto" id="pagamento-cripto" class="pagamento-checkbox" style="cursor: pointer;">
                                    <span>Cripto</span>
                                </label>
                            </div>
                            <div id="pagamento-validation-message" style="color: var(--primary-color); font-size: 0.875rem; margin-top: 0.5rem; display: none;">
                                * Selecione pelo menos uma forma de pagamento
                            </div>
                        </div>
                    </div>
                    
                    <!-- Telefone Celular (Obrigat√≥rio) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fas fa-mobile-alt"></i>
                            <span>Telefone Celular <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="tel" name="telefone_celular" id="telefone_celular" required class="personal-info-input" placeholder="Ex: (11) 99999-9999" pattern="[\(]?[0-9]{2}[\)]?[\s]?[0-9]{4,5}[\-]?[0-9]{4}" maxlength="15">
                            <small style="color: #666; font-size: 0.75rem; display: block; margin-top: 0.25rem;">Formato: (11) 99999-9999</small>
                        </div>
                    </div>
                    
                    <!-- WhatsApp (Obrigat√≥rio) -->
                    <div class="ficha-data-row">
                        <div class="ficha-data-row-label">
                            <i class="fab fa-whatsapp"></i>
                            <span>WhatsApp <span style="color: var(--primary-color);">*</span></span>
                        </div>
                        <div class="ficha-data-row-value">
                            <input type="tel" name="whatsapp" id="whatsapp" required class="personal-info-input" placeholder="Ex: (11) 99999-9999" pattern="[\(]?[0-9]{2}[\)]?[\s]?[0-9]{4,5}[\-]?[0-9]{4}" maxlength="15">
                            <small style="color: #666; font-size: 0.75rem; display: block; margin-top: 0.25rem;">Pode ser o mesmo n√∫mero do telefone</small>
                        </div>
                    </div>
                </div>
            </div>

            <!-- SERVI√áOS OFERECIDOS -->
            <div class="ficha-column-box">
                <h4>SERVI√áOS OFERECIDOS</h4>
                <div id="services-display-container" style="margin-top: 1rem;">
                    <p style="color: #666; font-style: italic;">Carregando servi√ßos...</p>
                </div>
                
            </div>

            <!-- Mapa -->
            <div class="ficha-column-box" id="map-section" style="display: none;">
                <h4>Mapa em: üìç<span id="map-location">-</span></h4>
                <div class="mapSection-container">
                    <a class="map-link" id="map-link" target="_blank">
                        <span class="popup">Abra o Google Maps</span>
                        <img id="map-image" alt="Mapa">
                    </a>
                    <div class="ficha-location-bar">
                        <a id="directions-link" target="_blank">
                            <i class="fas fa-directions"></i>
                            Como chegar
                        </a>
                        <a id="streetview-link" target="_blank">
                            <i class="fas fa-street-view"></i>
                            Street View
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <!-- Barra de Contato Fixa -->
    <div id="phoneCallSection" class="fixed-bottom d-flex">
        <a id="phoneCallBtn" href="#" class="call-bottombar-btn me-1" data-ficha-id="">
            <i class="fas fa-mobile-alt"></i>
            <span class="phone-celular">(11) 99999-9999</span>
        </a>
        <a id="whatsAppBtn" class="whatsapp-bottombar-btn ms-1" href="#" data-mobile-href="#" target="_blank" data-ficha-id="">
            <i class="fab fa-whatsapp"></i>
            <span>Whatsapp</span>
        </a>
    </div>
    </div>

    <!-- Modal - Estilo Fancybox -->
    <div id="gallery-modal" class="modal">
        <div class="modal-backdrop"></div>
        
        <!-- Toolbar -->
        <div class="modal-toolbar">
            <div class="modal-toolbar-left">
                <div class="modal-infobar">
                    <span id="modal-current-index">1</span>/<span id="modal-total-count">1</span>
                </div>
            </div>
            <div class="modal-toolbar-right">
                <button class="modal-button" title="Toggle zoom level" id="modal-zoom-btn">
                    <svg viewBox="0 0 24 24">
                        <g><line x1="11" y1="8" x2="11" y2="14"></line></g>
                        <circle cx="11" cy="11" r="7.5"></circle>
                        <path d="m21 21-4.35-4.35M8 11h6"></path>
                    </svg>
                </button>
                <button class="modal-button" title="Toggle slideshow" id="modal-slideshow-btn">
                    <svg viewBox="0 0 24 24">
                        <g><path d="M8 4v16l13 -8z"></path></g>
                        <g><path d="M8 4v15M17 4v15"></path></g>
                    </svg>
                </button>
                <button class="modal-button" title="Toggle full-screen mode" id="modal-fullscreen-btn">
                    <svg viewBox="0 0 24 24">
                        <g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"></path></g>
                        <g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"></path></g>
                    </svg>
                </button>
                <button class="modal-button" title="Toggle thumbnails" id="modal-thumbs-btn">
                    <svg viewBox="0 0 24 24">
                        <circle cx="5.5" cy="5.5" r="1"></circle>
                        <circle cx="12" cy="5.5" r="1"></circle>
                        <circle cx="18.5" cy="5.5" r="1"></circle>
                        <circle cx="5.5" cy="12" r="1"></circle>
                        <circle cx="12" cy="12" r="1"></circle>
                        <circle cx="18.5" cy="12" r="1"></circle>
                        <circle cx="5.5" cy="18.5" r="1"></circle>
                        <circle cx="12" cy="18.5" r="1"></circle>
                        <circle cx="18.5" cy="18.5" r="1"></circle>
                    </svg>
                </button>
                <button class="modal-button" title="Close" id="modal-close-btn">
                    <svg viewBox="0 0 24 24">
                        <path d="m19.5 4.5-15 15M4.5 4.5l15 15"></path>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Content -->
        <div class="modal-content">
            <div class="modal-image-container">
                <!-- Navigation sobre a imagem -->
                <div class="modal-nav prev">
                    <button class="modal-nav-button" id="modal-prev-btn" title="Imagem anterior">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M19 12H5M12 19l-7-7 7-7"/>
                        </svg>
                    </button>
                </div>
                <div class="modal-nav next">
                    <button class="modal-nav-button" id="modal-next-btn" title="Pr√≥xima imagem">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
                
            <img id="modal-image" style="display: none;">
            <video id="modal-video" controls style="display: none;">
                Seu navegador n√£o suporta v√≠deos.
            </video>
            </div>
        </div>

        <!-- Thumbnails -->
        <div class="modal-thumbnails" id="modal-thumbnails">
            <!-- Thumbnails ser√£o gerados dinamicamente -->
        </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
        // Vari√°veis globais
        let mainSwiper = null;
        let thumbSwiper = null;
        let currentAnuncio = null;
        let waveformBarsGlobal = [];
        let waveSurferInstance = null;
        let waveSurferReady = false;
        const PLACEHOLDER_AUDIO_URL = 'https://cdn.pixabay.com/download/audio/2022/03/01/audio_329ffbdfa7.mp3?filename=soft-abstract-ambient-135615.mp3';

        // Inicializar Firebase
        console.log("üî• Inicializando Firebase...");
        if (typeof firebaseConfig !== 'undefined') {
            firebase.initializeApp(firebaseConfig);
            console.log("‚úÖ Firebase inicializado com sucesso!");
        } else {
            console.warn("‚ö†Ô∏è firebaseConfig n√£o encontrado, usando dados de teste");
        }

        // Fun√ß√£o para capturar screenshot da p√°gina anterior
        function capturePreviousPageScreenshot() {
            try {
                // Verificar se h√° screenshot salvo no localStorage
                const savedScreenshot = localStorage.getItem('previousPageScreenshot');
                if (savedScreenshot) {
                    console.log("üì∏ Usando screenshot salvo da p√°gina anterior");
                    document.getElementById('page-background').style.backgroundImage = `url(${savedScreenshot})`;
                    return;
                }
                
                // Se n√£o h√° screenshot, usar uma imagem de fundo padr√£o
                console.log("üì∏ Nenhum screenshot encontrado, usando fundo padr√£o");
                document.getElementById('page-background').style.backgroundImage = 'url("data:image/svg+xml,%3Csvg xmlns=\'http://www.w3.org/2000/svg\' width=\'100%25\' height=\'100%25\'%3E%3Cdefs%3E%3Cpattern id=\'grid\' width=\'20\' height=\'20\' patternUnits=\'userSpaceOnUse\'%3E%3Cpath d=\'M 20 0 L 0 0 0 20\' fill=\'none\' stroke=\'%23ddd\' stroke-width=\'1\'/%3E%3C/pattern%3E%3C/defs%3E%3Crect width=\'100%25\' height=\'100%25\' fill=\'%23f8f9fa\'/%3E%3Crect width=\'100%25\' height=\'100%25\' fill=\'url(%23grid)\'/%3E%3C/svg%3E")';
            } catch (error) {
                console.error("‚ùå Erro ao carregar screenshot:", error);
            }
        }

        // Fun√ß√£o para fechar o overlay e voltar √† p√°gina anterior
        function closeOverlay() {
            try {
                console.log("üö™ Fechando overlay...");
                
                // Verificar se h√° URL de retorno salva
                const returnUrl = localStorage.getItem('returnUrl') || 'http://127.0.0.1:8080/A_02__premium.html';
                const returnScroll = localStorage.getItem('returnScroll') || '0';
                
                console.log("üîÑ Voltando para:", returnUrl);
                console.log("üìç Posi√ß√£o do scroll:", returnScroll);
                
                // Limpar dados tempor√°rios
                localStorage.removeItem('previousPageScreenshot');
                localStorage.removeItem('returnUrl');
                localStorage.removeItem('returnScroll');
                
                // Voltar para a p√°gina anterior
                window.location.href = returnUrl;
                
            } catch (error) {
                console.error("‚ùå Erro ao fechar overlay:", error);
                // Fallback: voltar para p√°gina padr√£o
                window.location.href = 'http://127.0.0.1:8080/A_02__premium.html';
            }
        }

        // Fun√ß√£o setupSideClickToClose removida - funcionalidade de clique nas laterais desabilitada

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            console.log("üî• DOM carregado, iniciando...");
            
            
            // Capturar screenshot da p√°gina anterior
            capturePreviousPageScreenshot();
            
            // Funcionalidade de clique nas laterais removida
            
            // Carregar dados do perfil
            loadProfileData();
            initModals();
            
            // Header agora est√° integrado no container
        });

        // Fun√ß√£o para obter par√¢metros da URL
        function getUrlParameter(name) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(name);
        }

        // Fun√ß√£o para obter URL base da API
        function getApiBaseUrl() {
            return 'http://localhost:5001';
        }

        // Fun√ß√£o para carregar dados do perfil
        async function loadProfileData() {
            try {
                console.log("üî• INICIANDO loadProfileData...");
                const profileId = getUrlParameter('id');
                const profileName = getUrlParameter('name');
                
                console.log("üî• Carregando dados do perfil...");
                console.log("üî• Profile ID:", profileId);
                console.log("üî• Profile Name:", profileName);

                let anuncio = null;

                // Tentar buscar dados do Firebase primeiro
                if (typeof firebase !== 'undefined' && firebase.firestore) {
                    try {
                        console.log("üî• Buscando dados do Firebase...");
                        
                        // Se temos um ID espec√≠fico, buscar por ele
                        if (profileId) {
                            const doc = await firebase.firestore().collection('anuncios').doc(profileId).get();
                            if (doc.exists) {
                                anuncio = { id: doc.id, ...doc.data() };
                                console.log("‚úÖ Dados encontrados no Firebase:", anuncio);
                            }
                        } else {
                            // Buscar o primeiro an√∫ncio dispon√≠vel
                            const snapshot = await firebase.firestore().collection('anuncios').limit(1).get();
                            if (!snapshot.empty) {
                                const doc = snapshot.docs[0];
                                anuncio = { id: doc.id, ...doc.data() };
                                console.log("‚úÖ Primeiro an√∫ncio encontrado no Firebase:", anuncio);
                            }
                        }
                    } catch (firebaseError) {
                        console.warn("‚ö†Ô∏è Erro ao buscar no Firebase:", firebaseError);
                    }
                }

                // Se n√£o encontrou no Firebase, usar dados de teste
                if (!anuncio) {
                    console.log("üìù Usando dados de teste...");
                    anuncio = {
                        id: profileId || "teste-001",
                        nome: profileName || "Modelo Premium Teste",
                        idade: 25,
                        cidade: "S√£o Paulo",
                        estado: "SP",
                        bairro: "Vila Madalena",
                        telefone_celular: "(11) 99999-9999",
                        telefone_fixo: "(11) 3333-4444",
                        email: "modelo@teste.com",
                        descricao: "Profissional experiente com 5 anos de atua√ß√£o. Especializado em massagem relaxante e terap√™utica. Ambiente acolhedor e seguro para seu total conforto. Atendo 24h com muito carinho e dedica√ß√£o.",
                        preco_30min: 150,
                        preco_1h: 200,
                        preco_2h: 350,
                        genero: "Mulher",
                        categoria: "Massagem",
                        corpo: "Atl√©tico",
                        estatura: "Alta",
                        altura: "1.70m",
                        peso: "65kg",
                        nacionalidade: "Brasileira",
                        faz_oral_sem: true,
                        beija: true,
                        faz_anal: false,
                        mora_so: true,
                        local: "Casa pr√≥pria",
                        atende: "Local pr√≥prio",
                        horario_24h: true,
                        aceita_cartao: true,
                        aceita_dinheiro: true,
                        aceita_pix: true,
                        servicos_basicos: ["Beijos na boca", "Oral com camisinha", "Massagem er√≥tica"],
                        servicos_especiais: ["Beijo negro", "Ejacula√ß√£o facial"],
                        fetichismo_bdsm: ["Fetichismo", "Lingerie"],
                        atendimento_grupo: ["Aten√ß√£o √† casais"],
                        perfil_estilo: ["Ativa", "Vers√°til", "Experta principiantes"],
                        servicos_extras: ["Fantasias e figurinos", "Sexcam"],
                        foto_capa_url: "fotinha/fotos/avatar.jpg",
                        foto_banner_url: "fotinha/fotos/avatar (5).jpg",
                        foto_stories_url: "fotinha/fotos/avatar (7).jpg",
                        video_capa_url: null,
                        audio_url: "data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT", // √Åudio de teste em base64
                        galeria_1_url: "fotinha/fotos/avatar.jpg",
                        galeria_2_url: "fotinha/fotos/avatar (5).jpg",
                        galeria_3_url: "fotinha/fotos/avatar (7).jpg",
                        galeria_4_url: "fotinha/fotos/avatar.jpg",
                        galeria_5_url: "fotinha/fotos/avatar (5).jpg",
                        galeria_6_url: "fotinha/fotos/avatar (7).jpg",
                        galeria_7_url: "fotinha/fotos/avatar.jpg",
                        galeria_8_url: "fotinha/fotos/avatar (5).jpg",
                        verification_video_url: null,
                        documento_frente_url: null,
                        documento_verso_url: null,
                        selfie_documento_url: null,
                        createdAt: new Date(),
                        userId: "teste-user-001",
                        userEmail: "teste@exemplo.com"
                    };
                }

                // Processar URLs de m√≠dia
                if (anuncio) {
                    // Criar array de galeria a partir dos campos individuais
                    const galeria = [];
                    for (let i = 1; i <= 8; i++) {
                        const url = anuncio[`galeria_${i}_url`];
                        if (url) {
                            galeria.push(url);
                        }
                    }
                    
                    anuncio.mediaFiles = {
                        galeria: galeria,
                        video: anuncio.video_capa_url,
                        audio: anuncio.audio_url
                    };

                    // Adicionar servi√ßos baseados na categoria
                    anuncio.servicos = getServicesByCategory(anuncio.categoria);
                }

                currentAnuncio = anuncio;
                updateProfileData(anuncio);
                initSwipers();
                
            } catch (error) {
                console.error('‚ùå Erro ao carregar dados do perfil:', error);
            }
        }

        // Fun√ß√£o para obter servi√ßos baseados na categoria
        function getServicesByCategory(categoria) {
            const servicesMap = {
                "Massagem": ["Massagem Relaxante", "Massagem Terap√™utica", "Drenagem Linf√°tica", "Massagem Esportiva"],
                "Acompanhante": ["Acompanhamento Social", "Eventos Corporativos", "Jantares", "Viagens"],
                "Escort": ["Encontros Discretos", "Acompanhamento VIP", "Massagem Sensual", "Relaxamento"],
                "Outros": ["Servi√ßos Personalizados", "Consultoria", "Atendimento Especializado"]
            };
            
            return servicesMap[categoria] || ["Servi√ßos Personalizados"];
        }

        function formatAudioTime(seconds) {
            const mins = Math.floor(seconds / 60) || 0;
            const secs = Math.floor(seconds % 60) || 0;
            return `${mins}:${secs.toString().padStart(2, '0')}`;
        }

        // Fun√ß√£o para criar barras de onda
        function createWaveformBars(container, count = 50) {
            if (!container) return [];
            
            container.innerHTML = '';
            const bars = [];
            
            for (let i = 0; i < count; i++) {
                const bar = document.createElement('div');
                bar.className = 'waveform-bar';
                const height = Math.random() * 80 + 20; // Altura entre 20% e 100%
                const opacity = Math.random() * 0.4 + 0.6; // Opacidade entre 0.6 e 1.0
                bar.style.height = `${height}%`;
                bar.style.opacity = opacity;
                container.appendChild(bar);
                bars.push(bar);
            }
            
            return bars;
        }

        // Fun√ß√£o para atualizar barras de onda durante reprodu√ß√£o
        function updateWaveformBars(bars, dataArray) {
            if (!bars || !dataArray) return;
            
            const step = Math.floor(dataArray.length / bars.length);
            
            bars.forEach((bar, index) => {
                const dataIndex = index * step;
                if (dataIndex < dataArray.length) {
                    const value = dataArray[dataIndex] / 255; // Normalizar entre 0 e 1
                    const height = value * 80 + 20; // Altura entre 20% e 100%
                    const opacity = value * 0.4 + 0.6; // Opacidade entre 0.6 e 1.0
                    bar.style.height = `${height}%`;
                    bar.style.opacity = opacity;
                }
            });
        }

        // Fun√ß√£o para carregar player de √°udio
        function loadAudioPlayer(anuncio) {
            console.log("üéµ loadAudioPlayer chamada com:", anuncio);
            
            const audioPreview = document.getElementById('audio-preview');
            const audioUploadBox = document.getElementById('audio-upload-box');
            const audioPlayerWrapper = document.getElementById('interactive-audio-player');
            const audioPlayerButton = document.getElementById('audioPlayerButton');
            const waveformBarsContainer = document.getElementById('waveformBars');
            const audioTime = document.getElementById('audioTime');
            const noAudioMessage = document.getElementById('noAudioMessage');
            
            if (!audioPreview || !audioUploadBox || !audioPlayerWrapper || !audioPlayerButton || !waveformBarsContainer || !audioTime) {
                console.error("‚ùå Elementos do player de √°udio n√£o encontrados!");
                return;
            }

            const databaseAudioUrl = anuncio.audio_url || 
                                     anuncio.audioUrl || 
                                     anuncio.audio || 
                                     anuncio.mediaFiles?.audio ||
                                     anuncio.mediaFiles?.audio_url ||
                                     anuncio.foto_audio_url ||
                                     anuncio.audio_apresentacao_url;
            
            // Sempre mostrar o player
            audioPreview.style.display = 'block';
            audioPreview.classList.add('show');
            audioPlayerWrapper.style.display = 'block';
            
            // Criar barras de onda sempre (mesmo sem √°udio)
            waveformBarsGlobal = createWaveformBars(waveformBarsContainer, 50);
            
            if (!databaseAudioUrl) {
                console.log("üéµ Nenhum √°udio encontrado no banco de dados");
                // Desabilitar bot√£o e mostrar mensagem
                audioPlayerButton.disabled = true;
                if (noAudioMessage) {
                    noAudioMessage.style.display = 'block';
                }
                audioTime.textContent = '00:00';
                return;
            }
            
            const audioUrl = databaseAudioUrl;
            console.log("üéµ URL do √°udio selecionada:", audioUrl);

            // Habilitar bot√£o e esconder mensagem
            audioPlayerButton.disabled = false;
            if (noAudioMessage) {
                noAudioMessage.style.display = 'none';
            }
            audioUploadBox.classList.add('has-audio');
            
            // Inicializar WaveSurfer (oculto, usado apenas para an√°lise)
            if (!waveSurferInstance) {
                waveSurferInstance = WaveSurfer.create({
                    container: '#waveform',
                    waveColor: '#e0e0e0',
                    progressColor: '#1abc9c',
                    cursorColor: '#1abc9c',
                    barWidth: 2,
                    barRadius: 2,
                    responsive: true,
                    height: 96,
                    normalize: true,
                    backend: 'WebAudio'
                });

                let audioContext = null;
                let analyser = null;
                let dataArray = null;
                let animationFrame = null;

                waveSurferInstance.on('ready', () => {
                    waveSurferReady = true;
                    const duration = waveSurferInstance.getDuration();
                    audioTime.textContent = formatAudioTime(duration);
                    
                    // Configurar an√°lise de √°udio
                    try {
                        if (waveSurferInstance.backend && waveSurferInstance.backend.ac) {
                            audioContext = waveSurferInstance.backend.ac;
                            analyser = audioContext.createAnalyser();
                            analyser.fftSize = 256;
                            const bufferLength = analyser.frequencyBinCount;
                            dataArray = new Uint8Array(bufferLength);
                            
                            // Conectar ao source do WaveSurfer quando dispon√≠vel
                            if (waveSurferInstance.backend.source) {
                                waveSurferInstance.backend.source.connect(analyser);
                            }
                        }
                    } catch (e) {
                        console.warn('‚ö†Ô∏è N√£o foi poss√≠vel configurar an√°lise de √°udio:', e);
                    }
                });

                waveSurferInstance.on('play', () => {
                    audioPlayerButton.classList.add('playing');
                    
                    // Animar barras durante reprodu√ß√£o
                    function animate() {
                        if (waveSurferInstance && waveSurferInstance.isPlaying()) {
                            if (analyser && dataArray && waveformBarsGlobal.length > 0) {
                                analyser.getByteFrequencyData(dataArray);
                                updateWaveformBars(waveformBarsGlobal, dataArray);
                            } else {
                                // Fallback: anima√ß√£o aleat√≥ria suave
                                waveformBarsGlobal.forEach(bar => {
                                    if (bar) {
                                        const currentHeight = parseFloat(bar.style.height) || 50;
                                        const newHeight = currentHeight + (Math.random() - 0.5) * 10;
                                        const clampedHeight = Math.max(20, Math.min(100, newHeight));
                                        bar.style.height = `${clampedHeight}%`;
                                    }
                                });
                            }
                            animationFrame = requestAnimationFrame(animate);
                        }
                    }
                    animate();
                });

                waveSurferInstance.on('pause', () => {
                    audioPlayerButton.classList.remove('playing');
                    if (animationFrame) {
                        cancelAnimationFrame(animationFrame);
                        animationFrame = null;
                    }
                });

                waveSurferInstance.on('finish', () => {
                    audioPlayerButton.classList.remove('playing');
                    if (animationFrame) {
                        cancelAnimationFrame(animationFrame);
                        animationFrame = null;
                    }
                    audioTime.textContent = formatAudioTime(waveSurferInstance.getDuration());
                });

                // Controle do bot√£o
                audioPlayerButton.addEventListener('click', () => {
                    if (audioPlayerButton.disabled) return;
                    if (!waveSurferInstance || !waveSurferReady) return;
                    waveSurferInstance.playPause();
                });

                // Atualizar tempo durante reprodu√ß√£o
                setInterval(() => {
                    if (waveSurferInstance && waveSurferInstance.isPlaying()) {
                        const currentTime = waveSurferInstance.getCurrentTime();
                        audioTime.textContent = formatAudioTime(currentTime);
                    }
                }, 100);
            } else {
                // Se j√° existe, recriar as barras
                waveformBarsGlobal = createWaveformBars(waveformBarsContainer, 50);
            }

            waveSurferReady = false;
            audioTime.textContent = '00:00';
            audioPlayerButton.classList.remove('playing');
            waveSurferInstance.load(audioUrl);
        }

        // Fun√ß√£o para gerar ondas de √°udio visuais
        function generateAudioWaves(container) {
            if (!container) return;

            // Limpar ondas existentes
            container.innerHTML = '';

            // Gerar 200 barras de onda
            for (let i = 0; i < 200; i++) {
                const bar = document.createElement('div');
                bar.className = 'w-0.5 rounded-full bg-primary-coral-6 transition-all duration-200';
                
                // Altura aleat√≥ria entre 8px e 32px
                const height = Math.random() * 24 + 8;
                bar.style.height = `${height}px`;
                
                container.appendChild(bar);
            }

            // Animar as ondas
            animateWaves(container);
        }

        // Fun√ß√£o para animar as ondas com efeito de equalizador
        function animateWaves(container) {
            const bars = container.querySelectorAll('div');
            let animationId;
            let isPlaying = false;
            let audioContext = null;
            let analyser = null;
            let dataArray = null;
            let source = null;

            // Configurar AudioContext para an√°lise de √°udio
            function setupAudioAnalysis(audioElement) {
                try {
                    audioContext = new (window.AudioContext || window.webkitAudioContext)();
                    analyser = audioContext.createAnalyser();
                    source = audioContext.createMediaElementSource(audioElement);
                    
                    source.connect(analyser);
                    analyser.connect(audioContext.destination);
                    
                    analyser.fftSize = 256;
                    const bufferLength = analyser.frequencyBinCount;
                    dataArray = new Uint8Array(bufferLength);
                    
                    console.log("üéµ AudioContext configurado para equalizador");
                } catch (error) {
                    console.warn("‚ö†Ô∏è Erro ao configurar AudioContext:", error);
                }
            }

            // Fun√ß√£o de anima√ß√£o com equalizador
            function animate() {
                if (isPlaying && analyser && dataArray) {
                    // Usar dados reais do √°udio
                    analyser.getByteFrequencyData(dataArray);
                    
                    bars.forEach((bar, index) => {
                        // Mapear dados de frequ√™ncia para altura das barras
                        const dataIndex = Math.floor((index / bars.length) * dataArray.length);
                        const frequency = dataArray[dataIndex] || 0;
                        const normalizedFreq = frequency / 255;
                        
                        // Altura baseada na frequ√™ncia + movimento suave
                        const time = Date.now() * 0.001;
                        const wave = Math.sin(time * 3 + index * 0.2) * 0.3;
                        const height = 8 + (normalizedFreq * 24) + (wave * 8);
                        
                        bar.style.height = `${Math.max(4, height)}px`;
                        bar.style.opacity = 0.2 + (normalizedFreq * 0.8);
                        
                        // Adicionar classe 'active' para barras com alta frequ√™ncia
                        if (normalizedFreq > 0.7) {
                            bar.classList.add('active');
                        } else {
                            bar.classList.remove('active');
                        }
                    });
                } else {
                    // Anima√ß√£o padr√£o quando n√£o est√° tocando
                    bars.forEach((bar, index) => {
                        const time = Date.now() * 0.001;
                        const wave = Math.sin(time * 2 + index * 0.1) * 0.5 + 0.5;
                        const height = 8 + wave * 16;
                        bar.style.height = `${height}px`;
                        bar.style.opacity = 0.2 + (wave * 0.3);
                    });
                }
                
                animationId = requestAnimationFrame(animate);
            }

            // Iniciar anima√ß√£o
            animate();

            // Configurar eventos do √°udio
            const audioElement = document.getElementById('audio-player');
            if (audioElement) {
                audioElement.addEventListener('play', () => {
                    isPlaying = true;
                    container.closest('.audio-player-wrapper').classList.add('playing');
                    if (!audioContext) {
                        setupAudioAnalysis(audioElement);
                    }
                    if (audioContext && audioContext.state === 'suspended') {
                        audioContext.resume();
                    }
                });

                audioElement.addEventListener('pause', () => {
                    isPlaying = false;
                    container.closest('.audio-player-wrapper').classList.remove('playing');
                });

                audioElement.addEventListener('ended', () => {
                    isPlaying = false;
                    container.closest('.audio-player-wrapper').classList.remove('playing');
                });
            }

            // Parar anima√ß√£o quando necess√°rio
            container.addEventListener('mouseleave', () => {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
            });

            // Retornar fun√ß√£o para limpar recursos
            return () => {
                if (animationId) {
                    cancelAnimationFrame(animationId);
                }
                if (audioContext) {
                    audioContext.close();
                }
            };
        }

        // Fun√ß√£o para carregar dados do an√∫ncio do Firebase
        async function loadProfileData() {
            try {
                // Obter ID e nome da URL
                const urlParams = new URLSearchParams(window.location.search);
                const anuncioId = urlParams.get('id');
                const anuncioNome = urlParams.get('name');
                
                if (!anuncioId) {
                    console.error('‚ùå ID do an√∫ncio n√£o encontrado na URL');
                    return;
                }
                
                console.log('üîç Carregando dados do an√∫ncio:', { id: anuncioId, nome: anuncioNome });
                
                // Aguardar Firebase estar inicializado
                let attempts = 0;
                while ((typeof firebase === 'undefined' || !firebase.firestore) && attempts < 10) {
                    await new Promise(resolve => setTimeout(resolve, 100));
                    attempts++;
                }
                
                if (typeof firebase === 'undefined' || !firebase.firestore) {
                    throw new Error('Firebase n√£o inicializado');
                }
                
                const db = firebase.firestore();
                
                // Buscar na cole√ß√£o 'anuncios' primeiro (cole√ß√£o principal)
                let doc = null;
                try {
                    doc = await db.collection('anuncios').doc(anuncioId).get();
                    if (doc.exists) {
                        console.log('‚úÖ An√∫ncio encontrado na cole√ß√£o "anuncios"');
                    }
                } catch (e) {
                    console.warn('‚ö†Ô∏è Erro ao buscar em "anuncios":', e);
                }
                
                // Se n√£o encontrou, tentar na cole√ß√£o 'advertisements' (compatibilidade)
                if (!doc || !doc.exists) {
                    try {
                        doc = await db.collection('advertisements').doc(anuncioId).get();
                        if (doc.exists) {
                            console.log('‚úÖ An√∫ncio encontrado na cole√ß√£o "advertisements" (legado)');
                        }
                    } catch (e) {
                        console.warn('‚ö†Ô∏è Erro ao buscar em "advertisements":', e);
                    }
                }
                
                if (!doc || !doc.exists) {
                    throw new Error('An√∫ncio n√£o encontrado no banco de dados');
                }
                
                const anuncioData = { id: doc.id, ...doc.data() };
                currentAnuncio = anuncioData;
                
                console.log('‚úÖ Dados do an√∫ncio carregados:', anuncioData);
                
                // Log espec√≠fico para servi√ßos
                console.log('üîç SERVI√áOS NO BANCO DE DADOS:');
                console.log('üîç anuncioData.servicos:', anuncioData.servicos);
                console.log('üîç Tipo:', typeof anuncioData.servicos);
                console.log('üîç √â array?', Array.isArray(anuncioData.servicos));
                if (anuncioData.servicos) {
                    console.log('üîç Tamanho:', anuncioData.servicos.length || 'N/A');
                    console.log('üîç Conte√∫do JSON:', JSON.stringify(anuncioData.servicos, null, 2));
                    console.log('üîç Conte√∫do direto:', anuncioData.servicos);
                } else {
                    console.log('‚ö†Ô∏è Campo servicos n√£o existe ou √© null/undefined');
                }
                
                // Verificar todos os campos que podem conter servi√ßos
                console.log('üîç TODOS OS CAMPOS RELACIONADOS A SERVI√áOS:');
                Object.keys(anuncioData).forEach(key => {
                    if (key.toLowerCase().includes('servic') || key.toLowerCase().includes('servico')) {
                        console.log(`üîç ${key}:`, anuncioData[key], 'Tipo:', typeof anuncioData[key]);
                    }
                });
                
                // Buscar an√∫ncios anterior e pr√≥ximo para navega√ß√£o
                try {
                    // Buscar todos os an√∫ncios de sexo virtual (prioridade: anuncios, depois advertisements)
                    let allAdsSnapshot = null;
                    try {
                        allAdsSnapshot = await db.collection('anuncios').get();
                        console.log('‚úÖ Buscando an√∫ncios na cole√ß√£o "anuncios"');
                    } catch (e) {
                        console.warn('‚ö†Ô∏è Erro ao buscar em "anuncios", tentando "advertisements"...', e);
                        allAdsSnapshot = await db.collection('advertisements').get();
                    }
                    
                    const allAds = [];
                    allAdsSnapshot.forEach(doc => {
                        const data = doc.data();
                        // Filtrar apenas an√∫ncios de sexo virtual e ativos
                        const categoria = (data.categoria || data.category || '').toLowerCase();
                        const isSexoVirtual = categoria.includes('sexo-virtual') || categoria.includes('sexo virtual');
                        const isActive = data.status === 'ativo' || data.isActive === true || data.status === 'active';
                        
                        if (isSexoVirtual && isActive) {
                            allAds.push({ id: doc.id, ...data });
                        }
                    });
                    
                    console.log('üìã Total de an√∫ncios de sexo virtual encontrados:', allAds.length);
                    
                    // Ordenar por data de cria√ß√£o (mais recente primeiro)
                    allAds.sort((a, b) => {
                        const dateA = a.created_at ? new Date(a.created_at).getTime() : (a.createdAt ? a.createdAt.toMillis() : 0);
                        const dateB = b.created_at ? new Date(b.created_at).getTime() : (b.createdAt ? b.createdAt.toMillis() : 0);
                        return dateB - dateA;
                    });
                    
                    const currentIndex = allAds.findIndex(ad => ad.id === anuncioId);
                    console.log('üîç √çndice do an√∫ncio atual:', currentIndex, 'de', allAds.length, 'an√∫ncios');
                    
                    const prevAdElement = document.getElementById('prevAd');
                    const nextAdElement = document.getElementById('nextAd');
                    
                    if (currentIndex !== -1 && allAds.length > 1) {
                        // Anterior = √≠ndice menor (mais antigo na lista ordenada)
                        const prevAd = currentIndex > 0 ? allAds[currentIndex - 1] : null;
                        // Pr√≥ximo = √≠ndice maior (mais novo na lista ordenada)
                        const nextAd = currentIndex < allAds.length - 1 ? allAds[currentIndex + 1] : null;
                        
                        console.log('üìä An√∫ncios de navega√ß√£o:', { 
                            atual: allAds[currentIndex].id,
                            anterior: prevAd ? prevAd.id : 'nenhum (primeiro)', 
                            proximo: nextAd ? nextAd.id : 'nenhum (√∫ltimo)' 
                        });
                        
                        // Configurar seta anterior (an√∫ncio mais antigo) - sempre vis√≠vel
                        if (prevAdElement) {
                            if (prevAd) {
                                prevAdElement.setAttribute('data-ficha-id', prevAd.id);
                                prevAdElement.style.opacity = '1';
                                prevAdElement.style.cursor = 'pointer';
                                console.log('‚úÖ Seta anterior configurada:', prevAd.id);
                            } else {
                                // Sem an√∫ncio anterior, mas mant√©m vis√≠vel com opacidade reduzida
                                prevAdElement.setAttribute('data-ficha-id', '');
                                prevAdElement.style.opacity = '0.5';
                                prevAdElement.style.cursor = 'not-allowed';
                                console.log('‚ö†Ô∏è Sem an√∫ncio anterior (√© o primeiro) - seta desabilitada');
                            }
                        }
                        
                        // Configurar seta pr√≥xima (an√∫ncio mais novo) - sempre vis√≠vel
                        if (nextAdElement) {
                            if (nextAd) {
                                nextAdElement.setAttribute('data-ficha-id', nextAd.id);
                                nextAdElement.style.opacity = '1';
                                nextAdElement.style.cursor = 'pointer';
                                console.log('‚úÖ Seta pr√≥xima configurada:', nextAd.id);
                            } else {
                                // Sem an√∫ncio pr√≥ximo, mas mant√©m vis√≠vel com opacidade reduzida
                                nextAdElement.setAttribute('data-ficha-id', '');
                                nextAdElement.style.opacity = '0.5';
                                nextAdElement.style.cursor = 'not-allowed';
                                console.log('‚ö†Ô∏è Sem an√∫ncio pr√≥ximo (√© o √∫ltimo) - seta desabilitada');
                            }
                        }
                    } else if (allAds.length <= 1) {
                        console.log('‚ÑπÔ∏è Apenas um an√∫ncio encontrado, desabilitando setas');
                        if (prevAdElement) {
                            prevAdElement.setAttribute('data-ficha-id', '');
                            prevAdElement.style.opacity = '0.5';
                            prevAdElement.style.cursor = 'not-allowed';
                        }
                        if (nextAdElement) {
                            nextAdElement.setAttribute('data-ficha-id', '');
                            nextAdElement.style.opacity = '0.5';
                            nextAdElement.style.cursor = 'not-allowed';
                        }
                    } else {
                        console.warn('‚ö†Ô∏è An√∫ncio atual n√£o encontrado na lista, desabilitando setas');
                        if (prevAdElement) {
                            prevAdElement.setAttribute('data-ficha-id', '');
                            prevAdElement.style.opacity = '0.5';
                            prevAdElement.style.cursor = 'not-allowed';
                        }
                        if (nextAdElement) {
                            nextAdElement.setAttribute('data-ficha-id', '');
                            nextAdElement.style.opacity = '0.5';
                            nextAdElement.style.cursor = 'not-allowed';
                        }
                    }
                } catch (navError) {
                    console.error('‚ùå Erro ao buscar an√∫ncios para navega√ß√£o:', navError);
                    // Em caso de erro, desabilitar as setas mas mant√™-las vis√≠veis
                    const prevAdElement = document.getElementById('prevAd');
                    const nextAdElement = document.getElementById('nextAd');
                    if (prevAdElement) {
                        prevAdElement.setAttribute('data-ficha-id', '');
                        prevAdElement.style.opacity = '0.5';
                        prevAdElement.style.cursor = 'not-allowed';
                    }
                    if (nextAdElement) {
                        nextAdElement.setAttribute('data-ficha-id', '');
                        nextAdElement.style.opacity = '0.5';
                        nextAdElement.style.cursor = 'not-allowed';
                    }
                }
                
                // Atualizar nome do an√∫ncio no display (desktop e mobile)
                const profileNameDisplay = document.getElementById('profile-name-display');
                const profileNameDisplayMobile = document.getElementById('profile-name-display-mobile');
                if (profileNameDisplay && anuncioData.nome) {
                    profileNameDisplay.textContent = anuncioData.nome;
                    console.log('‚úÖ Nome do an√∫ncio atualizado:', anuncioData.nome);
                } else if (profileNameDisplay) {
                    profileNameDisplay.textContent = 'Nome n√£o dispon√≠vel';
                }
                if (profileNameDisplayMobile && anuncioData.nome) {
                    profileNameDisplayMobile.textContent = anuncioData.nome;
                } else if (profileNameDisplayMobile) {
                    profileNameDisplayMobile.textContent = 'Nome n√£o dispon√≠vel';
                }
                
                // Atualizar banner - verificar m√∫ltiplos campos poss√≠veis
                const bannerImg = document.getElementById('profile-banner');
                if (bannerImg) {
                    // Tentar diferentes campos do banco de dados
                    const bannerUrl = anuncioData.foto_banner_url || 
                                     anuncioData.foto_banner || 
                                     anuncioData.banner_url || 
                                     anuncioData.bannerUrl ||
                                     anuncioData.coverImage ||
                                     anuncioData.foto_capa_url ||
                                     anuncioData.foto_capa;
                    
                    if (bannerUrl) {
                        bannerImg.src = bannerUrl;
                        bannerImg.style.opacity = '1';
                        bannerImg.onerror = function() {
                            console.error('‚ùå Erro ao carregar banner:', bannerUrl);
                            this.style.opacity = '0';
                        };
                        bannerImg.onload = function() {
                            console.log('‚úÖ Banner carregado com sucesso:', bannerUrl);
                            this.style.opacity = '1';
                        };
                        console.log('üì∏ Tentando carregar banner:', bannerUrl);
                    } else {
                        console.warn('‚ö†Ô∏è Nenhuma URL de banner encontrada nos dados do an√∫ncio');
                        console.log('üìã Campos dispon√≠veis:', Object.keys(anuncioData).filter(k => k.includes('banner') || k.includes('foto') || k.includes('cover')));
                    }
                } else {
                    console.error('‚ùå Elemento profile-banner n√£o encontrado no DOM');
                }
                
                // Atualizar galeria nas caixas
                console.log('üì∏ Iniciando carregamento da galeria...');
                console.log('üìã Dados completos do an√∫ncio:', anuncioData);
                console.log('üìã Campos de galeria dispon√≠veis:', Object.keys(anuncioData).filter(k => k.includes('galeria') || k.includes('foto') || k.includes('stories') || k.includes('media')));
                
                // Verificar se h√° um array de galeria ou objeto mediaFiles
                let galeriaArray = null;
                if (anuncioData.mediaFiles && anuncioData.mediaFiles.galeria && Array.isArray(anuncioData.mediaFiles.galeria)) {
                    galeriaArray = anuncioData.mediaFiles.galeria;
                    console.log('üì∏ Galeria encontrada em mediaFiles.galeria:', galeriaArray);
                } else if (Array.isArray(anuncioData.galeria)) {
                    galeriaArray = anuncioData.galeria;
                    console.log('üì∏ Galeria encontrada em galeria (array):', galeriaArray);
                } else if (Array.isArray(anuncioData.galeriaFotos)) {
                    galeriaArray = anuncioData.galeriaFotos;
                    console.log('üì∏ Galeria encontrada em galeriaFotos:', galeriaArray);
                }
                
                for (let i = 1; i <= 9; i++) {
                    const previewBox = document.getElementById(`galeria-preview-${i}`);
                    const uploadBox = document.getElementById(`galeria-upload-box-${i}`);
                    
                    if (!previewBox || !uploadBox) {
                        console.warn(`‚ö†Ô∏è Elementos n√£o encontrados para caixa ${i}`);
                        continue;
                    }
                    
                    if (i === 8) {
                        // Caixa 8 pode ser v√≠deo
                        const videoUrl = anuncioData.galeria_8_url || 
                                       anuncioData.galeria_8 || 
                                       anuncioData.verification_video_url ||
                                       anuncioData.verification_video ||
                                       anuncioData.video_url ||
                                       (anuncioData.mediaFiles && anuncioData.mediaFiles.videos && Array.isArray(anuncioData.mediaFiles.videos) ? anuncioData.mediaFiles.videos[0] : null);
                        
                        if (videoUrl) {
                            const videoPreview = document.getElementById('galeria-video-preview-8');
                            const videoElement = `<video style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;" controls><source src="${videoUrl}" type="video/mp4"></video>`;
                            
                            if (videoPreview) {
                                videoPreview.innerHTML = videoElement;
                                videoPreview.style.display = 'block';
                            } else {
                                previewBox.innerHTML = videoElement;
                                previewBox.style.display = 'block';
                            }
                            uploadBox.style.background = 'transparent';
                            console.log(`‚úÖ V√≠deo adicionado na caixa ${i}:`, videoUrl);
                        } else {
                            console.log(`‚ÑπÔ∏è Nenhum v√≠deo encontrado para caixa ${i}`);
                        }
                    } else {
                        // Caixas 1-7 e 9 s√£o fotos
                        let fotoUrl = null;
                        
                        // Primeiro, tentar usar o array de galeria se existir
                        if (galeriaArray && galeriaArray.length > 0) {
                            const index = i === 9 ? 8 : i - 1; // Ajustar √≠ndice (caixa 9 = √≠ndice 8 no array)
                            if (galeriaArray[index]) {
                                fotoUrl = galeriaArray[index];
                                console.log(`üì∏ Foto da caixa ${i} encontrada no array (√≠ndice ${index}):`, fotoUrl);
                            }
                        }
                        
                        // Se n√£o encontrou no array, tentar campos individuais
                        if (!fotoUrl) {
                            if (i === 9) {
                                // Caixa 9 √© foto de stories
                                fotoUrl = anuncioData.foto_stories_url || 
                                         anuncioData.foto_stories || 
                                         anuncioData.stories_url ||
                                         anuncioData.stories ||
                                         anuncioData.foto_stories_1_url;
                            } else {
                                // Caixas 1-7 s√£o galeria - verificar m√∫ltiplas varia√ß√µes
                                fotoUrl = anuncioData[`galeria_${i}_url`] || 
                                         anuncioData[`galeria_${i}`] ||
                                         anuncioData[`galeria${i}_url`] ||
                                         anuncioData[`galeria${i}`] ||
                                         anuncioData[`galeria_photo_${i}_url`] ||
                                         anuncioData[`galeria_photo_${i}`] ||
                                         (anuncioData.mediaFiles && anuncioData.mediaFiles[`galeria_${i}`]) ||
                                         (anuncioData.mediaFiles && anuncioData.mediaFiles[`galeria${i}`]);
                            }
                        }
                        
                        if (fotoUrl) {
                            const imgElement = document.createElement('img');
                            imgElement.src = fotoUrl;
                            imgElement.alt = `Foto ${i}`;
                            imgElement.style.cssText = 'width: 100%; height: 100%; object-fit: cover; border-radius: 8px;';
                            
                            imgElement.onerror = function() {
                                console.error(`‚ùå Erro ao carregar foto na caixa ${i}:`, fotoUrl);
                                this.style.display = 'none';
                            };
                            
                            imgElement.onload = function() {
                                console.log(`‚úÖ Foto carregada na caixa ${i}:`, fotoUrl);
                            };
                            
                            previewBox.innerHTML = '';
                            previewBox.appendChild(imgElement);
                            previewBox.style.display = 'block';
                            uploadBox.style.background = 'transparent';
                            console.log(`üì∏ Foto configurada na caixa ${i}:`, fotoUrl);
                        } else {
                            console.log(`‚ÑπÔ∏è Nenhuma foto encontrada para caixa ${i} - verificando campos:`, {
                                galeria_i_url: anuncioData[`galeria_${i}_url`],
                                galeria_i: anuncioData[`galeria_${i}`],
                                mediaFiles: anuncioData.mediaFiles ? Object.keys(anuncioData.mediaFiles) : 'n√£o existe'
                            });
                        }
                    }
                }
                
                console.log('‚úÖ Carregamento da galeria conclu√≠do');
                
                // Atualizar dados do perfil
                updateProfileData(anuncioData);
                
            } catch (error) {
                console.error('‚ùå Erro ao carregar dados do an√∫ncio:', error);
                alert('Erro ao carregar dados do an√∫ncio: ' + error.message);
            }
        }
        
        // Fun√ß√£o para atualizar dados do perfil
        function updateProfileData(anuncio) {
            // Atualizar t√≠tulo da p√°gina
            document.title = `Perfil - ${anuncio.nome || 'An√∫ncio'} | Mans√£o do Job`;
            
            // Atualizar nome (exibi√ß√£o apenas - desktop e mobile)
            const profileNameDisplay = document.getElementById('profile-name-display');
            const profileNameDisplayMobile = document.getElementById('profile-name-display-mobile');
            if (profileNameDisplay) {
                profileNameDisplay.textContent = anuncio.nome || 'Nome n√£o dispon√≠vel';
            }
            if (profileNameDisplayMobile) {
                profileNameDisplayMobile.textContent = anuncio.nome || 'Nome n√£o dispon√≠vel';
            }
            
            // Atualizar data de cria√ß√£o (desktop e mobile)
            const creationDateEl = document.getElementById('creation-date');
            const creationDateElMobile = document.getElementById('creation-date-mobile');
            if (creationDateEl) {
                // Formatar data se dispon√≠vel
                let dateText = '22/10/2025';
                if (anuncio.created_at) {
                    try {
                        const date = new Date(anuncio.created_at);
                        dateText = date.toLocaleDateString('pt-BR');
                    } catch (e) {
                        console.warn('Erro ao formatar data:', e);
                    }
                } else if (anuncio.createdAt) {
                    try {
                        const date = anuncio.createdAt.toDate ? anuncio.createdAt.toDate() : new Date(anuncio.createdAt);
                        dateText = date.toLocaleDateString('pt-BR');
                    } catch (e) {
                        console.warn('Erro ao formatar data:', e);
                    }
                }
                creationDateEl.textContent = dateText;
            }
            if (creationDateElMobile) {
                let dateText = '22/10/2025';
                if (anuncio.created_at) {
                    try {
                        const date = new Date(anuncio.created_at);
                        dateText = date.toLocaleDateString('pt-BR');
                    } catch (e) {
                        console.warn('Erro ao formatar data:', e);
                    }
                } else if (anuncio.createdAt) {
                    try {
                        const date = anuncio.createdAt.toDate ? anuncio.createdAt.toDate() : new Date(anuncio.createdAt);
                        dateText = date.toLocaleDateString('pt-BR');
                    } catch (e) {
                        console.warn('Erro ao formatar data:', e);
                    }
                }
                creationDateElMobile.textContent = dateText;
            }
            
            // Atualizar localiza√ß√£o
            const locationTextEl = document.getElementById('location-text');
            if (locationTextEl) {
                const location = `${anuncio.cidade || 'N√£o informado'}, ${anuncio.estado || 'N√£o informado'}`;
                locationTextEl.textContent = location;
            }
            
            // Atualizar pre√ßos (desktop e mobile)
            updatePrices(anuncio);
            updatePricesMobile(anuncio);
            
            // Atualizar descri√ß√£o
            updateDescription(anuncio);
            
            // Atualizar dados pessoais
            updatePersonalData(anuncio);
            
            // Atualizar servi√ßos
            updateServices(anuncio);
            
            // Atualizar mapa
            updateMap(anuncio);
            
            // Atualizar contatos
            updateContacts(anuncio);
            
            // Carregar galeria
            console.log("üì∏ Chamando loadGallery...");
            loadGallery(anuncio);
            
            // Carregar player de √°udio
            loadAudioPlayer(anuncio);
            
            // Popular campos do formul√°rio (se existirem)
            populateFormFields(anuncio);
        }

        // Fun√ß√£o para popular campos do formul√°rio
        function populateFormFields(anuncio) {
            console.log("üìù Populando campos do formul√°rio:", anuncio);
            
            // Informa√ß√µes b√°sicas
            setFieldValue('nome_anuncio', anuncio.nome);
            setFieldValue('idade', anuncio.idade);
            setFieldValue('nacionalidade', anuncio.nacionalidade);
            setFieldValue('telefone_celular', anuncio.telefone_celular);
            setFieldValue('telefone_fixo', anuncio.telefone_fixo);
            setFieldValue('descricao', anuncio.descricao);
            
            // Localiza√ß√£o
            setSelectValue('estado', anuncio.estado);
            setFieldValue('cidade', anuncio.cidade);
            setFieldValue('bairro', anuncio.bairro);
            
            // Categoria e tipo
            setSelectValue('genero', anuncio.genero);
            setSelectValue('categoria', anuncio.categoria);
            
            // Informa√ß√µes f√≠sicas
            setFieldValue('peso', anuncio.peso);
            setFieldValue('altura', anuncio.altura);
            
            // Prefer√™ncias de atendimento
            setCheckboxValue('faz_oral_sem', anuncio.faz_oral_sem);
            setCheckboxValue('beija', anuncio.beija);
            setCheckboxValue('faz_anal', anuncio.faz_anal);
            
            // Local e atendimento
            setCheckboxValue('mora_so', anuncio.mora_so);
            
            // Hor√°rio
            setCheckboxValue('horario_24h', anuncio.horario_24h);
            
            // Formas de pagamento
            setCheckboxValue('aceita_cartao', anuncio.aceita_cartao);
            setCheckboxValue('aceita_dinheiro', anuncio.aceita_dinheiro);
            setCheckboxValue('aceita_pix', anuncio.aceita_pix);
            
            // Pre√ßos
            setFieldValue('preco_30min', anuncio.preco_30min);
            setFieldValue('preco_1h', anuncio.preco_1h);
            setFieldValue('preco_2h', anuncio.preco_2h);
            
            // Servi√ßos
            setCheckboxGroup('servicos_basicos', anuncio.servicos_basicos);
            setCheckboxGroup('servicos_especiais', anuncio.servicos_especiais);
            setCheckboxGroup('fetichismo_bdsm', anuncio.fetichismo_bdsm);
            setCheckboxGroup('atendimento_grupo', anuncio.atendimento_grupo);
            setCheckboxGroup('perfil_estilo', anuncio.perfil_estilo);
            setCheckboxGroup('servicos_extras', anuncio.servicos_extras);
            
            console.log("‚úÖ Campos do formul√°rio populados!");
        }

        // Fun√ß√µes auxiliares para popular campos
        function setFieldValue(fieldId, value) {
            const field = document.getElementById(fieldId);
            if (field && value) {
                field.value = value;
                console.log(`üìù Campo ${fieldId} definido como: ${value}`);
            }
        }

        function setSelectValue(selectId, value) {
            const select = document.getElementById(selectId);
            if (select && value) {
                select.value = value;
                console.log(`üìù Select ${selectId} definido como: ${value}`);
            }
        }

        function setCheckboxValue(checkboxId, value) {
            const checkbox = document.getElementById(checkboxId);
            if (checkbox && value !== undefined) {
                checkbox.checked = value;
                console.log(`üìù Checkbox ${checkboxId} definido como: ${value}`);
            }
        }

        function setCheckboxGroup(groupName, values) {
            if (!values || !Array.isArray(values)) return;
            
            values.forEach(value => {
                const checkbox = document.querySelector(`input[name="${groupName}"][value="${value}"]`);
                if (checkbox) {
                    checkbox.checked = true;
                    console.log(`üìù Checkbox ${groupName}[${value}] marcado`);
                }
            });
        }

        // Fun√ß√£o auxiliar para parsear string de cache (ex: "2 min: R$ 10.00")
        function parseCacheItem(item) {
            if (!item || typeof item !== 'string') return null;
            
            // Padr√µes poss√≠veis: "2 min: R$ 10.00", "2 min R$ 10.00", "2min: R$10.00", etc.
            const patterns = [
                /(\d+)\s*min\s*:?\s*R\$\s*([\d,\.]+)/i,  // "2 min: R$ 10.00" ou "2 min R$ 10.00"
                /(\d+)\s*minutos?\s*:?\s*R\$\s*([\d,\.]+)/i,  // "2 minutos: R$ 10.00"
                /(\d+)\s*:?\s*R\$\s*([\d,\.]+)/i  // "2: R$ 10.00"
            ];
            
            for (const pattern of patterns) {
                const match = item.match(pattern);
                if (match) {
                    const minutos = match[1];
                    let preco = match[2].replace(',', '.');
                    preco = parseFloat(preco).toFixed(2).replace('.', ',');
                    return { minutos, preco };
                }
            }
            
            // Se n√£o encontrou padr√£o, retorna o item original
            return { texto: item };
        }

        // Fun√ß√£o para criar um card de cache formatado
        function createCacheCard(item) {
            const div = document.createElement('div');
            div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
            
            div.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-2px)';
                this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
            });
            
            div.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
            });
            
            const parsed = parseCacheItem(item);
            
            if (parsed && parsed.minutos && parsed.preco) {
                // Formato parseado: separar tempo e pre√ßo
                div.innerHTML = `
                    <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                        <i class="fas fa-clock" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                        ${parsed.minutos} min
                    </span>
                    <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                        R$ ${parsed.preco}
                    </span>
                `;
            } else {
                // Formato n√£o parseado: mostrar como est√°
                div.innerHTML = `<span style="font-weight: 600; color: var(--text-dark); font-size: 1rem;">${parsed?.texto || item}</span>`;
            }
            
            return div;
        }

        // Fun√ß√£o para atualizar pre√ßos
        function updatePrices(anuncio) {
            const cacheDisplay = document.getElementById('cache-display');
            if (!cacheDisplay) return;
            
            cacheDisplay.innerHTML = '';
            
            console.log('üí∞ Atualizando cache do an√∫ncio:', anuncio.cache);
            
            // Se o cache for uma string simples (ex: "A combinar")
            if (typeof anuncio.cache === 'string') {
                if (anuncio.cache.toLowerCase().includes('combinar') || anuncio.cache.toLowerCase().includes('a combinar')) {
                    const p = document.createElement('p');
                    p.style.cssText = 'color: var(--text-dark); font-size: 1.1rem; font-weight: 600; padding: 1rem; background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%); border: 1px solid #ffc107; border-radius: 10px; text-align: center;';
                    p.innerHTML = '<i class="fas fa-handshake" style="margin-right: 0.5rem;"></i>A combinar';
                    cacheDisplay.appendChild(p);
                } else {
                    // Tentar parsear se for uma string formatada (ex: "2 min: R$ 50, 3 min: R$ 75")
                    const cacheItems = anuncio.cache.split(',').map(item => item.trim());
                    cacheItems.forEach(item => {
                        if (item) {
                            const card = createCacheCard(item);
                            cacheDisplay.appendChild(card);
                        }
                    });
                }
            } 
            // Se o cache for um array
            else if (Array.isArray(anuncio.cache)) {
                anuncio.cache.forEach(item => {
                    if (item) {
                        const card = createCacheCard(item);
                        cacheDisplay.appendChild(card);
                    }
                });
            }
            // Se o cache for um objeto com campos individuais
            else if (typeof anuncio.cache === 'object' && anuncio.cache !== null) {
                // Tentar campos individuais de cache (cache_1, cache_2, etc.)
                for (let i = 1; i <= 8; i++) {
                    const minutos = anuncio[`cache_minutos_${i}`] || anuncio.cache[`minutos_${i}`];
                    const preco = anuncio[`cache_preco_${i}`] || anuncio.cache[`preco_${i}`];
                    
                    if (minutos && preco) {
                        const div = document.createElement('div');
                        div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
                        
                        div.addEventListener('mouseenter', function() {
                            this.style.transform = 'translateY(-2px)';
                            this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                        });
                        
                        div.addEventListener('mouseleave', function() {
                            this.style.transform = 'translateY(0)';
                            this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
                        });
                        
                        div.innerHTML = `
                            <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-clock" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                                ${minutos} min
                            </span>
                            <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                                R$ ${parseFloat(preco).toFixed(2).replace('.', ',')}
                            </span>
                        `;
                        cacheDisplay.appendChild(div);
                    }
                }
            }
            
            // Fallback: mostrar pre√ßos tradicionais se n√£o houver cache espec√≠fico
            if (cacheDisplay.children.length === 0) {
                if (anuncio.preco_1h) {
                    const div = document.createElement('div');
                    div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
                    
                    div.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                    });
                    
                    div.addEventListener('mouseleave', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
                    });
                    
                    div.innerHTML = `
                        <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-clock" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                            1 hora
                        </span>
                        <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                            R$ ${parseFloat(anuncio.preco_1h).toFixed(2).replace('.', ',')}
                        </span>
                    `;
                    cacheDisplay.appendChild(div);
                }
                
                if (anuncio.preco_2h) {
                    const div = document.createElement('div');
                    div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
                    
                    div.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                    });
                    
                    div.addEventListener('mouseleave', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
                    });
                    
                    div.innerHTML = `
                        <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-clock" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                            2 horas
                        </span>
                        <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                            R$ ${parseFloat(anuncio.preco_2h).toFixed(2).replace('.', ',')}
                        </span>
                    `;
                    cacheDisplay.appendChild(div);
                }
                
                if (anuncio.preco_pernoite) {
                    const div = document.createElement('div');
                    div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
                    
                    div.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                    });
                    
                    div.addEventListener('mouseleave', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
                    });
                    
                    div.innerHTML = `
                        <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-moon" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                            Pernoite
                        </span>
                        <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                            R$ ${parseFloat(anuncio.preco_pernoite).toFixed(2).replace('.', ',')}
                        </span>
                    `;
                    cacheDisplay.appendChild(div);
                }
            }
            
            // Se ainda n√£o houver nada para exibir
            if (cacheDisplay.children.length === 0) {
                const p = document.createElement('p');
                p.style.cssText = 'color: #999; font-style: italic; padding: 0.75rem;';
                p.textContent = 'Informa√ß√µes de cach√™ n√£o dispon√≠veis';
                cacheDisplay.appendChild(p);
            }
        }

        // Fun√ß√£o para atualizar pre√ßos (vers√£o mobile)
        function updatePricesMobile(anuncio) {
            const cacheDisplay = document.getElementById('cache-display-mobile');
            if (!cacheDisplay) return;
            
            cacheDisplay.innerHTML = '';
            
            console.log('üí∞ Atualizando cache mobile do an√∫ncio:', anuncio.cache);
            
            // Se o cache for uma string simples (ex: "A combinar")
            if (typeof anuncio.cache === 'string') {
                if (anuncio.cache.toLowerCase().includes('combinar') || anuncio.cache.toLowerCase().includes('a combinar')) {
                    const p = document.createElement('p');
                    p.style.cssText = 'color: var(--text-dark); font-size: 1.1rem; font-weight: 600; padding: 1rem; background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%); border: 1px solid #ffc107; border-radius: 10px; text-align: center;';
                    p.innerHTML = '<i class="fas fa-handshake" style="margin-right: 0.5rem;"></i>A combinar';
                    cacheDisplay.appendChild(p);
                } else {
                    // Tentar parsear se for uma string formatada (ex: "2 min: R$ 50, 3 min: R$ 75")
                    const cacheItems = anuncio.cache.split(',').map(item => item.trim());
                    cacheItems.forEach(item => {
                        if (item) {
                            const card = createCacheCard(item);
                            cacheDisplay.appendChild(card);
                        }
                    });
                }
            } 
            // Se o cache for um array
            else if (Array.isArray(anuncio.cache)) {
                anuncio.cache.forEach(item => {
                    if (item) {
                        const card = createCacheCard(item);
                        cacheDisplay.appendChild(card);
                    }
                });
            }
            // Se o cache for um objeto com campos individuais
            else if (typeof anuncio.cache === 'object' && anuncio.cache !== null) {
                // Tentar campos individuais de cache (cache_1, cache_2, etc.)
                for (let i = 1; i <= 8; i++) {
                    const minutos = anuncio[`cache_minutos_${i}`] || anuncio.cache[`minutos_${i}`];
                    const preco = anuncio[`cache_preco_${i}`] || anuncio.cache[`preco_${i}`];
                    
                    if (minutos && preco) {
                        const div = document.createElement('div');
                        div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
                        
                        div.addEventListener('mouseenter', function() {
                            this.style.transform = 'translateY(-2px)';
                            this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                        });
                        
                        div.addEventListener('mouseleave', function() {
                            this.style.transform = 'translateY(0)';
                            this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
                        });
                        
                        div.innerHTML = `
                            <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                                <i class="fas fa-clock" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                                ${minutos} min
                            </span>
                            <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                                R$ ${parseFloat(preco).toFixed(2).replace('.', ',')}
                            </span>
                        `;
                        cacheDisplay.appendChild(div);
                    }
                }
            }
            
            // Fallback: mostrar pre√ßos tradicionais se n√£o houver cache espec√≠fico
            if (cacheDisplay.children.length === 0) {
                if (anuncio.preco_1h) {
                    const div = document.createElement('div');
                    div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
                    
                    div.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                    });
                    
                    div.addEventListener('mouseleave', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
                    });
                    
                    div.innerHTML = `
                        <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-clock" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                            1 hora
                        </span>
                        <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                            R$ ${parseFloat(anuncio.preco_1h).toFixed(2).replace('.', ',')}
                        </span>
                    `;
                    cacheDisplay.appendChild(div);
                }
                
                if (anuncio.preco_2h) {
                    const div = document.createElement('div');
                    div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
                    
                    div.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                    });
                    
                    div.addEventListener('mouseleave', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
                    });
                    
                    div.innerHTML = `
                        <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-clock" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                            2 horas
                        </span>
                        <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                            R$ ${parseFloat(anuncio.preco_2h).toFixed(2).replace('.', ',')}
                        </span>
                    `;
                    cacheDisplay.appendChild(div);
                }
                
                if (anuncio.preco_pernoite) {
                    const div = document.createElement('div');
                    div.style.cssText = 'display: flex; justify-content: space-between; align-items: center; padding: 1rem; background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%); border: 1px solid #e9ecef; border-radius: 10px; margin-bottom: 0.75rem; box-shadow: 0 2px 4px rgba(0,0,0,0.05); transition: all 0.3s ease;';
                    
                    div.addEventListener('mouseenter', function() {
                        this.style.transform = 'translateY(-2px)';
                        this.style.boxShadow = '0 4px 8px rgba(0,0,0,0.1)';
                    });
                    
                    div.addEventListener('mouseleave', function() {
                        this.style.transform = 'translateY(0)';
                        this.style.boxShadow = '0 2px 4px rgba(0,0,0,0.05)';
                    });
                    
                    div.innerHTML = `
                        <span style="font-size: 1rem; font-weight: 600; color: var(--text-dark); display: flex; align-items: center; gap: 0.5rem;">
                            <i class="fas fa-moon" style="color: var(--primary-color); font-size: 0.9rem;"></i>
                            Pernoite
                        </span>
                        <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary-color); letter-spacing: 0.5px;">
                            R$ ${parseFloat(anuncio.preco_pernoite).toFixed(2).replace('.', ',')}
                        </span>
                    `;
                    cacheDisplay.appendChild(div);
                }
            }
            
            // Se ainda n√£o houver nada para exibir
            if (cacheDisplay.children.length === 0) {
                const p = document.createElement('p');
                p.style.cssText = 'color: #999; font-style: italic; padding: 0.75rem;';
                p.textContent = 'Informa√ß√µes de cach√™ n√£o dispon√≠veis';
                cacheDisplay.appendChild(p);
            }
        }

        // Fun√ß√£o para atualizar descri√ß√£o
        function updateDescription(anuncio) {
            const descriptionText = document.getElementById('description-text');
            if (!descriptionText) return;
            
            const description = anuncio.descricao || anuncio.description || 'Descri√ß√£o n√£o dispon√≠vel';
            const readMoreElement = document.querySelector('.ficha-description-read-more');
            const readMoreBtn = readMoreElement ? readMoreElement.querySelector('span') : null;
            
            // Salvar descri√ß√£o completa no objeto global para uso no toggle
            if (!currentAnuncio) {
                currentAnuncio = {};
            }
            currentAnuncio.descricao = description;
            currentAnuncio.description = description;
            
            // Se a descri√ß√£o for longa, mostrar apenas os primeiros 500 caracteres com bot√£o "Ler mais"
            const maxChars = 500;
            if (description.length > maxChars) {
                descriptionText.textContent = description.substring(0, maxChars) + '...';
                if (readMoreElement) {
                    readMoreElement.style.display = 'block';
                }
                const readMoreText = readMoreElement ? readMoreElement.querySelector('.read-more-text') : null;
                const readMoreIcon = readMoreElement ? readMoreElement.querySelector('.read-more-icon') : null;
                const readMoreBtn = readMoreElement ? readMoreElement.querySelector('.read-more-btn') : null;
                if (readMoreText) {
                    readMoreText.textContent = 'Ler mais';
                }
                if (readMoreIcon) {
                    readMoreIcon.style.transform = 'rotate(0deg)';
                }
                if (readMoreBtn) {
                    readMoreBtn.classList.remove('expanded');
                }
            } else {
                // Descri√ß√£o curta, mostrar completa
                descriptionText.textContent = description;
                if (readMoreElement) {
                    readMoreElement.style.display = 'none';
                }
            }
            
            console.log('‚úÖ Descri√ß√£o atualizada:', description.length, 'caracteres');
        }

        // Fun√ß√£o para alternar descri√ß√£o
        function toggleDescription() {
            const descriptionText = document.getElementById('description-text');
            const readMoreElement = document.querySelector('.ficha-description-read-more');
            const readMoreText = readMoreElement ? readMoreElement.querySelector('.read-more-text') : null;
            const readMoreIcon = readMoreElement ? readMoreElement.querySelector('.read-more-icon') : null;
            const readMoreBtn = readMoreElement ? readMoreElement.querySelector('.read-more-btn') : null;
            
            if (!descriptionText) return;
            
            const fullDescription = currentAnuncio?.descricao || currentAnuncio?.description || 'Descri√ß√£o n√£o dispon√≠vel';
            const maxChars = 500;
            
            if (descriptionText.textContent.includes('...')) {
                // Mostrar descri√ß√£o completa
                descriptionText.textContent = fullDescription;
                if (readMoreText) {
                    readMoreText.textContent = 'Ler menos';
                }
                if (readMoreIcon) {
                    readMoreIcon.style.transform = 'rotate(180deg)';
                }
                if (readMoreBtn) {
                    readMoreBtn.classList.add('expanded');
                }
            } else {
                // Mostrar descri√ß√£o resumida
                descriptionText.textContent = fullDescription.substring(0, maxChars) + '...';
                if (readMoreText) {
                    readMoreText.textContent = 'Ler mais';
                }
                if (readMoreIcon) {
                    readMoreIcon.style.transform = 'rotate(0deg)';
                }
                if (readMoreBtn) {
                    readMoreBtn.classList.remove('expanded');
                }
                // Scroll suave para o topo da descri√ß√£o
                descriptionText.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Fun√ß√£o para atualizar dados pessoais
        function updatePersonalData(anuncio) {
            const personalData = document.getElementById('personal-data');
            if (!personalData) return;
            
            personalData.innerHTML = '';
            
            const dataFields = [
                { key: 'idade', label: 'Idade', icon: 'fas fa-birthday-cake', value: '25' },
                { key: 'altura', label: 'Altura', icon: 'fas fa-ruler-vertical', value: '1.70m' },
                { key: 'peso', label: 'Peso', icon: 'fas fa-weight', value: '65kg' },
                { key: 'oral_sem', label: 'Faz Oral sem', icon: 'fas fa-kiss', value: 'Sim' },
                { key: 'beija', label: 'Beija', icon: 'fas fa-heart', value: 'Sim' },
                { key: 'anal', label: 'Faz Anal', icon: 'fas fa-user', value: 'Sim' },
                { key: 'mora_so', label: 'Mora s√≥', icon: 'fas fa-home', value: 'Sim' },
                { key: 'horario', label: 'Hor√°rio de Atendimento', icon: 'fas fa-clock', value: '24h' },
                { key: 'pagamento', label: 'Formas de Pagamento', icon: 'fas fa-credit-card', value: '<i class="fas fa-money-bill-wave" style="color: #28a745; margin-right: 8px;"></i>Dinheiro <i class="fab fa-pix" style="color: #32BCAD; margin: 0 8px;"></i>PIX <i class="fas fa-credit-card" style="color: #007bff; margin-right: 4px;"></i>D√©bito <i class="fas fa-credit-card" style="color: #6f42c1; margin: 0 4px 0 8px;"></i>Cr√©dito' }
            ];
            
            dataFields.forEach(field => {
                    const row = document.createElement('div');
                    row.className = 'ficha-data-row';
                    row.innerHTML = `
                        <div class="ficha-data-row-label">
                            <i class="${field.icon}"></i>
                            <span>${field.label}</span>
                        </div>
                    <div class="ficha-data-row-value">${field.value}</div>
                    `;
                    personalData.appendChild(row);
            });
        }

        // Fun√ß√£o para atualizar servi√ßos
        function updateServices(anuncio) {
            const servicesContainer = document.getElementById('services-display-container');
            if (!servicesContainer) return;
            
            console.log('üîß Atualizando servi√ßos do an√∫ncio:', anuncio);
            console.log('üîß Servi√ßos dispon√≠veis no an√∫ncio:', {
                servicos: anuncio.servicos,
                servicosType: typeof anuncio.servicos,
                servicosIsArray: Array.isArray(anuncio.servicos),
                servicosLength: anuncio.servicos ? (Array.isArray(anuncio.servicos) ? anuncio.servicos.length : 'N/A') : 0,
                servicos_basicos: anuncio.servicos_basicos,
                servicos_especiais: anuncio.servicos_especiais,
                servicos_extras: anuncio.servicos_extras,
                fetichismo_bdsm: anuncio.fetichismo_bdsm,
                atendimento_grupo: anuncio.atendimento_grupo,
                perfil_estilo: anuncio.perfil_estilo
            });
            
            // Expandir o objeto servicos no console para ver o conte√∫do real
            if (anuncio.servicos) {
                console.log('üîç Conte√∫do completo de anuncio.servicos:', JSON.stringify(anuncio.servicos, null, 2));
                console.log('üîç Keys de anuncio.servicos:', Object.keys(anuncio.servicos));
            }
            
            // Mapeamento de slugs para nomes leg√≠veis
            const servicoSlugToNome = {
                // Servi√ßos Virtuais Principais
                'videochamada': 'Videochamada',
                'chamada-video': 'Chamada de v√≠deo',
                'sexting': 'Sexting',
                'mostro-rosto': 'Mostro o rosto',
                'cara-a-cara': 'Cara a cara',
                'ligacao-previa': 'Liga√ß√£o pr√©via',
                'atendimento-24h': 'Atendimento 24h',
                // Fantasias e Atividades Virtuais
                'striptease': 'Striptease',
                'masturbacao': 'Masturba√ß√£o',
                'masturbacao-interativa': 'Masturba√ß√£o interativa',
                'squirting': 'Squirting',
                'sexo-oral-virtual': 'Sexo oral virtual',
                'penetracao-virtual': 'Penetra√ß√£o virtual',
                'sexo-anal-virtual': 'Sexo anal virtual',
                'chuva-dourada': 'Chuva dourada',
                'avaliar-penis': 'Avaliar seu p√™nis',
                'falar-sujo': 'Falar sujo',
                'jogos-papeis': 'Jogos de pap√©is',
                'jogos-eroticos': 'Jogos er√≥ticos',
                // Conte√∫dos para Venda
                'packs-fotos': 'Packs de fotos',
                'packs-videos': 'Packs de v√≠deos',
                'videos-personalizados': 'V√≠deos personalizados',
                'audios-eroticos': '√Åudios er√≥ticos',
                'audios-personalizados': '√Åudios personalizados',
                'roupa-intima': 'Roupa √≠ntima',
                'conteudos-exclusivos': 'Conte√∫dos exclusivos',
                // Fetichismo e BDSM Virtual
                'dominacao': 'Domina√ß√£o',
                'dominacao-virtual': 'Domina√ß√£o virtual',
                'humilhacao': 'Humilha√ß√£o',
                'punheta-guiada': 'Punheta guiada',
                'podolatria': 'Podolatria',
                'fetichismo': 'Fetichismo',
                'inversao': 'Invers√£o',
                'anal-sem-frescura': 'Anal sem frescura',
                'brinquedos-sexuais': 'Brinquedos sexuais',
                'vibrador-controlado': 'Vibrador controlado',
                'plug-anal': 'Plug anal',
                'dupla-penetracao': 'Dupla penetra√ß√£o',
                // Fantasias e Figurinos
                'fantasias': 'Fantasias',
                'figurinos': 'Figurinos',
                'disfarces': 'Disfarces',
                'lingerie': 'Lingerie',
                'cosplay': 'Cosplay',
                // Perfil e Estilo
                'estilo-namoradinha': 'Estilo namoradinha',
                'estilo-ninfeta': 'Estilo ninfeta',
                'estilo-princesinha': 'Estilo princesinha',
                'sem-frescura': 'Sem frescura',
                'ativa': 'Ativa',
                'passiva': 'Passiva',
                'versatil': 'Vers√°til',
                'inversao-papeis': 'Invers√£o de pap√©is',
                // Atendimento
                'atendo-homens': 'Atendo homens',
                'atendo-mulheres': 'Atendo mulheres',
                'atendo-casais': 'Atendo casais',
                'atendo-trans': 'Atendo trans',
                'atendo-nao-binarios': 'Atendo n√£o bin√°rios',
                'chamadas-individuais': 'Chamadas individuais',
                'chamadas-com-amigas': 'Chamadas com amigas',
                'participacao-ativa-cliente': 'Participa√ß√£o ativa do cliente',
                // Servi√ßos Extras
                'sem-limite': 'Sem limite',
                'sexcam': 'Sexcam',
                'camgirl': 'Camgirl',
                'qualidade-hd': 'Qualidade HD',
                'iluminacao-profissional': 'Ilumina√ß√£o profissional',
                'interacao-natural': 'Intera√ß√£o natural'
            };
            
            // Fun√ß√£o para converter slug em nome leg√≠vel
            const getNomeServico = (servico) => {
                if (typeof servico !== 'string') return servico;
                // Se j√° for um nome leg√≠vel (com espa√ßos ou mai√∫sculas), retornar como est√°
                if (servico.includes(' ') || servico[0] === servico[0].toUpperCase()) {
                    return servico;
                }
                // Caso contr√°rio, tentar mapear o slug
                return servicoSlugToNome[servico.toLowerCase()] || servico;
            };
            
            // Mapeamento de categorias de servi√ßos
            const categoriasServicos = {
                'Servi√ßos Virtuais Principais': anuncio.servicos_basicos || [],
                'Fantasias e Atividades Virtuais': anuncio.servicos_especiais || [],
                'Conte√∫dos para Venda': anuncio.servicos_extras || [],
                'Fetichismo e BDSM Virtual': anuncio.fetichismo_bdsm || [],
                'Fantasias e Figurinos': anuncio.perfil_estilo || [],
                'Perfil e Estilo': anuncio.perfil_estilo || [],
                'Atendimento': anuncio.atendimento_grupo || [],
                'Servi√ßos Extras': anuncio.servicos_extras || []
            };
            
            // Verificar se h√° servi√ßos no array geral ou nos campos categorizados
            // Verificar m√∫ltiplas possibilidades de nome do campo
            let servicosArray = anuncio.servicos || anuncio.servicosArray || [];
            
            // Se for um objeto (pode acontecer com Firestore), converter para array
            if (servicosArray && typeof servicosArray === 'object' && !Array.isArray(servicosArray)) {
                console.log('‚ö†Ô∏è servicos √© um objeto, convertendo para array...', servicosArray);
                servicosArray = Object.values(servicosArray);
            }
            
            // Garantir que √© um array
            if (!Array.isArray(servicosArray)) {
                servicosArray = [];
            }
            
            const temServicosArray = servicosArray.length > 0;
            const temServicosCategorizados = Object.values(categoriasServicos).some(arr => Array.isArray(arr) && arr.length > 0);
            
            console.log('üîß Verifica√ß√£o de servi√ßos:', {
                temServicosArray,
                temServicosCategorizados,
                servicosArrayLength: servicosArray.length,
                servicosArray: servicosArray,
                servicosArrayType: typeof servicosArray,
                servicosArrayIsArray: Array.isArray(servicosArray),
                anuncioServicos: anuncio.servicos,
                servicos_basicos: anuncio.servicos_basicos,
                servicos_especiais: anuncio.servicos_especiais,
                servicos_extras: anuncio.servicos_extras,
                fetichismo_bdsm: anuncio.fetichismo_bdsm,
                atendimento_grupo: anuncio.atendimento_grupo,
                perfil_estilo: anuncio.perfil_estilo
            });
            
            // Se houver um array geral de servi√ßos
            if (temServicosArray) {
                // Tentar organizar por categoria baseado nos valores
                const todosServicos = servicosArray;
                
                console.log('üîß Processando array de servi√ßos:', todosServicos);
                console.log('üîß Tipo do array:', typeof todosServicos, '√â array?', Array.isArray(todosServicos), 'Tamanho:', todosServicos.length);
                
                // Limpar container
                servicesContainer.innerHTML = '';
                
                // Criar categorias dinamicamente baseado nos servi√ßos encontrados
                const categoriasEncontradas = {};
                
                todosServicos.forEach(servico => {
                    // Determinar categoria baseado no valor do servi√ßo
                    let categoria = 'Outros';
                    
                    if (['videochamada', 'chamada-video', 'sexting', 'mostro-rosto', 'cara-a-cara', 'ligacao-previa', 'atendimento-24h'].includes(servico)) {
                        categoria = 'Servi√ßos Virtuais Principais';
                    } else if (['striptease', 'masturbacao', 'masturbacao-interativa', 'squirting', 'sexo-oral-virtual', 'penetracao-virtual', 'sexo-anal-virtual', 'chuva-dourada', 'avaliar-penis', 'falar-sujo', 'jogos-papeis', 'jogos-eroticos'].includes(servico)) {
                        categoria = 'Fantasias e Atividades Virtuais';
                    } else if (['packs-fotos', 'packs-videos', 'videos-personalizados', 'audios-eroticos', 'audios-personalizados', 'roupa-intima', 'conteudos-exclusivos'].includes(servico)) {
                        categoria = 'Conte√∫dos para Venda';
                    } else if (['dominacao', 'dominacao-virtual', 'humilhacao', 'punheta-guiada', 'podolatria', 'fetichismo', 'inversao', 'anal-sem-frescura', 'brinquedos-sexuais', 'vibrador-controlado', 'plug-anal', 'dupla-penetracao'].includes(servico)) {
                        categoria = 'Fetichismo e BDSM Virtual';
                    } else if (['fantasias', 'figurinos', 'disfarces', 'lingerie', 'cosplay'].includes(servico)) {
                        categoria = 'Fantasias e Figurinos';
                    } else if (['estilo-namoradinha', 'estilo-ninfeta', 'estilo-princesinha', 'sem-frescura', 'ativa', 'passiva', 'versatil', 'inversao-papeis'].includes(servico)) {
                        categoria = 'Perfil e Estilo';
                    } else if (['atendo-homens', 'atendo-mulheres', 'atendo-casais', 'atendo-trans', 'atendo-nao-binarios', 'chamadas-individuais', 'chamadas-com-amigas', 'participacao-ativa-cliente'].includes(servico)) {
                        categoria = 'Atendimento';
                    } else if (['sem-limite', 'sexcam', 'camgirl', 'qualidade-hd', 'iluminacao-profissional', 'interacao-natural'].includes(servico)) {
                        categoria = 'Servi√ßos Extras';
                    }
                    
                    if (!categoriasEncontradas[categoria]) {
                        categoriasEncontradas[categoria] = [];
                    }
                    categoriasEncontradas[categoria].push(servico);
                });
                
                // Exibir categorias encontradas
                Object.keys(categoriasEncontradas).forEach(categoriaNome => {
                    const servicos = categoriasEncontradas[categoriaNome];
                    if (servicos.length > 0) {
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'services-category';
                        categoryDiv.style.cssText = 'margin-bottom: 2rem;';
                        
                        const h5 = document.createElement('h5');
                        h5.textContent = categoriaNome;
                        h5.style.cssText = 'font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-dark);';
                        categoryDiv.appendChild(h5);
                        
                        const tagsDiv = document.createElement('div');
                        tagsDiv.className = 'services-tags';
                        tagsDiv.style.cssText = 'display: flex; flex-wrap: wrap; gap: 0.5rem;';
                        
                        servicos.forEach(servico => {
                            const tag = document.createElement('span');
                            tag.className = 'service-tag';
                            tag.textContent = getNomeServico(servico); // Converter slug para nome leg√≠vel
                            tag.style.cssText = 'display: inline-block; padding: 0.5rem 1rem; background: var(--primary-color); color: white; border-radius: 20px; font-size: 0.9rem; font-weight: 500;';
                            tagsDiv.appendChild(tag);
                        });
                        
                        categoryDiv.appendChild(tagsDiv);
                        servicesContainer.appendChild(categoryDiv);
                    }
                });
            } else if (temServicosCategorizados) {
                // Tentar usar as categorias organizadas
                let temServicos = false;
                servicesContainer.innerHTML = '';
                
                console.log('üîß Processando servi√ßos categorizados');
                
                Object.keys(categoriasServicos).forEach(categoriaNome => {
                    const servicos = categoriasServicos[categoriaNome];
                    if (Array.isArray(servicos) && servicos.length > 0) {
                        temServicos = true;
                        console.log(`üîß Categoria "${categoriaNome}" tem ${servicos.length} servi√ßos:`, servicos);
                        
                        const categoryDiv = document.createElement('div');
                        categoryDiv.className = 'services-category';
                        categoryDiv.style.cssText = 'margin-bottom: 2rem;';
                        
                        const h5 = document.createElement('h5');
                        h5.textContent = categoriaNome;
                        h5.style.cssText = 'font-size: 1.1rem; font-weight: 600; margin-bottom: 1rem; color: var(--text-dark);';
                        categoryDiv.appendChild(h5);
                        
                        const tagsDiv = document.createElement('div');
                        tagsDiv.className = 'services-tags';
                        tagsDiv.style.cssText = 'display: flex; flex-wrap: wrap; gap: 0.5rem;';
                        
                        servicos.forEach(servico => {
                            const tag = document.createElement('span');
                            tag.className = 'service-tag';
                            tag.textContent = getNomeServico(servico); // Converter slug para nome leg√≠vel
                            tag.style.cssText = 'display: inline-block; padding: 0.5rem 1rem; background: var(--primary-color); color: white; border-radius: 20px; font-size: 0.9rem; font-weight: 500;';
                            tagsDiv.appendChild(tag);
                        });
                        
                        categoryDiv.appendChild(tagsDiv);
                        servicesContainer.appendChild(categoryDiv);
                    }
                });
                
                if (!temServicos) {
                    console.warn('‚ö†Ô∏è Nenhum servi√ßo encontrado nos campos categorizados');
                    servicesContainer.innerHTML = '<p style="color: #999; font-style: italic;">Nenhum servi√ßo cadastrado</p>';
                }
            } else {
                // Nenhum servi√ßo encontrado em nenhum formato
                console.warn('‚ö†Ô∏è Nenhum servi√ßo encontrado no an√∫ncio. Verificando todos os campos poss√≠veis...');
                console.log('üîç Todos os campos do an√∫ncio relacionados a servi√ßos:', {
                    servicos: anuncio.servicos,
                    servicos_basicos: anuncio.servicos_basicos,
                    servicos_especiais: anuncio.servicos_especiais,
                    servicos_extras: anuncio.servicos_extras,
                    fetichismo_bdsm: anuncio.fetichismo_bdsm,
                    atendimento_grupo: anuncio.atendimento_grupo,
                    perfil_estilo: anuncio.perfil_estilo,
                    servicos_virtuais_principais: anuncio.servicos_virtuais_principais,
                    fantasias_atividades_virtuais: anuncio.fantasias_atividades_virtuais,
                    conteudos_venda: anuncio.conteudos_venda,
                    fetichismo_bdsm_virtual: anuncio.fetichismo_bdsm_virtual,
                    fantasias_figurinos: anuncio.fantasias_figurinos,
                    perfil_estilo_virtual: anuncio.perfil_estilo_virtual,
                    atendimento: anuncio.atendimento,
                    servicos_extras_virtual: anuncio.servicos_extras_virtual
                });
                servicesContainer.innerHTML = '<p style="color: #999; font-style: italic;">Nenhum servi√ßo cadastrado</p>';
            }
            
            console.log('‚úÖ Servi√ßos atualizados');
        }

        // Fun√ß√£o para atualizar mapa
        function updateMap(anuncio) {
            const mapSection = document.getElementById('map-section');
            const mapLocation = document.getElementById('map-location');
            const mapLink = document.getElementById('map-link');
            const mapImage = document.getElementById('map-image');
            const directionsLink = document.getElementById('directions-link');
            const streetviewLink = document.getElementById('streetview-link');
            
            if (!mapSection || !mapLocation || !mapLink || !mapImage || !directionsLink || !streetviewLink) return;
            
            if (anuncio.cidade && anuncio.estado) {
                const location = `${anuncio.cidade}, ${anuncio.estado}`;
                mapLocation.textContent = location;
                
                // Coordenadas aproximadas para Bras√≠lia (exemplo)
                const lat = -15.8267;
                const lng = -47.9218;
                
                mapLink.href = `https://www.google.com/maps/search/?api=1&query=${lat},${lng}`;
                mapImage.src = `https://maps.googleapis.com/maps/api/staticmap?center=${lat},${lng}&zoom=13&size=400x150&markers=${lat},${lng}&key=YOUR_API_KEY`;
                mapImage.alt = `Mapa de ${location}`;
                
                directionsLink.href = `https://maps.google.com/?q=${lat},${lng}`;
                streetviewLink.href = `https://www.google.com/maps?q=${lat},${lng}&layer=c&cbll=${lat},${lng}`;
                
                mapSection.style.display = 'block';
            }
        }

        // Fun√ß√£o para atualizar contatos
        function updateContacts(anuncio) {
            const phoneNumber = anuncio.telefone_celular || anuncio.telefone || 'N√£o informado';
            const phoneBtn = document.getElementById('phoneCallBtn');
            const whatsappBtn = document.getElementById('whatsAppBtn');
            const phoneDisplay = document.querySelector('.phone-celular');
            
            if (phoneDisplay) {
                phoneDisplay.textContent = phoneNumber;
            }
            
            if (phoneBtn) {
                const phoneClean = phoneNumber.replace(/\D/g, '');
                phoneBtn.href = `tel:${phoneClean}`;
            }
            
            if (whatsappBtn) {
                const phoneClean = phoneNumber.replace(/\D/g, '');
                const whatsappText = encodeURIComponent('Ol√°, vi seu an√∫ncio na Mans√£o do Job');
                const whatsappWebUrl = `https://wa.me/55${phoneClean}?text=${whatsappText}`;
                const whatsappMobileUrl = `whatsapp://send?phone=55${phoneClean}&text=${whatsappText}`;
                
                whatsappBtn.href = whatsappWebUrl;
                whatsappBtn.setAttribute('data-mobile-href', whatsappMobileUrl);
            }
        }

        // Fun√ß√£o para carregar galeria
        function loadGallery(anuncio) {
            console.log("üì∏ Iniciando loadGallery com anuncio:", anuncio);
            
            // Aguardar um pouco para garantir que os elementos estejam prontos
            setTimeout(() => {
                const mainWrapper = document.getElementById('main-swiper-wrapper');
                const thumbWrapper = document.getElementById('thumb-swiper-wrapper');
                const photosGrid = document.getElementById('photos-grid');
                const videosSection = document.getElementById('videos-section');
                const videosGrid = document.getElementById('videos-grid');
                
                console.log("üì∏ Elementos encontrados:", {
                    mainWrapper: !!mainWrapper,
                    thumbWrapper: !!thumbWrapper,
                    photosGrid: !!photosGrid,
                    videosSection: !!videosSection,
                    videosGrid: !!videosGrid
                });
                
                if (!photosGrid) {
                    console.error("‚ùå photosGrid n√£o encontrado!");
                    return;
                }
            
                // Limpar conte√∫do anterior
                if (mainWrapper) mainWrapper.innerHTML = '';
                if (thumbWrapper) thumbWrapper.innerHTML = '';
                if (photosGrid) photosGrid.innerHTML = '';
                if (videosGrid) videosGrid.innerHTML = '';
                
                const fotos = [];
                const videos = [];
            
                // Carregar fotos do banco de dados
                // 1. Foto de banner (prioridade)
                if (anuncio.foto_banner_url) {
                    fotos.push(anuncio.foto_banner_url);
                    console.log("üì∏ Foto banner adicionada:", anuncio.foto_banner_url);
                }
                
                // 2. Foto de capa
                if (anuncio.foto_capa_url) {
                    fotos.push(anuncio.foto_capa_url);
                    console.log("üì∏ Foto capa adicionada:", anuncio.foto_capa_url);
                }
                
                // 3. Galeria de fotos (galeria_1_url at√© galeria_8_url)
                for (let i = 1; i <= 8; i++) {
                    const galeriaUrl = anuncio[`galeria_${i}_url`];
                    if (galeriaUrl) {
                        fotos.push(galeriaUrl);
                        console.log(`üì∏ Galeria ${i} adicionada:`, galeriaUrl);
                    }
                }
                
                // 4. Foto de stories (se houver)
                if (anuncio.foto_stories_url) {
                    fotos.push(anuncio.foto_stories_url);
                    console.log("üì∏ Foto stories adicionada:", anuncio.foto_stories_url);
                }
                
                // 5. Fallback: usar foto_capa ou foto_banner se n√£o houver URLs
                if (fotos.length === 0) {
                    if (anuncio.foto_capa) {
                        fotos.push(anuncio.foto_capa);
                    } else if (anuncio.foto_banner) {
                        fotos.push(anuncio.foto_banner);
                    }
                }
                
                console.log("üì∏ Total de fotos encontradas no banco:", fotos.length);
                console.log("üì∏ Fotos do banco de dados:", fotos);
            
                // Adicionar v√≠deos
                if (anuncio.mediaFiles?.videos && Array.isArray(anuncio.mediaFiles.videos)) {
                    videos.push(...anuncio.mediaFiles.videos);
                }
                // V√≠deo de verifica√ß√£o
                if (anuncio.verification_video_url) {
                    videos.push(anuncio.verification_video_url);
                }
                // V√≠deo da galeria 8 (se for v√≠deo)
                if (anuncio.galeria_8_url && anuncio.galeria_8_url.includes('video')) {
                    videos.push(anuncio.galeria_8_url);
                }
            
            // Criar foto principal (banner ou primeira foto da galeria)
            const fotoPrincipal = anuncio.foto_banner_url || anuncio.foto_capa_url || anuncio.foto_capa || anuncio.foto_banner || anuncio.coverImage || anuncio.fotoPerfil || (fotos.length > 0 ? fotos[0] : 'fotinha/fotos/avatar.jpg');
            
            const slide = document.createElement('div');
            slide.className = 'swiper-slide';
            slide.innerHTML = `
                <img src="${fotoPrincipal}" alt="Foto Principal" style="width: 100%; height: 100%; object-fit: cover;">
            `;
            mainWrapper.appendChild(slide);
            
            // Criar thumbnail da foto principal
            const thumbSlide = document.createElement('div');
            thumbSlide.className = 'swiper-slide';
            thumbSlide.innerHTML = `<img src="${fotoPrincipal}" alt="Thumb Principal">`;
            thumbWrapper.appendChild(thumbSlide);
            
            // Criar grid de fotos (2 por linha)
            console.log("üì∏ Criando grid de fotos com", fotos.length, "fotos");
            fotos.forEach((foto, index) => {
                const container = document.createElement('div');
                container.className = 'ficha-media-item-container';
                container.innerHTML = `
                    <div class="ficha-media-item-counter">${index + 1}/${fotos.length}</div>
                    <img class="ficha-media-share-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE4IDE2LjA4QzE2LjI0IDE2LjA4IDE0LjY2IDE3LjA0IDEzLjUgMTguNDhDMTIuMzQgMTcuMDQgMTAuNzYgMTYuMDggOSAxNi4wOEM1LjY5IDE2LjA4IDMgMTguNzcgMyAyMi4wOEg1QzUgMTkuNzkgNi43OSAxOCA5IDE4QzExLjIxIDE4IDEzIDE5Ljc5IDEzIDIyLjA4SDE1QzE1IDE4Ljc3IDEyLjMxIDE2LjA4IDkgMTYuMDhaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="share" onclick="shareImage('${foto}')">
                    <img class="ficha-media-expand-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE1IDNIMjFWMjlIMTVWMTVIMTNWMTNIMTVWMzZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="expand" onclick="openModal('${foto}', 'image')">
                    <a onclick="openModal('${foto}', 'image')">
                        <img class="ficha-media-item" src="${foto}" alt="Foto ${index + 1}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div style="display:none; width:100%; height:380px; background:#f0f0f0; display:flex; align-items:center; justify-content:center; color:#666; font-size:14px; border: 2px dashed #ccc;">Erro ao carregar imagem</div>
                    </a>
                `;
                photosGrid.appendChild(container);
                console.log("üì∏ Foto adicionada ao grid:", foto, "Index:", index);
            });
            
            console.log("üì∏ Grid de fotos finalizado. Total de elementos no photosGrid:", photosGrid.children.length);
            
            // Garantir que o grid seja vis√≠vel
            if (photosGrid) {
                photosGrid.style.display = 'grid';
                photosGrid.style.visibility = 'visible';
                photosGrid.style.opacity = '1';
                console.log("üì∏ CSS do photosGrid aplicado:", {
                    display: photosGrid.style.display,
                    visibility: photosGrid.style.visibility,
                    opacity: photosGrid.style.opacity
                });
            }
            
            // Criar grid de v√≠deos
            if (videos.length > 0) {
                videos.forEach((video, index) => {
                    const container = document.createElement('div');
                    container.className = 'ficha-media-item-container';
                    container.innerHTML = `
                        <div class="ficha-media-item-counter">${index + 1}/${videos.length}</div>
                        <img class="ficha-media-share-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE4IDE2LjA4QzE2LjI0IDE2LjA4IDE0LjY2IDE3LjA0IDEzLjUgMTguNDhDMTIuMzQgMTcuMDQgMTAuNzYgMTYuMDggOSAxNi4wOEM1LjY5IDE2LjA4IDMgMTguNzcgMyAyMi4wOEg1QzUgMTkuNzkgNi43OSAxOCA5IDE4QzExLjIxIDE4IDEzIDE5Ljc5IDEzIDIyLjA4SDE1QzE1IDE4Ljc3IDEyLjMxIDE2LjA4IDkgMTYuMDhaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="share" onclick="shareVideo('${video}')">
                        <img class="ficha-media-expand-icon" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE1IDNIMjFWMjlIMTVWMTVIMTNWMTNIMTVWMzZaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K" alt="expand" onclick="openModal('${video}', 'video')">
                        <a onclick="openModal('${video}', 'video')">
                            <video class="ficha-media-item" muted>
                                <source src="${video}" type="video/mp4">
                                Seu navegador n√£o suporta v√≠deos.
                            </video>
                        </a>
                    `;
                    videosGrid.appendChild(container);
                });
                videosSection.style.display = 'block';
            }
            }, 100); // Fechar o setTimeout
        }

        // Fun√ß√£o para inicializar Swipers
        function initSwipers() {
            // Swiper principal - desabilitado j√° que s√≥ temos uma foto
            mainSwiper = new Swiper('.ficha-images-slider', {
                loop: false,
                spaceBetween: 0,
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
                pagination: {
                    el: '.swiper-pagination',
                    type: 'fraction',
                },
                allowTouchMove: false,
                enabled: false
            });
            
            // Swiper de thumbnails - desabilitado j√° que s√≥ temos uma foto
            thumbSwiper = new Swiper('.ficha-images-thumbnail-slider', {
                spaceBetween: 10,
                slidesPerView: 'auto',
                freeMode: true,
                watchSlidesProgress: true,
                enabled: false
            });
            
            // Conectar os swipers
            mainSwiper.thumbs.swiper = thumbSwiper;
        }

        // Vari√°veis globais para o modal
        let currentMediaIndex = 0;
        let mediaItems = [];
        let isFullscreen = false;
        let isSlideshowActive = false;
        let slideshowInterval = null;

        // Fun√ß√£o para abrir modal
        function openModal(mediaSrc, type = 'image', index = 0) {
            const modal = document.getElementById('gallery-modal');
            const modalImage = document.getElementById('modal-image');
            const modalVideo = document.getElementById('modal-video');
            
            // Coletar todas as m√≠dias da galeria
            collectMediaItems();
            
            // Definir √≠ndice atual
            currentMediaIndex = index;
            
            // Mostrar modal
            modal.classList.add('show');
            
            // Atualizar conte√∫do
            updateModalContent();
            
            // Atualizar thumbnails
            updateThumbnails();
            
            // Atualizar contador
            updateCounter();
        }

        // Coletar todas as m√≠dias da galeria
        function collectMediaItems() {
            mediaItems = [];
            console.log('üî• Coletando itens de m√≠dia...');
            
            // Buscar por containers de m√≠dia
            const photoContainers = document.querySelectorAll('.ficha-media-item-container');
            console.log('üì¶ Containers encontrados:', photoContainers.length);
            
            // Tamb√©m buscar por imagens diretamente na galeria
            const allImages = document.querySelectorAll('.ficha-media-item');
            console.log('üñºÔ∏è Imagens diretas encontradas:', allImages.length);
            
            // Processar containers
            photoContainers.forEach((container, index) => {
                const img = container.querySelector('img.ficha-media-item');
                const video = container.querySelector('video');
                
                if (img && img.src) {
                    console.log('‚úÖ Imagem encontrada no container:', img.src);
                    mediaItems.push({
                        src: img.src,
                        type: 'image',
                        index: index
                    });
                } else if (video && video.querySelector('source')) {
                    const source = video.querySelector('source');
                    console.log('‚úÖ V√≠deo encontrado no container:', source.src);
                    mediaItems.push({
                        src: source.src,
                        type: 'video',
                        index: index
                    });
                }
            });
            
            // Se n√£o encontrou nada nos containers, buscar diretamente
            if (mediaItems.length === 0) {
                allImages.forEach((img, index) => {
                    if (img.src) {
                        console.log('‚úÖ Imagem direta encontrada:', img.src);
                        mediaItems.push({
                            src: img.src,
                            type: 'image',
                            index: index
                        });
                    }
                });
            }
            
            // Se ainda n√£o encontrou nada, usar dados do an√∫ncio
            if (mediaItems.length === 0 && currentAnuncio) {
                console.log('üîÑ Usando dados do an√∫ncio para criar thumbnails...');
                
                // Usar foto de capa
                if (currentAnuncio.foto_capa_url) {
                    mediaItems.push({
                        src: currentAnuncio.foto_capa_url,
                        type: 'image',
                        index: 0
                    });
                }
                
                // Usar galeria
                for (let i = 1; i <= 8; i++) {
                    const url = currentAnuncio[`galeria_${i}_url`];
                    if (url) {
                        mediaItems.push({
                            src: url,
                            type: 'image',
                            index: i
                        });
                    }
                }
            }
            
            console.log('üìä Total de itens coletados:', mediaItems.length);
        }

        // Atualizar conte√∫do do modal
        function updateModalContent() {
            const modalImage = document.getElementById('modal-image');
            const modalVideo = document.getElementById('modal-video');
            const currentItem = mediaItems[currentMediaIndex];
            
            if (!currentItem) return;
            
            if (currentItem.type === 'video') {
                modalImage.style.display = 'none';
                modalVideo.style.display = 'block';
                modalVideo.src = currentItem.src;
                modalVideo.play();
            } else {
                modalImage.style.display = 'block';
                modalVideo.style.display = 'none';
                modalImage.src = currentItem.src;
            }
        }

        // Atualizar thumbnails
        function updateThumbnails() {
            const thumbnailsContainer = document.getElementById('modal-thumbnails');
            thumbnailsContainer.innerHTML = '';
            
            console.log('üî• Atualizando thumbnails, total de itens:', mediaItems.length);
            
            if (mediaItems.length === 0) {
                console.log('‚ö†Ô∏è Nenhum item de m√≠dia encontrado');
                return;
            }
            
            mediaItems.forEach((item, index) => {
                const thumbnail = document.createElement('div');
                thumbnail.className = `modal-thumbnail ${index === currentMediaIndex ? 'active' : ''}`;
                thumbnail.onclick = () => goToSlide(index);
                
                const img = document.createElement('img');
                img.src = item.src;
                img.alt = `Thumbnail ${index + 1}`;
                
                // Adicionar tratamento de erro para imagens
                img.onerror = function() {
                    console.log('‚ùå Erro ao carregar thumbnail:', item.src);
                    this.style.display = 'none';
                    // Criar placeholder
                    const placeholder = document.createElement('div');
                    placeholder.style.cssText = `
                        width: 100%;
                        height: 100%;
                        background: #333;
                        display: flex;
                        align-items: center;
                        justify-content: center;
                        color: #fff;
                        font-size: 12px;
                    `;
                    placeholder.textContent = '?';
                    thumbnail.appendChild(placeholder);
                };
                
                img.onload = function() {
                    console.log('‚úÖ Thumbnail carregada:', item.src);
                };
                
                thumbnail.appendChild(img);
                thumbnailsContainer.appendChild(thumbnail);
            });
        }

        // Atualizar contador
        function updateCounter() {
            document.getElementById('modal-current-index').textContent = currentMediaIndex + 1;
            document.getElementById('modal-total-count').textContent = mediaItems.length;
        }

        // Navegar para slide espec√≠fico
        function goToSlide(index) {
            if (index >= 0 && index < mediaItems.length) {
                currentMediaIndex = index;
                updateModalContent();
                updateThumbnails();
                updateCounter();
            }
        }

        // Pr√≥ximo slide
        function nextSlide() {
            const nextIndex = (currentMediaIndex + 1) % mediaItems.length;
            goToSlide(nextIndex);
        }

        // Slide anterior
        function prevSlide() {
            const prevIndex = currentMediaIndex === 0 ? mediaItems.length - 1 : currentMediaIndex - 1;
            goToSlide(prevIndex);
        }

        // Fun√ß√£o para fechar modal
        function closeModal() {
            const modal = document.getElementById('gallery-modal');
            const modalVideo = document.getElementById('modal-video');
            
            modal.classList.remove('show');
            
            if (modalVideo) {
                modalVideo.pause();
                modalVideo.currentTime = 0;
            }
            
            // Parar slideshow se estiver ativo
            if (slideshowInterval) {
                clearInterval(slideshowInterval);
                slideshowInterval = null;
                isSlideshowActive = false;
            }
        }

        // Fun√ß√£o para toggle fullscreen
        function toggleFullscreen() {
            const modal = document.getElementById('gallery-modal');
            
            if (!isFullscreen) {
                if (modal.requestFullscreen) {
                    modal.requestFullscreen();
                } else if (modal.webkitRequestFullscreen) {
                    modal.webkitRequestFullscreen();
                } else if (modal.msRequestFullscreen) {
                    modal.msRequestFullscreen();
                }
                isFullscreen = true;
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
                isFullscreen = false;
            }
        }

        // Fun√ß√£o para toggle slideshow
        function toggleSlideshow() {
            if (isSlideshowActive) {
                clearInterval(slideshowInterval);
                slideshowInterval = null;
                isSlideshowActive = false;
            } else {
                slideshowInterval = setInterval(() => {
                    nextSlide();
                }, 3000); // 3 segundos
                isSlideshowActive = true;
            }
        }

        // Fun√ß√£o para toggle thumbnails
        function toggleThumbnails() {
            const thumbnails = document.getElementById('modal-thumbnails');
            thumbnails.style.display = thumbnails.style.display === 'none' ? 'flex' : 'none';
        }

        // Fun√ß√£o para compartilhar imagem
        function shareImage(imageSrc) {
            if (navigator.share) {
                navigator.share({
                    title: 'Veja esta foto',
                    text: 'Foto de ' + (currentAnuncio?.nome || 'an√∫ncio'),
                    url: imageSrc
                });
            } else {
                // Fallback para copiar URL
                navigator.clipboard.writeText(imageSrc).then(() => {
                    alert('URL da imagem copiada para a √°rea de transfer√™ncia!');
                });
            }
        }

        // Fun√ß√£o para compartilhar v√≠deo
        function shareVideo(videoSrc) {
            if (navigator.share) {
                navigator.share({
                    title: 'Veja este v√≠deo',
                    text: 'V√≠deo de ' + (currentAnuncio?.nome || 'an√∫ncio'),
                    url: videoSrc
                });
            } else {
                // Fallback para copiar URL
                navigator.clipboard.writeText(videoSrc).then(() => {
                    alert('URL do v√≠deo copiada para a √°rea de transfer√™ncia!');
                });
            }
        }

        // Header agora est√° integrado no container - n√£o precisa de scroll behavior

        // Fun√ß√£o para inicializar modais
        function initModals() {
            const modal = document.getElementById('gallery-modal');
            
            // Event listeners para bot√µes
            document.getElementById('modal-close-btn').onclick = closeModal;
            document.getElementById('modal-prev-btn').onclick = prevSlide;
            document.getElementById('modal-next-btn').onclick = nextSlide;
            document.getElementById('modal-fullscreen-btn').onclick = toggleFullscreen;
            document.getElementById('modal-slideshow-btn').onclick = toggleSlideshow;
            document.getElementById('modal-thumbs-btn').onclick = toggleThumbnails;
            
            // Fechar modal clicando no backdrop
            modal.onclick = function(event) {
                if (event.target === modal || event.target.classList.contains('modal-backdrop')) {
                    closeModal();
                }
            }
            
            // Navega√ß√£o com teclado
            document.addEventListener('keydown', function(event) {
                if (!modal.classList.contains('show')) return;
                
                switch(event.key) {
                    case 'Escape':
                        closeModal();
                        break;
                    case 'ArrowLeft':
                        prevSlide();
                        break;
                    case 'ArrowRight':
                        nextSlide();
                        break;
                    case 'f':
                    case 'F':
                        toggleFullscreen();
                        break;
                    case ' ':
                        event.preventDefault();
                        toggleSlideshow();
                        break;
                }
            });
        }
    </script>

    <!-- Script para efeito de fundo fixo transl√∫cido e navega√ß√£o de volta -->
    <script>
        // Carrega imagem de fundo da galeria anterior, se houver
        document.addEventListener('DOMContentLoaded', function() {
            const bgImage = sessionStorage.getItem("lastGalleryBackground");
            if (bgImage) {
                const pageBackground = document.getElementById('page-background');
                if (pageBackground) {
                    pageBackground.style.backgroundImage = `url(${bgImage})`;
                    console.log('‚úÖ Imagem de fundo aplicada com sucesso!');
                }
            } else {
                console.log('‚ÑπÔ∏è Nenhuma imagem de fundo encontrada no sessionStorage');
            }

            // Funcionalidade de clique nas laterais removida conforme solicitado
        });
        
        // ============================================
        // WHATSAPP MOBILE DETECTION
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const whatsappBtn = document.getElementById('whatsAppBtn');
            if (whatsappBtn) {
                // Detectar se √© mobile e usar o link apropriado
                const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
                if (isMobile) {
                    whatsappBtn.addEventListener('click', function(e) {
                        const mobileHref = this.getAttribute('data-mobile-href');
                        if (mobileHref) {
                            window.location.href = mobileHref;
                            e.preventDefault();
                            return false;
                        }
                    });
                }
            }
        });
        
        // ============================================
        // UPLOAD DE BANNER E GALERIA
        // ============================================
        // COMENTADO: Esta √© uma p√°gina de visualiza√ß√£o, n√£o h√° inputs de upload
        /*
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üì∏ Inicializando uploads de banner e galeria...');
            
            // Setup Banner Upload
            const bannerInput = document.getElementById('banner-photo');
            const bannerPreview = document.getElementById('profile-banner');
            const btnChangeBanner = document.getElementById('btn-change-banner');
            const bannerOverlay = document.getElementById('banner-upload-overlay');
            
            if (bannerInput && bannerPreview) {
                bannerInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (!file || !file.type.match('image.*')) {
                        alert('Por favor, selecione um arquivo de imagem.');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        bannerPreview.src = e.target.result;
                        bannerPreview.style.opacity = '1';
                        
                        // Esconde overlay e mostra bot√£o de trocar
                        if (bannerOverlay) {
                            bannerOverlay.style.opacity = '0';
                            setTimeout(() => {
                                bannerOverlay.style.display = 'none';
                            }, 300);
                        }
                        if (btnChangeBanner) {
                            btnChangeBanner.style.display = 'block';
                        }
                    };
                    reader.readAsDataURL(file);
                });
            }
            
            if (btnChangeBanner && bannerInput) {
                btnChangeBanner.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    bannerInput.click();
                });
            }
            
            // Setup Gallery Uploads (Fotos 1-7)
            for (let i = 1; i <= 7; i++) {
                const galeriaInput = document.getElementById(`galeria-photo-${i}`);
                const galeriaPreview = document.getElementById(`galeria-preview-${i}`);
                const galeriaOverlay = document.getElementById(`galeria-overlay-${i}`);
                const btnChangeGaleria = document.getElementById(`btn-change-galeria-${i}`);
                
                if (galeriaInput && galeriaPreview) {
                    galeriaInput.addEventListener('change', function(e) {
                        const file = e.target.files[0];
                        if (!file || !file.type.match('image.*')) {
                            alert('Por favor, selecione um arquivo de imagem.');
                            return;
                        }
                        
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            const url = e.target.result;
                            
                            // Criar elemento img se n√£o existir
                            let img = galeriaPreview.querySelector('img');
                            if (!img) {
                                img = document.createElement('img');
                                img.style.width = '100%';
                                img.style.height = '100%';
                                img.style.objectFit = 'cover';
                                galeriaPreview.appendChild(img);
                            }
                            
                            img.src = url;
                            galeriaPreview.style.display = 'block';
                            
                            // Esconde overlay e mostra bot√£o de trocar
                            if (galeriaOverlay) {
                                galeriaOverlay.style.opacity = '0';
                                setTimeout(() => {
                                    galeriaOverlay.style.display = 'none';
                                }, 300);
                            }
                            if (btnChangeGaleria) {
                                btnChangeGaleria.style.display = 'block';
                            }
                        };
                        reader.readAsDataURL(file);
                    });
                }
                
                if (btnChangeGaleria && galeriaInput) {
                    btnChangeGaleria.addEventListener('click', function(e) {
                        e.preventDefault();
                        e.stopPropagation();
                        galeriaInput.click();
                    });
                }
            }
            
            // Setup Video Upload (Box 8)
            const videoInput = document.getElementById('galeria-photo-8');
            const videoPreview = document.getElementById('galeria-video-preview-8');
            const photoPreview8 = document.getElementById('galeria-preview-8');
            const videoOverlay = document.getElementById('galeria-overlay-8');
            const btnChangeVideo = document.getElementById('btn-change-galeria-8');
            
            if (videoInput && videoPreview) {
                videoInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (!file || !file.type.match('video.*')) {
                        alert('Por favor, selecione um arquivo de v√≠deo.');
                        return;
                    }
                    
                    // Verificar tamanho do arquivo (m√°x 100MB)
                    if (file.size > 100 * 1024 * 1024) {
                        alert('O v√≠deo deve ter no m√°ximo 100MB.');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const url = e.target.result;
                        
                        // Criar elemento video se n√£o existir
                        let video = videoPreview.querySelector('video');
                        if (!video) {
                            video = document.createElement('video');
                            video.style.width = '100%';
                            video.style.height = '100%';
                            video.style.objectFit = 'cover';
                            video.controls = true;
                            videoPreview.appendChild(video);
                        }
                        
                        video.src = url;
                        videoPreview.style.display = 'block';
                        if (photoPreview8) photoPreview8.style.display = 'none';
                        
                        // Esconde overlay e mostra bot√£o de trocar
                        if (videoOverlay) {
                            videoOverlay.style.opacity = '0';
                            setTimeout(() => {
                                videoOverlay.style.display = 'none';
                            }, 300);
                        }
                        if (btnChangeVideo) {
                            btnChangeVideo.style.display = 'block';
                        }
                    };
                    reader.readAsDataURL(file);
                });
            }
            
            if (btnChangeVideo && videoInput) {
                btnChangeVideo.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    videoInput.click();
                });
            }
            
            // Setup Foto de Stories (Box 9)
            const storiesInput = document.getElementById('galeria-photo-9');
            const storiesPreview = document.getElementById('galeria-preview-9');
            const storiesOverlay = document.getElementById('galeria-overlay-9');
            const btnChangeStories = document.getElementById('btn-change-galeria-9');
            
            if (storiesInput && storiesPreview) {
                storiesInput.addEventListener('change', function(e) {
                    const file = e.target.files[0];
                    if (!file || !file.type.match('image.*')) {
                        alert('Por favor, selecione um arquivo de imagem.');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const url = e.target.result;
                        
                        // Criar elemento img se n√£o existir
                        let img = storiesPreview.querySelector('img');
                        if (!img) {
                            img = document.createElement('img');
                            img.style.width = '100%';
                            img.style.height = '100%';
                            img.style.objectFit = 'cover';
                            storiesPreview.appendChild(img);
                        }
                        
                        img.src = url;
                        storiesPreview.style.display = 'block';
                        
                        // Esconde overlay e mostra bot√£o de trocar
                        if (storiesOverlay) {
                            storiesOverlay.style.opacity = '0';
                            setTimeout(() => {
                                storiesOverlay.style.display = 'none';
                            }, 300);
                        }
                        if (btnChangeStories) {
                            btnChangeStories.style.display = 'block';
                        }
                    };
                    reader.readAsDataURL(file);
                });
            }
            
            if (btnChangeStories && storiesInput) {
                btnChangeStories.addEventListener('click', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    storiesInput.click();
                });
            }
            
            console.log('‚úÖ Uploads de banner e galeria inicializados!');
        });
        */
        
        // ============================================
        // CONTROLE DE CACH√äS EDIT√ÅVEIS
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const cacheCombinar = document.getElementById('cache-combinar');
            const cacheEditar = document.getElementById('cache-editar');
            const cacheFields = document.getElementById('cache-fields');
            const validationMessage = document.getElementById('cache-validation-message');
            
            // Fun√ß√£o para obter todos os campos de cach√™
            function getCacheInputs() {
                const minutosInputs = document.querySelectorAll('.cache-minutos-input');
                const precoInputs = document.querySelectorAll('.cache-preco-input');
                const allInputs = [...minutosInputs, ...precoInputs];
                console.log('üîç Campos encontrados:', allInputs.length, 'minutos:', minutosInputs.length, 'pre√ßos:', precoInputs.length);
                return allInputs;
            }
            
            // Fun√ß√£o para habilitar/desabilitar campos
            function toggleCacheFields() {
                if (!cacheEditar || !cacheCombinar) {
                    console.log('‚ö†Ô∏è Elementos de cache n√£o encontrados');
                    return;
                }
                
                const cacheInputs = getCacheInputs();
                
                if (cacheEditar.checked) {
                    if (cacheFields) cacheFields.style.display = 'block';
                    
                    cacheInputs.forEach((input, index) => {
                        // Remover o atributo disabled completamente
                        input.removeAttribute('disabled');
                        input.disabled = false;
                        input.style.backgroundColor = '#fff';
                        input.style.cursor = 'text';
                        input.readOnly = false;
                        input.style.opacity = '1';
                        
                        console.log(`‚úÖ Campo ${index + 1} habilitado:`, input.id, 'disabled:', input.disabled);
                    });
                    
                    console.log('‚úÖ Todos os campos de cach√™ habilitados');
                } else {
                    if (cacheFields) cacheFields.style.display = 'none';
                    
                    cacheInputs.forEach(input => {
                        input.disabled = true;
                        input.setAttribute('disabled', 'disabled');
                        input.style.backgroundColor = '#f5f5f5';
                        input.style.cursor = 'not-allowed';
                        input.readOnly = true;
                        // Limpar apenas os pre√ßos, manter os minutos
                        if (input.classList.contains('cache-preco-input')) {
                            input.value = '';
                        }
                    });
                    
                    if (validationMessage) {
                        validationMessage.style.display = 'none';
                    }
                }
            }
            
            // Event listeners para os radio buttons
            if (cacheCombinar && cacheEditar) {
                cacheCombinar.addEventListener('change', function() {
                    console.log('üîÑ A combinar selecionado');
                    toggleCacheFields();
                });
                cacheEditar.addEventListener('change', function() {
                    console.log('üîÑ Editar valores selecionado');
                    toggleCacheFields();
                });
                
                // Inicializar estado ap√≥s um pequeno delay para garantir que o DOM est√° pronto
                setTimeout(() => {
                    toggleCacheFields();
                }, 100);
            }
            
            // Valida√ß√£o: verificar se pelo menos um campo est√° preenchido
            function validateCacheFields() {
                if (!cacheEditar || !cacheEditar.checked) {
                    return true; // Se "A combinar" est√° selecionado, n√£o precisa validar
                }
                
                let hasFilledField = false;
                for (let i = 1; i <= 8; i++) {
                    const minutosInput = document.getElementById(`cache_minutos_${i}`);
                    const precoInput = document.getElementById(`cache_preco_${i}`);
                    
                    if (minutosInput && precoInput && minutosInput.value && precoInput.value) {
                        hasFilledField = true;
                        break;
                    }
                }
                
                if (!hasFilledField && validationMessage) {
                    validationMessage.style.display = 'block';
                    return false;
                } else if (validationMessage) {
                    validationMessage.style.display = 'none';
                }
                
                return true;
            }
            
            // Adicionar valida√ß√£o aos campos
            function setupCacheInputListeners() {
                const cacheInputs = getCacheInputs();
                cacheInputs.forEach(input => {
                    // Se for campo de pre√ßo, adicionar valida√ß√£o especial para decimais
                    if (input.classList.contains('cache-preco-input')) {
                        // Permitir ponto e v√≠rgula no keypress
                        input.addEventListener('keypress', function(e) {
                            const char = String.fromCharCode(e.which);
                            const currentValue = e.target.value;
                            
                            // Permitir n√∫meros, ponto e v√≠rgula
                            if (!/[0-9.,]/.test(char) && !e.ctrlKey && !e.metaKey && e.key !== 'Backspace' && e.key !== 'Delete' && e.key !== 'ArrowLeft' && e.key !== 'ArrowRight' && e.key !== 'Tab') {
                                e.preventDefault();
                                return false;
                            }
                            
                            // Se j√° tem ponto ou v√≠rgula, n√£o permitir outro
                            if ((char === '.' || char === ',') && (currentValue.includes('.') || currentValue.includes(','))) {
                                e.preventDefault();
                                return false;
                            }
                        });
                        
                        input.addEventListener('input', function(e) {
                            let value = e.target.value;
                            
                            // Permitir apenas n√∫meros, ponto e v√≠rgula
                            value = value.replace(/[^0-9.,]/g, '');
                            
                            // Converter v√≠rgula para ponto
                            value = value.replace(',', '.');
                            
                            // Garantir apenas um ponto decimal
                            const parts = value.split('.');
                            if (parts.length > 2) {
                                value = parts[0] + '.' + parts.slice(1).join('');
                            }
                            
                            // Limitar a 2 casas decimais
                            if (parts.length === 2 && parts[1].length > 2) {
                                value = parts[0] + '.' + parts[1].substring(0, 2);
                            }
                            
                            // Validar range de 1 a 1000 apenas se tiver valor completo
                            if (value && value !== '.') {
                                const numValue = parseFloat(value);
                                if (!isNaN(numValue)) {
                                    if (numValue < 1 && value.length > 0) {
                                        // N√£o corrigir enquanto est√° digitando, apenas avisar
                                        if (e.target.value !== value) {
                                            e.target.value = value;
                                        }
                                    } else if (numValue > 1000) {
                                        value = '1000';
                                    }
                                }
                            }
                            
                            e.target.value = value;
                            
                            if (validationMessage) {
                                validationMessage.style.display = 'none';
                            }
                        });
                        
                        input.addEventListener('blur', function(e) {
                            const value = parseFloat(e.target.value);
                            if (e.target.value && e.target.value.trim() !== '' && !isNaN(value)) {
                                if (value < 1) {
                                    e.target.value = '1.00';
                                    e.target.setCustomValidity('O valor m√≠nimo √© R$ 1,00');
                                } else if (value > 1000) {
                                    e.target.value = '1000.00';
                                    e.target.setCustomValidity('O valor m√°ximo √© R$ 1000,00');
                                } else {
                                    // Formatar com 2 casas decimais
                                    e.target.value = value.toFixed(2);
                                    e.target.setCustomValidity('');
                                }
                            } else if (e.target.value && e.target.value.trim() !== '') {
                                e.target.setCustomValidity('Digite um valor v√°lido entre R$ 1,00 e R$ 1000,00');
                            } else {
                                e.target.setCustomValidity('');
                            }
                            validateCacheFields();
                        });
                    } else if (input.classList.contains('cache-minutos-input')) {
                        // Valida√ß√£o para campos de minutos
                        input.addEventListener('input', function(e) {
                            let value = e.target.value;
                            
                            // Permitir apenas n√∫meros
                            value = value.replace(/[^0-9]/g, '');
                            
                            // Validar range de 1 a 60
                            const numValue = parseInt(value);
                            if (value && !isNaN(numValue)) {
                                if (numValue < 1) {
                                    value = '1';
                                } else if (numValue > 60) {
                                    value = '60';
                                } else {
                                    // Verificar se o valor j√° existe em outro campo
                                    const currentId = e.target.id;
                                    const allMinutosInputs = document.querySelectorAll('.cache-minutos-input');
                                    let isDuplicate = false;
                                    
                                    allMinutosInputs.forEach(otherInput => {
                                        if (otherInput.id !== currentId && otherInput.value === value && value !== '') {
                                            isDuplicate = true;
                                        }
                                    });
                                    
                                    if (isDuplicate) {
                                        e.target.setCustomValidity('Este valor de minutos j√° foi usado em outro campo');
                                        e.target.style.borderColor = 'var(--primary-color)';
                                        e.target.style.backgroundColor = '#fff5f5';
                                    } else {
                                        e.target.setCustomValidity('');
                                        e.target.style.borderColor = '';
                                        e.target.style.backgroundColor = '';
                                    }
                                }
                            }
                            
                            e.target.value = value;
                            
                            if (validationMessage) {
                                validationMessage.style.display = 'none';
                            }
                        });
                        
                        input.addEventListener('blur', function(e) {
                            const value = parseInt(e.target.value);
                            if (e.target.value && !isNaN(value)) {
                                if (value < 1) {
                                    e.target.value = '1';
                                    e.target.setCustomValidity('O valor m√≠nimo √© 1 minuto');
                                } else if (value > 60) {
                                    e.target.value = '60';
                                    e.target.setCustomValidity('O valor m√°ximo √© 60 minutos');
                                } else {
                                    // Verificar duplicatas novamente
                                    const currentId = e.target.id;
                                    const allMinutosInputs = document.querySelectorAll('.cache-minutos-input');
                                    let isDuplicate = false;
                                    
                                    allMinutosInputs.forEach(otherInput => {
                                        if (otherInput.id !== currentId && otherInput.value === e.target.value && e.target.value !== '') {
                                            isDuplicate = true;
                                        }
                                    });
                                    
                                    if (isDuplicate) {
                                        e.target.setCustomValidity('Este valor de minutos j√° foi usado em outro campo');
                                        e.target.style.borderColor = 'var(--primary-color)';
                                        e.target.style.backgroundColor = '#fff5f5';
                                        alert('Este valor de minutos j√° foi usado em outro campo. Por favor, escolha um valor diferente.');
                                    } else {
                                        e.target.setCustomValidity('');
                                        e.target.style.borderColor = '';
                                        e.target.style.backgroundColor = '';
                                    }
                                }
                            }
                            validateCacheFields();
                        });
                    } else {
                        // Para outros campos, manter comportamento padr√£o
                        input.addEventListener('blur', validateCacheFields);
                        input.addEventListener('input', function() {
                            if (validationMessage) {
                                validationMessage.style.display = 'none';
                            }
                        });
                    }
                });
            }
            
            // Configurar listeners ap√≥s um pequeno delay
            setTimeout(() => {
                setupCacheInputListeners();
            }, 200);
            
            // COMENTADO: Esta √© uma p√°gina de visualiza√ß√£o, n√£o h√° valida√ß√£o de formul√°rio
        });
        
        // ============================================
        // VALIDA√á√ÉO DE SEGURAN√áA DA DESCRI√á√ÉO
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const descriptionTextarea = document.getElementById('description-text');
            const charCount = document.getElementById('description-char-count');
            const charCounter = charCount ? charCount.parentElement : null;
            const securityWarning = document.getElementById('description-security-warning');
            
            if (!descriptionTextarea) return;
            
            // Padr√µes perigosos para bloquear
            const dangerousPatterns = {
                // SQL Injection
                sql: [
                    /(\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|EXECUTE|UNION|SCRIPT)\b)/gi,
                    /('|"|;|--|\/\*|\*\/)/g,
                    /(\bOR\s+\d+\s*=\s*\d+)/gi,
                    /(\bAND\s+\d+\s*=\s*\d+)/gi
                ],
                // JavaScript/HTML Injection
                script: [
                    /<script[\s\S]*?>[\s\S]*?<\/script>/gi,
                    /<iframe[\s\S]*?>[\s\S]*?<\/iframe>/gi,
                    /javascript:/gi,
                    /on\w+\s*=/gi,
                    /<img[\s\S]*?>/gi,
                    /<audio[\s\S]*?>/gi,
                    /<video[\s\S]*?>/gi,
                    /<embed[\s\S]*?>/gi,
                    /<object[\s\S]*?>/gi,
                    /<link[\s\S]*?>/gi,
                    /<style[\s\S]*?>/gi
                ],
                // Comandos do sistema
                commands: [
                    /(\b(cmd|command|exec|system|eval|shell)\b)/gi,
                    /(\$\{|\`)/g
                ],
                // URLs suspeitas
                urls: [
                    /https?:\/\/[^\s]+/gi,
                    /www\.[^\s]+/gi
                ]
            };
            
            // Fun√ß√£o para sanitizar texto
            function sanitizeText(text) {
                let sanitized = text;
                
                // Remover tags HTML
                sanitized = sanitized.replace(/<[^>]*>/g, '');
                
                // Remover padr√µes perigosos
                Object.values(dangerousPatterns).forEach(patternGroup => {
                    patternGroup.forEach(pattern => {
                        sanitized = sanitized.replace(pattern, '');
                    });
                });
                
                return sanitized;
            }
            
            // Fun√ß√£o para verificar n√∫meros consecutivos (mais de 9)
            function hasLongNumberSequence(text) {
                // Encontrar sequ√™ncias de n√∫meros com mais de 9 d√≠gitos
                const numberPattern = /\d{10,}/g;
                return numberPattern.test(text);
            }
            
            // Fun√ß√£o para verificar padr√µes perigosos
            function checkDangerousPatterns(text) {
                const issues = [];
                
                // Verificar SQL
                dangerousPatterns.sql.forEach(pattern => {
                    if (pattern.test(text)) {
                        issues.push('C√≥digos SQL n√£o s√£o permitidos');
                    }
                });
                
                // Verificar scripts
                dangerousPatterns.script.forEach(pattern => {
                    if (pattern.test(text)) {
                        issues.push('C√≥digos HTML/JavaScript n√£o s√£o permitidos');
                    }
                });
                
                // Verificar comandos
                dangerousPatterns.commands.forEach(pattern => {
                    if (pattern.test(text)) {
                        issues.push('Comandos do sistema n√£o s√£o permitidos');
                    }
                });
                
                // Verificar URLs
                dangerousPatterns.urls.forEach(pattern => {
                    if (pattern.test(text)) {
                        issues.push('Links n√£o s√£o permitidos');
                    }
                });
                
                // Verificar sequ√™ncias longas de n√∫meros
                if (hasLongNumberSequence(text)) {
                    issues.push('Sequ√™ncias com mais de 9 n√∫meros n√£o s√£o permitidas');
                }
                
                return issues;
            }
            
            // Atualizar contador de caracteres
            function updateCharCount() {
                const length = descriptionTextarea.value.length;
                const minLength = 100;
                const maxLength = 1000;
                
                if (charCount) {
                    charCount.textContent = length;
                }
                
                if (charCounter) {
                    charCounter.classList.remove('warning', 'danger', 'min-warning');
                    
                    // Valida√ß√£o de m√≠nimo
                    if (length > 0 && length < minLength) {
                        charCounter.classList.add('min-warning');
                        charCounter.style.color = '#ffc107';
                    } 
                    // Valida√ß√£o de m√°ximo
                    else if (length > 900) {
                        charCounter.classList.add('danger');
                        charCounter.style.color = 'var(--primary-color)';
                    } else if (length > 800) {
                        charCounter.classList.add('warning');
                        charCounter.style.color = '#ffc107';
                    } else if (length >= minLength) {
                        charCounter.style.color = '#28a745';
                    } else {
                        charCounter.style.color = '#6c757d';
                    }
                }
                
                // Validar campo
                if (length > 0 && length < minLength) {
                    descriptionTextarea.setCustomValidity(`A descri√ß√£o deve ter pelo menos ${minLength} caracteres. Atualmente: ${length} caracteres.`);
                    descriptionTextarea.style.borderColor = '#ffc107';
                } else if (length >= minLength && length <= maxLength) {
                    descriptionTextarea.setCustomValidity('');
                    descriptionTextarea.style.borderColor = '';
                } else if (length > maxLength) {
                    descriptionTextarea.setCustomValidity(`A descri√ß√£o n√£o pode ter mais de ${maxLength} caracteres.`);
                    descriptionTextarea.style.borderColor = 'var(--primary-color)';
                }
            }
            
            // Mostrar aviso de seguran√ßa
            function showSecurityWarning(message, isError = false) {
                if (!securityWarning) return;
                
                securityWarning.innerHTML = `<i class="fas fa-${isError ? 'exclamation-triangle' : 'info-circle'}"></i> ${message}`;
                securityWarning.className = `description-security-warning ${isError ? 'error' : ''}`;
                securityWarning.style.display = 'flex';
            }
            
            // Esconder aviso de seguran√ßa
            function hideSecurityWarning() {
                if (securityWarning) {
                    securityWarning.style.display = 'none';
                }
            }
            
            // Event listener para input
            descriptionTextarea.addEventListener('input', function(e) {
                let value = e.target.value;
                const originalValue = value;
                
                // Verificar padr√µes perigosos
                const issues = checkDangerousPatterns(value);
                
                if (issues.length > 0) {
                    // Sanitizar o texto
                    value = sanitizeText(value);
                    
                    // Atualizar o valor do textarea
                    const cursorPosition = e.target.selectionStart;
                    e.target.value = value;
                    
                    // Restaurar posi√ß√£o do cursor (ajustada)
                    const lengthDiff = originalValue.length - value.length;
                    const newPosition = Math.max(0, cursorPosition - lengthDiff);
                    e.target.setSelectionRange(newPosition, newPosition);
                    
                    // Mostrar aviso
                    showSecurityWarning(issues[0], true);
                    
                    // Esconder aviso ap√≥s 5 segundos
                    setTimeout(() => {
                        hideSecurityWarning();
                    }, 5000);
                } else {
                    hideSecurityWarning();
                }
                
                // Atualizar contador
                updateCharCount();
            });
            
            // Event listener para paste (colar)
            descriptionTextarea.addEventListener('paste', function(e) {
                e.preventDefault();
                
                // Obter texto colado
                const pastedText = (e.clipboardData || window.clipboardData).getData('text');
                
                // Sanitizar texto colado
                let sanitized = sanitizeText(pastedText);
                
                // Verificar padr√µes perigosos
                const issues = checkDangerousPatterns(sanitized);
                
                if (issues.length > 0) {
                    showSecurityWarning('Conte√∫do colado cont√©m elementos n√£o permitidos e foi removido.', true);
                    setTimeout(() => {
                        hideSecurityWarning();
                    }, 5000);
                    return;
                }
                
                // Inserir texto sanitizado
                const start = e.target.selectionStart;
                const end = e.target.selectionEnd;
                const currentValue = e.target.value;
                const newValue = currentValue.substring(0, start) + sanitized + currentValue.substring(end);
                
                // Verificar limite de caracteres
                if (newValue.length > 1000) {
                    const truncated = newValue.substring(0, 1000);
                    e.target.value = truncated;
                    showSecurityWarning('Limite de 1000 caracteres atingido.', false);
                    setTimeout(() => {
                        hideSecurityWarning();
                    }, 3000);
                } else {
                    e.target.value = newValue;
                }
                
                // Atualizar contador
                updateCharCount();
                
                // Restaurar posi√ß√£o do cursor
                const newPosition = start + sanitized.length;
                e.target.setSelectionRange(newPosition, newPosition);
            });
            
            // COMENTADO: Esta √© uma p√°gina de visualiza√ß√£o, n√£o h√° valida√ß√£o de formul√°rio
            
            // Inicializar contador
            updateCharCount();
        });
        
        // ============================================
        // FORMATA√á√ÉO E VALIDA√á√ÉO DE TELEFONE/WHATSAPP
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const telefoneInput = document.getElementById('telefone_celular');
            const whatsappInput = document.getElementById('whatsapp');
            
            // Fun√ß√£o para formatar telefone: (XX) 9XXXX-XXXX ou (XX) XXXX-XXXX
            function formatPhone(value) {
                const numbers = value.replace(/\D/g, '');
                
                if (numbers.length <= 2) {
                    return numbers ? `(${numbers}` : '';
                } else if (numbers.length <= 6) {
                    return `(${numbers.slice(0, 2)}) ${numbers.slice(2)}`;
                } else if (numbers.length <= 10) {
                    return `(${numbers.slice(0, 2)}) ${numbers.slice(2, 6)}-${numbers.slice(6)}`;
                } else {
                    return `(${numbers.slice(0, 2)}) ${numbers.slice(2, 7)}-${numbers.slice(7, 11)}`;
                }
            }
            
            // Fun√ß√£o para atualizar bot√µes da barra fixa
            function updateBottomBar() {
                const phoneBtn = document.getElementById('phoneCallBtn');
                const whatsappBtn = document.getElementById('whatsAppBtn');
                const phoneDisplay = document.querySelector('.phone-celular');
                
                const telefone = telefoneInput ? telefoneInput.value.replace(/\D/g, '') : '';
                const whatsapp = whatsappInput ? whatsappInput.value.replace(/\D/g, '') : '';
                
                if (phoneBtn && telefone) {
                    phoneBtn.href = `tel:${telefone}`;
                }
                
                if (phoneDisplay && telefoneInput) {
                    phoneDisplay.textContent = telefoneInput.value || '(11) 99999-9999';
                }
                
                if (whatsappBtn && whatsapp) {
                    const whatsappText = encodeURIComponent('Ol√°, vi seu an√∫ncio na Mans√£o do Job');
                    const whatsappWebUrl = `https://wa.me/55${whatsapp}?text=${whatsappText}`;
                    const whatsappMobileUrl = `whatsapp://send?phone=55${whatsapp}&text=${whatsappText}`;
                    
                    whatsappBtn.href = whatsappWebUrl;
                    whatsappBtn.setAttribute('data-mobile-href', whatsappMobileUrl);
                }
            }
            
            // Formata√ß√£o autom√°tica do telefone
            if (telefoneInput) {
                telefoneInput.addEventListener('input', function(e) {
                    const formatted = formatPhone(e.target.value);
                    e.target.value = formatted;
                    updateBottomBar();
                });
                
                telefoneInput.addEventListener('blur', function() {
                    const numbers = this.value.replace(/\D/g, '');
                    if (numbers.length < 10) {
                        this.setCustomValidity('Telefone deve ter pelo menos 10 d√≠gitos');
                    } else {
                        this.setCustomValidity('');
                    }
                });
            }
            
            // Formata√ß√£o autom√°tica do WhatsApp
            if (whatsappInput) {
                whatsappInput.addEventListener('input', function(e) {
                    const formatted = formatPhone(e.target.value);
                    e.target.value = formatted;
                    updateBottomBar();
                });
                
                whatsappInput.addEventListener('blur', function() {
                    const numbers = this.value.replace(/\D/g, '');
                    if (numbers.length < 10) {
                        this.setCustomValidity('WhatsApp deve ter pelo menos 10 d√≠gitos');
                    } else {
                        this.setCustomValidity('');
                    }
                });
                
                // Op√ß√£o: copiar telefone para WhatsApp se WhatsApp estiver vazio
                if (telefoneInput) {
                    telefoneInput.addEventListener('blur', function() {
                        if (!whatsappInput.value && this.value) {
                            whatsappInput.value = this.value;
                            updateBottomBar();
                        }
                    });
                }
            }
            
            // Atualizar barra fixa ao carregar
            updateBottomBar();
        });
        
        // ============================================
        // CONTADOR DE CARACTERES DO NOME
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const profileNameInput = document.getElementById('profile-name');
            const profileNameCharCount = document.getElementById('profile-name-char-count');
            const profileNameCharCounter = document.querySelector('.profile-name-char-counter');
            
            if (profileNameInput) {
                // Atualizar contador inicial
                function updateNameCharCount() {
                    const length = profileNameInput.value.length;
                    if (profileNameCharCount) {
                        profileNameCharCount.textContent = length;
                    }
                    
                    // Atualizar estilo do contador
                    if (profileNameCharCounter) {
                        profileNameCharCounter.classList.remove('warning', 'danger');
                        if (length > 25) {
                            profileNameCharCounter.classList.add('danger');
                        } else if (length > 20) {
                            profileNameCharCounter.classList.add('warning');
                        }
                    }
                }
                
                // Event listener para input
                profileNameInput.addEventListener('input', updateNameCharCount);
                
                // Inicializar contador
                updateNameCharCount();
            }
        });
        
        // ============================================
        // VALIDA√á√ÉO DE INFORMA√á√ïES PESSOAIS
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            // Hor√°rio 24h - mostrar/esconder campos customizados
            const horario24hSim = document.getElementById('horario-24h-sim');
            const horario24hNao = document.getElementById('horario-24h-nao');
            const horarioCustomContainer = document.getElementById('horario-custom-container');
            const horarioInicio = document.getElementById('horario-inicio');
            const horarioFim = document.getElementById('horario-fim');
            
            function toggleHorarioCustom() {
                if (horario24hNao && horario24hNao.checked && horarioCustomContainer) {
                    horarioCustomContainer.style.display = 'block';
                    if (horarioInicio) horarioInicio.required = true;
                    if (horarioFim) horarioFim.required = true;
                } else {
                    if (horarioCustomContainer) horarioCustomContainer.style.display = 'none';
                    if (horarioInicio) {
                        horarioInicio.required = false;
                        horarioInicio.value = '';
                    }
                    if (horarioFim) {
                        horarioFim.required = false;
                        horarioFim.value = '';
                    }
                }
            }
            
            if (horario24hSim) {
                horario24hSim.addEventListener('change', toggleHorarioCustom);
            }
            if (horario24hNao) {
                horario24hNao.addEventListener('change', toggleHorarioCustom);
            }
            
            const pagamentoCheckboxes = document.querySelectorAll('.pagamento-checkbox');
            const pagamentoValidationMessage = document.getElementById('pagamento-validation-message');
            // COMENTADO: Esta √© uma p√°gina de visualiza√ß√£o, n√£o h√° formul√°rio
            // const cadastroForm = document.getElementById('cadastroForm');
            
            // Fun√ß√£o para validar formas de pagamento
            function validatePagamento() {
                const checked = Array.from(pagamentoCheckboxes).some(cb => cb.checked);
                
                if (!checked && pagamentoValidationMessage) {
                    pagamentoValidationMessage.style.display = 'block';
                    return false;
                } else if (pagamentoValidationMessage) {
                    pagamentoValidationMessage.style.display = 'none';
                }
                
                return true;
            }
            
            // Event listeners para checkboxes de pagamento
            pagamentoCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    validatePagamento();
                });
            });
            
            // COMENTADO: Esta √© uma p√°gina de visualiza√ß√£o, n√£o h√° valida√ß√£o de formul√°rio
        });
        
        // ============================================
        // ESTILIZA√á√ÉO DE CHECKBOXES DE SERVI√áOS
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const serviceCheckboxes = document.querySelectorAll('.service-checkbox-label input[type="checkbox"]');
            
            serviceCheckboxes.forEach(checkbox => {
                // Aplicar estilo inicial se j√° estiver marcado
                updateCheckboxStyle(checkbox);
                
                // Adicionar listener para mudan√ßas
                checkbox.addEventListener('change', function() {
                    updateCheckboxStyle(this);
                });
            });
            
            function updateCheckboxStyle(checkbox) {
                const label = checkbox.closest('.service-checkbox-label');
                if (!label) return;
                
                if (checkbox.checked) {
                    label.classList.add('checked');
                } else {
                    label.classList.remove('checked');
                }
            }
        });
        
        // ============================================
        // MENU FULLSCREEN MOBILE/TABLET
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const toggleMenu = document.getElementById('toggle-menu');
            const menu = document.getElementById('menu');
            
            // Menu foi removido, ent√£o n√£o inicializamos o toggle
            if (false && toggleMenu && menu) {
                // Fun√ß√£o para toggle do menu
                function toggleMenuFunction(e) {
                    console.log('üçî Menu toggle clicado!', e);
                    
                    if (e) {
                        e.preventDefault();
                        e.stopPropagation();
                        e.stopImmediatePropagation();
                    }
                    
                    // Prevenir qualquer navega√ß√£o
                    if (e && e.defaultPrevented === false) {
                        e.preventDefault();
                    }
                    
                    toggleMenu.classList.toggle('active');
                    menu.classList.toggle('open');
                    
                    // Bloquear scroll do body quando menu estiver aberto
                    if (menu.classList.contains('open')) {
                        document.body.style.overflow = 'hidden';
                    } else {
                        document.body.style.overflow = '';
                    }
                    
                    return false;
                }
                
                // Toggle do menu principal - m√∫ltiplos listeners para garantir
                toggleMenu.addEventListener('click', toggleMenuFunction, true);
                toggleMenu.addEventListener('click', toggleMenuFunction, false);
                
                // Prevenir qualquer a√ß√£o padr√£o no nav tamb√©m
                const menuNav = document.querySelector('.menu-topo-mobile');
                if (menuNav) {
                    menuNav.addEventListener('click', function(e) {
                        if (e.target.closest('.toggle-menu') || e.target === toggleMenu || toggleMenu.contains(e.target)) {
                            e.preventDefault();
                            e.stopPropagation();
                            e.stopImmediatePropagation();
                            toggleMenuFunction(e);
                            return false;
                        }
                    }, true);
                }
                
                // Prevenir submit de formul√°rio se o bot√£o for clicado
                toggleMenu.setAttribute('type', 'button');
                toggleMenu.onclick = function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    toggleMenuFunction(e);
                    return false;
                };
                
                // Controlar submenus (POR REGI√ÉO)
                const parentLinks = menu.querySelectorAll('.parent-link');
                parentLinks.forEach(parentLink => {
                    parentLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        const parentItem = this.parentElement;
                        parentItem.classList.toggle('active');
                    });
                });
                
                // Fechar menu ao clicar em um link (exceto submenu)
                const menuLinks = menu.querySelectorAll('.main-nav > ul > li > a:not(.parent-link)');
                menuLinks.forEach(link => {
                    link.addEventListener('click', function() {
                        // Fechar menu ap√≥s um pequeno delay para permitir navega√ß√£o
                        setTimeout(() => {
                            toggleMenu.classList.remove('active');
                            menu.classList.remove('open');
                            document.body.style.overflow = '';
                        }, 100);
                    });
                });
                
                // Fechar menu ao clicar fora (no overlay)
                menu.addEventListener('click', function(e) {
                    if (e.target === menu) {
                        toggleMenu.classList.remove('active');
                        menu.classList.remove('open');
                        document.body.style.overflow = '';
                    }
                });
                
                console.log('‚úÖ Menu fullscreen mobile inicializado!');
            }
        });
        
        // ============================================
        // UPLOAD DE DOCUMENTOS DE VERIFICA√á√ÉO
        // ============================================
        // COMENTADO: Esta √© uma p√°gina de visualiza√ß√£o, n√£o h√° inputs de upload
        /*
        function setupVerificationUploads() {
            // Documento Frente
            setupVerificationFileUpload('documento-frente', 'documento-frente-preview', 'documento-frente-overlay', 'btn-change-documento-frente', 'image');
            
            // Documento Verso
            setupVerificationFileUpload('documento-verso', 'documento-verso-preview', 'documento-verso-overlay', 'btn-change-documento-verso', 'image');
            
            // Selfie com Documento
            setupVerificationFileUpload('selfie-documento', 'selfie-documento-preview', 'selfie-documento-overlay', 'btn-change-selfie-documento', 'image');
            
            // V√≠deo de Verifica√ß√£o
            setupVerificationFileUpload('verification-video', 'verification-video-preview', 'verification-video-overlay', 'btn-change-verification-video', 'video');
        }
        
        function setupVerificationFileUpload(inputId, previewId, overlayId, btnChangeId, fileType) {
            const input = document.getElementById(inputId);
            const preview = document.getElementById(previewId);
            const overlay = document.getElementById(overlayId);
            const btnChange = document.getElementById(btnChangeId);
            const uploadBox = input?.closest('.verification-upload-box');
            
            if (!input || !preview) return;
            
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                // Validar tamanho (m√°x 10MB para imagens, 100MB para v√≠deos)
                const maxSize = fileType === 'video' ? 100 * 1024 * 1024 : 10 * 1024 * 1024;
                if (file.size > maxSize) {
                    alert(`Arquivo muito grande. Tamanho m√°ximo: ${fileType === 'video' ? '100MB' : '10MB'}`);
                    input.value = '';
                    return;
                }
                
                if (fileType === 'image') {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        preview.innerHTML = `<img src="${e.target.result}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
                        preview.style.display = 'block';
                        if (overlay) overlay.style.display = 'none';
                        if (btnChange) btnChange.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else if (fileType === 'video') {
                    const url = URL.createObjectURL(file);
                    preview.innerHTML = `
                        <video controls style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">
                            <source src="${url}" type="${file.type}">
                        </video>
                    `;
                    preview.style.display = 'block';
                    if (overlay) overlay.style.display = 'none';
                    if (btnChange) btnChange.style.display = 'block';
                }
            });
            
            // Bot√£o de trocar
            if (btnChange) {
                btnChange.addEventListener('click', function(e) {
                    e.stopPropagation();
                    input.click();
                });
            }
        }
        */
        
        // Fun√ß√£o para confirmar verifica√ß√£o
        // COMENTADO: Esta √© uma p√°gina de visualiza√ß√£o, n√£o h√° elementos de verifica√ß√£o
        /*
        function confirmarVerificacao() {
            const statusDiv = document.getElementById('verificacao-status');
            const verificacaoRadio = document.querySelector('input[name="verificacao"]:checked');
            const documentoFrente = document.getElementById('documento-frente');
            const documentoVerso = document.getElementById('documento-verso');
            const selfieDocumento = document.getElementById('selfie-documento');
            
            if (!verificacaoRadio) {
                if (statusDiv) {
                    statusDiv.innerHTML = '<span style="color: var(--primary-color);">‚ö†Ô∏è Por favor, selecione uma op√ß√£o de verifica√ß√£o.</span>';
                }
                return;
            }
            
            const verificacaoValue = verificacaoRadio.value;
            
            if (verificacaoValue === 'sim') {
                // Verificar se os documentos obrigat√≥rios foram enviados
                let hasErrors = false;
                const missingDocs = [];
                
                if (!documentoFrente || !documentoFrente.files || !documentoFrente.files[0]) {
                    missingDocs.push('Foto Documento Frente');
                    hasErrors = true;
                }
                
                if (!documentoVerso || !documentoVerso.files || !documentoVerso.files[0]) {
                    missingDocs.push('Foto Documento Verso');
                    hasErrors = true;
                }
                
                if (!selfieDocumento || !selfieDocumento.files || !selfieDocumento.files[0]) {
                    missingDocs.push('Foto Documento com Selfie');
                    hasErrors = true;
                }
                
                if (hasErrors) {
                    if (statusDiv) {
                        statusDiv.innerHTML = `<span style="color: var(--primary-color);">‚ö†Ô∏è Por favor, envie todos os documentos obrigat√≥rios: ${missingDocs.join(', ')}</span>`;
                    }
                    return;
                }
                
                // Todos os documentos foram enviados
                if (statusDiv) {
                    statusDiv.innerHTML = '<span style="color: #28a745;">‚úÖ Documentos enviados com sucesso! A verifica√ß√£o ser√° processada em breve.</span>';
                }
                
                // Salvar status de verifica√ß√£o
                localStorage.setItem('verificacao_status', 'pendente');
                localStorage.setItem('verificacao_data', new Date().toISOString());
                
            } else if (verificacaoValue === 'depois') {
                if (statusDiv) {
                    statusDiv.innerHTML = '<span style="color: #ffc107;">‚ÑπÔ∏è Voc√™ pode fazer a verifica√ß√£o mais tarde atrav√©s do seu painel.</span>';
                }
                localStorage.setItem('verificacao_status', 'pendente');
            }
        }
        */
        
        // ============================================
        // FUN√á√ïES DE UPLOAD DE ARQUIVOS
        // ============================================
        // COMENTADO: Esta √© uma p√°gina de visualiza√ß√£o, n√£o h√° funcionalidade de upload
        // Todas as fun√ß√µes de upload foram removidas
        
        // ============================================
        // NAVEGA√á√ÉO ENTRE AN√öNCIOS
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            const prevAd = document.getElementById('prevAd');
            const nextAd = document.getElementById('nextAd');
            
            if (prevAd) {
                prevAd.addEventListener('click', async function() {
                    const fichaId = this.getAttribute('data-ficha-id');
                    // Verificar se est√° desabilitado (opacidade reduzida)
                    if (this.style.opacity === '0.5' || !fichaId || fichaId === 'null' || fichaId === '') {
                        console.log('‚ö†Ô∏è Navega√ß√£o anterior desabilitada');
                        return;
                    }
                    
                    try {
                        // Buscar nome do an√∫ncio anterior (prioridade: anuncios)
                        const db = firebase.firestore();
                        let prevDoc = await db.collection('anuncios').doc(fichaId).get();
                        if (!prevDoc.exists) {
                            prevDoc = await db.collection('advertisements').doc(fichaId).get();
                        }
                        const prevName = prevDoc.exists ? (prevDoc.data().nome || 'Anuncio') : 'Anuncio';
                        window.location.href = `A_02__premium-Perfil-Sexo_Virtual.html?id=${fichaId}&name=${encodeURIComponent(prevName)}`;
                    } catch (error) {
                        console.error('Erro ao navegar para an√∫ncio anterior:', error);
                        window.location.href = `A_02__premium-Perfil-Sexo_Virtual.html?id=${fichaId}`;
                    }
                });
            }
            
            if (nextAd) {
                nextAd.addEventListener('click', async function() {
                    const fichaId = this.getAttribute('data-ficha-id');
                    // Verificar se est√° desabilitado (opacidade reduzida)
                    if (this.style.opacity === '0.5' || !fichaId || fichaId === 'null' || fichaId === '') {
                        console.log('‚ö†Ô∏è Navega√ß√£o pr√≥xima desabilitada');
                        return;
                    }
                    
                    try {
                        // Buscar nome do an√∫ncio pr√≥ximo (prioridade: anuncios)
                        const db = firebase.firestore();
                        let nextDoc = await db.collection('anuncios').doc(fichaId).get();
                        if (!nextDoc.exists) {
                            nextDoc = await db.collection('advertisements').doc(fichaId).get();
                        }
                        const nextName = nextDoc.exists ? (nextDoc.data().nome || 'Anuncio') : 'Anuncio';
                        window.location.href = `A_02__premium-Perfil-Sexo_Virtual.html?id=${fichaId}&name=${encodeURIComponent(nextName)}`;
                    } catch (error) {
                        console.error('Erro ao navegar para pr√≥ximo an√∫ncio:', error);
                        window.location.href = `A_02__premium-Perfil-Sexo_Virtual.html?id=${fichaId}`;
                    }
                });
            }
        });
        
        // Fun√ß√£o para fechar an√∫ncio e voltar para a p√°gina principal de sexo virtual
        function closeAdAndReturn() {
            // Ir diretamente para a p√°gina principal de sexo virtual
            // Isso ignora todo o hist√≥rico de navega√ß√£o entre an√∫ncios
            window.location.href = 'A_02__premium_sexo-virtual_copy.html';
        }
        
        // Fun√ß√£o para fechar an√∫ncio (compatibilidade)
        function renderedFichaCloseBtn(event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }
            // Usar a nova fun√ß√£o que vai direto para a p√°gina principal
            closeAdAndReturn();
        }
        
        // Se√ß√£o de upload de √°udio removida - p√°gina apenas para visualiza√ß√£o
        
        // ============================================
        // CARREGAR DADOS DO AN√öNCIO AO CARREGAR A P√ÅGINA
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Inicializando p√°gina de perfil...');
            loadProfileData();
        });
    </script>
</body>
</html>
